/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var s,n,i=[],o=!0,l=!1;try{for(a=a.call(t);!(o=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(c){l=!0,n=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(l)throw n}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var doTask,axTasksObj,armToken="",taskActionCheck=!1,AxTasks=function(){function t(){_classCallCheck(this,t),this.isAxpertFlutter=!this.isNullOrEmpty(armToken),this.taskCardHtml='\n        <div class="row">\n            <div class="col-md-12 pb-8 task-listing-card" data-process="{{processname}}" data-type="{{tasktype}}" data-taskid="{{taskid}}" data-transid="{{transid}}" data-keyvalue="{{keyvalue}}" >\n                <h2 class="task-heading">\n                    <input type="checkbox" value="" class="form-check-input task-list-checkbox">\n                    <a href="javascript:void(0)" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')" title="{{displaytitle}}">\n                        <span class="material-icons material-icons-style material-icons-1 display-icon task-listing-icons">{{displayicon}}</span>\n                        {{displaytitle}}\n                    </a>\n                    \n                </h2>\n                <div class="task-subtitle">{{displaysubtitle}}</div>\n                <div class="mobile-more-btns">\n                    <button class="btn btn-icon btn-white btn-color-gray-600 btn-active-primary shadow-sm me-2 tb-btn btn-sm" id="Mobile_more-btns">\n                        <span class="material-icons material-icons-style material-icons-2">more_horiz</span>\n\n\n                    </button><ul class="total-activity">\n                        <li>\n                            <a href="javascript:void(0)">\n                                <span class="material-icons material-icons-style material-icons-2">\n                                    <span class="material-symbols-outlined">open_in_new</span>\n                                </span><span class="TA-name">Open </span>\n                            </a>\n\n                            <a href="javascript:void(0)">\n                            <span class="material-icons material-icons-style material-icons-2">\n                                <span class="material-symbols-outlined">more_vert</span>\n                            </span>\n                        </a>\n\n                        </li>\n                        <li>\n                            <a href="javascript:void(0)">\n                                <span class="material-icons material-icons-style material-icons-2" style="color: green;">\n                                    <span class="material-symbols-outlined">\n                                        check_circle\n                                    </span>\n                                </span><span class="TA-name">Approve</span>\n                            </a>\n                            <a href="javascript:void(0)">\n                            <span class="material-icons material-icons-style material-icons-2">\n                                <span class="material-symbols-outlined">more_vert</span>\n                            </span>\n                        </a>\n                        </li>\n                        <li><a href="javascript:void(0)">   <span class="material-icons material-icons-style material-icons-2" style="color: red;">cancel</span><span class="TA-name">Reject</span></a>\n                        <a href="javascript:void(0)">\n                        <span class="material-icons material-icons-style material-icons-2">\n                            <span class="material-symbols-outlined">more_vert</span>\n                        </span>\n                    </a></li>\n\n                        <li><a href="javascript:void(0)">   <span class="material-icons material-icons-style material-icons-2" style="color: blueviolet;">reply</span><span class="TA-name">Return</span></a>\n                        <a href="javascript:void(0)">\n                        <span class="material-icons material-icons-style material-icons-2">\n                            <span class="material-symbols-outlined">more_vert</span>\n                        </span>\n                    </a></li>\n\n                        <li>\n                            <a href="javascript:void(0)">\n                                <span class="material-icons material-icons-style material-icons-2" style="color: brown;">\n                                    <span class="material-symbols-outlined">\n                                        fast_forward\n                                    </span>\n                                </span><span class="TA-name">Forward</span>\n                            </a>\n                            <a href="javascript:void(0)">\n                            <span class="material-icons material-icons-style material-icons-2">\n                                <span class="material-symbols-outlined">more_vert</span>\n                            </span>\n                        </a>\n                        </li>\n                    </ul>\n                </div>\n\n                <div class="d-flex flex-row task-date  ">\n                    <span title="Assigned From" class="task-assignedBy"> {{fromuser}}</span>\n                    <span title="Assigned On" class="start-date"> {{eventdatetime}}</span>\n                </div>\n\n                <div class="d-flex flex-row Task-content">\n                    <div class="fs-6 fw-semibold  py-2 col-md-12">\n                        {{displaycontent}}\n                    </div>\n                </div>\n\n                \n                <div class="text-end task-more-btns">\n                    <div class="d-flex align-items-center  task-more-btns">\n                        {{task_buttons_html}}\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskListHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card" data-process="{{processname}}" data-type="{{tasktype}}" data-taskid="{{taskid}}"  data-transid="{{transid}}" data-keyvalue="{{keyvalue}}">\n            <tbody>\n                <tr class="d-flex ">\n\n                    <td class="d-flex align-items-center task-name">\n                        <div class="d-flex flex-column">\n                            <span class="List_view accordion-icon arrow{{taskid}}" onclick="axTasksObj.toggleTask(\'{{taskid}}\')">\n                                <span class="material-icons material-icons-style material-icons-2">chevron_right</span>\n                            </span>\n                            <input type="checkbox" value="" class="form-check-input task-list-checkbox">\n                            <a href="javascript:void(0)" class="text-gray-800 fw-bold fs-6  mb-1 task-title" title="{{displaytitle}}"><span href="javascript:void(0)" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')"><span class="material-icons material-icons-style material-icons-1 display-icon task-listing-icons">{{displayicon}}</span>{{displaytitle}}</span></a>\n                            <span class="task-subtitle">{{displaysubtitle}}</span>\n                        </div>\n                    </td>\n\n                    <td class="d-flex align-items-center MObile-task-more-btns">\n                        <div class="mobile-more-btns">\n                            <button class="btn btn-icon btn-white btn-color-gray-600 btn-active-primary shadow-sm me-2 tb-btn btn-sm" id="Mobile_more-btns">\n                                <span class="material-icons material-icons-style material-icons-2">more_horiz</span>\n\n\n                            </button>\n                                            \n                            <ul class="total-activity">\n                                {{mobile_task_buttons_html}}\n                            </ul>\n                        </div>\n                    </td>\n\n                    <td class="task-right">\n\n                        <div class="d-flex flex-row task-process">\n                            <a href="javascript:void(0)" class="text-gray-800 fs-6 mb-1 task-assignedBy" title="Assigned By"> {{fromuser}}\n                            </a>\n                            <a href="javascript:void(0)" title="Assigned On" class="text-gray-800 fs-6 mb-1 task-date"> {{eventdatetime}}</a>\n                        </div>\n                    </td>\n\n                   \n\n\n\n                </tr>\n                <tr class="taskSubrow{{taskid}} d-none" data-displaycontent="{{displaycontent}}">\n                    <td class="task-description">\n                        <span class="more">\n                            \n                        </span>\n                    </td>\n                </tr>  \n                \n                <tr>\n                    <td class="text-end task-more-btns">\n                        <div class="d-flex align-items-center task-more-btns">{{task_buttons_html}}\n                        </div>\n                    </td>\n                </tr>\n\n            </tbody>\n        </table>',this.taskNoRecordsCardHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card">\n            <tbody>\n                <tr class="d-flex header">                                           \n                    <td class="d-flex align-items-center task-name">\n                        No active tasks available.\n                    </td>\n                </tr>\n            </tbody>\n        </table>',this.taskNotFoundHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card">\n            <tbody>\n                <tr class="d-flex header">                                           \n                    <td class="d-flex align-items-center task-name">\n                        Task details not found.\n                    </td>\n                </tr>\n            </tbody>\n        </table>',this.view="List",this.filters={},this.filters.allTasksHtml='<a href="javascript:void(0)" class="task_activity-counts task-process-selection active" >\n                                    <span class="task_activity-name  d-block ">All Tasks</span>\n                                    <div class="symbol-label" id="All-tasks-count">...</div>\n                                </a>',this.filters.processFilterCardHtml=' \n        <div class="accordion accordion-icon-toggle task-process-selected" id="" data-process="{{processname}}">\n            <div class="accordion-header py-3 d-flex collapsed sub-task-lists-wrap"\n                    data-bs-toggle="collapse" data-bs-target="#Task_list-{{processid}}"\n                    aria-expanded="false">\n                <span class="accordion-icon">\n                    <span class="material-icons material-icons-style material-icons-2">chevron_right</span>\n                </span>\n                <div class="  task_activity_content">\n                    <div class="d-flex justify-content-center  " onclick="axTasksObj.filterTasks(\'process\',\'{{processname}}\',this)">\n                        <div class="symbol symbol-40px symbol-circle me-5">\n                            <div class="symbol-label bgs{{sno}}">\n                                <span class="material-icons material-icons-style material-icons-2">account_tree</span>\n                            </div>\n                        </div>\n                        <div class="task-process-selection">\n                            <span class="task_activity-name  d-block ">{{processname}}</span>\n                            <a href="javascript:void(0)" class="task_activity-counts">\n                                <div class="symbol-label">{{processcount}}</div>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div id="Task_list-{{processid}}" class="fs-6 ps-10 accordion-body collapse" data-process="{{processname}}">                \n            </div>\n        </div>',this.filters.typeFilterCardHtml='\n        <div class="step sub-task-lists " onclick="axTasksObj.filterTasks(\'type\',\'{{processname}}~~{{type}}\',this)">\n            <div> <span\n                    class="material-icons material-icons-style material-icons-2">{{icon}}</span>\n            </div>\n            <div class="title">{{type}} <span class="task-count-sub">{{count}}</span></div>\n        </div>',this.filters.viewAllBtnHtml='\x3c!--<button class="task-activity-all btn btn-white" id="viewAllFilters" onclick="axTasksObj.viewAllFilters();" title="View All">View All</button>--\x3e',this.taskBtnsHtml={},this.taskBtnsHtml.make='\n            <a href="javascript:void(0)" title="Make" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')""><span class="material-icons material-icons-style material-icons-2" style="color: orange;">assignment</span></a>',this.taskBtnsHtml.view='\n            <a href="javascript:void(0)" title="View form" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 " onclick="axTasksObj.openTstruct(\'{{transid}}\',\'{{recordid}}\',\'{{processname}}\',\'{{keyvalue}}\',\'{{taskname}}\')"><span class="material-icons material-icons-style material-icons-2" style="color: darkmagenta;">visibility</span> View form\n          \n            \n            </a>',this.taskBtnsHtml.history='\n            <a href="javascript:void(0)" title="View History" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 " onclick="axTasksObj.openHistory(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\')""><span class="material-icons material-icons-style material-icons-2" style="color: blue;">history</span>View History\n         \n            </a>',this.taskBtnsHtml.approve='\n        <div class="task-actions-sets d-flex" data-taskname="{{taskname}}" data-processname="{{processname}}">\n\n            <a href="javascript:void(0)" title="Approve"\n                class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 "\n                onclick="axTasksObj.doApprove(\'{{taskid}}\', this);" data-confirmMessage=\'{{cmsg_appcheck}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: #47BE7D;">check_circle</span> Approve\n            </a>\n\n            <a href="javascript:void(0)" title="Approve Reasons/Comments" data-popover="APPROVE{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="top" data-kt-menu-flip="top"  data-confirmMessage=\'{{cmsg_appcheck}}\' data-action=\'APPROVE\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div  class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label">Approve reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-select "\n                                        data-tasktype="Approve">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label  {{isApprovalComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-control"\n                                        data-tasktype="Approve" {{isApprovalComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" onclick="return axTasksObj.doApprove(\'{{taskid}}\', this);" data-confirmMessage=\'{{cmsg_appcheck}}\'>Approve</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n',this.taskBtnsHtml.reject='\n        <div class="task-actions-sets d-flex" data-taskname="{{taskname}}" data-processname="{{processname}}">\n            <a href="javascript:void(0)" title="Reject"\n                class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm"\n                onclick="axTasksObj.doReject(\'{{taskid}}\', this)" data-confirmMessage=\'{{cmsg_reject}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: red;">cancel</span>Reject</a>\n            <a href="javascript:void(0)" title="Reject Reasons/Comments" data-popover="REJECT{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top"  data-confirmMessage=\'{{cmsg_reject}}\' data-action=\'REJECT\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label">Reject reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-select "\n                                        data-tasktype="Reject">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label  {{isRejectComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-control"\n                                        data-tasktype="Reject" {{isRejectComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" data-confirmMessage=\'{{cmsg_reject}}\' onclick="return axTasksObj.doReject(\'{{taskid}}\', this)">Reject</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n',this.taskBtnsHtml["return"]='\n        <div class="task-actions-sets d-flex" data-taskname="{{taskname}}" data-processname="{{processname}}">\n            <a href="javascript:void(0)" title="Return"\n                class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm"\n                onclick="axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\')" data-confirmMessage=\'{{cmsg_return}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: blueviolet;">reply</span>Return</a>\n            <a href="javascript:void(0)" title="Return Reasons/Comments" data-popover="RETURN{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top"  data-confirmMessage=\'{{cmsg_return}}\' data-action=\'RETURN\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return To</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="returnto_{{taskid}}" class="form-select " data-tasktype="Return">\n                                        <option value="0">Initiator</option>\n                                        <option value="1">Previous Level</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-select "\n                                        data-tasktype="Return">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label  {{isApprovalComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-control"\n                                        data-tasktype="Return" {{isReturnComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" data-confirmMessage=\'{{cmsg_return}}\' onclick="return axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\')">Return</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskBtnsHtml.check='\n             <a href="javascript:void(0)" title="Check" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm" onclick="axTasksObj.doCheck(\'{{taskid}}\')">\n\t\t\t <span class="material-icons material-icons-style material-icons-2" style="color: #47BE7D;">done_all</span>Check\n             </a>            \n        ',this.taskBtnsHtml.more='\n            <button href="javascript:void(0)" class="btn btn-icon btn-active-light-primary w-30px h-30px"\n                data-kt-menu-trigger="{default:\'click\', lg: \'hover\'}" data-kt-menu-attach="parent"\n                data-kt-menu-placement="bottom-end">\n                <span class="material-icons material-icons-style material-icons-1">\n                    more_horiz\n                </span>\n            </button>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-muted menu-active-bg menu-state-primary fw-bold py-4 fs-6 w-150px Active_list_popover"\n                data-kt-menu="true" style="">\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5 ">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                ios_share\n                            </span>\n                        </span>Open</a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                check_circle\n                            </span>\n                        </span>Approve</a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                cancel\n                            </span>\n                        </span>Reject </a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                reply\n                            </span>\n                        </span>Return </a>\n                </div>\n            </div>',this.mobileTaskButtons={},this.mobileTaskButtons.approve='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Approve" data-confirmMessage=\'{{cmsg_appcheck}}\' onclick="axTasksObj.doApprove(\'{{taskid}}\', this);" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2" style="color: #47BE7D;">\n                    <span class="material-symbols-outlined">\n                        check_circle\n                    </span>\n                </span><span class="TA-name">Approve</span>\n            </a>\n            <a href="javascript:void(0)" title="Approve Reasons/Comments" data-popover="APPROVE{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label">Approve reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Approve">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label  {{isApprovalComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Approve" {{isApprovalComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile"\n                                onclick="return axTasksObj.doApprove(\'{{taskid}}\', this);" data-confirmMessage=\'{{cmsg_appcheck}}\'>Approve</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons.reject='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Reject" data-confirmMessage=\'{{cmsg_reject}}\' onclick="axTasksObj.doReject(\'{{taskid}}\', this);" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2" style="color: red;">\n                    <span class="material-symbols-outlined">\n                        cancel\n                    </span>\n                </span><span class="TA-name">Reject</span>\n            </a>\n            <a href="javascript:void(0)" title="Reject Reasons/Comments" data-popover="REJECT{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label">Reject reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Reject">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label  {{isRejectComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Reject" {{isRejectComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Reject-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile" data-confirmMessage=\'{{cmsg_reject}}\'\n                                onclick="return axTasksObj.doReject(\'{{taskid}}\', this);">Reject</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons["return"]='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Return" data-confirmMessage=\'{{cmsg_return}}\' onclick="axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\');" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2" style="color: blueviolet;">\n                    <span class="material-symbols-outlined">\n                        reply\n                    </span>\n                </span><span class="TA-name">Return</span>\n            </a>\n            <a href="javascript:void(0)" title="Return Reasons/Comments" data-popover="RETURN{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return To</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="returnto_{{taskid}}" class="form-select mobile" data-tasktype="Return">\n                                        <option value="0">Initiator</option>\n                                        <option value="1">Previous Level</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Return">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label  {{isReturnComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Return" {{isReturnComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Return-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile" data-confirmMessage=\'{{cmsg_return}}\'\n                                onclick="return axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\');">Return</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons.make='\n        <li>\n            <a href="javascript:void(0)" title="Make" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">assignment</span>\n                </span><span class="TA-name">Make </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.view='\n        <li>\n            <a href="javascript:void(0)" title="View Form" onclick="axTasksObj.openTstruct(\'{{transid}}\',\'{{recordid}}\',\'{{processname}}\',\'{{keyvalue}}\',\'{{taskname}}\')">\n\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: darkmagenta;">visibility</span>\n                </span><span class="TA-name">View Form </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.history='\n        <li>\n            <a href="javascript:void(0)" title="View History" onclick="axTasksObj.openHistory(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\')"  style="color: blue;">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: blue;">history</span>\n                </span><span class="TA-name">View History </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.check='\n        <li>\n            <a href="javascript:void(0)" title="Check" onclick="axTasksObj.doCheck(\'{{taskid}}\')"  style="color: blue;">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: #47BE7D;">done_all</span>\n                </span><span class="TA-name">Check </span>\n            </a>\n\n        </li>',this.dataSources=[],this.processName="",this.task={},this.task.keyField="",this.task.keyValue="",this.task.taskName="",this.task.taskType="",this.task.taskId=""}return _createClass(t,[{key:"fetchActiveTasks",value:function(t){var e=this,a="../aspx/AxPEG.aspx/GetActiveTasks";e.isAxpertFlutter&&(a="../api/v1/ARMGetActiveTasks"),this.callAPI(a,{},!1,function(a){if(a.success){var s=JSON.parse(a.response),n=e.dataConvert(s,"ARM");e.dataSources[t]=n}})}},{key:"connectToAxpert",value:function(){var t=this;this.callAPI("../../api/v1/ARMConnectToAxpert",{},!1,function(e){if(e.success){var a,s=JSON.parse(e.response),n=t.dataConvert(s,"ARM");1==(null==n?void 0:null===(a=n.result)||void 0===a?void 0:a.success)?sessionStorage.connectedToAxpert=!0:showAlertDialog("Error","Error in connecting to Axpert.")}})}},{key:"fetchProcessTask",value:function(t){var e=this,a="../aspx/AxPEG.aspx/AxGetProcessTask";e.isAxpertFlutter&&(a="../../api/v1/ARMGetProcessTask");var s={taskId:this.task.taskId};this.callAPI(a,s,!1,function(a){if(a.success){var s=JSON.parse(a.response),n=e.dataConvert(s,"ARM");e.dataSources[t]=n}})}},{key:"checkComments",value:function(t,e,a){var s,n,i=null!=a&&null!==(s=a.classList)&&void 0!==s&&s.contains("mobile")?".mobile":":not(.mobile)",o=t.toLowerCase();return o="approve"==o?"approval":o,"T"!=axTasksObj.dataSources.TaskReasons[e]["".concat(o,"comments")]||""!=document.querySelector('textarea[data-taskid="'.concat(t).concat(e,'"]').concat(i)).value||(null!==(n=document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)))&&void 0!==n&&n.classList.contains("show")||setTimeout(function(){document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)).closest(".task-actions-sets").classList.add("btnactive"),document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)).click(),setTimeout(function(){document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)).closest(".task-actions-sets").classList.remove("btnactive")},100)},100),showAlertDialog("Error","Comments are mandatory."),!1)}},{key:"doApprove",value:function(t,e){return this.doTaskAction("APPROVE",t,"APPROVE",e),!0}},{key:"doReject",value:function(t,e){this.doTaskAction("REJECT",t,"APPROVE",e)}},{key:"doReturn",value:function(t,e,a){this.doTaskAction("RETURN",t,a.toUpperCase(),e)}},{key:"doCheck",value:function(t){this.doTaskAction("CHECK",t,"CHECK")}},{key:"doTaskAction",value:function(t,e,a,s){var n,i=this,o=null!=s&&null!==(n=s.classList)&&void 0!==n&&n.contains("mobile")?".mobile":":not(.mobile)",l=this,c="../aspx/AxPEG.aspx/AxDoTaskAction";l.isAxpertFlutter&&(c="../../api/v1/ARMDoTaskAction");var r,d,m="",p="";"APPROVE"==a&&(m=(null===(r=document.querySelector('select[data-taskid="'.concat(t).concat(e,'"]').concat(o)))||void 0===r?void 0:r.value)||"",p=(null===(d=document.querySelector('textarea[data-taskid="'.concat(t).concat(e,'"]').concat(o)))||void 0===d?void 0:d.value)||"");var u;"RETURN"==t&&(returnTo=(null===(u=document.querySelector('select[data-taskid="returnto_'.concat(e,'"]').concat(o)))||void 0===u?void 0:u.value)||"");if(!(doTask=this.checkConfirmation(this,t,e,a,s)))return!1;if("REJECT"===t||"RETURN"===t||"APPROVE"===t){var v=this.checkComments(t,e,s);if(ShowDimmer(!1),!v)return!1}ShowDimmer(!0);var k={action:t,taskId:e,taskType:a,statusReason:m,statusText:p,toUser:""};this.callAPI(c,k,!0,function(t){if(ShowDimmer(!1),t.success){var e=JSON.parse(t.response);l.isAxpertFlutter||(e=JSON.parse(e.d)),e.result.success?(i.showSuccess(e.result.message),i.isUndefined(parent.axProcessObj)?setTimeout(function(){window.location.reload()},1e3):(parent.axProcessObj.taskCompleted=!0,parent.axProcessObj.refreshProcess(parent.axProcessObj.keyValue))):i.catchError(e.result.message)}try{AxAfterTaskAction(i,t)}catch(a){}})}},{key:"callAPI",value:function(t,e,a,s){var n=this,i=new XMLHttpRequest;i.open("POST",t,a),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.isAxpertFlutter&&(i.setRequestHeader("Authorization","Bearer ".concat(armToken)),e.armSessionId=armSessionId),i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)s({success:!0,response:this.responseText});else{try{var t,e,a=null===(t=JSON.parse(this.responseText))||void 0===t?void 0:null===(e=t.result)||void 0===e?void 0:e.message;n.catchError(a)}catch(i){n.catchError(this.responseText)}s({success:!1,response:this.responseText})}},i.send(JSON.stringify(e))}},{key:"catchError",value:function(t){showAlertDialog("error",t)}},{key:"showSuccess",value:function(t){showAlertDialog("success",t)}},{key:"isEmpty",value:function(t){return""==t}},{key:"isNull",value:function(t){return null==t}},{key:"isNullOrEmpty",value:function(t){return null==t||""==t}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"dataConvert",value:function(t,e){if("AXPERT"==e){try{if("undefined"!=typeof(t=JSON.parse(t.d)).result[0].result.row)return t.result[0].result.row}catch(a){this.catchError(a.message)}try{if("undefined"!=typeof t.result[0].result)return t.result[0].result}catch(a){this.catchError(a.message)}}else if("ARM"==e)try{if(this.isAxpertFlutter||(t=JSON.parse(t.d)),t.result.success){if(!this.isUndefined(t.result.data))try{return JSON.parse(t.result.data)}catch(s){return t.result.data}}else this.isUndefined(t.result.message)||this.catchError(t.result.message)}catch(a){this.catchError(a.message)}return t}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"showTasks",value:function(){var t,e=this;this.dataSources.hasOwnProperty("TaskReasons")||(this.dataSources.TaskReasons={}),(null===(t=this.dataSources.Tasks)||void 0===t?void 0:t.length)==undefined||0==this.dataSources.Tasks.length?this.isUndefined(parent.axProcessObj)?(document.querySelector("#".concat(this.view,"_view")).innerHTML="",document.querySelector("#".concat(this.view,"_view")).insertAdjacentHTML("beforeend"," ".concat(this.taskNoRecordsCardHtml," "))):(document.querySelector("#".concat(this.view,"_view")).innerHTML="",document.querySelector("#".concat(this.view,"_view")).insertAdjacentHTML("beforeend"," ".concat(this.taskNotFoundHtml," "))):(document.querySelector("#".concat(this.view,"_view")).innerHTML="",this.dataSources.Tasks.forEach(function(t,a){if(!e.isNullOrEmpty(t.taskstatus)){var s="<span>This task has been <b>{{taskstatus}}</b> by <b>{{username}}</b> on <b>{{eventdatetime}}.</b></span>";return e.isNullOrEmpty(t.statusreason)||(s+="<span>Reason: <b>{{statusreason}}</b></span>"),e.isNullOrEmpty(t.statustext)||(s+="<span>Comments: <b>{{statustext}}</b></span>"),s=Handlebars.compile(s)(t),void document.querySelector("#".concat(e.view,"_view")).insertAdjacentHTML("beforeend"," ".concat(s," "))}if(!e.isNullOrEmpty(t.ispending)){var n="<span>This task has been pending with user(s):  <b>{{touser}}</b> from <b>{{eventdatetime}}.</b></span>";return e.isNullOrEmpty(t.statusreason)||(n+="<span>Reason: <b>{{statusreason}}</b></span>"),e.isNullOrEmpty(t.statustext)||(n+="<span>Comments: <b>{{statustext}}</b></span>"),n=Handlebars.compile(n)(t),void document.querySelector("#".concat(e.view,"_view")).insertAdjacentHTML("beforeend"," ".concat(n," "))}switch(t.tasktype.toUpperCase()){case"MAKE":t.task_buttons_html=e.taskBtnsHtml.make+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.make+e.mobileTaskButtons.history;break;case"CHECK":"F"==(null==t?void 0:t.initiator_approval)&&t.touser==t.initiator||"T"!=t.showbuttons?(t.task_buttons_html=e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.view+e.mobileTaskButtons.history):(t.task_buttons_html=e.taskBtnsHtml.check+e.taskBtnsHtml["return"]+e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.check+e.mobileTaskButtons["return"]+e.mobileTaskButtons.view+e.mobileTaskButtons.history);break;case"APPROVE":"F"==(null==t?void 0:t.initiator_approval)&&t.touser==t.initiator||"T"!=t.showbuttons?(t.task_buttons_html=e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.view+e.mobileTaskButtons.history):(t.task_buttons_html=e.taskBtnsHtml.approve+e.taskBtnsHtml.reject+("T"==(null==t?void 0:t.returnable)?e.taskBtnsHtml["return"]:"")+e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.approve+e.mobileTaskButtons.reject+("T"==(null==t?void 0:t.returnable)?e.mobileTaskButtons["return"]:"")+e.mobileTaskButtons.view+e.mobileTaskButtons.history)}e.dataSources.TaskReasons[t.taskid]={approvalcomments:t.approvalcomments,rejectcomments:t.rejectcomments,returncomments:t.returncomments};var i="";if("APPROVE"==t.tasktype.toUpperCase()?(t.isApprovalComments="T"==t.approvalcomments?"required":"",t.isRejectComments="T"==t.rejectcomments?"required":"",t.isReturnComments="T"==t.returncomments?"required":""):"CHECK"==t.tasktype.toUpperCase()&&(t.isReturnComments="T"==t.returncomments?"required":""),i="List"==e.view?Handlebars.compile(e.taskListHtml.replace("{{task_buttons_html}}",t.task_buttons_html).replace("{{mobile_task_buttons_html}}",t.mobile_task_buttons_html))(t):Handlebars.compile(e.taskCardHtml.replace("{{task_buttons_html}}",t.task_buttons_html).replace("{{mobile_task_buttons_html}}",t.mobile_task_buttons_html))(t),document.querySelector("#".concat(e.view,"_view")).insertAdjacentHTML("beforeend"," ".concat(i," ")),"APPROVE"==t.tasktype.toUpperCase()){if(e.isNullOrEmpty(t.approvereasons))document.querySelectorAll('select[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var o=t.approvereasons.split(",");document.querySelectorAll('select[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<o.length;e++){var a=document.createElement("option");a.value=o[e],a.innerHTML=o[e],t.appendChild(a)}})}if(e.isNullOrEmpty(t.defapptext)||document.querySelectorAll('textarea[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defapptext}),e.isNullOrEmpty(t.rejectreasons))document.querySelectorAll('select[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var l=t.rejectreasons.split(",");document.querySelectorAll('select[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<l.length;e++){var a=document.createElement("option");a.value=l[e],a.innerHTML=l[e],t.appendChild(a)}})}e.isNullOrEmpty(t.defregtext)||document.querySelectorAll('textarea[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defregtext})}if("APPROVE"==t.tasktype.toUpperCase()||"CHECK"==t.tasktype.toUpperCase()){if(e.isNullOrEmpty(t.returnreasons))document.querySelectorAll('select[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var c=t.returnreasons.split(",");document.querySelectorAll('select[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<c.length;e++){var a=document.createElement("option");a.value=c[e],a.innerHTML=c[e],t.appendChild(a)}})}e.isNullOrEmpty(t.defrettext)||document.querySelectorAll('textarea[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defrettext})}}),this.isUndefined(parent.axProcessObj)||document.querySelectorAll(".List_view").forEach(function(t){t.click()}),this.constructFilters(),this.setApprovalReasons())}},{key:"constructFilters",value:function(){document.querySelector(".all-tasks-container").innerHTML=this.filters.allTasksHtml;var t=document.querySelector("#All-tasks-count");if(t.closest(".task-process-selected").classList.add("active"),this.isUndefined(t)||this.isNull(t)||(t.innerHTML=this.dataSources.Tasks.length.toString()),this.dataSources.Tasks.length>0){var e=axTasksObj.dataSources.Tasks.reduce(function(t,e){var a=e.processname;return t.hasOwnProperty(a)||(t[a]=0),t[a]++,t},{});document.querySelector("#Active-List-container").innerHTML="";for(var a=1,s=0,n=Object.entries(e);s<n.length;s++){var i=_slicedToArray(n[s],2),o=i[0],l=i[1],c={processname:o,processid:this.sanitizeElementId(o),processcount:l,sno:a},r=Handlebars.compile(this.filters.processFilterCardHtml)(c);document.querySelector("#Active-List-container").insertAdjacentHTML("beforeend"," ".concat(r," ")),6==a?a=1:a++}e={};axTasksObj.dataSources.Tasks.forEach(function(t){e.hasOwnProperty(t.processname)||(e[t.processname]={}),e[t.processname].hasOwnProperty(t.tasktype)||(e[t.processname][t.tasktype]=0),e[t.processname][t.tasktype]++});for(var d=0,m=Object.entries(e);d<m.length;d++)for(var p=_slicedToArray(m[d],2),u=p[0],v=p[1],k=0,b=Object.entries(v);k<b.length;k++){var y=_slicedToArray(b[k],2),f=y[0],h={type:f,count:y[1],processname:u,icon:this.getTaskTypeIcon(f)};r=Handlebars.compile(this.filters.typeFilterCardHtml)(h);document.querySelector('.accordion-body[data-process="'.concat(u,'"]')).insertAdjacentHTML("beforeend"," ".concat(r," "))}KTMenu.createInstances('[data-kt-menu="true"]')}}},{key:"sanitizeElementId",value:function(t){return t.replace(/[^a-zA-Z0-9-_]/g,"")}},{key:"getTaskTypeIcon",value:function(t){var e="assignment";switch(t.toUpperCase()){case"MAKE":e="assignment";break;case"CHECK":e="done_all";break;case"APPROVE":e="check_circle";break;case"REJECT":e="cancel";break;case"RETURN":e="reply";break;default:e="assignment"}return e}},{key:"isEditableTask",value:function(t,e,a){var s=!1,n=this,i={processName:t,taskName:e,keyValue:a};return this.callAPI("../aspx/AxPEG.aspx/AxGetEditableTask",i,!1,function(t){if(t.success){var e=JSON.parse(t.response),a=n.dataConvert(e,"ARM");if(a.length>0){var i=a[0];"T"==(null==i?void 0:i.editable)&&(s=!0)}}}),s}},{key:"openTstruct",value:function(t,e,a,s,n){var i="";if(this.isAxpertFlutter){if(this.checkAxpertConnection(),i="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=t").concat(t),this.isNullOrEmpty(e)||"0"==e)return void showAlertDialog("error","Form details not available.");i+="&params=~act=load~recordid=".concat(e)}else{var o="&ispegedit=".concat((!1).toString());if(i="../aspx/tstruct.aspx?fromprocess=true&transid=".concat(t).concat(o),this.isNullOrEmpty(e)||"0"==e)return void showAlertDialog("error","Form details not available.");i+="&act=load&recordid=".concat(e)}try{var l={id:"ldb".concat(t).concat(e),url:i};this.openModal(l)}catch(c){showAlertDialog("error",c.message)}}},{key:"openHistory",value:function(t,e,a){var s="";this.isAxpertFlutter?(this.checkAxpertConnection(),s="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=ipegtaskh&params=~pkeyvalue=").concat(a,"~pprocess=").concat(t)):s="../aspx/ivtoivload.aspx?ivname=pegtaskh&pkeyvalue=".concat(a,"&pprocess=").concat(t);try{var n={id:"ldb".concat(a),url:s};this.openModal(n)}catch(i){showAlertDialog("error",i.message)}}},{key:"openModal",value:function(t){try{t.iFrameModalBody='<iframe id="'.concat(t.id,'" name="').concat(t.id,'" class="col-12 flex-column-fluid w-100 h-100" src="').concat(t.url,'" frameborder="0" allowtransparency="True"></iframe>');var e=new BSModal("modal_".concat(t.id),"",t.iFrameModalBody,function(t){ShowDimmer(!1)},function(t){});e.changeSize("fullscreen"),e.hideHeader(),e.hideFooter(),e.showFloatingClose()}catch(a){showAlertDialog("error",a.message)}}},{key:"getUrlParams",value:function(){var t=window.location.search,e=new URLSearchParams(t);this.task.keyField=e.get("keyfield"),this.task.keyValue=e.get("keyvalue"),this.processName=e.get("processname"),this.task.taskType=e.get("tasktype"),this.task.taskId=e.get("taskid"),this.task.taskName=e.get("taskname")}},{key:"openProcess",value:function(t,e,a,s){ShowDimmer(!0),this.isAxpertFlutter?(this.checkAxpertConnection(),window.location.href="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=hAxProcessFlow&params=~processname=").concat(t,"~keyfield=").concat(e,"~keyvalue=").concat(a)):callParentNew("LoadIframe(htmlPages.aspx?loadcaption=AxProcessFlow&processname=".concat(t,"&keyfield=").concat(e,"&keyvalue=").concat(a,"&taskid=").concat(s,")"),"function")}},{key:"checkAxpertConnection",value:function(){"undefined"==typeof sessionStorage.connectedToAxpert&&this.connectToAxpert()}},{key:"filterTasks",value:function(t,e,a){if("process"==t)document.querySelectorAll(".task-listing-card").forEach(function(t){t.dataset.process==e?t.classList.remove("d-none"):(t.classList.remove("d-none"),t.classList.add("d-none"))}),document.querySelectorAll(".task-process-selection.active,.sub-task-lists.active,.task-process-selected.active").forEach(function(t){t.classList.remove("active")}),a.querySelectorAll(".task-process-selection").forEach(function(t){t.classList.add("active")}),a.closest(".task-process-selected").classList.add("active");else if("type"==t){var s=e.split("~~")[0],n=e.split("~~")[1];document.querySelectorAll(".task-listing-card").forEach(function(t){t.dataset.type==n&&t.dataset.process==s?t.classList.remove("d-none"):(t.classList.remove("d-none"),t.classList.add("d-none"))}),document.querySelectorAll(".sub-task-lists.active").forEach(function(t){t.classList.remove("active")}),a.classList.add("active")}else"all"==t&&(document.querySelectorAll(".task-listing-card").forEach(function(t){t.classList.remove("d-none"),t.classList.remove("active")}),document.querySelectorAll(".task-process-selection.active,.sub-task-lists.active,.task-process-selected.active").forEach(function(t){t.classList.remove("active")}),a.querySelectorAll(".task-process-selection").forEach(function(t){t.classList.add("active")}),a.closest(".task-process-selected").classList.add("active"))}},{key:"viewAllFilters",value:function(){event.target.classList.contains("expanded")?(document.querySelector("#Active-List-container").classList.add("horizontal"),event.target.setAttribute("title","View All"),event.target.innerHTML="View All",event.target.classList.remove("expanded")):(document.querySelector("#Active-List-container").classList.remove("horizontal"),event.target.setAttribute("title","Collapse"),event.target.innerHTML="Collapse",event.target.classList.add("expanded"))}},{key:"setApprovalReasons",value:function(){for(var t=document.querySelectorAll(".approval-radio"),e=0;e<t.length;e++)t[e].addEventListener("change",function(){var t,e,a=this.getAttribute("name"),s=this.getAttribute("id");document.querySelectorAll(".".concat(a)).forEach(function(t){t.classList.remove("active")}),null===(t=this.closest(".approval-radio-group"))||void 0===t||null===(e=t.querySelectorAll(".btn-toggle"))||void 0===e||e.forEach(function(t){t.classList.remove("active")}),this.checked&&(document.querySelectorAll(".".concat(a," .approval-controls")).forEach(function(t){t.classList.contains("d-none")||t.classList.add("d-none")}),document.querySelectorAll(".".concat(a,' .approval-controls[data-tasktype="').concat(this.dataset.tasktype,'"]')).forEach(function(t){t.classList.remove("d-none")}),document.querySelector('[for="'.concat(s,'"]')).classList.add("active"))})}},{key:"toggleFilters",value:function(){var t=document.querySelector(".filter-wrapper");t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")}},{key:"toggleViews",value:function(t){var e=localStorage.ActiveListView;this.isUndefined(e)&&(e="List"),t.getAttribute("value")!=e&&("Card"==e?this.showListView():this.showCardView())}},{key:"showViews",value:function(){var t=localStorage.ActiveListView;this.isUndefined(t)||"List"==t?this.showListView():this.showCardView()}},{key:"showListView",value:function(){var t,e;localStorage.ActiveListView="List",this.view="List",document.querySelectorAll(".task-view").forEach(function(t){t.classList.remove("active")}),null===(t=document.querySelector("#list-view"))||void 0===t||null===(e=t.classList)||void 0===e||e.add("active"),document.querySelector("#Card_view").classList.contains("d-none")||(document.querySelector("#Card_view").classList.add("d-none"),document.querySelector("#Card_view").innerHTML=""),document.querySelector("#List_view").classList.remove("d-none"),this.showTasks()}},{key:"showCardView",value:function(){var t,e;localStorage.ActiveListView="Card",this.view="Card",document.querySelectorAll(".task-view").forEach(function(t){t.classList.remove("active")}),null===(t=document.querySelector("#card-view"))||void 0===t||null===(e=t.classList)||void 0===e||e.add("active"),document.querySelector("#List_view").classList.contains("d-none")||(document.querySelector("#List_view").classList.add("d-none"),document.querySelector("#List_view").innerHTML=""),document.querySelector("#Card_view").classList.remove("d-none"),this.showTasks()}},{key:"toggleTask",value:function(t){document.querySelector(".arrow".concat(t)).classList.toggle("rotate"),document.querySelectorAll(".taskSubrow".concat(t)).forEach(function(e){if(e.classList.toggle("d-none"),!e.classList.contains("data-fetched")){var a=e.dataset.displaycontent;if(a.indexOf("{")>-1||a.indexOf("[")>-1){var s=e.closest("table");(new AxHTML).parse({name:t,input:e.dataset.displaycontent,data:{},pageVariables:{taskid:t,tasktype:s.getAttribute("data-type"),transid:s.getAttribute("data-transid"),keyvalue:s.getAttribute("data-keyvalue")},container:".taskSubrow".concat(t," span")})}else document.querySelector(".taskSubrow".concat(t," span")).insertAdjacentHTML("beforeend"," ".concat(a," "));e.classList.add("data-fetched")}})}},{key:"checkConfirmation",value:function(t,e,a,s,n){var i,o=n.getAttribute("data-confirmMessage");return taskActionCheck==="".concat(e).concat(a)||""===o||null===o||(i=$.confirm({template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated custom-jconfirm-box"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:o,content:"",buttons:{buttonA:{text:"Yes",btnClass:"btn btn-primary",action:function(){i.close(),taskActionCheck="".concat(e).concat(a),ShowDimmer(!0),t.doTaskAction(e,a,s,n)}},buttonB:{text:"No",btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){i.close(),taskActionCheck=!1,ShowDimmer(!1)}}},onClose:function(){ShowDimmer(!1)}}),!1)}},{key:"bindEvents",value:function(){document.querySelectorAll(".taskActionBtn").forEach(function(t){KTMenu.getInstance(t).on("kt.menu.dropdown.show",function(t){var e=t.dataset;axTasksObj.checkPopoverConfirmation(e.action,e.taskid,t,e.confirmmessage)})})}},{key:"checkPopoverConfirmation",value:function(t,e,a,s){var n,i;taskActionCheck!=="".concat(t).concat(e)&&""!==s&&null!==s&&(i=$.confirm({template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated custom-jconfirm-box"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:s,content:"",buttons:{buttonA:{text:"Yes",btnClass:"btn btn-primary",action:function(){i.close(),taskActionCheck="".concat(t).concat(e),setTimeout(function(){a.closest(".task-actions-sets").classList.add("btnactive"),a.focus(),a.click(),setTimeout(function(){a.closest(".task-actions-sets").classList.remove("btnactive")},100)},1e3)}},buttonB:{text:"No",btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){var t;i.close(),null===(t=KTMenu.getInstance(a))||void 0===t||t.hide(),taskActionCheck=!1,ShowDimmer(!1)}}},onClose:function(){ShowDimmer(!1)}}),null===(n=KTMenu.getInstance(a))||void 0===n||n.hide())}}]),t}();function pegInit(){(axTasksObj=new AxTasks).getUrlParams();var t,e,a,s=axTasksObj.task;axTasksObj.isNullOrEmpty(s.taskName)||axTasksObj.isUndefined(s.taskName)?axTasksObj.fetchActiveTasks("Tasks"):(document.querySelector("#ActiveTask_Left").classList.remove("d-flex"),document.querySelector("#ActiveTask_Left").style.display="none",axTasksObj.fetchProcessTask("Tasks"),axTasksObj.isUndefined(null===(t=axTasksObj.dataSources)||void 0===t?void 0:null===(e=t.Tasks)||void 0===e?void 0:null===(a=e[0])||void 0===a?void 0:a.displaytitle)||(document.querySelector("#task-page-title").innerHTML=axTasksObj.dataSources.Tasks[0].displaytitle));axTasksObj.showViews(),axTasksObj.bindEvents(),ShowDimmer(!1),"undefined"!=typeof parent.axProcessObj&&(parent.ShowDimmer(!1),document.querySelectorAll(".task-title > span").forEach(function(t){t.onclick="#"})),$("#AllTasks").click(function(){var t=document.querySelector(".task-activity-container");t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none"),document.getElementById("task-page-title").click()})}$(document).ready(function(){pegInit()});