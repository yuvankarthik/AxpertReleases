/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}var placement,ignoredColCount=0,ignoredColumns=[],oldSelectedValues=0,isFormDirty=!1,leftSelectedClickedOnce=!1,impTempObj={};function validateDataSearchWiz(){var ddl=0,multiselect=0;if("NA"!=$("#ddlImpTbl").val())if(ddl=1,$("#mSelectRight option").val()!=undefined&&$("#mSelectRight option").val().length>0){var mandatoryField=!1;$("#mSelectLeft option").each(function(){$(this).val().indexOf("*")>=0&&(mandatoryField=!0)}),mandatoryField?(showAlertDialog("warning",eval(callParent("lcm[156]"))),$("#mSelectLeft").focus()):multiselect=1}else $("#dataupdatecheck").is(":checked")?(showAlertDialog("warning",eval(callParent("lcm[531]"))),$("#primaryfld").focus()):$("#ChkColNameInfile").is(":checked")?multiselect=1:(showAlertDialog("warning",eval(callParent("lcm[108]"))),$("#mSelectLeft").focus());else showAlertDialog("warning",eval(callParent("lcm[106]"))),$("#ddlImpTbl").data("selectpicker").$button.focus();if(1==ddl&&1==multiselect){var tempColNames="",tempColValues="";$("#mSelectRight option").each(function(){tempColNames+=$(this).text()+", ",tempColValues+=$(this).val()+", "}),tempColNames=tempColNames.substring(0,tempColNames.length-2),tempColValues=tempColValues.substring(0,tempColValues.length-2),selectedValues=$("#mSelectRight option").length,0!=oldSelectedValues&&selectedValues!=oldSelectedValues?($("#noFile").text(eval(callParent("lcm[66]"))),$("#fileToUpload").val("").prop("title",eval(callParent("lcm[66]"))),$("#IsFileUploaded").val(""),$("#divProgress").hide(),oldSelectedValues=0):$("#hdnSelectedColumnCount").val(selectedValues),$("#hdnColNames").val(tempColNames),$("#hdnColValues").val(tempColValues),tempFileName=$("#ddlImpTbl :selected").text(),hdnTemplateName=$("#hdnTemplateName").val(),$("#ddlGroupBy").empty().append("<option value='NA'>-- Select --</option"),colValues=$("#hdnGroupByColVal").val().split(", "),colNames=$("#hdnGroupByColName").val().split(", ");for(var i=0;i<colNames.length;i++)$("#ddlGroupBy").append("<option value='"+colValues[i]+"'>"+colNames[i]+"</option");return $("#ddlGroupBy").change(function(){$("#hdnGroupBy").val($("#ddlGroupBy").val())}),!0}return!1}function FileuplaodValidation(){try{$.ajax({url:"importnew.aspx/FileuplaodValidation",type:"POST",cache:!1,async:!0,dataType:"json",contentType:"application/json",success:function(e){e.d},error:function(e){}})}catch(e){}}function validateDataUploadWiz(){var uploadMsg=$("#hdnUploadFileWarnings").val();if("1"==$("#IsFileUploaded").val())return ChkAllowUpdate(),!0;if("Empty"==uploadMsg)return showAlertDialog("warning",4036,"client"),!1;if("NotEqualColumns"==uploadMsg)return showAlertDialog("warning",4039,"client"),!1;if("DuplicateColumns"==uploadMsg)return showAlertDialog("warning",eval(callParent("lcm[307]"))),!1;if("InvalidFileFormat"==uploadMsg)return showAlertDialog("warning",eval(callParent("lcm[310]"))),!1;fileupload=1;var errorMesg=$(".fileUploadErrorMessage").text();return errorMesg.indexOf("csv")<0&&showAlertDialog("warning",eval(callParent("lcm[113]"))),$("#fileuploadsts").text(""),!1}function GetSelColData(){var e=[],t=[];$("#gridImpData tr >th select:not([disabled])").each(function(){var a=$(this).find(":selected").val(),l=$(this).find(":selected").text();"None"==a?e.push("None"):(e.push(a),t.push(l))});for(var a=e.slice().sort(),l=[],o=0;o<e.length-1;o++)a[o+1]==a[o]&&l.push(a[o]);if(l.length>0)return showAlertDialog("warning",1030,"client"),focusSelectInGrid(e,l),!1;var n="",r="";return $("#gridImpData tr th").find("select:not([disabled])").each(function(){n+=$(this).find("option[selected]").text()+", ",r+=$(this).val()+", "}),n=n.substring(0,n.length-2),r=r.substring(0,r.length-2),$("#hdnColNames").val(n),$("#hdnColValues").val(r),$("#colheader").val(e.join(",")),$("#colHeaderNames").val(t.join(",")),unselectIgnoredColumns(),!$("#chkForAllowUpdate").prop("checked")||(primaryKeyCol=$("#ddlPrimaryKey").val(),"NA"==primaryKeyCol?(showAlertDialog("warning","Please select Primary Key column"),$("#ddlPrimaryKey").focus(),!1):($("#hdnPrimaryKey").val(primaryKeyCol),!0))}function updateMandatoryFieldsToSelection(){$("#mSelectLeft option").each(function(){$(this).text().indexOf("*")>=0?($("#mSelectRight").append($("<option>",{value:$(this).val(),text:$(this).text(),mandatory:!0})),$(this).remove()):$(this).attr("mandatory",!1)})}function updateMandatoryFieldsInTemplate(){$("#mSelectLeft option, #mSelectRight option").each(function(e,t){$(t).text().indexOf("*")>=0?$(t).attr("mandatory",!0):$(t).attr("mandatory",!1)})}function ChkAllowUpdate(){if($("#chkForAllowUpdate").prop("checked")){$("#lblprimarycolmn,#ddlPrimaryKey").parent("div").removeClass("d-none"),$("#ddlPrimaryKey").empty(),$("#ddlPrimaryKey").append("<option value='NA'>-- Select --</option"),colValues=$("#hdnColValues").val().split(", "),colNames=$("#hdnColNames").val().split(", ");for(var e=0;e<colNames.length;e++)$("#ddlPrimaryKey").append("<option value='"+colValues[e]+"'>"+colNames[e]+"</option");disabledIgnoredColumns(ignoredColCount)}else $("#lblprimarycolmn,#ddlPrimaryKey").parent("div").addClass("d-none")}function ColNameInfileChanged(){}function focusSelectInGrid(e,t){var a=[];for(i=0;i<t.length;i++)for(j=0;j<e.length;j++)t[i]==e[j]&&a.push(j);for(i=0;i<a.length;i++)1==i&&$("#gridImpData tbody tr th").eq(a[i]).find("select").focus()}function uploadFileChangeEvent(){$("#fileToUpload").change(function(e){var uploadControl=$("#fileToUpload")[0].files[0],regex=/^.*\.(CSV|csv|txt|TXT|XLS|xls|XLSX|xlsx)$/;if(uploadControl!=undefined){var Filename=uploadControl.name;if(""!=Filename){var fileSize=uploadControl.size/1024/1024;regex.test(Filename)?fileSize>1?(showAlertDialog("warning",eval(callParent("lcm[156]"))),$("#noFile").text(eval(callParent("lcm[66]"))),$("#fileToUpload").val(""),$("#IsFileUploaded").val("")):($("#noFile").text(Filename),$("#chkForAllowUpdate").attr("checked",!1),$("#hdnPrimaryKey").val(""),ChkAllowUpdate(),$("#btnFileUpload").click()):(showAlertDialog("warning",eval(callParent("lcm[157]"))),uploadControl.value="",$("#noFile").text(eval(callParent("lcm[66]"))),$("#fileToUpload").val(""),$("#IsFileUploaded").val(""))}}else $("#noFile").text(eval(callParent("lcm[66]"))),$("#IsFileUploaded").val("")})}function uploadFileClickEvent(){$("#btnFileUpload").click(function(){var fileUpload=$("#fileToUpload").get(0),files=fileUpload.files,frm=new FormData;if(0==files.length)showAlertDialog("warning",eval(callParent("lcm[158]")));else{for(var i=0;i<files.length;i++)frm.append(files[i].name,files[i]);$(".progress").show();var url=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx"));$.ajax({url:url+"FileUploadHandler.ashx",type:"POST",contentType:!1,processData:!1,data:frm,success:function(e){if(0==e.indexOf("File Uploaded successfully")){var t=e.substr(e.indexOf("&&")+2);$("#divProgressBar").removeClass("progress-bar-danger"),setTimeout(function(){$("#divProgressBar").removeClass("progress-bar progress-bar-striped active").addClass("progress-bar-success").text("100%").css("width","100%").attr("aria-valuenow","100")},500),$("#upFileName").val(t),$("#uploadFileName").val(files[0].name),$("#UploadButton").click()}else showAlertDialog("warning",e)},error:function error(err){showAlertDialog("warning",eval(callParent("lcm[159]"))),$("#divProgressBar").removeClass("progress-bar-striped active").addClass("progress-bar-danger").text("0%").css("width","100%").attr("aria-valuenow","100")},xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.onprogress=function(e){var t=0,a=e.loaded||e.position,l=e.total;e.lengthComputable&&(t=Math.ceil(a/l*100)),$("#divProgressBar").addClass("progress-bar-striped").text(t+"%").css("width","100%").attr("aria-valuenow",t)},e}})}})}function fileUploadSuccess(){showAlertDialog("success",4037,"client");var e=$("#uploadFileName").val();$(".dropzone-select").text(e).addClass("col-10"),uploadFileClickEvent(),uploadFileChangeEvent(),addChkbxsToGrdColumns(),disabledIgnoredColumns(ignoredColCount=parseInt($("#hdnIgnoredColCount").val())),unselectIgnoredColumns(),showPopover(),filename=$("#uploadFileName").val(),$("#noFile").text(filename),$("#fileToUpload").attr("title",filename)}function createMultiselectControl(){$(".multiselect").multiselect({beforeMoveToLeft:function(e,t,a){return!1},sort:!0,moveToLeft:function moveToLeft(Multiselect,$options,event,silent,skipStack){targetId=$(event.target).attr("id");var selectionOptionCount=0;if(1==$options.length)if($("#dataupdatecheck").is(":checked")){if($("#tstFlds").val()!=$options.text())return $("#mSelectLeft").append($("<option>",{value:$options.val(),text:$options.text(),mandatory:!1})),$options.remove(),!0}else{if("false"==$options.attr("mandatory"))return $("#mSelectLeft").append($("<option>",{value:$options.val(),text:$options.text(),mandatory:!1})),$options.remove(),!0;showAlertDialog("warning",eval(callParent("lcm[160]")))}else"left_Selected_1"==targetId&&($("#mSelectRight :selected").map(function(e,t){"true"==$(t).attr("mandatory")&&selectionOptionCount++}),selectionOptionCount==$options.length&&showAlertDialog("warning",eval(callParent("lcm[161]"))));var mandatoryCount=0;if($("#mSelectRight option").map(function(e,t){"true"==$(t).attr("mandatory")&&mandatoryCount++}),$("#dataupdatecheck").is(":checked")){var selectOrAll="left_All_1"==$(event.currentTarget).attr("id")?"option":":selected";$("#mSelectRight "+selectOrAll).map(function(e,t){$("#tstFlds").val()!=$(this).text()&&($("#mSelectLeft").append($("<option>",{value:$(this).val(),text:$(this).text(),mandatory:!1})),$(this).remove())})}else if(mandatoryCount>1&&mandatoryCount==$options.length)showAlertDialog("warning",eval(callParent("lcm[161]")));else{var selectOrAll="left_All_1"==$(event.currentTarget).attr("id")?"option":":selected";$("#mSelectRight "+selectOrAll).map(function(e,t){"false"==$(t).attr("mandatory")&&(leftSelectedClickedOnce=!0,$("#mSelectLeft").append($("<option>",{value:$(this).val(),text:$(this).text(),mandatory:!1})),$(this).remove())})}}})}function checkIfFormChanges(){var e=$("#ddlImpTbl").val();return isFormDirty="NA"!=e}function setFailedSummaryColumnHeadings(){$("#thSummFileName").text(eval(callParent("lcm[263]"))),$("#thSummRecords").text(eval(callParent("lcm[264]"))),$("#thSummAdded").text(eval(callParent("lcm[357]"))),$("#thSummUpdated").text(eval(callParent("lcm[358]"))),$("#thSummFailed").text(eval(callParent("lcm[266]"))),$("#hdnIgnoredColumns").val(""),ignoredColumns=[]}function addChkbxsToGrdColumns(){$("#gridImpData").data("column-select")==undefined&&($("#gridImpData th").each(function(){$(this).find("select").addClass("form-select"),$(this).find("select").select2(),$(this).find("select").css("width","auto"),selectId=$(this).find("select").attr("id"),$(this).append("<label class='checkbox-inline'><br><input type='checkbox' class='grd-column-select me-2 w-20px h-20px' checked id='chk"+selectId+"'/><span>Select Column</span></label><i tabindex='0' data-trigger='focus' class='icon-arrows-question col-info' data-toggle='popover' data-content='Uncheck to ignore this column' data-placement='right' style='cursor: pointer;'  title=''></i>"),$(this).find("select").change(function(){$("option[value="+this.value+"]",this).attr("selected",!0).siblings().removeAttr("selected"),selectVal=$(this).val(),selectId=$(this).attr("id"),mandatory=$("#mSelectRight option[value='"+selectVal+"']").attr("mandatory"),mandatory=mandatory!=undefined&&JSON.parse(mandatory),colIndex=$(this).closest("th").index(),mandatory?$("#chk"+selectId).attr("disabled","disabled"):$("#chk"+selectId).removeAttr("disabled")}),curselectVal=$(this).find("select").val(),mandatory=$("#mSelectRight option[value='"+curselectVal+"']").attr("mandatory"),mandatory=mandatory!=undefined&&JSON.parse(mandatory),mandatory&&$("#chk"+selectId).attr("disabled","disabled")}),$(".grd-column-select").change(function(){var e=$(this).is(":checked"),t=$(this).closest("th").index()+1;e?($(this).closest("th").find("select").removeAttr("disabled"),$("#gridImpData tr td:nth-child("+t+"), #gridImpData tr th:nth-child("+t+")").removeClass("column-disabled"),updateIgnoredColumns(t,"pop")):($(this).closest("th").find("select").attr("disabled","disabled"),$("#gridImpData tr td:nth-child("+t+"), #gridImpData tr th:nth-child("+t+")").addClass("column-disabled"),updateIgnoredColumns(t,"push"));var a=$(this).closest("th").find("select").is(":disabled"),l=$(this).closest("th").find("select").val();a?$("#ddlPrimaryKey option[value='"+l+"']").attr("disabled","disabled"):$("#ddlPrimaryKey option[value='"+l+"']").removeAttr("disabled")}),$("#gridImpData").attr("data-column-select",!0));try{var e;null===(e=KTApp)||void 0===e||e.initBootstrapTooltips()}catch(t){}}function disabledIgnoredColumns(e){e>0&&(--e,$("#gridImpData tr").each(function(){$(this).find("td:gt("+e+"), th:gt("+e+")").addClass("column-disabled")}),$("#gridImpData tr th:gt("+e+")").find("select").attr("disabled","disabled"),$("#gridImpData tr th").find("select[disabled]").each(function(){var e=$(this).val();$("#ddlPrimaryKey option[value='"+e+"']").attr("disabled","disabled"),updateIgnoredColumns($(this).parent().index()+1,"push")}),$("#gridImpData tr th:gt("+e+")").find(".checkbox-inline, .col-info").remove())}function unselectIgnoredColumns(){$("#gridImpData tr th").find("select[disabled]").each(function(){var e=$(this).val(),t=$(this).find("option[selected]").text();0==$('#mSelectLeft option[value="'+e+'"]').length&&($("#mSelectLeft").append($("<option>",{value:e,text:t,mandatory:!1})),$("#mSelectRight option[value='"+e+"']").remove())}),oldSelectedValues=$("#mSelectRight option").length}function updateIgnoredColumns(e,t){var a=ignoredColumns.indexOf(e);"push"==t?-1===a&&ignoredColumns.push(e):-1!==a&&ignoredColumns.splice(a,1),$("#hdnIgnoredColumns").val(ignoredColumns.sort(function(e,t){return e-t}))}function showPopover(){$('[data-bs-toggle="popover"]').popover({placement:placement})}function DropzoneInitImport(){var e="#dropzone_AxpFileImport",t=document.querySelector(e),a=t.querySelector(".dropzone-item");a.id="";var l=a.parentNode.innerHTML;a.parentNode.removeChild(a);var o=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),n=new Dropzone(e,{url:o+"FileUploadHandler.ashx",previewTemplate:l,addRemoveLinks:!0,maxFilesize:1,previewsContainer:e+" .dropzone-items",clickable:e+" .dropzone-select"});n.on("addedfile",function(e){t.querySelectorAll(".dropzone-item").forEach(function(e){e.style.display=""})}),n.on("totaluploadprogress",function(e){t.querySelectorAll(".progress-bar").forEach(function(t){t.style.width=e+"%"})}),n.on("removedfile",function(e){}),n.on("complete",function(e){var a=t.querySelectorAll(".dz-complete"),l=(e.xhr.responseText,e.xhr.responseText.substr(e.xhr.responseText.indexOf("&&")+2));$("#upFileName").val(l),$("#uploadFileName").val(e.name),$("#hdnOriginalfileName").val($("#uploadFileName").val()),$("#UploadButton").click(),setTimeout(function(){a.forEach(function(e){e.querySelector(".progress-bar").style.opacity="0",e.querySelector(".progress").style.opacity="0"})},300)})}function toggleReadonly(e){var t=document.getElementById("mSelectLeft"),a=document.getElementById("mSelectRight");t.disabled=!e,a.disabled=!e,document.querySelectorAll("a.btn").forEach(function(t){e?(t.classList.remove("disabled-link"),t.style.pointerEvents="auto"):(t.classList.add("disabled-link"),t.style.pointerEvents="none")}),e?(document.getElementById("lnkExpTemp").disabled=!1,document.getElementById("excel1").style.pointerEvents="auto",document.getElementById("CSV1").style.pointerEvents="auto",document.getElementById("datetip").setAttribute("data-bs-toggle","tooltip"),document.getElementById("icocl3").setAttribute("data-bs-toggle","popover"),document.querySelector(".upload-section").style.pointerEvents="auto"):(document.getElementById("lnkExpTemp").disabled=!0,document.getElementById("excel1").style.pointerEvents="none",document.getElementById("CSV1").style.pointerEvents="none",document.getElementById("datetip").removeAttribute("data-bs-toggle"),document.getElementById("icocl3").removeAttribute("data-bs-toggle"),document.querySelector(".upload-section").style.pointerEvents="none")}function saveTemplate(){try{if(1!=validateDataSearchWiz())return showAlertDialog("warning",appGlobalVarsObject.lcm[108]),void $("#mSelectLeft").trigger("focus");impTempObj=_objectSpread(_objectSpread({},impTempObj),{},{tid:"ad_it",regex:/^[0-9a-zA-Z\_]+$/,modalHTML:'<div class="mb-3">\n                    <label for="impTemplateName" class="form-label col-form-label required">Template Name</label>\n                    <input type="text" class="form-control" id="impTemplateName" placeholder="Template Name">\n                </div>\n                <div class="mb-3">\n                    <label for="impTemplateCaption" class="form-label col-form-label required">Template Caption</label>\n                    <input type="text" class="form-control" id="impTemplateCaption" placeholder="Template Caption">\n                </div>'});var e=new BSModal("ImportTemplate","Import Template",impTempObj.modalHTML,function(e){if(""!=$("#ddlImpTemplate").val()&&"NA"!=$("#ddlImpTemplate").val()){var t=$("#ddlImpTemplate").select2("data")[0].text,a=$("#ddlImpTemplate").select2("data")[0].id;$("#impTemplateCaption").val(t).trigger("focus"),$("#impTemplateName").val(a).prop("disabled",!0)}else $("#impTemplateName").trigger("focus")},function(e){});e.changeSize("sm"),e.verticallyCentered(),e.hideHeader(),e.showFloatingClose(),e.cancelBtn.classList.add("btn-sm"),e.okBtn.classList.add("btn-sm"),e.okBtn.addEventListener("click",function(e){try{impTempObj.flds={cols:["stransid","templatename","templatecap","impfields","recordid","dataupd","fldpkey"],vals:[]},impTempObj.flds.vals.push($("#hdnTransid").val()||""),impTempObj.flds.vals.push($("#impTemplateName").val()||""),impTempObj.flds.vals.push($("#impTemplateCaption").val()||"");var t=$("#hdnColNames").val()||"";if(""!=t&&(t=t.replace(/^\s+|\s+$/gm,"").replaceAll("\n","").replace(/,\s+/g,",")),impTempObj.flds.vals.push(t||""),""==impTempObj.flds.vals[1]&&showAlertDialog("warning","Template Name cannot be empty!"),""==impTempObj.flds.vals[2]&&showAlertDialog("warning","Template Caption cannot be empty!"),$("#dataupdatecheck").is(":checked")?(impTempObj.flds.vals[5]="T",impTempObj.flds.vals[6]=$("#tstFlds").val()):(impTempObj.flds.vals[5]="F",impTempObj.flds.vals[6]=""),""!=impTempObj.flds.vals[1]&&""!=impTempObj.flds.vals[2])if(impTempObj.regex.test(impTempObj.flds.vals[1])){var a,l;$.each(impTempObj.flds.cols,function(e,t){"recordid"!=t&&AxSetValue(impTempObj.tid,t,1,0,impTempObj.flds.vals[e])});var o=("undefined"!=typeof impTempObj.selected?null===(a=impTempObj)||void 0===a?void 0:null===(l=a.selected[0])||void 0===l?void 0:l.axpdef_impdata_templatesid:"0")||"0",n=AxSubmitData(impTempObj.tid,o);if(impTempObj.flds.vals.push(AssignLoadValues(n)),""!=impTempObj.flds.vals[4]){var r=$("#ddlImpTemplate option:not(:first)");0!=r.length&&($.each(r,function(e,t){t.value==impTempObj.flds.vals[1]&&$("#ddlImpTemplate option[value='".concat(t.value,"']")).remove()}),impTempObj.sqlRes=impTempObj.sqlRes.filter(function(e){return e.templatename!==impTempObj.flds.vals[1]})),impTempObj.selected=[{axpdef_impdata_templatesid:impTempObj.flds.vals[4],templatename:impTempObj.flds.vals[1],templatecap:impTempObj.flds.vals[2],impfields:impTempObj.flds.vals[3]}],impTempObj.sqlRes.push({axpdef_impdata_templatesid:impTempObj.flds.vals[4],templatename:impTempObj.flds.vals[1],templatecap:impTempObj.flds.vals[2],impfields:impTempObj.flds.vals[3]}),$("#ddlImpTemplate").append(new Option(impTempObj.flds.vals[2],impTempObj.flds.vals[1],!0,!0)).trigger("change"),$("#btnContinue").trigger("click")}}else showAlertDialog("error","Invalid Template Name!")}catch(i){showAlertDialog("error",i.message)}})}catch(t){return showAlertDialog("warning",appGlobalVarsObject.lcm[108]),void $("#mSelectLeft").trigger("focus")}}function importHistory(){ShowDimmer(!0);var e={modalHTML:'<iframe id="impHistoryFrame" src="../aspx/ivtoivload.aspx?ivname=ad_implg&ptransid='.concat($("#hdnTransid").val(),'" scrolling="no" class="w-100 h-100 h-md-400px"></iframe>')},t=new BSModal("ImportHistory","Import History",e.modalHTML,function(e){try{var t=0,a=setInterval(function(){var e,l,o,n;10==++t&&(clearInterval(a),ShowDimmer(!1));var r=null===(e=document.getElementById("impHistoryFrame"))||void 0===e?void 0:null===(l=e.contentWindow)||void 0===l?void 0:null===(o=l.document)||void 0===o?void 0:null===(n=o.getElementsByClassName("iframeScrollFix")[0])||void 0===n?void 0:n.getElementsByTagName("body");void 0!==r&&r.length>0&&(clearInterval(a),ShowDimmer(!1))},1e3)}catch(l){clearInterval(a),ShowDimmer(!1)}},function(e){});t.changeSize("xl"),t.hideHeader(),t.hideFooter(),t.showFloatingClose(),t.okBtn.classList.add("btn-sm"),t.cancelBtn.classList.add("btn-sm")}function AssignLoadValues(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",a="",l=e.split("*$*"),o=0;o<l.length;o++){var n=l[o].toString().replace(new RegExp("\\n","g"),"");try{var r=$j.parseJSON(n)}catch(i){continue}r.error?ExecErrorMsg(r.error,t):r.message&&(a=ExecMessage(r.message,t))}return a}function ExecMessage(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",a="",l="0",o=0;o<e.length;o++){var n=e[o].msg;if(n.indexOf("recordid")>-1){var r=n.split(",");n="";for(var i=0;i<r.length;i++)-1==r[i].indexOf("recordid=")?i==r.length-1?n+=r[i]:n+=r[i]+",":-1!=r[i].indexOf("recordid=")&&(l=r[i].split("=")[1])}n.indexOf("errfld")>-1&&(n=n.substring(0,n.lastIndexOf("errfld")-2));for(var d=(n=n.split(",")).length,s="",c=0;c<d;c++){var p=(s+=n[c]+",").indexOf("["),m=s.indexOf("]");if(""!=s.substring(p+1,m)){var u=s.substring(p,m+2);s=s.replace(u,""),a="error"}for(var f=s.indexOf("^^dq");-1!=f;)f=(s=s.replace("^^dq",'"')).indexOf("^^dq")}if(""!=s){if("Action"==t&&s.indexOf("recordid")>0&&(s=s.substr(0,s.indexOf("recordid"))),"Action"!=t&&"Iview"!=t||-1==s.indexOf("`"))a=-1!=s.toLowerCase().indexOf("invalid")||-1!=s.indexOf("cannot be left empty")?"error":-1!=s.toLowerCase().indexOf("is completed")||-1!=s.toLowerCase().indexOf("saved successfully")?"success":"info";else{var v=s.split("`")[0].toLowerCase();v.indexOf(",")>-1&&(v=v.split(",")[1]),"simple"==v||""==v?a="info":"warning"==v?a="warning":"confirmation"==v?a="success":"exceptions"==v&&(a="error"),s=s.split("`")[1].slice(0,-1)}-1!=s.indexOf("cannot be left empty")&&(s=s.replace("cannot be left empty",appGlobalVarsObject.lcm[45])),showAlertDialog(a,s)}}return l}function ExecErrorMsg(e){arguments.length>1&&arguments[1]!==undefined&&arguments[1];for(var t=0;t<e.length;t++){var a=e[t].msg;e[t].errfld&&e[t].errfld;for(var l=a.indexOf("^^dq");-1!=l;)l=(a=a.replace("^^dq",'"')).indexOf("^^dq");null!=a&&a!=undefined&&""!=a&&(a.indexOf("errfld")>-1&&(a=(a=a.substring(0,a.lastIndexOf("errfld")-2)).replace('",',"").replace('" ,',"")),showAlertDialog("error",a))}}function deleteTemplate(){try{var e=$("#ddlImpTemplate").val();if(null!=e&&""!=e&&"NA"!=e)var t="ar"==callParentNew("gllangType"),a=$.confirm({theme:"modern",title:appGlobalVarsObject.lcm[155],onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",rtl:t,content:"Do you want to delete ".concat($("#ddlImpTemplate").select2("data")[0].text," Template?"),buttons:{buttonA:{text:appGlobalVarsObject.lcm[164],btnClass:"btn btn-primary",action:function(){delConfirmCB(e),a.close(),disableBackDrop("destroy")}},buttonB:{text:appGlobalVarsObject.lcm[192],btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){a.close(),disableBackDrop("destroy")}}}});else showAlertDialog("warning","Please select a template to delete")}catch(l){showAlertDialog("error",l.message)}}function delConfirmCB(e){try{$.ajax({url:"Importnew.aspx/deleteTemplate",type:"POST",cache:!1,async:!1,data:JSON.stringify({transid:$("#hdnTransid").val(),tempname:e}),dataType:"json",contentType:"application/json",success:function(t){"done"==t.d?(impTempObj.sqlRes=impTempObj.sqlRes.filter(function(t){return t.templatename!==e}),$("#ddlImpTemplate option[value='".concat(e,"']")).remove(),$("#ddlImpTemplate").val("NA").trigger("select2:select"),showAlertDialog("success","Template deleted successfully")):showAlertDialog("error","Error occurred while deleting the template")},error:function(e){showAlertDialog("error","Error occurred while deleting the template")}})}catch(t){showAlertDialog("error",t.message)}}function impFldsReOrder(){try{var e={preOrdOpts:$("#mSelectRight option")};if(e.preOrdOpts.length>1){e.isOrdered=!1,e.li="",$.each(e.preOrdOpts,function(t,a){e.li+='<li class="d-flex list-group-item ui-state-default ui-sortable-handle" data-optval="'.concat(a.attributes.value.value,'" data-optmand="').concat(a.attributes.mandatory.value,'" data-opttext="').concat(a.text,'">\n                    <span class="material-icons dragIcon cursor-drag my-auto">drag_indicator</span>                \n                    <label class="form-label fw-boldest my-2">\n                        <span class="dragName">').concat(a.text,"</span>\n                    </label>\n                </li> ")}),e.Html='<div class="impFldsReOrdWrapper h-450px min-h-sm-100px">\n                <ul class="card list-group ui-sortable">\n                    '.concat(e.li,"\n                </ul>\n            </div>");var t=new BSModal("ImportReOrder","Import Re-Order",e.Html,function(t){$(".impFldsReOrdWrapper > .list-group").sortable({cursor:"move",update:function(t,a){e.isOrdered=!0}})},function(e){});t.hideHeader(),t.scrollableDialog(),t.modalFooter.classList.add("py-2"),t.cancelBtn.classList.add("btn-sm"),t.okBtn.classList.add("btn-sm"),t.okBtn.innerText="Re-Order",t.okBtn.removeAttribute("data-bs-dismiss"),t.okBtn.addEventListener("click",function(t){try{e.isOrdered?(e.postOrdOpts=$(".impFldsReOrdWrapper > .list-group > .list-group-item").map(function(e,t){return{ordno:e+1,liOpt:{val:$(t).data("optval"),mandatory:$(t).data("optmand"),text:$(t).data("opttext")}}}).toArray(),$("#mSelectRight option").remove(),$.each(e.postOrdOpts,function(e,t){$("#mSelectRight").append($("<option>",{value:t.liOpt.val,text:t.liOpt.text,mandatory:t.liOpt.mandatory}))}),showAlertDialog("success","Reorder successful"),callParentNew("ImportReOrder","id").dispatchEvent(new CustomEvent("close"))):showAlertDialog("warning","Please reorder the fields")}catch(a){showAlertDialog("error",a.message)}})}else 1==e.preOrdOpts.length?showAlertDialog("warning","Not enough options to reorder."):showAlertDialog("warning","No options to reorder.")}catch(a){showAlertDialog("error",a.message)}}function GetTemplates(){try{impTempObj.sqlRes=[],$.ajax({url:"Importnew.aspx/GetTemplates",type:"POST",cache:!1,async:!1,data:JSON.stringify({transid:$("#hdnTransid").val()}),dataType:"json",contentType:"application/json",success:function(e){e&&""!=e.d?(e=JSON.parse(e.d)).result&&e.result.row&&(e.result.row.forEach(function(e){var t={};$.map(e,function(e,a){t[a.toLowerCase()]=e}),impTempObj.sqlRes.push(t)}),e.result.row.length>0?impTempObj.ddList=Array.from(new Set([{id:"NA",text:appGlobalVarsObject.lcm[441]}].concat(_toConsumableArray($.map(impTempObj.sqlRes,function(e,t){return{id:e.templatename,text:e.templatecap}}))))):impTempObj.ddList=[{id:"NA",text:appGlobalVarsObject.lcm[441]}]):(impTempObj.ddList=[{id:"NA",text:appGlobalVarsObject.lcm[441]}],showAlertDialog("error",3028,"client"))},error:function(e){impTempObj.ddList=[{id:"NA",text:appGlobalVarsObject.lcm[441]}],showAlertDialog("error",3028,"client")}})}catch(e){impTempObj.ddList=[{id:"NA",text:appGlobalVarsObject.lcm[441]}],showAlertDialog("error",e.message)}}Dropzone.autoDiscover=!1,window.addEventListener("error",function(e){var t=e.error;console.log(t)}),$(document).ready(function(){var tstFldsArr=$("#hdnTstructflds").val().slice(0,-1).split(",");$("#tstFlds").select2({allowClear:!1,data:[{id:"",text:"--Select--"}].concat(_toConsumableArray(tstFldsArr))}).on("select2:select",function(e){try{var t,a,l=null===(t=$(e.currentTarget).data("select2"))||void 0===t?void 0:null===(a=t.$element[0])||void 0===a?void 0:a.id,o=$("#".concat(l)).val(),n={fields:[]},r={field:[]};if(""!=o&&-1==o.indexOf("--Select--")){var i=o.split("(")[1].replace(")","").trim();r.field.push({val:i,text:o}),$("#mSelectLeft  option").remove(),$("#mSelectRight  option").remove(),$.each(r.field,function(e,t){$("#mSelectRight").append($("<option>",{value:t.val,text:t.text}))})}else $("#mSelectLeft  option").remove(),$("#mSelectRight  option").remove();tstFldsArr.forEach(function(e){var t=e.split("("),a=(t[0].trim(),t[1].replace(")","").trim());n.fields.push({val:a,text:e})});var d={fields:n.fields.filter(function(e){return!(e.text===r.field[0].text&&e.val===r.field[0].val)})};$.each(d.fields,function(e,t){$("#mSelectLeft").append($("<option>",{value:t.val,text:t.text}))}),updateMandatoryFieldsInTemplate()}catch(s){}}),$("#dataupdatecheck").change(function(){if($(this).is(":checked")){$("#dataupdate").removeClass("d-none"),$("#mSelectLeft  option").remove(),$("#mSelectRight  option").remove();var e={fields:[]},t={field:[]};if(""!=$("#tstFlds").val()&&-1==$("#tstFlds").val().indexOf("--Select--")){var a=$("#tstFlds").val().split("(")[1].replace(")","").trim();t.field.push({val:a,text:$("#tstFlds").val()}),tstFldsArr.forEach(function(t){var a=t.split("("),l=(a[0].trim(),a[1].replace(")","").trim());e.fields.push({val:l,text:t})});var l={fields:e.fields.filter(function(e){return!(e.text===t.field[0].text&&e.val===t.field[0].val)})};$.each(l.fields,function(e,t){$("#mSelectLeft").append($("<option>",{value:t.val,text:t.text}))}),$.each(t.field,function(e,t){$("#mSelectRight").append($("<option>",{value:t.val,text:t.text}))})}updateMandatoryFieldsInTemplate()}else{if($("#mSelectLeft  option").remove(),$("#mSelectRight  option").remove(),""!=$("#hdnMandatoryFields").val()){var o=$("#hdnMandatoryFields").val().split("\n").filter(function(e){return""!==e.trim()}).map(function(e){var t=e.indexOf("("),a=e.lastIndexOf(")");return-1!==t&&-1!==a&&a>t?e.substring(0,t)+e.substring(t,a+1):""}).join(",").split(",").map(function(e){return e.trim()}).join(",").split(",").filter(function(e){return""!==e.trim()}).map(function(e){return e.trim()}),n=$("#hdnLeftFlds").val().split(",").filter(function(e){return!o.includes(e)});t={field:[]},e={field:[]};n.forEach(function(t){var a=t.split("("),l=(a[0].trim(),a[1].replace(")","").trim());e.field.push({val:l,text:t})}),$.each(e.field,function(e,t){$("#mSelectLeft").append($("<option>",{value:t.val,text:t.text}))}),o.forEach(function(e){var a=e.split("("),l=(a[0].trim(),a[1].replace(")","").trim());t.field.push({val:l,text:e})}),$.each(t.field,function(e,t){$("#mSelectRight").append($("<option>",{value:t.val,text:t.text}))}),updateMandatoryFieldsInTemplate()}else{var r={field:[]};$("#hdnLeftFlds").val().split(",").forEach(function(e){var t=e.split("("),a=(t[0].trim(),t[1].replace(")","").trim());r.field.push({val:a,text:e})}),$.each(r.field,function(e,t){$("#mSelectLeft").append($("<option>",{value:t.val,text:t.text}))}),updateMandatoryFieldsInTemplate()}$("#dataupdate").addClass("d-none")}}),$("#ChkColNameInfile").change(function(){$(this).is(":checked")?($("#mSelectLeft option").map(function(e,t){$("#mSelectRight").append($("<option>",{value:$(this).val(),text:$(this).text()})),$(this).remove()}),$("#mSelectRight option").css({color:"#eff2f5;"}),toggleReadonly(!1)):($("#mSelectRight option").map(function(e,t){$("#mSelectLeft").append($("<option>",{value:$(this).val(),text:$(this).text()})),$(this).remove()}),toggleReadonly(!0))});var element=document.querySelector("#kt_stepper_example_clickable"),stepper=new KTStepper(element);stepper.on("kt.stepper.click",function(e){e.stepped&&e.goTo(e.getClickedStepIndex())}),stepper.on("kt.stepper.next",function(e){return 1==e.getCurrentStepIndex()?(validateDataSearchWiz(),1==validateDataSearchWiz()?(e.goNext(),$("#hdnupdateField").val($("#tstFlds").val()),void $("#btnSaveTemplate").addClass("d-none")):void 0):2==e.getCurrentStepIndex()?(validateDataUploadWiz(),1==validateDataUploadWiz()?($("#ColHeaderClick").click(),e.goNext(),void $("#btnSaveTemplate").addClass("d-none")):void 0):3==e.getCurrentStepIndex()?GetSelColData()?($(".card-footer").addClass("d-none"),$("#btnImport").click(),ShowDimmer(!0),e.goNext(),void $("#btnSaveTemplate").addClass("d-none")):void 0:4==e.getCurrentStepIndex()?($("#btnSaveTemplate").addClass("d-none"),"1"==$("#fileUploadComplete").val()):void 0}),stepper.on("kt.stepper.previous",function(e){e.goPrevious(),1==e.getCurrentStepIndex()&&$("#btnSaveTemplate").removeClass("d-none")}),$("#ddlImpTbl, #ddlSeparator, #ddlPrimaryKey").select2(),1!=$("#ddlGroupBy").prop("disabled")&&$("#ddlGroupBy").select2();try{""!=$("#hdnTransid").val()&&GetTemplates(),$("#ddlImpTemplate").select2({allowClear:!1,data:impTempObj.ddList,placeholder:appGlobalVarsObject.lcm[441]}).on("select2:select",function(e){try{var t,a,l=null===(t=$(e.currentTarget).data("select2"))||void 0===t?void 0:null===(a=t.$element[0])||void 0===a?void 0:a.id,o=$("#".concat(l)).val()||e.params.data.id;if(void 0!==o&&""!=o&&"NA"!=o){impTempObj.selected=impTempObj.sqlRes.filter(function(e){if(e.templatename==o)return e}),$("#mSelectLeft, #mSelectRight").empty();var n=$("#hdnLeftFlds").val().split(","),r=impTempObj.selected[0].impfields.split(","),i=n.filter(function(e){return!r.includes(e)});if(i.length>0&&i.forEach(function(e,t){var a=e.substring(e.indexOf("(")+1,e.length-1);$("#mSelectLeft").append('<option value="'.concat(a,'">').concat(e,"</option>"))}),r.length>0&&r.forEach(function(e,t){var a=e.substring(e.indexOf("(")+1,e.length-1);$("#mSelectRight").append('<option value="'.concat(a,'">').concat(e,"</option>"))}),""!=impTempObj.selected[0].dataupd&&"T"==impTempObj.selected[0].dataupd){$("#dataupdatecheck").prop("checked",!0),$("#dataupdate").removeClass("d-none"),$("#tstFlds").select2({allowClear:!1,data:[{id:"",text:"--Select--"}].concat(_toConsumableArray(tstFldsArr))});var d=impTempObj.selected[0].fldpkey;$("#tstFlds").val(d).trigger("change")}else $("#dataupdatecheck").prop("checked",!1),$("#dataupdate").addClass("d-none");updateMandatoryFieldsInTemplate()}else{impTempObj.selected=[],$("#mSelectLeft, #mSelectRight").empty(),$("#dataupdatecheck").prop("checked",!1),$("#dataupdate").addClass("d-none"),$("#hdnLeftFlds").val().split(",").forEach(function(e,t){$("#mSelectLeft").append('<option value="'.concat(e,'">').concat(e,"</option>"))}),updateMandatoryFieldsToSelection()}}catch(s){impTempObj.selected=[],$("#mSelectLeft, #mSelectRight").empty(),$("#dataupdatecheck").prop("checked",!1),$("#dataupdate").addClass("d-none"),showAlertDialog("error",s.message)}})}catch(error){showAlertDialog("error",error.message)}DropzoneInitImport(),$("#ChkColNameInfile").attr("checked",!1),$("#icocl1").attr("data-bs-content",eval(callParent("lcm[179]"))),$("#icocl2").attr("data-bs-content",eval(callParent("lcm[181]"))),$("#icocl3").attr("data-bs-content",eval(callParent("lcm[176]"))),$("#icocl4").attr("data-bs-content",eval(callParent("lcm[177]"))),$("#icocl5").attr("data-bs-content",eval(callParent("lcm[307]"))),$("#icocl6").attr("data-bs-content",eval(callParent("lcm[308]"))),$("#icocl7").attr("data-bs-content",eval(callParent("lcm[309]"))),placement="ar"===parent.gllangType?"left":"right",$("#lblimgroupby,#lblseparator, #icocl6, #icocl7").css("float","ar"===parent.gllangType?"right":"left"),showPopover(),$("#right_All_1").prop("title",eval(callParent("lcm[171]"))).addClass("ar"===parent.gllangType?"fa-angle-double-left":"fa-angle-double-right"),$("#right_Selected_1").prop("title",eval(callParent("lcm[172]"))).addClass("ar"===parent.gllangType?"fa-angle-left":"fa-angle-right"),$("#left_Selected_1").prop("title",eval(callParent("lcm[173]"))).addClass("ar"===parent.gllangType?"fa-angle-right":"fa-angle-left"),$("#left_All_1").prop("title",eval(callParent("lcm[174]"))).addClass("ar"===parent.gllangType?"fa-angle-double-right":"fa-angle-double-left"),$("#btnFileUpload").attr({value:eval(callParent("lcm[167]")),title:eval(callParent("lcm[167]"))}),callParentNew("closeFrame()","function"),uploadFileChangeEvent(),uploadFileClickEvent(),commonReadyTasks(),$(document).on("keydown","input[type='text'],input[type='radio'],input[type='checkbox']",function(e){13==e.keyCode&&e.preventDefault()}),createMultiselectControl(),$("#left_Selected_1").click(function(){$("#mSelectRight :selected").map(function(e,t){Boolean($(t).attr("mandatory"))||($("#mSelectLeft").append($("<option>",{value:$(this).val(),text:$(this).text()})),$(this).remove())})}),$("#right_All_1").click(function(){$("#mSelectLeft option").map(function(e,t){Boolean($(t).attr("mandatory"))||($("#mSelectRight").append($("<option>",{value:$(this).val(),text:$(this).text()})),$(this).remove())})}),$("#left_All_1").click(function(){$("#mSelectRight option").map(function(e,t){Boolean($(t).attr("mandatory"))||($("#mSelectLeft").append($("<option>",{value:$(this).val(),text:$(this).text()})),$(this).remove())})}),$("#reorder").on("click",function(e){try{impFldsReOrder()}catch(error){showAlertDialog("error",error.message)}}),$("body").on("click",function(e){$("[data-bs-toggle=popover]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}).on("hidden.bs.popover",function(e){$(e.target).popover("hide")}),$("#ddlImpTbl").change(function(){ShowDimmer(!0)}),$("#spnFileSelect").keypress(function(e){13==e.keyCode&&$("#fileToUpload").click()}),$("#fileToUpload").attr("title",eval(callParent("lcm[66]"))),$("#ddlSeparator").change(function(){$("#hdnUploadFileWarnings, #IsFileUploaded").val(""),$("#noFile").text(eval(callParent("lcm[66]"))),$("#fileToUpload").attr("title",eval(callParent("lcm[66]"))),$("#divProgress").hide(),$("[data-target='imWizardEdit']").removeClass("in-progress complete"),$("[data-target='imWizardSummary']").removeClass("in-progress complete"),$("[data-target='imWizardUpload']").addClass("in-progress").removeClass("complete")}),mandatoryColCount=$("#mSelectRight option[mandatory='true']").length,$("#hdnMandatoryColCount").val(mandatoryColCount);var mandatoryFldVal="",mandatoryFldCap="";$("#mSelectRight option[mandatory='true']").each(function(){mandatoryFldVal+=$(this).val()+",",mandatoryFldCap+=$(this).text()+","}),""!=mandatoryFldVal&&""!=mandatoryFldCap&&(mandatoryFldVal=mandatoryFldVal.substr(0,mandatoryFldVal.length-1),mandatoryFldCap=mandatoryFldCap.substr(0,mandatoryFldCap.length-1)),$("#hdnMandatoryFields").val(mandatoryFldVal+"#"+mandatoryFldCap),$("#wizardWrappper .stepName").each(function(){$(this).prop("title",$(this).text()),$(this).next().prop("title",$(this).text())});try{var _KTApp2,headerFooter=$(callParentNew("modal-header","class")).outerHeight(!0)+$(".stepper>.card-header").outerHeight(!0)+$(".stepper>.card-footer").outerHeight(!0);$(".stepper>.card-body").css("height","calc(100vh - ".concat(headerFooter,"px)")),null===(_KTApp2=KTApp)||void 0===_KTApp2||_KTApp2.initBootstrapTooltips()}catch(ex){}$(document).on("click","#excel1",function(){1==validateDataSearchWiz()&&(hdnTemplateName=$("#hdnTemplateName").val(),""==hdnTemplateName&&(hdnTemplateName=$("#ddlImpTbl :selected").text()),$("#hdnTemplateName").val(hdnTemplateName+".xlsx"),$("#btnCreateTemplate").click())}),$(document).on("click","#CSV1",function(){1==validateDataSearchWiz()&&(hdnTemplateName=$("#hdnTemplateName").val(),""==hdnTemplateName&&(hdnTemplateName=$("#ddlImpTbl :selected").text()),$("#hdnTemplateName").val(hdnTemplateName+".csv"),$("#btnCreateTemplate").click())})});var AxRulesDefScriptOnLoad="false",AxRuesDefScriptFormcontrol="false",AxRuesDefScriptFCP="false",AxAllowEmptyFlds=new Array,transid="",Parameters=new Array,AxMemParameters=new Array,AxRDFormControl=new Array,AxRDScriptOnLoad=new Array,FNames=new Array,DCFrameNo=new Array,TstructHasPop=!1,AxActiveDc="",AxFormControlList=new Array,AxOldValueOnChange="";function CheckAxRulesForImport(){var e=$("#axRuleDetails").val();if(void 0!==e&&""!=e){var t=e.split("~");AxRulesDefScriptOnLoad=t[0],AxRuesDefScriptFormcontrol=t[2];var a=$("#axRuleScript").val();""!=a&&(AxRDFormControl=a.split("♠"));var l=$("#axRuleOnSubmit").val();""!=l&&(AxRDScriptOnLoad=l.split("♠")),"true"==AxRulesDefScriptOnLoad&&AxRulesScriptsParser("scriptonload"),"true"==AxRuesDefScriptFormcontrol&&AxRulesScriptsParser("formcontrol"),AxAllowEmptyFlds.length>0&&AxRuleSetMandatory()}}function AxRulesScriptsParser(e){switch(e){case"formcontrol":$.each(AxRDFormControl,function(e,t){if(""!=t){var a=t.split("♥");EvalExprSet(a)}});break;case"scriptonload":$.each(AxRDScriptOnLoad,function(e,t){if(t){var a=t.split("♥");EvalExprSet(a)}});break;default:return!0}}function AxRuleSetMandatory(){try{$.ajax({url:"importnew.aspx/AxRuleSetMandatory",type:"POST",cache:!1,async:!1,data:JSON.stringify({AxAllowEmpty:AxAllowEmptyFlds}),dataType:"json",contentType:"application/json",success:function(e){if("done"==e.d){$("#mSelectLeft").empty(),$("#mSelectRight").empty();var t="",a=$("#hdnLeftFlds").val();""!=a&&(a.split(",").forEach(function(e){var a=e.split("(")[1].split(")")[0],l=e.split("(")[0];l=l.replace("*","");var o=AxAllowEmptyFlds.filter(function(e){return e.startsWith(a+"~")}),n=e;o.length>0&&"F"==o[0].split("~")[1]?n=l+"*("+a+")":o.length>0&&"T"==o[0].split("~")[1]&&(n=l+"("+a+")"),$("#mSelectLeft").append('<option value="'+a+'">'+n+"</option>"),""==t?t=n:t+=","+n}),setTimeout(function(){updateMandatoryFieldsToSelection()},0)),""!=t&&$("#hdnLeftFlds").val(t)}},error:function(e){}})}catch(e){}}