/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,r,l=[],o=!0,n=!1;try{for(a=a.call(e);!(o=(i=a.next()).done)&&(l.push(i.value),!t||l.length!==t);o=!0);}catch(s){n=!0,r=s}finally{try{o||null==a["return"]||a["return"]()}finally{if(n)throw r}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){n=!0,l=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(n)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var isMozilla,objDiv=null,originalDivHTML="",DivID="",over=!1,addHeader="",fillGridDatatbl="",shouldFaceUser=!1,flipCamera=!1,gridDummyRows=!1,gridDummyRowVal=new Array,AxpGridForm="popup",fldmultiSelectdep=!1,depNotBoundFld="",axplatlongFldName="",axpfilepathold="",axpScanBarFldFocus="",axpScriptaddrowres="",axpScriptIsAddrow=!0,dcLayoutType="default",isDcLayoutSelected=!1,formLabelJSON=[],buttonFieldFontJSON=[],regVarFldExp=new Array,select2EventType="",select2IsOpened=!1,select2IsFocused=!1,setDesProp={},forceRowedit=!1,isGridFileUploadOnLoad=!1,wizardHidenDcNos=[],gridRowEditOnLoad=!1,AxRulesDefValidation="false",AxRulesDefFilter="false",AxRuesDefFormcontrol="false",AxRulesDefComputescript="false",AxRulesDefAllowdup="false",AxRulesDefAllowEmpty="false",AxRulesDefIsAppli="false",AxRulesDefScriptOnLoad="false",AxRulesDefOnSubmit="false",AxRuesDefScriptFormcontrol="false",AxRuesDefScriptFCP="false",AxpDcstateVal="",AxAllowEmptyFlds=new Array,isScriptFormLoad="false",callGetTab=!1,AxFldExpOnAddRow="",AxpFillDepFieldsClient="",AxFldBlured="",AxFldBlurFromSelect="",AxDoPegApprovalSave="",AxPegFinalApproval="false",AxAmendmentReadOnly="false",isAddRowWsCalled="false",isExcelImpDelWS="false",isPegApproveConfirm="",AxPegLevelNo="",AxSetFldCaption=new Array,AxDiscardNxtPrevFc=new Array,dynamicMobileResolution=function(){$(".grid-stack").hasClass("dynamicRunMode")&&((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=renderGridOptions.minWidth?$(".grid-stack").addClass("grid-stack-one-column-mode"):0==$(".tileLayoutDiv").length&&$(".grid-stack").removeClass("grid-stack-one-column-mode"))};function GenTstHtmlLocalStorage(){try{var e,t,a,i,r,l=window.frameElement.id;if("middle1"==l&&(window.frameElement.src.indexOf("ivtstload.aspx")>-1?callParentNew("lastLoadtstId=","fromiview"):callParentNew("lastLoadtstId=",window.frameElement.contentWindow.jQuery("#form1").attr("action"))),null===(e=callParentNew("updateAppLinkObj"))||void 0===e||e(window.frameElement.src,0,"axpiframe"==(null===(t=window)||void 0===t?void 0:null===(a=t.frameElement)||void 0===a?void 0:a.id),_objectSpread({},null===(i=window)||void 0===i?void 0:null===(r=i.frameElement)||void 0===r?void 0:r.dataset)),"middle1"==l)if(""!=recordid&&"0"!=recordid&&0==$(".tstructMainBottomFooter .tstructBottomLeftButton").length&&0==loadRecordFromSearch)if(void 0!==AxDiscardNxtPrevFc&&AxDiscardNxtPrevFc.length>0){var o=AxDiscardNxtPrevFc.filter(function(e){return e.toLowerCase().startsWith("lnkprev~".toLowerCase())&&e.slice("lnkprev~".length).toLowerCase()===e.slice("lnkprev~".length)}),n="";if(void 0!==o&&o.length>0)"hide"==o[0].split("~")[1]&&(n="d-none");var s=AxDiscardNxtPrevFc.filter(function(e){return e.toLowerCase().startsWith("lnknext~".toLowerCase())&&e.slice("lnknext~".length).toLowerCase()===e.slice("lnknext~".length)}),d="";if(void 0!==s&&s.length>0)"hide"==s[0].split("~")[1]&&(d="d-none");$(".tstructMainBottomFooter div:eq(0)").prepend('<div class="text-dark tstructBottomLeftButton d-flex align-items-center">\n    <a class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 lnkPrev '.concat(n,'" id="lnkPrev" href="javascript:void(0)" onclick="lnkPrevClick();" title="Previous Transction"><span class="material-icons material-icons-style">chevron_left</span></a>\n    <a class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 lnkNext ').concat(d,'" id="lnkNext" href="javascript:void(0)" onclick="lnkNextClick();" title="Next Transaction"><span class="material-icons material-icons-style">chevron_right</span></a>\n</div>'))}else $(".tstructMainBottomFooter div:eq(0)").prepend('<div class="text-dark tstructBottomLeftButton d-flex align-items-center">\n    <a class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 lnkPrev" id="lnkPrev" href="javascript:void(0)" onclick="lnkPrevClick();" title="Previous Transction"><span class="material-icons material-icons-style">chevron_left</span></a>\n    <a class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 lnkNext" id="lnkNext" href="javascript:void(0)" onclick="lnkNextClick();" title="Next Transaction"><span class="material-icons material-icons-style">chevron_right</span></a>\n</div>');else if("0"==recordid&&$(".tstructMainBottomFooter .tstructBottomLeftButton").length>0)$(".tstructMainBottomFooter .tstructBottomLeftButton").remove();else if($(".tstructMainBottomFooter .tstructBottomLeftButton").length>0&&void 0!==AxDiscardNxtPrevFc&&AxDiscardNxtPrevFc.length>0){var c=AxDiscardNxtPrevFc.filter(function(e){return e.toLowerCase().startsWith("lnkprev~".toLowerCase())&&e.slice("lnkprev~".length).toLowerCase()===e.slice("lnkprev~".length)}),p="";if(void 0!==c&&c.length>0)"hide"==c[0].split("~")[1]&&(p="d-none");$(".tstructMainBottomFooter #lnkPrev").addClass(p);var u=AxDiscardNxtPrevFc.filter(function(e){return e.toLowerCase().startsWith("lnknext~".toLowerCase())&&e.slice("lnknext~".length).toLowerCase()===e.slice("lnknext~".length)}),f="";if(void 0!==u&&u.length>0)"hide"==u[0].split("~")[1]&&(f="d-none");$(".tstructMainBottomFooter #lnkNext").addClass(f)}if("middle1"!=l&&$("#btnClearCacheReloadForm").addClass("d-none"),loadRecordFromSearch=!1,void 0!==AxDiscardNxtPrevFc&&AxDiscardNxtPrevFc.length>0){var m=AxDiscardNxtPrevFc.filter(function(e){return e.toLowerCase().startsWith("discard~".toLowerCase())&&e.slice("discard~".length).toLowerCase()===e.slice("discard~".length)});if(void 0!==m&&m.length>0)"hide"!=m[0].split("~")[1]&&hideDiscardButton();else hideDiscardButton()}else hideDiscardButton();if("true"==isServerSide&&"middle1"==l){try{var h=!1;for(var v in CKEDITOR.instances)if(CKEDITOR.instances.hasOwnProperty(v)){h=!0;break}if(h)return void setTimeout(function(){setTimeout(function(){StoreTstHmtlLoad()},100)},0)}catch(g){}StoreTstHmtlLoad()}else isServerSide="false",$("#hdnTstHtmLs").val("")}catch(g){}}function StoreTstHmtlLoad(){callParentNew("SetTstFrame()","function");try{callParentNew("isdummyLoad=","");var e=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")),t=$("#hdnTstHtmLs").val();t+="♦♠♣♥"+$(".subres").html(),$("#hdnTstHtmLs").val("");var a=(new XMLSerializer).serializeToString(callParentNew("originalContent"))+"♠♠♠"+t;try{var i=callParentNew("getKeysWithPrefix(tstHtml♠"+transid+"-"+e+"♥)","function");if(i.length>0){var r,l=_createForOfIteratorHelper(i);try{for(l.s();!(r=l.n()).done;){var o=r.value;localStorage.removeItem(o)}}catch(h){l.e(h)}finally{l.f()}}var n=(new Date).getTime();localStorage.setItem("tstHtml♠"+transid+"-"+e+"♥"+n,a),StoreLsTstHtml(transid,a)}catch(v){if(v.message.indexOf("exceeded the quota")>-1){var s=JSON.stringify(a),d=new Blob([s]).size,c=callParentNew("getKeysWithPrefix(tstHtml♠)","function");if(c.length>0){var p,u=_createForOfIteratorHelper(c.filter(function(e){return e.split("♥")[1]}).sort(function(e,t){return parseInt(e.split("♥")[1],10)-parseInt(t.split("♥")[1],10)}));try{for(u.s();!(p=u.n()).done;){var f=p.value;if(localStorage.removeItem(f),10485760-getUsedLocalStorageSpace()>d)break}}catch(h){u.e(h)}finally{u.f()}try{var m=(new Date).getTime();localStorage.setItem("tstHtml♠"+transid+"-"+e+"♥"+m,a),StoreLsTstHtml(transid,a)}catch(v){}}}}callParentNew("originalContent=",""),0==callParentNew("originaltrIds").filter(function(e){return e==transid}).length&&callParentNew("originaltrIds").push(transid),isServerSide="false"}catch(v){}}function StoreLsTstHtml(e,t){try{$.ajax({url:"tstruct.aspx/StoreLsTstHtml",type:"POST",cache:!1,async:!0,data:JSON.stringify({_transid:e,_tstHtml:t}),dataType:"json",contentType:"application/json",success:function(e){},error:function(e){}})}catch(a){}}function getUsedLocalStorageSpace(){var e=0;for(var t in localStorage)localStorage.hasOwnProperty(t)&&(e+=2*(t.length+localStorage[t].length));return e}function swicthCompressMode(e){if(appGlobalVarsObject._CONSTANTS.compressedMode)if(void 0!==e&&""!=e)$(".compressedModeUI .inline-edit").each(function(e,t){$(t).find(".form-check-input").removeClass("h-40px w-40px"),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm"),$(t).find(".edit-mode-content").addClass("input-group-sm"),$(t).find(".edit-mode-content .input-group").addClass("input-group-sm"),$(t).find(".edit-mode-content .fldmultiSelect").addClass("py-0"),$(t).find(".edit-mode-content .select2-selection__choice").addClass("py-1 my-0")}),$(".compressedModeUI table.customSetupTableMN tr textarea:not([data-txt-area]),.compressedModeUI  table.customSetupTableMN tr label").addClass("py-0 min-h-25px h-25px"),$(".compressedModeUI table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),$(".compressedModeUI table.customSetupTableMN").addClass("table-sm"),$(".compressedModeUI .dvdcframe .gridIconBtns a").addClass("btn-sm"),$(".compressedModeUI table.customSetupTableMN .form-check").addClass("py-0");else{if($(".compressedModeUI .input-group").each(function(e,t){$(t).addClass("input-group-sm"),$(t).find(".form-check-input").removeClass("h-40px w-40px"),"undefined"!=typeof AxEnableCheckbox&&"true"==AxEnableCheckbox&&($(t).find(".form-check-input").parents(".input-group").addClass("flex-shrink-1"),$(t).find(".form-check-input").parents(".input-group").css("flex-basis","content")),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm"),$(t).find(".form-check-input").parents(".agform").addClass("d-flex"),void 0!==dcLayoutType&&""!=dcLayoutType&&"default"!=dcLayoutType||$(t).find(".radiohori,.radiovert").parents(".agform").addClass("flex-column"),staticRunMode||$(t).find(".form-check-input").parents(".grid-stack-item").addClass("d-flex")}),$(".compressedModeUI .inline-edit").each(function(e,t){$(t).find(".form-check-input").removeClass("h-40px w-40px"),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm")}),$(".compressedModeUI table.customSetupTableMN tr textarea:not([data-txt-area]),.compressedModeUI  table.customSetupTableMN tr label").addClass("py-0 min-h-25px h-25px"),$(".compressedModeUI table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),void 0===dcLayoutType||""==dcLayoutType||"default"==dcLayoutType);else{var t=parseInt(designObj[0].fieldCaptionWidth);t=12-(t/=10),$(".compressedModeUI .input-group").parent().hasClass("layoutAdded")||$(".compressedModeUI .input-group").wrap("<div class='col-sm-".concat(t," layoutAdded'></div>")),$(".upload-button").addClass("mt-4"),$(".fldImageCamera").removeClass("mt-n4").addClass("mt-0"),staticRunMode||$(".colFldGridStackWidth").addClass("mb-3")}$(".compressedModeUI .agform").addClass("px-1"),$(".compressedModeUI table.customSetupTableMN").addClass("table-sm"),$(".compressedModeUI .toolbarRightMenu a,.compressedModeUI .toolbarRightMenu button").addClass("btn-sm"),$(".compressedModeUI .toolbarRightMenu a span,.compressedModeUI .toolbarRightMenu button span").addClass("material-icons-2"),$(".compressedModeUI .BottomToolbarBar a").addClass("btn-sm"),$(".compressedModeUI .BottomToolbarBar a span").addClass("material-icons-style material-icons-2"),$(".compressedModeUI .tstructBottomLeftButton a span").addClass("material-icons-style material-icons-2"),$(".compressedModeUI .tstructBottomLeftButton .btn").addClass("btn-sm"),$(".compressedModeUI textarea.CodeMirrorApplied").parent().addClass("overflow-auto")}else{if($(".content table.customSetupTableMN tr:not(.inline-edit) textarea:not([data-txt-area]),.content  table.customSetupTableMN tr:not(.inline-edit) label").addClass("py-2 min-h-30px h-30px"),$(".content table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),$(".content table.customSetupTableMN").removeClass("table-sm"),$(".content .dvdcframe .gridIconBtns a").addClass("btn-sm"),$(".btn.btn-icon").addClass("btn-sm").find(".material-icons").addClass("material-icons-style material-icons-2"),$(".content table.customSetupTableMN .form-check").addClass("py-2"),$(".content .dropzone").parent(".form-control").removeClass("p-0").addClass("p-1 rounded-1"),$(".content [id^=DivFrame] .form-switch .form-check-input").removeClass("w-40px").addClass("w-50px"),$(".content .form-check-input").parents(".agform").addClass("d-flex"),$("textarea.memofam.gridstackCalc").parent().addClass("flex-root overflow-auto").parents(".agform").addClass("d-flex flex-column"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parents(".agform").addClass("d-flex flex-column"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parent().addClass("flex-root overflow-auto"),$(".content textarea.CodeMirrorApplied").parent().addClass("overflow-auto"),void 0!==dcLayoutType&&""!=dcLayoutType&&"default"!=dcLayoutType||$(".content .radiohori,.content .radiovert").parents(".agform").addClass("flex-column"),staticRunMode||$(".content .form-check-input").parents(".grid-stack-item").addClass("d-flex"),void 0!==dcLayoutType&&("single"==dcLayoutType||"double"==dcLayoutType||"triple"==dcLayoutType)){var a=parseInt(designObj[0].fieldCaptionWidth);a=12-(a/=10),$(".content .input-group").parent().hasClass("layoutAdded")||$(".content .input-group").wrap("<div class='col-sm-".concat(a," layoutAdded'></div>")),$(".upload-button").addClass("mt-4"),$(".fldImageCamera").removeClass("mt-n4").addClass("mt-0"),staticRunMode||$(".colFldGridStackWidth").addClass("mb-3")}$("textarea.select2-search__field").addClass("cursor-pointer")}if(staticRunMode&&$(".fld-wrap3").addClass("text-truncate"),void 0===dcLayoutType||""==dcLayoutType||"default"==dcLayoutType?$(".imageFileUpload").parents().find(".flex-root").parent().addClass("d-flex flex-column"):$(".imageFileUpload").parents().find(".flex-root").parent().addClass("d-flex"),isMobile){$(".tstructMainBottomFooter").removeClass("content p-1 pt-0").addClass("bg-white p-0 shadow-sm scroll-x");$.each(["Prev","Next"],function(e,t){$(".tstructBottomLeftButton .lnk".concat(t)).removeClass("shadow-sm").addClass("flex-column"),0==$(".tstructBottomLeftButton .lnk".concat(t," > .lnkText")).length&&$(".tstructBottomLeftButton .lnk".concat(t)).append('<span class="lnkText">'.concat(t,"</span>")),$(".tstructBottomLeftButton .lnk".concat(t," > span.material-icons")).addClass("material-icons-2qx mx-auto")}),$(".BottomToolbarBar").addClass("d-flex"),$(".BottomToolbarBar .dwbIvBtnbtm").removeClass("shadow-sm").addClass("flex-column"),$(".BottomToolbarBar .dwbIvBtnbtm > span.material-icons").addClass("material-icons-2x mx-auto"),$(".BottomToolbarBar .dwbIvBtnbtm#ftbtn_iSave").addClass("btn-light-primary")}"form"==AxpGridForm&&$(".divBarQrScan").parent().addClass("input-group"),rtfCkeditorAlignment()}function getlatlongitude(){try{var e=getRedisString("hybridinfo",callParentNew("hybridGUID"));if(""!=e){var t=JSON.parse(e);e=t.location.coords.latitude+","+t.location.coords.longitude;var a=axplatlongFldName+"000F"+GetDcNo(axplatlongFldName);SetFieldValue(a,e),UpdateFieldArray(a,"000",e,"parent"),""==e?(AdditionalRunTimeMsg("Geo LocationInfoAPI: LocationInfoAPI called forcelly."),callParentNew("LocationInfoAPI(true)","function")):AdditionalRunTimeMsg("Geo LocationInfoAPI: "+a+":"+e)}else AdditionalRunTimeMsg("Geo LocationInfoAPI: LocationInfoAPI called forcelly.."),callParentNew("LocationInfoAPI(true)","function")}catch(i){}}function pinItemToTaskbar(e){var t=$(e).clone();if(t.find("a > i").remove(),t.hasClass("dropdown-submenu")){if(t.removeClass("dropdown-submenu"),t.children("a").append('<span class="icon-arrows-down"></span>'),"filterWrapper"==t.attr("id")||"modern"!=AxpTstButtonStyle&&"ivirCButtonsWrapper"==t.attr("id")?t.find("ul").hasClass("dropdown-menu")&&t.find("ul").removeClass("dropdown-menu"):(t.addClass("dropdown"),t.find("ul").removeAttr("style"),t.find("a#tasks")&&t.find("li").addClass("liTaskItems")),"ivirCButtonsWrapper"==t.attr("id")){var a=t.find("ul  a:not(.active):eq(0)");$(a).find(".customIcon").removeClass("customIcon"),$(a).html($(a).html().replace($(a).text(),"")),t.html(a.clone())}}else t.addClass("actionWrapper");t.removeClass("waves-effect").removeClass("waves-block"),t.attr("id")&&t.attr("id","pinned"+t.attr("id")),$.each(t.find("*"),function(e,t){$(t).attr("id")&&$(t).attr("id","pinned"+$(t).attr("id"))}),$("#pinnediconsUl").append(t),setPinedIconContainerWidth()}function setPinedIconContainerWidth(){var e=$("#breadcrumb").outerWidth(!0)+$(".toolbarRightMenu").outerWidth(!0)+50;"undefined"!=typeof isAxpertPopup&&isAxpertPopup&&(e+=35),$(".modernButtonOptions #pinnedsearchBar").css({width:"calc(100vw - ".concat(e,"px)"),"max-width":"calc(100vw - ".concat(e,"px)")});var t=$("#pinnediconsUl").outerWidth(!0),a=0;$("ul#pinnediconsUl").children("li").each(function(){if((a+=$(this).outerWidth(!0))>t)return $(this).hide(),$(this).nextAll().hide(),!1;$(this).show(),$(this).nextAll().show()})}function hideacoptions(){isMobile&&($(".autoClickddl").parent(".edit").removeAttr("style"),$(".autoinputtxtclear").hide(),$(".virtualKeyboard").hide())}function getLocation(){var e={};if(findGetParameter("recordid")>0)e.latitude=$("#latitude000F"+GetDcNo("latitude")).val()||0,e.longitude=$("#longitude000F"+GetDcNo("longitude")).val()||0;else try{var t=callParentNew("ok");t&&(e=JSON.parse(t.getAndroidLocation()))}catch(a){}return($.isEmptyObject(e)||0==e.latitude||0==e.longitude)&&navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):showPosition({coords:{latitude:e.latitude,longitude:e.longitude}})}function showPosition(e){var t="",a="";if(e&&e.coords&&0!=e.coords.latitude&&0!=e.coords.latitude&&!IsGridField("latitude")&&!IsGridField("longitude")){var i=GetDcNo("latitude"),r=GetDcNo("longitude");t="latitude000F"+i,a="longitude000F"+r,""==$("#"+t).val()&&($("#"+t).val(e.coords.latitude),UpdateFieldArray(t,"000",$("#"+t).val(),"parent"),UpdateAllFieldValues(t,$("#"+t).val())),""==$("#"+a).val()&&($("#"+a).val(e.coords.longitude),UpdateFieldArray(a,"000",$("#"+a).val(),"parent"),UpdateAllFieldValues(a,$("#"+a).val()));var l=callParentNew("googleMapsApiKey"),o={css:[],js:["https://maps.googleapis.com/maps/api/js?key=".concat(callParentNew("googleMapsApiKey"))]};-1!=$.inArray("latlongmap",FNames)&&l&&loadAndCall({files:o,callBack:function(){if(google){var e=GetDcNo("latlongmap"),i=$("#"+("latlongmap000F"+e)),r=center={lat:parseFloat($("#"+t).val()),lng:parseFloat($("#"+a).val())};(new google.maps.Geocoder).geocode({location:r},function(e,t){if("OK"===t&&e[0]&&(i.val(e[0].formatted_address).trigger("blur"),i.is("textarea"))){var a=new google.maps.Map(i.hide().before('<div class="'.concat(i.attr("class"),' style="').concat(i.attr("style"),'"></div>')).prev()[0],{zoom:11,center:center}),l=new google.maps.InfoWindow;googleMapsZoom&&a.setZoom(+googleMapsZoom);var o=new google.maps.Marker({position:r,map:a});l.setContent(e[0].formatted_address),l.open(a,o)}})}}})}return""!=$("#".concat(t)).val()&&""!=$("#".concat(a)).val()}function AxpFileFields(){"undefined"!=typeof AxpFileUploadFields&&AxpFileUploadFields.length>0?callParentNew("tstAxpFileFlds=",!0):callParentNew("tstAxpFileFlds=",!1)}function SetFieldSetCarryValue(){"0"!=recordid||"Save"!=AxActiveAction&&"New"!=AxActiveAction||("undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var a=e+"000F"+t;$.each(SetCarryFlds,function(e,i){if(i.split("♠")[0]==a){SetFieldValue(a,i.split("♠")[1]);var r=GetFieldsRowNo(a),l=GetDbRowNo(r,t);UpdateFieldArray(a,l,i.split("♠")[1],"parent","AutoComplete")}})}}),SetCarryFlds=new Array)}function GetFldSetCarryValue(){try{SetCarryFlds.length>0&&(SetCarryFlds=new Array),"undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var a=e+"000F"+t;SetCarryFlds.push(a+"♠"+$("#"+a).val())}})}catch(e){}}function OnMobileNewTst(){$("#wizardTstructWrapper wizardWrapper").remove(),$.each(DCIsGrid,function(e,t){"True"===t&&$("#wrapperForEditFields"+(e+1)+" .btnMobile").remove()})}function checkIfFormChanges(){return $(".grid-stack ").hasClass("dirty")?isFormChange=!0:isFormChange=!1,isFormChange}function SetAutoCompAccess(e,t){try{t==undefined?$j("input.fldFromSelect:disabled").parent().find("i").css("display","none"):"enabled"==e?t.parent().find("i").css("display","inline-block"):t.parent().find("i").css("display","none")}catch(a){console.log("SetAutoCompAccess-action"+e+"-msg"+a.message)}}function makeFieldInitCap(e){var t=GetFldNamesIndx("axp_initcap"),a="";if(-1!=t&&(GetExpressionType("axp_initcap",t),a=Expressions[t].toString()),""!=a){a=a.split(",");for(var i=0;i<a.length;i++)e?$("#DivFrame"+e).find('input[id*="'+a[i]+'"]').length>0&&$("#DivFrame"+e).find('input[id*="'+a[i]+'"]').addClass("initCapField"):$("input[id^='"+a[i]+"']").length>0&&$("input[id^='"+a[i]+"']").addClass("initCapField")}}function BeforeWindowClose(){"undefined"!=typeof FNames&&FNames.filter(function(e){return e.toLowerCase().startsWith("axp_weight_")}).length>0&&appGlobalVarsObject._CONSTANTS.isHybrid&&closeWeightScalePort(),draftTimer&&window.clearInterval(draftTimer),window.parent.globalChange&&SetFormDirty(!1),window.opener&&!window.opener.closed&&window.opener.parent.tstructPop&&""!=AxActiveAction&&(window.opener.parent.tstructPop=!1,ReloadListView(window.opener.parent.listViewPage));var e=$j("#recordid000F0").val();if("0"!=e&&0==AxIsTstructLocked&&callParentNew("isLockOnRead"))try{ASB.WebService.UnlockTStructRecord(tst,e,!1)}catch(i){}if("undefined"!=typeof axpRefreshParent&&1==axpRefreshParent&&(window.opener.document.title="Iview")){var t=window.opener.document.getElementById("hdnparamValues").value,a="ivtoivload.aspx?ivname="+window.opener.iName;a=a+"&"+t.replace(/¿/g,"&").replace(/~/g,"=")+"&axp_refresh=true",window.opener.document.getElementById("hdnIvRefresh").value="true",window.opener.document.location.href=a,navigator.userAgent.toUpperCase().indexOf("CHROME")>-1&&window.opener.document.getElementById("button1").click()}callParentNew("removeOverlayFromBody()","function")}function CheckCustomTStSave(){var e=$j("#axp_savedirective000F1"),t="",a="",i="";(t=e.val())!=undefined&&(t.indexOf("$")>-1&&(t=GetPopUpVal(t)),t.indexOf("~")>-1?(i=t.split("~"))[1]!=undefined&&(a=i[1].split("*"),i[0]!=undefined&&""!=i[0]&&(i.indexOf("iview")>-1?(axCustomTstAction="ivtoivload.aspx?ivname="+a[0],a[1]!=undefined&&""!=a[1]&&(axCustomTstAction+="&"+a[1])):i.indexOf("tstruct")>-1&&(axCustomTstAction="tstruct.aspx?transid="+a[0]+"&openerIV=".concat("undefined"!=typeof isListView?iName:a[0],"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false","&isDupTab=").concat(callParentNew("isDuplicateTab")),a[1]!=undefined&&""!=a[1]&&(axCustomTstAction+="&"+a[1])))):axCustomTstAction=e.val())}function GetPopUpVal(e){var t=e.indexOf("$"),a=e.indexOf("*");return AxPopup=a>-1?e.substring(t+1,a):e.substring(t+1),e=e.replace("$"+AxPopup,"")}function LoadEvents(dvId){$('[data-toggle="tooltip"]').tooltip(),CKEDITOR.on("instanceReady",function(e){e.editor.on("change",function(){currentCK=this.name}),isReadyCK=!0,createCKAutoComplete(e),createCKAutoCompleteColon(e)}),WizardKtInit(),createEditors(),createFormSelect(".fldFromSelect"),createFormSelectMultiChecklist(".multiFldChk"),createFormMultiSelect(".fldmultiSelect");var autoDiv=dvId==undefined?"#divDc1":dvId;"design"!=theMode&&(DropzoneInit(dvId),DropzoneGridInit(dvId),HeaderAttachFiles()),KTApp.initBootstrapPopovers();try{var _KTApp;null===(_KTApp=KTApp)||void 0===_KTApp||_KTApp.initBootstrapTooltips()}catch(error){}createCheckListTokens(dvId);try{$(".mainIframe input[type=text]:not(.number,.flatpicker-input)").each(function(){var e=$(this),t=e.attr("id")!=undefined?e.attr("id"):"";""!=t&&(createAxAutocomplete(t),createAxAutocompleteColon(t))})}catch(ex){}$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField],.flatpickr-input,.gridRowChk,.gridHdrChk),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp)").focus(function(){MainFocus($j(this))});var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="d/m/Y";"en-us"==glCulture&&(dtFormat="m/d/Y"),$(".flatpickr-input:not(.tstOnlyTime,.tstOnlyTime24hours)").parent(".input-group").flatpickr({dateFormat:dtFormat,disableMobile:"true",allowInput:!0,wrap:!0,onOpen:function(e,t,a){MainFocus($(a.element).find("input")),setTimeout(function(){a.calendarContainer.style.right="0px"},0)},onChange:function(e,t,a){},onClose:function(e,t,a){MainBlur($(a.element).find("input"))}}),$(".tstOnlyTime").not(".editWrapTr .tstOnlyTime,table.table .tstOnlyTime").parent(".input-group").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"h:i K",disableMobile:"true",wrap:!0,onOpen:function(e,t,a){MainFocus($(a.element).find("input")),setTimeout(function(){a.calendarContainer.style.right="0px"},0)},onChange:function(e,t,a){},onClose:function(e,t,a){setTimeout(function(){MainBlur($(a.element).find("input"))},0)}}),$(".tstOnlyTime24hours").not(".editWrapTr .tstOnlyTime24hours,table.table .tstOnlyTime24hours").parent(".input-group").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,disableMobile:"true",wrap:!0,onOpen:function(e,t,a){MainFocus($(a.element).find("input")),setTimeout(function(){a.calendarContainer.style.right="0px"},0)},onChange:function(e,t,a){},onClose:function(e,t,a){setTimeout(function(){MainBlur($(a.element).find("input"))},0)}}),$(document).off("mousedown.designer").on("mousedown.designer",".tstructDesignMode .grid-stack-item, .tstructDesignMode .ui-resizable",function(){setSelectedDesignElement(this)}),$(document).off("dragstop.designer").on("dragstop.designer",".tstructDesignMode.grid-stack",function(e,t){selectedDesignObject.elem=e.target}),$(document).off("change.designer").on("change.designer",".tstructDesignMode.grid-stack",function(e,t){setSelectedDesignElement(selectedDesignObject.elem)}),$(document).off("dragstart.designer resizestart.designer").on("dragstart.designer resizestart.designer",".tstructDesignMode.grid-stack",function(e,t){$(this).addClass("dirty"),changeStatus("notSaved")}),$(document).off("gsresizestop.designer").on("gsresizestop.designer",".tstructDesignMode.grid-stack",function(e,t){var a=$(t).attr("data-gs-height"),i=gsiPixels(a);if(gsiHeight={height:(isMobile?i+10:i).toString()+"px"},"undefined"!=typeof CKEDITOR.instances[$(t).find("textarea").attr("id")])try{var r=CKEDITOR.instances[$(t).find("textarea").attr("id")];staticRunMode?r.resize("100%",$(r.ui.contentsElement.$).parents(".grid-stack-item-content").height()-$(r.ui.contentsElement.$).parents(".grid-stack-item-content").children(".fld-wrap3").outerHeight(!0)-2-$(r.ui.contentsElement.$).siblings().toArray().reduce(function(e,t){return e+$(t).outerHeight(!0)},0),!0):r.resize("100%",i)}catch(error){}}),$j("textarea:not(#comment):not(.labelInp,.select2-search__field),[id]:text:not([id=searstr],[class=AxAddRows],[class=AxSearchField],.gridHdrChk,.tstOnlyTime,.tstOnlyTime24hours,.gridHeaderSwitch,.dvgrdchkboxnonedit,.flatpickr-input,.ckbGridStretchSwitch),[id][type=number]:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),:password").blur(function(e){"design"!=theMode&&MainBlur($j(this))}),$j(document).mousedown(function(e){""!=e.target.id?(blurNextPreventElement=new Object,blurNextPreventId=e.target.id):(blurNextPreventId="",blurNextPreventElement=e.target)}),$j("select:not(#ddlSearch,#selectbox,.fldFromSelect,.fldmultiSelect,.multiFldChk,.multiFldChklist):not(#designLayoutSelector)").change(function(){if(-1==$j(this).find(":selected").text().indexOf("+ Add"))MainBlur($j(this)),$j(this).focus();else if(null!=$j(this).val()||$j(this).val()!=undefined){var ddlrefval=$j(this).val();$j(this).val(""),eval(ddlrefval)}}),$j(":checkbox:not([class=chkAllList],.gridHdrChk,.gridRowChk,.gridHeaderSwitch,.dvgrdchkboxnonedit,.ckbGridStretchSwitch):not(.tokenSelectAll):not(#ckbCompressedMode):not(#ckbStaticRunMode):not(#ckbWizardDC):not('[id^=ckbGridStretch]'),:radio").not(".chkShwSel").change(function(){MainBlur($j(this))}),$j("textarea:not(.labelInp)").keydown(function(e){LimitText($j(this))}),$j("textarea:not(.labelInp)").keyup(function(){LimitText($j(this))}),$j(".number").keypress(function(e){return CheckNumeric(e,$j(this).val())}),$j("#searchoverrelay").unbind("keypress").keypress(function(e){if(13==e.keyCode&&!valid_submit())return!1}),$j(".axpImg").click(function(){if("Cancelled"!=tstructCancelled){var e=$j(this)[0].id;null==document.getElementById(e).onclick&&UploadImg(e)}}),$j(".signaturePad").click(function(e){if("ClearImageSrc(this);"!=$(e.target).attr("onclick")&&"Cancelled"!=tstructCancelled){var t=$j(this).find(".signatureInput")[0].id;null==document.getElementById(t).onclick&&openSignaturePad(t)}}),$j(".divBarQrScan").click(function(){if("Cancelled"!=tstructCancelled){var e=$j(this).parent().find("input")[0].id;null!=document.getElementById(e).onclick||IsGridField(GetFieldsName(e))&&isMobile&&"form"==AxpGridForm||openBarQrScanner(e)}}),$(".axpBtn").off("click.axpBtn").on("click.axpBtn",function(){var e=$j(this);if(e.length>0){var t=GetFieldsRowNo(e[0].id),a=GetFieldsDcNo(e[0].id);RegisterActiveRow(t,a),CallAction(e[0].id)}}),$j(".rowdelete").click(function(){DeleteCurrentRow($j(this))}),$j(".subGrid").click(function(){ShowPopUp($j(this))}),$j("#taskListPopUp").hide(),$j(".AxAddRows").blur(function(){if(!this.value||isNaN(this.value))return this.value="1"}),$j(".achklist").click(function(){$j(this).parent().next(".chkListBdr").toggle()}),$j(".spandate").click(function(){$j(this).prev().focus()}),$j(".spanTime").click(function(){$j(this).prev().focus()}),$(document).on("keypress",dvId+" .form-group span.fa-paperclip",function(e){"13"==e.which&&$(this).click()}),$j(".rowdelete img").hover(function(){$j(this).attr("src","../axpimages/icons/16x16/delete.png")},function(){$j(this).attr("src","../axpimages/icons/16x16/delete-fade.png")}),1==parent.MainNewEdit&&$j("html").addClass("makeFullHeight");try{$j("#popupIframeRemodal",parent.document).attr("src")!=undefined&&$j(document).keyup(function(e){27===e.keyCode&&(IsFormDirty&&0===$("#bootstrapModal").length?$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),content:eval(callParent("lcm[121]")),escapeKey:"buttonB",onContentReady:function(){disableBackDrop("bind")},buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){$j(".remodal-close",parent.document).click()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){return disableBackDrop("destroy"),!0}}}}):1===$("#bootstrapModal").length||$j(".remodal-close",parent.document).click())})}catch(ex){console.log(ex.message)}$==undefined&&($=$j),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$j("input.form-control,textarea.memofam").on("focusin",function(e){try{var t=$j(this).attr("id");if(void 0!==t&&""!=t){var a=GetFieldsName(t),i=$j.inArray(a,FNames);if(i!=undefined&&i>-1&&("undefined"!=typeof FldMaskType||"undefined"!=typeof ScriptMaskFields)){var r="";if(ScriptMaskFields.length>0){var l=$j.inArray(a,ScriptMaskFields);r=-1!=l?ScriptMaskFields[l]:FldMaskType[i]}else r=FldMaskType[i];if(""!=r){var o=GetFieldValue(t);""!=o&&"0.00"!=o&&"0"!=o&&($j(this).val(o),$j(this).attr("value",o))}}}}catch(ex){}}),$j("input.number").on("input",function(){var e=$j(this).val(),t=$j(this).attr("id");if(t!=undefined){var a=GetFieldsName(t),i=$j.inArray(a,FNames);if(i!=undefined&&i>-1){var r=FMaxLength[i],l=0;if(l="True"==FCustDecimal[i]&&"undefined"!=typeof gloAxDecimal&&gloAxDecimal>-1?gloAxDecimal:FDecimal[i],"Numeric"==FDataType[i]&&l!=undefined&&l>0){var o=r-l-1;if(-1==e.indexOf("."))e.length>o&&($j(this).val(e.slice(0,o)),UpdateAllFieldValues($j(this).attr("id"),e.slice(0,o)));else if(-1!=e.indexOf(".")){var n=e.substring(0,e.indexOf(".")),s=e.substring(e.indexOf(".")+1,e.length);n.length>o&&(n=n.slice(0,o)),s.length>l&&(s=s.slice(0,l)),$j(this).val(n+"."+s),UpdateAllFieldValues($j(this).attr("id"),n+"."+s)}}}}}),$(document).off("click",".weightScaleIcon").on("click",".weightScaleIcon",function(){var e=this;if(appGlobalVarsObject._CONSTANTS.isHybrid){getRedisString("HybridWeightScaleInfo",callParentNew("hybridGUID"));$(this).parent(".weightScale").parent().children("input").focus();try{ShowDimmer(!0),ASB.WebService.NotifyHybridForWeightScale(callParentNew("hybridGUID"),function(t){"success"==t?getHybridWeightScaleInfo($(e).parent(".weightScale").parent().children("input").attr("id")):(ShowDimmer(!1),showAlertDialog("error","Error occurred while fetching weight. Please try again."))},function(e){ShowDimmer(!1),showAlertDialog("error","Error occurred while fetching weight. Please try again.")})}catch(error){ShowDimmer(!1),showAlertDialog("error","Exception occurred while fetching weight.")}}else showAlertDialog("error","Please close the application and login again.")}),$(document).off("change",".tstfldImage").on("change",".tstfldImage",function(e){TstFldImageUpload(e.target)}),$(document).off("click",".imageFileUpload,img.profile-pic").on("click",".imageFileUpload,img.profile-pic",function(e){$(e.currentTarget).siblings("label.upload-button").find(".tstfldImage").click()}),$(".fldImageCamera").off("click").on("click",function(e){if(isMobile)try{$(e.currentTarget).siblings("label.upload-button").find(".tstfldImage").attr("capture",""),setTimeout(function(){$(e.currentTarget).siblings("label.upload-button").find(".tstfldImage").click(),$(e.currentTarget).siblings("label.upload-button").find(".tstfldImage").removeAttr("capture")},0)}catch(error){}else{var t=$(".fldImageCamera").parent(".image-input").find("input").attr("id");UploadCaptureImage(t)}}),"undefined"!=typeof AxpCameraOption&&("undefined"==typeof AxpCameraOption||""!=AxpCameraOption&&"true"==AxpCameraOption)||$(".fldImageCamera:not(.disabledFldFrmControl)").removeClass("d-none"),$("#wBdr").on("mouseenter mouseleave",".customSetupTableMN textarea",function(e){$(this).attr("title",$(this).val())})}function WizardKtInit(){if("undefined"!=typeof isWizardTstruct&&isWizardTstruct){var e=document.querySelector("#wbdrHtml"),t=new KTStepper(e);t.on("kt.stepper.click",function(e){var t=$(e.element).find(".flex-column.current").attr("id").slice(8);if(t<e.getClickedStepIndex()){if(!ValidateBeforeSubmit(t))return!1;e.goTo(e.getClickedStepIndex())}else e.goTo(e.getClickedStepIndex())}),t.on("kt.stepper.next",function(e){var t=$(e.element).find(".flex-column.current").attr("id").slice(8),a=$(e.element).find(".flex-column.current").nextAll(".flex-column");if(!(wizardHidenDcNos.length>0))return!!ValidateBeforeSubmit(t)&&e.goNext();var i=!1;return a.each(function(){var t=$(this).attr("id");if(t=parseInt(t.slice(8)),!wizardHidenDcNos.includes(t))return i=!0,!1;e.goNext()}),i?!!ValidateBeforeSubmit(t)&&e.goNext():void 0}),t.on("kt.stepper.previous",function(e){$(e.element).find(".flex-column.current").attr("id").slice(8);var t=$(e.element).find(".flex-column.current").prevAll(".flex-column");if(wizardHidenDcNos.length>0){var a=!1;t.each(function(){var t=$(this).attr("id");if(t=parseInt(t.slice(8)),!wizardHidenDcNos.includes(t))return a=!0,!1;e.goPrevious()}),a&&e.goPrevious()}else e.goPrevious()})}}function createCheckListTokens(e){$((e?"#"+e:"")+" .form-select.multiFldChklist:not(span)").each(function(){var e=$(this).data("valuelist"),t="object"==_typeof(e)?e:_toConsumableArray(new Set($(this).data("valuelist").split($(this).data("separator"))));if(""!=t){var a=$.map(t,function(e){return{id:e,text:e}});$(this).select2({data:a}).on("select2:unselect select2:select",function(e){var t=$(this).attr("id"),a=$(this).val();if(void 0!==$(this).data("separator")){var i=$(this).data("separator");a=a.join(i)}isGrdEditDirty=!0;var r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r),o=GetFieldsRowNo(t);IsDcGrid(r)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+r+o+"F"+r,GetDbRowNo(o,r),"","parent","AddRow"),UpdateFieldArray(t,l,a,"parent","AutoComplete"),UpdateAllFieldValues(t,a),setTimeout(function(){AxOldValue=""==a?" ":"",MainBlur($j("#"+t))},0)}).on("select2:open",function(e){var t,i=null===(t=$(e.currentTarget).data("select2"))||void 0===t?void 0:t.$dropdown,r=0;if(0!=a.length){var l=GetFieldsName($(e.currentTarget).attr("id"));if("undefined"!=typeof AxHideSelectAll){var o=AxHideSelectAll.split("♦");if("false"==o[0].toLowerCase()){if(0==i.find(".select2-results").find(".msSelectAllOption").length){var n='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat($(e.currentTarget).attr("id"),'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');i.find(".select2-results").append(n)}}else if(o.length>1&&"false"==o[0].toLowerCase()&&""==o[1]){if(0==i.find(".select2-results").find(".msSelectAllOption").length){n='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat($(e.currentTarget).attr("id"),'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');i.find(".select2-results").append(n)}}else if(o.length>1&&("true"!=o[0].toLowerCase()||"true"==o[0].toLowerCase()&&""!=o[1]&&o[1]!=l)&&0==i.find(".select2-results").find(".msSelectAllOption").length){n='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat($(e.currentTarget).attr("id"),'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');i.find(".select2-results").append(n)}}else if(0==i.find(".select2-results").find(".msSelectAllOption").length){n='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat($(e.currentTarget).attr("id"),'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');i.find(".select2-results").append(n)}i.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&r++}),0==r&&$(e.currentTarget).val().length>0&&(r=$(e.currentTarget).val().length),i.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==r&&r>0?i.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):i.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=r&&i.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&i.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1)}}),$(this).parent().find(".select2-selection__rendered").addClass("text-wrap text-break p-0")}})}function checkAllCheckBoxTokens(e,t){if($("#".concat(t)).hasClass("multiFldChk")){if($(e).is(":checked")){$("#".concat(t)).find("option").remove(),$(".select2-results ul li").each(function(){"Searching…"!=$(this).text()&&$("#".concat(t)).append('<option value="'+$(this).text()+'" selected="selected">'+$(this).text()+"</option>")});var a=$("#".concat(t)).val();if(void 0!==$("#".concat(t)).data("separator")&&a.length>1){var i=$("#".concat(t)).data("separator");a=a.join(i)}isGrdEditDirty=!0;var r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r),o=GetFieldsRowNo(t);IsDcGrid(r)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+r+o+"F"+r,GetDbRowNo(o,r),"","parent","AddRow"),UpdateFieldArray(t,l,a,"parent","AutoComplete"),UpdateAllFieldValues(t,a),setTimeout(function(){MainBlur($j("#"+t))},0)}else{$("#".concat(t)).find("option").remove(),$("#".concat(t)).val("");r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r);UpdateFieldArray(t,l,"","parent","AutoComplete"),UpdateAllFieldValues(t,""),AxOldValue=" ",setTimeout(function(){MainBlur($j("#"+t))},0)}$("#".concat(t)).trigger("change").select2("close")}else{var n=$("#".concat(t)).data("valuelist"),s=$("#".concat(t)).data("separator"),d=$("#".concat(t)).parent().find(".select2-search__field").val();$(e).is(":checked")?($("#".concat(t)).find("option").remove(),n.split(s).forEach(function(e){""==d?$("#".concat(t)).append('<option value="'+e+'" selected="selected">'+e+"</option>"):""!=d&&e.toLowerCase().indexOf(d.toLowerCase())>-1?$("#".concat(t)).append('<option value="'+e+'" selected="selected">'+e+"</option>"):$("#".concat(t)).append('<option value="'+e+'">'+e+"</option>")})):($("#".concat(t)).find("option").remove(),n.split(s).forEach(function(e){$("#".concat(t)).append('<option value="'+e+'">'+e+"</option>")}),$(e).prop("checked",!1));var c=$("#".concat(t)).val();if(void 0!==$("#".concat(t)).data("separator")){var p=$("#".concat(t)).data("separator");c=c.join(p)}isGrdEditDirty=!0;r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r),o=GetFieldsRowNo(t);IsDcGrid(r)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+r+o+"F"+r,GetDbRowNo(o,r),"","parent","AddRow"),UpdateFieldArray(t,l,c,"parent","AutoComplete"),UpdateAllFieldValues(t,c),setTimeout(function(){AxOldValue=""==c?" ":"",MainBlur($j("#"+t))},0),$("#".concat(t)).trigger("change").select2("close")}}function ShowPopUp(e){var t=e.attr("id"),a=e.parent().find("input");0==a.length&&(a=e.parent().find("select")),OpenPopUp(a.attr("id"),t)}function FocusOnFirstField(e){if("form"==e)for(var t=$j('[id*="divDc"]'),a=0;a<t.length;a++)if($j(t[a]).is(":visible")){e=t[a].id.substring(t[a].id.indexOf("divDc")+5);break}var i="";if(i=IsDcGrid(e)?"#wrapperForEditFields"+e:"#divDc"+e,$j(i).length>0){try{-1!=$j.inArray("1",TabDCs)||isMobile?isMobile&&$("#wizardBodyContent").length&&$("#wizardBodyContent").scrollTop(0):$j(i).focus()}catch(l){}var r=getFirstFocusElement(i);if(r!=undefined&&r.length>0&&!isMobile)"0"!=recordid&&(r.hasClass("fldFromSelect")||r.hasClass("flatpickr-input"))||setTimeout(function(){r.focus();var e=r.attr("id");if(void 0!==e&&""!=e){var t=GetFieldsName(e),a=GetFieldIndex(t),i=GetFieldProp(a,"allowEmpty"),l=GetFieldValueNew(e);"F"==i&&""==l&&$("#".concat(e)).siblings("select:enabled").select2("open")}return r},0);else if(isMobile&&$("#wizardBodyContent").length)$("#wizardBodyContent").scrollTop(0);else if(isMobile&&axInlineGridEdit)return r.focus(),r}}function SetFocusAfterSaveOnLoad(){var e=focusAfterSaveOnLoad;focusAfterSaveOnLoad="";GetFieldsName(e);var t=GetFieldsDcNo(e);if(IsDcGrid(t)){var a=e.substring(e.lastIndexOf("F")-3,e.lastIndexOf("F"));$("#ank"+t).length>0&&!$("#ank"+t).parent().hasClass("active")?($("#ank"+t).click(),setTimeout(function(){$("#gridHd"+t+" tbody tr[id=sp"+t+"R"+a+"F"+t+"]").find(".glyphicon-pencil").parent().click(),setTimeout(function(){$j("#"+e).focus()},50)},300)):$("#ank"+t).length>0&&$("#ank"+t).parent().hasClass("active")&&($("#gridHd"+t+" tbody tr[id=sp"+t+"R"+a+"F"+t+"]").find(".glyphicon-pencil").parent().click(),setTimeout(function(){$j("#"+e).focus()},50))}else $("#ank"+t).length>0&&!$("#ank"+t).parent().hasClass("active")?($("#ank"+t).click(),setTimeout(function(){$j("#"+e).focus()},210)):$j("#"+e).focus()}function DisplaySearchDlg(){$j(window).keydown(function(e){OpenSearchPop(e)}),window.parent&&$j(window.parent).keydown(function(e){OpenSearchPop(e)})}function LockTstruct(){Readonlyform(),$j("#icons").find("*").attr("disabled",!0),$j("#icons").find("*").prop("disabled",!0),$j(".search").length>0&&$j(".search").removeProp("disabled"),$j(".add").length>0&&$j(".add").find("*").removeProp("disabled"),$j(".pdf").length>0&&$j(".pdf").find("*").removeProp("disabled"),$j(".listview").length>0&&$j(".listview").find("*").removeProp("disabled")}function loadingNew(){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler)}function EndRequestHandler(e,t){if(t.get_error()==undefined){if($j("#goval").length>0){var a=$j("#goval");"go"==a.val()&&(FillDiv("Show"),$("#grdSearchRes").parent().hasClass("d-inline-flex")||$("#grdSearchRes").parent().addClass("d-inline-flex-- w-100 overflow-auto"),$j("#searstr").val(DecodeUrlSplChars($j("#hdnSearchStr").val())),a.val("d"))}ShowDimmer(!1);var i=$j("#hdnHtml"),r=$j("#hdnFilename");"Save"==i.val()&&(showAlertDialog("success",2028,"client",r.val()),i.val(""))}else showAlertDialog("error",2029,"client",t.get_error().message)}function displaysearchDiv(e,t){$j("#searchoverrelay").parent().removeClass("d-none"),Resizewindow()}function FillDiv(e){"Show"==e?($("#srchcontent").removeClass("d-none"),isMobile&&$(".tst-search").addClass("flex-column")):$("#srchcontent").addClass("d-none"),Resizewindow()}function Pagination(){GetTstSearchData($("#lvPage").val()),ShowDimmer(!0)}function Closediv(){$j("#Panel1").hide(),$j("#srchcontent").addClass("d-none"),$j("#searchoverrelay").parent().addClass("d-none")}function hiddenFloatingDiv(e){document.getElementById(e).style.display="none",document.getElementById("dimmer").style.display="none",DivID="",Resizewindow()}function Resizewindow(){document.getElementById("closeimg")}function togglesrchselect(){var e=!1;e=!!document.getElementById("searchall").checked;for(var t=0;t<document.getElementById("s1").options.length;t++){var a="search"+t;document.getElementById(a).checked=e}}function PopupfadeTo(e,t){e=$j("#"+e.id),t<=100&&(t<0?(t=100,document.body.style.cursor="default"):(document.body.style.cursor="Hand",t=65),SetOpacity(e,t))}function valid_submit(){GetCurrentTime("Tstruct load on Search Go button click(ajax call)"),$j("#goval").val("go");var e=$j("#searstr");txtVal=CheckUrlSplChars(e.val()),ValidateSrchFlds()?(ShowDimmer(!0),$j("#hdnSearchStr").val(txtVal),$j("#searstr").val(""),GetTstSearchData()):""!=txtVal&&null!=txtVal&&txtVal!=undefined||showAlertDialog("warning",2007,"client")}function GetTstSearchData(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"1";$.ajax({url:"tstruct.aspx/GetTstSearchData",type:"POST",cache:!1,async:!0,data:JSON.stringify({key:tstDataId,transId:transid,hdnSearchStr:$j("#hdnSearchStr").val(),ddlSearch:$j("#ddlSearch").val(),pageNo:e,pageSize:"10",isTstHtmlLs:resTstHtmlLS}),dataType:"json",contentType:"application/json",success:function(e){var t=e.d;if(-1==t.indexOf("Error♠")){$("#srchcontent").removeClass("d-none"),$("#Panel1").show();var a=t.split("♠♠")[1];$("#Panel1 div:eq(0)").html(""),$("#Panel1 div:eq(0)").prepend(a);var i=t.split("♠♠")[0];$("#records").text(i.split("♠")[1]),$("#pages").text(i.split("♠")[2]),$("#pgCap").text("Page No.");var r=i.split("♠")[0];""!=r&&$("#lvPage").empty(),r.split(",").forEach(function(e){""!=e&&$("#lvPage").append('<option value="'+e+'">'+e+"</option>")}),bindUpdownEvents("grdSearchRes","single")}else"Duplicate_session"==(t=t.replace("Error♠",""))?window.location.href="err.aspx?errmsg=Needs logout and login again since in-memory is cleared.":-1==t.indexOf("records:")?showAlertDialog("error",t):($("#srchcontent").removeClass("d-none"),t=t.replace("records:",""),$("#records").text(t));AxWaitCursor(!1),ShowDimmer(!1)},error:function(e){AxWaitCursor(!1),ShowDimmer(!1)}})}function DecodeUrlSplChars(e){return e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/%25/g,"%")).replace(/%26/g,"&")).replace(/%27/g,"'")).replace(/%22/g,'"')).replace(/%23/g,"#")}function ValidateSrchFlds(){var e=$j("#ddlSearch").val(),t=$j.inArray(e,FNames),a=$j.trim($j("#searstr").val());if(-1!=t&&""!=a){if("Date/Time"==FDataType[t]){var i=$j("#searstr");return isDate(i.val())?(i.focus(),!0):(i.focus(),!1)}return!0}return!1}function loadTstruct(e){WireElapsTime(serverprocesstime,requestProcess_logtime),ShowDimmer(!0),ResetNavGlobalVariables(),AxWaitCursor(!0);try{window.parent.isSessionCleared||window.opener||(ASB.WebService.ClearNavigationSession(),window.parent.isSessionCleared=!0),window.opener?window.opener.parent.disableNavigation=!0:window.parent.disableNavigation=!0,setTimeout(function(){loadRecordFromSearch=!0,GetLoadData(e,"")},0)}catch(t){Closediv()}}$j(document).ready(function(){if("undefined"==typeof isServerDummyPost||"true"!=isServerDummyPost){if("undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal||WireElapsTime(serverprocesstime,requestProcess_logtime),AxpGridForm=""!=AxpGridFormCols?AxpGridFormCols.split("♠")[0]:"popup","design"==theMode&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),tstReadOnly=!1,isDepForceCallOnExp="false","function"==typeof commonReadyTasks&&commonReadyTasks(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal){var resval=isTstPostBackVal.split("*$*"),wBdrHtml=resval[0];$("#wBdr").html(""),$("#wBdr").prepend(wBdrHtml);var toolBarHtml=resval[1];if(("undefined"==typeof isWizardTstruct||0==isWizardTstruct)&&"False"==IsObjCustomHtml){$("#tstIcons").html(""),$("#tstIcons").prepend(toolBarHtml),$("#iconsNewOptionIcon").after(""),$("#iconsNewOptionIcon").after(toolBarHtml),$(".toolbarRightMenu .menu").html(""),$(".toolbarRightMenu .menu").append(toolBarHtml),$(".toolbarRightMenu a.btn").removeClass("disabled"),$(".toolbarRightMenu a.btn").removeClass("d-none"),$(".toolbarRightMenu a.btn").removeAttr("style").css({"pointer-events":"auto"}),$("#tstModernOpenIcons").html("");var modenFooter=resval[2];""!=modenFooter&&($("#tstModernOpenIcons").prepend(modenFooter.split("♦")[0]),btnfooteropenlist=modenFooter.split("♦")[1],btnfooteropenlist.indexOf("<li>")>-1&&(btnfooteropenlist=""))}}if("undefined"!=typeof AxpTstButtonStyle&&"old"==AxpTstButtonStyle){$("#breadcrumb-panel").removeClass("justify-content-center"),$("#breadcrumb-panel").parent().removeClass("flex-stack").addClass("flex-column"),$("#breadcrumb-panel").next().removeClass("align-items-center"),$("#searchBar").addClass("vw-100 overflow-scroll"),$("#searchBar").find("ul").addClass("px-0 my-0");try{var _KTMenu;null===(_KTMenu=KTMenu)||void 0===_KTMenu||_KTMenu.init();var menuEl=document.querySelector("#tstIcons .menu"),menu=KTMenu.getInstance(menuEl);menu.on("kt.menu.dropdown.show",function(e){$(e).find(".menu-link:not(.menu-sub .menu-link)").removeClass("text-gray-600").addClass("text-white")}),menu.on("kt.menu.dropdown.hide",function(e){$(e).find(".menu-link:not(.menu-sub .menu-link)").removeClass("text-white").addClass("text-gray-600")})}catch(error){}}$("#btnSaveTst").prop({value:callParentNew("lcm")[392],title:eval(callParent("lcm[392]"))}),$("#New").prop({value:callParentNew("lcm")[393],title:eval(callParent("lcm[393]"))}),SetFormDirty(!1),AxpIviewDisableSplit=AxpIviewDisableSplit.toLowerCase(),compressedMode=appGlobalVarsObject._CONSTANTS.compressedMode,isMobile||"false"!=isTstPop.toLowerCase()?($(callParentNew("split-btn","class")).addClass("hide"),$(callParentNew("split-btn-vertical","class")).addClass("hide")):AxpIviewDisableSplit!=undefined&&"false"==AxpIviewDisableSplit?($(callParentNew("split-btn","class")).css({display:""}).removeClass("hide"),$(callParentNew("split-btn-vertical","class")).css({display:""}).removeClass("hide")):"true"===AxpIviewDisableSplit?($(callParentNew("splitIcon","id")).addClass("hide"),$(callParentNew("spiltHeading","class")).addClass("hide")):""===AxpIviewDisableSplit&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),"true"==AxpIsAutoSplit.toLowerCase()&&!1===callParentNew("isTstructSplited")&&callParentNew("assocateIframe(true)","function");var glangType=eval(callParent("gllangType"));if("ar"===glangType&&$("[data-toggle=popover]").each(function(){$(this).data("placement","left")}),"undefined"!=typeof AxRulesEngine&&""!=AxRulesEngine){var axruleList=AxRulesEngine.split("~");AxRulesDefScriptOnLoad=axruleList[0],AxRulesDefOnSubmit=axruleList[1],AxRuesDefScriptFormcontrol=axruleList[2],AxRuesDefScriptFCP=axruleList[3]}$==undefined&&($=$j);try{if(DCIsPopGrid.indexOf("True")>-1)return void(window.location.href="err.aspx?errmsg=Axpertweb 11.0 popgrid (subgrid) is not supporting, please change the definition and try again..");AxBeforeTstLoad()}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}var t0=performance.now();AxStartTime=new Date,$(document).on("click","#icons,#btnSaveTst,.BottomToolbarBar a",function(e){if(actionCallFlag!=actionCallbackFlag)return e.stopPropagation,e.preventDefault(),void $("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"none"})});try{hideDiscardButton(),switchTstructMode(),GetFormDetails(),loadingNew(),LoadGridScript(),AxAutoGenDeps=GetDependentArray(),AddVisTabDcsInArray(),OnTstructLoad(),SetFieldSetCarryValue(),AxpFileFields(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal&&(isTstPostBackVal="",recordid=$("#axp_recid1000F1").val(),$j("#recordid000F0").val($("#axp_recid1000F1").val()))}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}if("ARABIC"==gl_language&&$j("#pagebdy").css("direction","rtl"),SetGridBtnAccess(),"design"!=mode)try{LoadEvents()}catch(ex){}$(window).resize(dynamicMobileResolution),setTimeout(function(){swicthCompressMode()},0),CheckCustFooter(),CheckCustomTStSave(),SetAutoCompAccess(""),"undefined"!=typeof focusAfterSaveOnLoad&&""!=focusAfterSaveOnLoad?SetFocusAfterSaveOnLoad():FocusOnFirstField("form"),SetFocusFormControl();try{"axpwf"==transid&&tstwfcomments(),AxAfterTstLoad()}catch(ex){}if(AxIsTstructLocked&&LockTstruct(),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$('[data-toggle="popover"]').popover({container:"body"}),checkSuccessAxpertMsg(),eval(callParent("isPrintPDFClick"))&&$j(".printhtmltopdf").click(),eval(callParent("isSaveAndPrintClick"))){var isSPValues=[];isSPValues=eval(callParent("isSavePrintValues")),OpenPdfFile(isSPValues[0],isSPValues[1],isSPValues[2],isSPValues[3],""),eval(callParent("isSaveAndPrintClick")+"= false"),eval(callParent("isSavePrintValues")+"=[]")}makeFieldInitCap();var t1=performance.now();if($(window).scroll(function(){KTMenu.hideDropdowns()}),$("[data-axp-url]").each(function(){$(this).after("<br/>"),inputId=$(this).attr("for"),text=$(this).text(),$(this).text(""),$("#"+inputId).attr("type","hidden"),urlValue=$("#"+inputId).val(),url=""==$("#"+inputId).val()?"javascript:void(0);":"window.open('"+urlValue+"','newwindow','width=600,height=500')",$("#"+inputId).after("<a style='cursor:pointer' onclick="+url+">"+text+"</a>")}),"undefined"!=typeof btnfooterlist&&""!=btnfooterlist&&$("#ftbtn_iList").attr("onClick",btnfooterlist),"undefined"!=typeof btnfooteropenlist&&""!=btnfooteropenlist&&"False"==IsObjCustomHtml&&($("#dvFooter").hide(),$.each(btnfooteropenlist.split(","),function(e,t){if(""!=t){var a=t.split("~")[0];if("New"!=a&&"Save"!=a){if($("#"+a).removeClass("d-none"),t.split("~").length>1){var i=t.split("~")[1];$("#"+a).attr("data-id",i)}}else if(t.split("~").length>1){var r=t.split("~")[1];$("#ftbtn_i"+a).attr("data-id",r)}}})),"undefined"!=typeof dvRefreshFromLoadModern&&"true"==dvRefreshFromLoadModern&&$("#dvRefreshFromLoadModern").removeClass("d-none"),"undefined"!=typeof AxpTstButtonStyle&&"classic"==AxpTstButtonStyle&&0==$("#btnAppsHeader").next(".menu").find(".menu-item:not(.d-none)").length?$("#btnAppsHeader").addClass("d-none"):"undefined"!=typeof AxpTstButtonStyle&&"modern"==AxpTstButtonStyle&&0==$("#btnAppsHeader").next(".menu").find(".card .row .col-4:not(.d-none)").length&&$("#btnAppsHeader").addClass("d-none"),"undefined"!=typeof hideToolBar&&hideToolBar&&0==$("#design").length&&"design"!=theMode){var srchBarHt=28;$("#searchBar").hide(),$(".dvheightframe").first().css("top","0px"),"undefined"!=typeof isWizardTstruct&&isWizardTstruct?$("#wizardBodyContent").height($("#wizardBodyContent").height()+srchBarHt):(srchBarHt=srchBarHt+5+8,$("#pagebdy").height($("#pagebdy").height()+srchBarHt),$(".dvheightframe").first().attr("style",$(".dvheightframe").first().attr("style")+";height:"+($(".dvheightframe").first().height()+srchBarHt)+"px !important;"))}var curFrameObj=$(window.frameElement);if(void 0===curFrameObj.attr("id")||"axpiframe"!==curFrameObj.attr("id")&&"homePageDynamicFrame"!==curFrameObj.attr("id")&&!curFrameObj.attr("id").startsWith("homePageFrame")||(iframeindex=1,$j("#goback").hide()),callParentNew("IsfieldaddInDesignMode")&&(callParentNew("IsfieldaddInDesignMode=",!1),$(".grid-stack").addClass("dirty")),isMobile&&"none"==mobileCardLayout&&($("#wizardHeader").addClass("mobileHeader"),$.each(DCIsGrid,function(e,t){if("True"===t){$("#wrapperForEditFields"+(e+1)).removeClass("d-none"),$("#wrapperForEditFields"+(e+1)).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+(e+1)+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+(e+1)).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(e+1," .newgridbtn")).addClass("d-none");var a=$("#DivFrame".concat(e+1," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(e+1)).append('<div class="clearfix"></div><div class="grdButtons btnMobile d-none"><ul class="left">'.concat(a,"</ul></div>")),$("#wrapperForEditFields".concat(e+1," .btnMobile")).find("#viewGrid".concat(e+1)).addClass("d-none")}})),$(document).off("keyup keydown",".select2.select2-container"),$(document).on("keyup keydown",".select2.select2-container",function(e){if("undefined"!=e.key&&"c"==e.key.toLowerCase()&&e.ctrlKey)if($(e.currentTarget).parent().find("select.fldFromSelect").length>0&&$(e.currentTarget).parent().find("select.fldFromSelect").attr("disabled")&&$(e.currentTarget).parent().find("select.fldFromSelect").hasClass("flddis"))try{if(null!=$(e.currentTarget).parent().find("select.fldFromSelect").val()&&""!=$(e.currentTarget).parent().find("select.fldFromSelect").val())if("undefined"!=typeof navigator.clipboard)navigator.clipboard.writeText($(e.currentTarget).parent().find("select.fldFromSelect").val());else{var t=document.createElement("textarea");t.value=$(e.currentTarget).parent().find("select.fldFromSelect").val(),document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(i){console.log(i)}finally{t.remove()}}else navigator.clipboard.writeText("")}catch(ex){navigator.clipboard.writeText("")}else if($(e.currentTarget).parent().find("select.fldFromSelect").length>0&&$(e.currentTarget).parent().find("select.fldFromSelect").attr("disabled"))try{if(null!=$(e.currentTarget).parent().find("select.fldFromSelect").val()&&""!=$(e.currentTarget).parent().find("select.fldFromSelect").val())if("undefined"!=typeof navigator.clipboard)navigator.clipboard.writeText($(e.currentTarget).parent().find("select.fldFromSelect").val());else{var a=document.createElement("textarea");a.value=$(e.currentTarget).parent().find("select.fldFromSelect").val(),document.body.prepend(a),a.select();try{document.execCommand("copy")}catch(i){console.log(i)}finally{a.remove()}}else navigator.clipboard.writeText("")}catch(ex){navigator.clipboard.writeText("")}}),$(document).off("focus",".select2.select2-container"),$(document).on("focus",".select2.select2-container",function(e){var t=e.originalEvent,a=$(this).find(".select2-selection--single").length>0;if(t&&a&&("open"==select2EventType?(select2EventType="",1==select2IsFocused&&select2IsOpened&&$(this).siblings("select.fldFromSelect").select2("close"),select2IsOpened=!1,select2IsFocused=!1):select2IsOpened?select2EventType="click":(select2IsFocused=!0,select2EventType="tab"),"0"==recordid)){var i=$(this).parent().find("select.form-select").attr("id");if(void 0!==i&&""!=i){var r=GetFieldsName(i),l=GetFieldIndex(r),o=GetFieldProp(l,"allowEmpty"),n=GetFieldValueNew(i);if("F"==o&&""==n)$(this).siblings("select:enabled").select2("open");else try{null==$("#"+i).val()||""==$("#"+i).val()||$("#"+i).is(":disabled")||ShowTooltip(r,$("#"+i))}catch(ex){}}}}),$(document).off("click",".select2.select2-container"),$(document).on("click",".select2.select2-container",function(e){var t=e.originalEvent,a=$(this).find(".select2-selection--single").length>0;t&&a&&(select2EventType="click",$(this).siblings("select:enabled").select2("open"))}),$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox],li.dropdown-chose,.select2.select2-container").bind("keydown",function(e){var t=e.keyCode||e.which,a=$(this);if(9!=t||e.shiftKey){if(9==t&&e.shiftKey){if($(this).hasClass("select2-search__field"))return void(isSelectedValFocus=!1);var i;l=$(this).closest("[class*=fldindex]").data("dataindex");void 0!==$(this).attr("id")?i=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).closest("div").find("select").length>0?i=$(this).closest("div").find("select").attr("id").substring($(this).closest("div").find("select").attr("id").lastIndexOf("F")+1,$(this).closest("div").find("select").attr("id").length):$(this).hasClass("tokenSelectAll")&&(i=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));n=[];$(this).closest("#divDc"+i).find(".grid-stack-item").find("[class*=fldindex]").each(function(e,t){var a=GetFieldsName($(this).find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]").attr("id")),i=$j.inArray(a,FNames);"none"!=$(this).css("display")&&"F"!=GetFieldProp(i,"tabStop")&&n.push($(this).data("dataindex"))}),n.sort(function(e,t){return e-t}).reverse(),$.each(n,function(t,r){if(l>r){var o=$j(a).closest("#divDc"+i).find("[data-dataindex="+r+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(o).attr("id")).attr("disabled")&&void 0===$("#"+$(o).attr("id")+":not(.tstOnlyTime)").attr("readonly")){if(!$("#"+$(o).attr("id")).hasClass("axpImg")&&!$("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).hasClass("fldFromSelect")||$("#"+$(o).attr("id")).hasClass("multiFldChk")||$("#"+$(o).attr("id")).hasClass("multiFldChklist")?($("#"+$(o).attr("id")).select(),!0):$("#"+$(o).attr("id")).hasClass("gridstackCalc")&&$("#"+$(o).attr("id")).siblings("#cke_"+$(o).attr("id")).length>0?($("#"+$(o).attr("id")).focus(),!0):$("#"+$(o).attr("id")).hasClass("profile-pic")?($("#"+$(o).attr("id")).focus(),!1):($("#"+$(o).attr("id")).focus().select(),e.preventDefault(),!1));if($("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).focus().select(),!1)}else n.length-1==t&&$(".tstructMainBottomFooter a:visible:eq(0)").focus()}})}}else{var r,l=$(this).closest("[class*=fldindex]").data("dataindex"),o="";void 0!==$(this).attr("id")?r=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).closest("div").find("select").length>0?(r=$(this).closest("div").find("select").attr("id").substring($(this).closest("div").find("select").attr("id").lastIndexOf("F")+1,$(this).closest("div").find("select").attr("id").length),o=$(this).closest("div").find("select").attr("id")):$(this).hasClass("tokenSelectAll")&&(r=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));var n=[];$(this).closest("#divDc"+r).find(".grid-stack-item").find("[class*=fldindex]").each(function(e,t){var a=GetFieldsName($(this).find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]").attr("id")),i=$j.inArray(a,FNames);"none"!=$(this).css("display")&&"F"!=GetFieldProp(i,"tabStop")&&n.push($(this).data("dataindex"))}),n.sort(function(e,t){return e-t}),$.each(n,function(t,i){if(l<i){var s=$j(a).closest("#divDc"+r).find("[data-dataindex="+i+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(s).attr("id")).attr("disabled")&&void 0===$("#"+$(s).attr("id")+":not(.tstOnlyTime)").attr("readonly"))if($("#"+$(s).attr("id")).hasClass("axpImg")||$("#"+$(s).attr("id")).hasClass("fldmultiSelect")){if($("#"+$(s).attr("id")).hasClass("fldmultiSelect"))return 4!=$(s).length&&($("#"+$(s).attr("id")).focus().select(),!1)}else{if(4==$(s).length)return!1;if($("#"+$(s).attr("id")).hasClass("fldFromSelect")||$("#"+$(s).attr("id")).hasClass("multiFldChk")||$("#"+$(s).attr("id")).hasClass("multiFldChklist"))return $("#"+$(s).attr("id")).focus(),!1;if($("#"+$(s).attr("id")).hasClass("gridstackCalc")&&$("#"+$(s).attr("id")).siblings("#cke_"+$(s).attr("id")).length>0)return $("#"+$(s).attr("id")).focus(),!0;if($("#"+$(s).attr("id")).hasClass("profile-pic"))return $("#"+$(s).attr("id")).focus(),!1;if(""==o)return $("#"+$(s).attr("id")).focus().select(),e.preventDefault(),!1;if(!$("#"+o).hasClass("multiFldChk"))return $("#"+$(s).attr("id")).focus().select(),e.preventDefault(),!1;$("#"+o).select2("close"),o="",setTimeout(function(){return $("#"+$(s).attr("id")).focus().select(),e.preventDefault(),!1},0)}else n.length-1==t&&$(".tstructMainBottomFooter a:visible:eq(0)").focus()}else if(l==i&&n.length-1==t)return a.parents('[id^="DivFrame"]').siblings('[id^="DivFrame"]:not(.d-none)').length>0?$(a.parents('[id^="DivFrame"]').siblings('[id^="DivFrame"]:not(.d-none)').find("a")[0]).focus():$(".tstructMainBottomFooter a:visible:eq(0)").focus(),!1})}}),setTimeout(function(){if("undefined"!=typeof isWizardTstruct&&isWizardTstruct){$("#wizardTstructWrapper").outerHeight(!0),$("#toolBarBtns").outerHeight();var e=$("#wizardBodyFooterWrapper").outerHeight(!0);$("#wizardHeader").outerHeight(!0)}else{e=$("#heightframe").outerHeight(!0),$("#dvlayout").outerHeight(!0);var t=$(".tstructMainBottomFooter").outerHeight(!0);if("axglo"==transid);else{if($("body").hasClass("formLayoutWidth")){var a=$("#wBdr").outerHeight(!0);a<e?$(".tstructMainBottomFooter").css({bottom:"".concat(e-(a+t),"px")}):$(".tstructMainBottomFooter").css({bottom:"-".concat(t,"px")})}if(!isMobile&&$("#DivFrame1").outerHeight()<$("#heightframe").outerHeight()){if($("#tabsCont2 .dvdcframe").length>0){var i=$("#tabsCont2 .dvdcframe").height()+$("#myTab").outerHeight(!0)+($("#heightframe").outerHeight(!0)-$("#DivFrame1").outerHeight(!0)-$("#tabsCont2").parents(".wrapper").outerHeight(!0)-20);$("#tabsCont2 .dvdcframe").css({"min-height":i})}$.each(DCIsGrid,function(e){"False"==DCIsGrid[e]&&0!=e&&$("#DivFrame"+(e+1)).addClass("nonGridDcTab")})}}}},50),"design"!=theMode&&isMobile&&-1!=$.inArray("axp_latlong",FNames)){var llIndex=$.inArray("axp_latlong",FNames);axplatlongFldName=FNames[llIndex],callParentNew("LocationInfoAPI()","function")}if("design"!=theMode&&-1!=$.inArray("latitude",FNames)&&-1!=$.inArray("longitude",FNames))var counter=0,intervalID=setInterval(function(){10==++counter&&clearInterval(intervalID);var e="latitude000F".concat(GetDcNo("latitude")),t="longitude000F".concat(GetDcNo("longitude"));""==$("#".concat(e)).val()&&""==$("#".concat(t)).val()&&!0===getLocation()&&clearInterval(intervalID)},1e3);if(breadCrumbStr){var brcList="";breadCrumbStr.split(" > ").forEach(function(e){""!=e&&(brcList+='<li class="breadcrumb-item text-muted">'+e+"</li>")}),$("#breadcrumb-panel ul.breadcrumb").length>0&&$("#breadcrumb-panel ul.breadcrumb").remove(),$("#breadcrumb-panel").append('<ul class="breadcrumb fw-bold fs-base my-1">'+brcList+'<li class="breadcrumb-item text-dark">'+$("#breadcrumb-panel h1").text()+"</li></ul>")}isMobile&&($("#breadcrumb-panel").attr({"data-toggle":"popover","data-placement":"bottom","data-content":""}),$("#breadcrumb-panel[data-toggle=popover]").popover({content:$(".menuBreadCrumb").length>1?$(".menuBreadCrumb").text():$(".tstivCaption ").text(),container:"body"})),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=savedraftKeyCreatedtime&&(callParentNew("originaltrIds").length>0&&callParentNew("originaltrIds").filter(function(e){return e==transid}).length>0?savedraftKeyCreatedtime="":(window.location.href.includes("act")||window.location.href.includes("recordid")||loadSavedDraft(savedraftKeyCreatedtime),savedraftKeyCreatedtime="")),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=AutosaveDraftTime&&(draftSetTimeoutObj=setInterval(SaveAsDraft,parseInt(AutosaveDraftTime))),axInlineGridEdit&&$(".griddivColumn").addClass("gridFixedHeader").css({overflow:"auto"}),"undefined"!=typeof gridFixedHeader&&"true"!=gridFixedHeader||((!isMobile||"form"!=AxpGridForm)&&$(".griddivColumn").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table thead tr th").css({background:"#fff",position:"sticky",top:"0"}),$(".gridFixedHeader table tfoot tr td").css({background:"#fff",position:"sticky",bottom:"0"})),"undefined"!=typeof gridFixedHeader&&(""==gridFixedHeader||"false"==gridFixedHeader)&&$(".gridFixedHeader table tfoot").length>0&&((!isMobile||"form"!=AxpGridForm)&&$(".griddivColumn").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table tfoot tr td").css({background:"#fff",position:"sticky",bottom:"0"})),hideacoptions(),$("input.fldFromSelect").off("click"),$("input.fldFromSelect").on("click",function(){if(isMobile){var e=$(this).attr("id");""!=e&&$("#"+e).hasClass("fldFromSelect")&&$("#"+e).removeClass("fldFromSelect")}}),appGlobalVarsObject._CONSTANTS.compressedMode&&appGlobalVarsObject.methods.toggleCompressModeUI($("body")),$(".toolbarRightMenu .menu").find(".menu-sub").addClass("mh-300px scroll-y"),$(".nav.nav-tabs").each(function(e,t){1==$(t).find(".nav-item a.nav-link").length&&$(t).find(".nav-item a.nav-link").removeClass("active").addClass("bg-white")}),$(".fldCustTableIcon").off("click.fldCustTableIcona"),$(".fldCustTableIcon").on("click.fldCustTableIcona",function(e){FieldTypeTable(e,this)}),$(".fldCustTable ").off("keydown.fldtblA"),$(".fldCustTable ").on("keydown.fldtblA",function(e){13==e.keyCode&&FieldTypeTable(e,this)}),$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));"password"==e.attr("type")?(e.attr("type","text"),$(this).text("visibility"),$(this).css("color","#999")):(e.attr("type","password"),$(this).text("visibility_off"),$(this).css("color","#999"))}),$("#searchBar").on("click","ul.dropdown-menu [data-toggle=dropdown]",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open")}),isMobile&&($("body").addClass("isMobile"),$("#design").hide(),$(".tst-search").addClass("flex-column")),$("#iconsNew .right").off("click.subMenu",".dropdown-submenu a").on("click.subMenu",".dropdown-submenu a",function(e){var t=$(this).next("ul");$.each($("#iconsUl ul").not(t),function(e,t){$(t).is(":visible")&&$(t).hide()}),$(this).next("ul").toggle(),e.stopPropagation(),e.preventDefault()}),$("#iconsNew .right.dropdown").off("click.menu").on("click.menu",function(e){isMobile&&$(".pinIcon, .iconUIPin").hide(),$(this).hasClass("open")&&$(this).find(".dropdown-submenu ul.dropdown-menu").hide()}),GetProcessTime(),GetTotalElapsTime(),$(".modernButtonOptions #iconsUl > li.dropdown-submenu").on("click",function(e){$("#iconsUl > li:visible").index(this)%3==0?$(this).find("ul").css({left:"0px"}):$("#iconsUl > li:visible").index(this)%3==1?$(this).find("ul").css({left:"-110px"}):$("#iconsUl > li:visible").index(this)%3==2&&$(this).find("ul").css({left:"-223px"})}),barCodeScannerInit();try{document.querySelectorAll("#btnAppPegMore").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){if("axapprove"!=isPegApproveConfirm){var t=AxPegJSON;if("undefined"!=typeof t[0].data.cmsg_appcheck&&""!=t[0].data.cmsg_appcheck){var a;if(!axPegConfirmation("Approve",t[0].data.cmsg_appcheck))return void(null===(a=KTMenu.getInstance(e))||void 0===a||a.hide());setTimeout(function(){document.querySelector('textarea[id="txtPegComments"]').focus()},0)}}else isPegApproveConfirm=""})}),document.querySelectorAll("#btnReturnPegMore").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){if("axreturn"!=isPegApproveConfirm){var t=AxPegJSON;if("undefined"!=typeof t[0].data.cmsg_return&&""!=t[0].data.cmsg_return){var a;if(!axPegConfirmation("Return",t[0].data.cmsg_return))return void(null===(a=KTMenu.getInstance(e))||void 0===a||a.hide());setTimeout(function(){document.querySelector('textarea[id="txtPegReturnComments"]').focus()},0)}}else isPegApproveConfirm=""})}),document.querySelectorAll("#btnRejectPegMore").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){if("axreject"!=isPegApproveConfirm){var t=AxPegJSON;if("undefined"!=typeof t[0].data.cmsg_reject&&""!=t[0].data.cmsg_reject){var a;if(!axPegConfirmation("Reject",t[0].data.cmsg_reject))return void(null===(a=KTMenu.getInstance(e))||void 0===a||a.hide());setTimeout(function(){document.querySelector('textarea[id="txtPegRejectComments"]').focus()},0)}}else isPegApproveConfirm=""})})}catch(ex){}if("design"!=theMode&&GenTstHtmlLocalStorage(),"undefined"!=typeof isTstPop&&"True"==isTstPop&&$("#btnClearCacheReloadForm").addClass("d-none"),isMobile){$("#dvlayout").find(".d-flex.align-items-center.flex-nowrap.text-nowrap").addClass("ms-auto"),$("#dvlayout").find(".toolbarRightMenu").css({position:"relative",right:"0px !important"}),$("#dvlayout").find(".toolbarRightMenu").removeClass("toolbarRightMenu");var design_Form=designObj[0];if(void 0!==design_Form&&"undefined"!=typeof design_Form.formAlignment&&"right"==design_Form.formAlignment){var element=document.getElementById("dvlayout");element.classList.remove("position-absolute"),element.classList.add("position-auto")}}$("#lblddfooter").hover(function(){var e=void 0!==$(this).attr("title")?$(this).attr("title"):$(this).attr("data-title");$(this).attr("data-title",e).removeAttr("title");var t=$('<div class="tooltipDdetails">').text(e);$(this).append(t);var a=$(this).position(),i=($(this).outerWidth(),t.outerHeight());t.css({position:"absolute",top:a.top-i-10,left:a.left,backgroundColor:"#e4e6ef",color:"black",padding:"5px",borderRadius:"3px",zIndex:999999}).fadeIn()},function(){$(".tooltipDdetails").remove()});try{"undefined"!=typeof parent.axProcessObj&&(parent.$("#Process_Flow").scrollTop(0),parent.ShowDimmer(!1))}catch(ex){}}else isServerDummyPost="false"}),$(document).on("click",".virtualKeyboard",function(){$(this).parent().children("input").attr("onfocus",function(e,t){return"blur()"==t?null:"blur()"}),$(this).parent().children("input").focus(),$(this).children().toggleClass("green")}),window.onbeforeunload=BeforeWindowClose,document.all||document.captureEvents(Event.MOUSEMOVE);var iX=0,iY=0,iWidth=0,timer,dDetailsShow=!1;function getPosition(e){document.all?(iX=event.clientX+document.body.scrollLeft,iY=event.clientY+document.body.scrollTop):(iX=e.pageX,iY=e.pageY)}function findPosX(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}function findPosY(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}function FindCtrlPos(e){"string"==typeof e&&(e=document.getElementById(e));var t=e,a=jQuery(e),i=a.offset();$(a).parents("td").length>0?a.hasClass("form-select")||a.hasClass("flatpickr-input")?a.hasClass("flatpickr-input")?(iX=findPosX(t),iX+=$($(a).parents("tr")).offset().left,iY=findPosY(t)+t.clientHeight+1,iWidth=t.clientWidth+a.next("span.input-group-text").outerWidth()):(iX=i.left-10,iX+=$($(a).parents("tr")).offset().left,iY=i.top+31-window.scrollY,iWidth=a.parent().width()):(iX=findPosX(t)-10,iX+=$($(a).parents("tr")).offset().left,iY=findPosY(t)+t.clientHeight+1,iWidth=t.clientWidth):a.hasClass("form-select")||a.hasClass("flatpickr-input")?a.hasClass("flatpickr-input")?(iX=findPosX(t),iY=findPosY(t)+t.clientHeight+1,iWidth=t.clientWidth+a.next("span.input-group-text").outerWidth()):(iX=i.left+1,iY=i.top+31-window.scrollY,iWidth=a.parent().width()+t.clientWidth):(iX=findPosX(t)+1,iY=findPosY(t)+t.clientHeight+1,iWidth=t.clientWidth)}function ShowTooltipDiv(e){document.getElementById?div=document.getElementById("dvTip"):document.all&&(div=document.all.dvTip),""==div.style.display&&div.offsetWidth!=undefined&&div.offsetHeight!=undefined&&(div.style.display=0!=div.offsetWidth&&0!=elem.offsetHeight?"block":"none"),div.style.display="block",div.style.left=iX+"px",div.style.top=iY+"px",div.style.zIndex="9999999",div.style.width=iWidth+"px",$(div).removeClass("d-none"),dDetailsShow=!0,e?$("#dvInnerTip").parent().find(".closebtn").removeClass("d-none"):timer=setTimeout(function(){HideTooltip()},3e3)}var regexFld=new RegExp("^[a-zA-z0-9_]+$"),_thisToolTip="";function readOnlyFldddDiv(){FFieldReadOnly.forEach(function(e,t){var a=FNames[t];if("False"!=e&&""!=FToolTip[t]&&!IsGridField(a)){var i=GetDcNo(a),r=a+"000F"+i;$("#"+r).parents("#dv"+a).find("div:eq(0)").append('<span class="material-icons material-icons-style ms-1 align-middle material-icons-3 cursor-pointer spanddetails" title="Display details">info</span>'),$("#"+r).parents("#dv"+a).find(".spanddetails").attr("onclick","readOnlyShowTooltip('"+a+"','"+i+"','false')")}})}function readOnlyFldddDivGrid(e,t){GetGridFields(e).forEach(function(a,i){var r=GetFieldIndex(a),l=FNames[r];if("False"!=FFieldReadOnly[r]&&""!=FToolTip[r]&&IsGridField(l)){var o=l+t+"F"+e;$("input#"+o).length>0?($("input#"+o).parent().addClass("input-group"),$("input#"+o).parent().append('<span class="material-icons material-icons-style cursor-pointer input-group-text p-2" title="Display details" style="" onclick="readOnlyShowTooltip(\''+l+"','"+e+"','true','"+t+"');\">info</span>")):$("select#"+o).length>0&&($("select#"+o).parent().addClass("input-group"),$("select#"+o).next("span.select2-container--bootstrap5").addClass("flex-fill w-auto"),$("select#"+o).next("span.select2-container--bootstrap5").parent().append('<span class="material-icons material-icons-style cursor-pointer input-group-text p-2" title="Display details" style="" onclick="readOnlyShowTooltip(\''+l+"','"+e+"','true','"+t+"');\">info</span>"))}})}function readOnlyShowTooltip(e,t,a){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";setTimeout(function(){ShowTooltip(e,"true"==a?$("#"+e+i+"F"+t):$("#"+e+"000F"+t),!1)},0)}function ShowTooltip(e,t){arguments.length>2&&arguments[2]!==undefined&&arguments[2];HideTooltip();var a=0,i="",r=new Array,l="";for(a=0;a<FNames.length;a++)if(FNames[a]==e){var o=(i=FToolTip[a]).indexOf("<h>");if(-1!=o){var n=i.indexOf("</h>");l="<a class='curHand' id='lblTip'  onclick='javascript:HyperlinkToolTip(\""+i.substring(o+3,n)+"\");'>"+i.substring(0,o)+" </a>",i=i.substring(n+4,i.length)}""!=i&&(r=i.split("/"));break}var s=0;if(!t.hasClass("flatpickr-input")){var d=t.attr("id"),c=t.value;for(s=0;s<r.length;s++)if(""!=r[s])if(-1==r[s].toString().indexOf(":"))r[s]=r[s].trim(),r[s].trim();else{var p=new Array,u=r[s],f="",m=0,h="",v=!1;for(m=0;m<=u.length;m++)if(":"==(h=u.charAt(m)))if("+"==u.charAt(m+1)){var g=u.substring(u.indexOf(":+"),u.indexOf("+:")+2);g=(g=g.replace(":+","")).replace("+:",""),g=Evaluate(d,c,g,"expr"),g=ReverseCheckSpecialChars(g),p.push(g),m=u.indexOf("+:")+2}else v=!0,""!=f&&p.push(f),f="";else{if(1==v){var b=regexFld.test(h);if(0==b){var w=GetFieldsRowFrameNo(d);if(-1!=$j.inArray(f,FNames)){if(GetDcNo(f)==GetFieldsDcNo(d))b=GetFieldValue(f+w),b=ReverseCheckSpecialChars(b);else if(GetDcNo(f)==GetFieldsDcNo(d)||IsDcGrid(GetDcNo(f))){if(GetDcNo(f)!=GetFieldsDcNo(d)&&IsDcGrid(GetDcNo(f))){var C=GetDcNo(f);b=GetFieldValue(f+"001F"+C),b=ReverseCheckSpecialChars(b)}}else{var F=GetDcNo(f);b=GetFieldValue(f+"000F"+F),b=ReverseCheckSpecialChars(b)}p.push(b)}else b=checkParameterandMemVars(f),b=ReverseCheckSpecialChars(b),p.push(b);f="",v=!1}}f+=h}""!=f&&p.push(f);var x=0;for(r[s]="",x=0;x<p.length;x++)r[s]+=p[x]}if(r.length>0){FindCtrlPos(d);var y=$j("#dvInnerTip");y.attr("data-fldName",e),y.attr("data-fldId",d),_thisToolTip!=d&&(_thisToolTip="");i="";for(a=0;a<r.length;a++)""!=r[a]&&(i+=r[a]+"<br/>");""!=l?(dDetailsShow=!0,$(".dvdisplaydetails").css({"background-color":"#ededca"}),$("#dvddHyplink a").remove(),$("#dvddHyplink").append(l),$("#dvddHyplink").removeClass("d-none"),$("#lblddfooter").text(""),$("#lblddfooter").html(i),$("#lblddfooter").attr("title",$("#lblddfooter").text()),$(".dvdisplaydetails").removeClass("pb-6")):""!=i&&(dDetailsShow=!0,$(".dvdisplaydetails").css({"background-color":"#ededca"}),$("#dvddHyplink a").remove(),$("#dvddHyplink").addClass("d-none"),$("#lblddfooter").text(""),$("#lblddfooter").html(i),$("#lblddfooter").attr("title",$("#lblddfooter").text()),$(".dvdisplaydetails").removeClass("pb-6"))}else for(a=0;a<FNames.length;a++)if(FNames[a]==e){var D=FldPurpose[a];""!=D&&(dDetailsShow=!0,$(".dvdisplaydetails").css({"background-color":"#ededca"}),$("#dvddHyplink a").remove(),$("#dvddHyplink").addClass("d-none"),$("#lblddfooter").text(""),$("#lblddfooter").html(D),$("#lblddfooter").attr("title",$("#lblddfooter").text()),$(".dvdisplaydetails").removeClass("pb-6"));break}}}$j(document).off("click","#dvTip").on("click","#dvTip",function(e){clearTimeout(timer);var t=$(this).find("#dvInnerTip").attr("data-fldId");_thisToolTip=t,ShowTooltip($(this).find("#dvInnerTip").attr("data-fldName"),$("#"+t),!0)}),$j(document).off("click","body").on("click","body",function(e){dDetailsShow&&-1==e.target.className.indexOf("form-control")&&-1==e.target.className.indexOf("tooltipBg")&&-1==e.target.className.indexOf("closebtn")&&-1==e.target.className.indexOf("select2-selection__rendered")&&-1==e.target.className.indexOf("select2-selection__placeholder")&&"dvInnerTip"!=e.target.id&&"dvTip"!=e.target.id&&!$(e.target).parent().hasClass("input-group-text")&&(_thisToolTip="",HideTooltip(),dDetailsShow=!1)});var dpTextVarlist=new Array,dpTextValuelist=new Array,dpTextaxMemVarValue=new Array,dpTextaxMemVarList=new Array;function checkParameterandMemVars(e){if(dpTextVarlist.length>0){if(-1!=(r=$j.inArray(e,dpTextVarlist)))return dpTextValuelist[r];if(-1==r&&-1!=(l=$j.inArray(e,dpTextaxMemVarList)))return dpTextaxMemVarValue[l]}else{if(Parameters.length>1)for(var t=0;t<Parameters.length;t++){i=(i=Parameters[t].toString()).split("~"),dpTextVarlist[t]=i[0].toString(),dpTextValuelist[t]=i[1].toString()}if(AxMemParameters.length>1)for(var a=0;a<AxMemParameters.length;a++){var i;i=(i=AxMemParameters[a].toString()).split("~"),dpTextaxMemVarList[a]=i[0].toString(),dpTextaxMemVarValue[a]=i[1].toString().replace(/&quot;/g,'"')}var r,l;if(-1!=(r=$j.inArray(e,dpTextVarlist)))return dpTextValuelist[r];if(-1==r&&-1!=(l=$j.inArray(e,dpTextaxMemVarList)))return dpTextaxMemVarValue[l]}}function HideTooltip(){if($(".dvdisplaydetails").removeAttr("style"),$(".dvdisplaydetails").addClass("pb-6"),$("#lblddfooter").text(""),$("#dvddHyplink a").remove(),""==_thisToolTip){var e=$j("#dvTip");e.length>0&&e.hide()}}document.onkeypress=function(e){27==e.keyCode&&HideTooltip()};var hlTipProps="",hlTipParmUrl="",hlTipUrl="",hlTipParamXml="";function HyperlinkToolTip(e){hlTipParmUrl="";var t="",a=new Array;new Array;a=e.split(",");var i="",r="",l="",o=new Array;if(a.length>0)for(var n=0;n<a.length;n++)"type"==(o=a[n].split("="))[0]?(temp=o[1],temp.toLowerCase().startsWith("t")?(hlTipUrl="tstruct.aspx?act=open&transid=",r="t"):temp.toLowerCase().startsWith("i")?(hlTipUrl="ivtoivload.aspx?ivname=",r="i"):temp.toLowerCase().startsWith("hp")&&(hlTipUrl="htmlPages.aspx?load=",r="hp")):"name"==o[0]?(hlTipUrl=hlTipUrl+o[1]+"&openerIV=".concat("undefined"!=typeof isListView?"":o[1],"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false","&isDupTab=").concat(callParentNew("isDuplicateTab")),t=o[1]):"popup"==o[0]?i=o[1]:"refresh"==o[0]?o[1]:"load"==o[0]?l=o[1]:"param"==o[0]&&CreatParamUrl(a[n]);if(hlTipProps=r+","+l+","+i,"t"==r&&""!=t&&l.startsWith("t"))try{ASB.WebService.GetRecordId(t,hlTipParamXml,SuccessGetRecId,OnException)}catch(s){}else GetUrl()}function SuccessGetRecId(e,t){var a="0";if(""!=e){var i=$j.parseXML(e),r=$j(i);r.find("recordid").length>0&&(a=r.find("recordid").text())}GetUrl(a)}function GetUrl(rId){var pType="",load="",openWin="",newWindow;if(""!=hlTipProps){var strHlProps=hlTipProps.split(",");pType=strHlProps[0],load=strHlProps[1],openWin=strHlProps[2]}if(""!=hlTipUrl)if("t"==pType&&rId!=undefined&&"0"!=rId&&load.startsWith("t")?hlTipUrl+="&recordid="+rId:hlTipUrl+=hlTipParmUrl,openWin.startsWith("t"))try{newWindow=window.open(hlTipUrl,"MyPopUp","resizable=yes")}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}else window.document.location.href=hlTipUrl}function CreatParamUrl(e){var t="";""!=hlTipProps&&(t=hlTipProps.split(",")[0]);if(hlTipParmUrl="",-1!=(i=e.indexOf("param="))){e.indexOf("=");e=e.substring(6,e.length)}if(arrParam=e.split("~"),arrParam.length>0)for(var a=0;a<arrParam.length;a++){var i=arrParam[a].indexOf("="),r=arrParam[a].substring(i+1,arrParam[a].count),l=arrParam[a].substring(0,i);if(r.startsWith(":")){r=r.substring(1,r.length);IsGridField(r);var o="";if(IsGridField(r)){var n=r+GetRowNoHelper(AxActiveRowNo)+"F"+AxActiveDc;o=GetFieldValue(n)}else{n=r+"000F"+GetDcNo(r);o=GetFieldValue(n)}}else r.startsWith("{")?(-1!=r.indexOf("{")&&(r=r.replace("{","")),-1!=r.indexOf("}")&&(r=r.replace("}","")),o=r.endsWith("*d")?r.substring(0,r.length-2):r):o=r;hlTipParamXml=hlTipParamXml+"<"+l+">"+o+"</"+l+">","i"==t&&""!=o?hlTipUrl=hlTipUrl+"&"+l+"="+o:""!=o&&(hlTipParmUrl=hlTipParmUrl+"&"+l+"="+o)}}function GetSetTtipHgt(e){var t=$j("#dvInnerTip"),a=$j("#dvTip");"new"==e?(t.height()<50&&t.height("50"),t.width()<100&&t.width("100"),a.height()<50&&a.height("50"),a.width()<100&&a.width("100")):(t.css("height","auto"),t.css("width","auto"),a.css("height","auto"),a.css("width","auto"))}var tmpFldName="";function DisplayPickList(e){ShowDimmer(!0),AxWaitCursor(!0);var t,a=e.attr("id").split("~"),i=a[t=2==a.length?1:0].substring(0,a[t].lastIndexOf("F")-3),r="",l=$j("#"+a[t]);if(l.attr("readonly")!=undefined||l.attr("disabled")!=undefined)return ShowDimmer(!1),void AxWaitCursor(!1);l.length>0&&(AxOldValue=l.val(),r=l.val()),totalPLRows=0,curPageNo=1;var o=$j("#hdnPickFldId");-1==e.attr("id").indexOf("~")?o.val("img~"+e.attr("id")):o.val(e.attr("id")),AxFromAssociated=!0,GetPickListData(i,r,curPageNo.toString(),pageSize.toString(),a[t])}function ShowPickList(){$j("#pickDimmer").css("display","none");var e,t=$j("#hdnPickFldId").val().split("~");e=2==t.length?1:0,FindCtrlPos(a=document.getElementById(t[e]));var a,i=(a=$j("#"+t[e])).width()+19,r=(a.height(),$j("#dvPickList")),l=GetFieldsDcNo(t[e]);IsDcGrid(l);r.width(i),r.show();$(".dvheightframe ").scrollLeft();var o=$(".dvheightframe ").scrollTop();axInlineGridEdit&&(o-=36);var n=a.offset().top-a.parents("."+(axInlineGridEdit?"input":"form")+"-group").outerHeight()+o;r.css("top",n+"px"),r.css("left",a.offset().left+"px"),$("#dvPickList .pickLstResultCntnr").length>0&&$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top>$(".dvheightframe").outerHeight()&&$(".dvheightframe").animate({scrollTop:$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top-$(".dvheightframe").outerHeight()+$(".dvheightframe").scrollTop()},100)}function CheckHeight(e,t){var a=$j("#middle1",parent.document),i=document.body.offsetHeight,r=e+t;r>i&&(i+=r-i,a.height(i+10))}function GetPickListData(e,t,a,i,r){currentPickList=r,initialSrchVal=t;var l="";if(arrRefreshDcs.length>0)for(var o=0;o<arrRefreshDcs.length;o++){var n=arrRefreshDcs[o].split(":");l=n[1].replace("dc","")+","+n[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var s=GetFieldsDcNo(r);AxActiveRowNo=parseInt(GetFieldsRowNo(r),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,s);var d=AxActiveRowNo,c="";""!=AxActivePRow&&""!=AxActivePDc&&(c=AxActivePDc+"~"+AxActivePRow);var p="";IsParentField(e,s)&&(p=GetSubGridInfoForParent(s,AxActiveRowNo));try{ASB.WebService.GetSearchResult(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,a.toString(),i.toString(),tstDataId,s,d,c,p,l,resTstHtmlLS,SuccGetSearchResult,OnException)}catch(f){AxWaitCursor(!1),ShowDimmer(!1);var u=f.name+"^♠^"+f.message;showAlertDialog("error",2030,"client",u)}}function GetTdFrameNo(){var e=$j("#hdnPickFldId").val();return GetFieldsDcNo(e)}var pickStatus=!0,selectedRow=0;function SuccGetSearchResult(result,eventArgs){if(""!=result&&result.split("♠*♠").length>1&&(tstDataId=result.split("♠*♠")[0],result=result.split("♠*♠")[1]),!CheckSessionTimeout(result)){resTstHtmlLS="";var hdnFilter=$j("#hdnFiltered"),resultArr;if(hdnFilter.val("true"),""!=result&&"<error>"!=result.substring(0,7)){TogglePrevNextLink("inline");var tableStr="";if(-1!=result.indexOf("♣")){var totRowStr=result.split("♣");totalPLRows=parseInt(totRowStr[0],10),totalPLRows/pageSize%1>0?noOfPLPages=Math.floor(totalPLRows/pageSize)+1:noOfPLPages=totalPLRows/pageSize,resultArr=totRowStr[1].split("¿")}else resultArr=result.split("¿");var dv=$j("#dvPickHead");if(resultArr!=undefined&&""!=resultArr){tableStr="<table id='tblPickData'  data-pick='"+currentPickList+"' class='pickGridData'>";for(var i=0;i<resultArr.length;i++){var tdId="axPickTd00"+(i+1)+"F"+GetTdFrameNo(),pickValue=CheckSpecialCharsInHTML(resultArr[i]);if(-1!=resultArr[i].toString().indexOf("^")){var displayText=resultArr[i].toString().split("^")[1];tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}else displayText=resultArr[i].toString(),-1!=pickValue.indexOf("\\")?(pickValue=pickValue.replace("\\","\\\\"),tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur' ><a>"+displayText+"</td></tr>"):tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}dv.length>0&&dv.html(tableStr),$j("#tblPickData tr").length>0&&$j("#tblPickData tr:nth-child(1)").addClass("active")}else if(dv.length>0){var cutMsg=eval(callParent("lcm[0]"));dv.html("<span>"+cutMsg+"</span>")}SetPrevNextLinks(),document.getElementById("advancebtn").style.visibility="visible",document.getElementById("advancesrch").style.visibility="visible"}else{tableStr="<table style='width:100%;height:auto;' id='tblPickData' cellpadding='1' cellspacing='1'>",tableStr+="</table>",document.getElementById("advancebtn").style.visibility="hidden",document.getElementById("advancesrch").style.visibility="hidden";var cutMsg=eval(callParent("lcm[0]"));tableStr+='<span style="font-size: 12px;">'+cutMsg+"</span>",TogglePrevNextLink("none");var dv=$j("#dvPickHead");dv.length>0&&dv.html(tableStr)}pickListRowCount=$j("#tblPickData tbody tr").length,pickListRowCount>1&&$j(".inputClass2").keydown(function(e){if(40==e.which){if(selectedRow<pickListRowCount){0==$j("#tblPickData tr:nth-child("+selectedRow+++")").length&&(selectedRow=2),$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg");for(var t=0,a=0;a<selectedRow;a++)t+=$j("#tblPickData tr:nth-child("+a+")").height();t+20>$j("#dvPickHead").height()&&$j("#dvPickHead").scrollTop($j("#dvPickHead")[0].scrollHeight)}}else if(38==e.which){if(selectedRow>2){0==$j("#tblPickData tr:nth-child("+selectedRow--+")").length&&selectedRow++,$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg"),1==selectedRow&&e.preventDefault();for(t=0,a=pickListRowCount;a>=selectedRow;a--)t+=$j("#tblPickData tr:nth-child("+a+")").height();if(t+10>$j("#dvPickHead").height()){var i=selectedRow-1;$j("#dvPickHead").scrollTop($j("#tblPickData tr:nth-child("+i+")").height())}}}else 39==e.which?$j("#nextPick").attr("onclick")!=undefined&&""!=$j("#nextPick").attr("onclick")&&(GetData("next"),$j("#dvPickHead").scrollTop(0),selectedRow=1):37==e.which?$j("#prevPick").attr("onclick")!=undefined&&""!=$j("#prevPick").attr("onclick")&&(GetData("prev"),selectedRow=1,$j("#dvPickHead").scrollTop(0)):27!=e.which&&9!=e.which||(HidePLDiv(!1),selectedRow=0);e.which=-1}),$j(document).keypress(function(e){if(-1!=e.keyCode){if(13==e.keyCode){var t=GetActivePickListId(),a=GetFieldsDcNo(t),i=GetFieldsRowNo(t);if(AxActiveRowNo=GetDbRowNo(i,a),$j("#dvPickList").is(":visible")){var r="#axPickTd00"+--selectedRow+"F"+GetTdFrameNo();if($j(r).length>0){var l=$j(r).find("a")[0].innerText;l==undefined&&(l=$j(r).find("a")[0].textContent),SetPickVal(l),pickStatus=!1}selectedRow=0}}e.which=-1}}),$j(document).click(function(e){"nextPick"!=e.target.id&&"prevPick"!=e.target.id&&"curHand"!=e.target.className&&"hdrRow"!=e.target.className&&("nextPick"==e.target.parentElement.id||"prevPick"==e.target.parentElement.id?$j("#pickDimmer").css("display","block"):HidePLDiv(!1),selectedRow=0)}),currentPickList="",ShowPickList(),ShowDimmer(!1),AxWaitCursor(!1)}}function GetActivePickListId(){var e=$j("#hdnPickFldId").val().split("~");return e[e.length>1?1:0]}function HidePLDiv(e){if(1==e){var t=$j("#hdnPickFldId").val();if(""!=t&&-1!=t.indexOf("~")){var a="#"+t.split("~")[1];$j(a).focusNextInputField()}}var i=$j("#dvPickList");i.length>0&&i.hide()}function GetData(e){"prev"==e&&curPageNo>1?curPageNo-=1:"next"==e&&curPageNo<noOfPLPages&&(curPageNo+=1);var t=$j("#hdnPickFldId");if(t.length>0){var a=t.val();if(""!=a&&-1!=a.indexOf("~")){var i=a.split("~");GetPickListData(i[1].substring(0,i[1].lastIndexOf("F")-3),$j("#"+i[1]).val(),curPageNo.toString(),pageSize.toString(),i[1])}}}function TogglePrevNextLink(e){var t=$j("#prevPick"),a=$j("#nextPick");"block"==e||"inline"==e?(t.show(),a.show()):(t.hide(),a.hide())}function SetPrevNextLinks(){var e=$j("#prevPick"),t=$j("#nextPick"),a=$j("#tblPickData");1==curPageNo?(e.attr("disabled","disabled"),e.css("display","none"),e.removeAttr("onclick")):(e.attr("disabled",!1),e.css("color","black"),t.css("color","black"),e.attr("onclick","javascript:GetData('prev')")),curPageNo<noOfPLPages?(t.attr("disabled",!1),t.css("color","black"),t.attr("onclick","javascript:GetData('next')")):curPageNo>=noOfPLPages?(t.attr("disabled","disabled"),t.css("display","none"),t.removeAttr("onclick")):(a.attr("disabled","disabled"),a.removeAttr("onclick"))}function SetPickVal(e){var t=$j("#hdnPickFldId");if(t){var a=t.val().split("~"),i=a[a.length>1?1:0],r=$j("#"+i);if($j("#pickfld000F0").val(i),-1!=e.indexOf("^")){GetFieldsRowFrameNo(i);var l=$j("#pickIdVal_"+i),o=e.split("^");l.val(o[0]),e=o[1]}e=RepSpecialCharsInHTML(e),r.val(e);try{r.focus()}catch(n){}AxFromAssociated=!0}HidePLDiv(!1)}function CallSearchOpen(){if(window.chrome&&$j("#HdnAxAdvPickSearch").val("true"),ShowDimmer(!0),AxWaitCursor(!0),HidePLDiv(!1),$j("#hdnPickFldId")){var e=$j("#hdnPickFldId").val(),t=$j("#"+e);$j(".pickimg").each(function(){$j(this).attr("id")==e&&(t=$j(this))}),t.length>0&&SearchOpen(t)}AxWaitCursor(!1)}$j.fn.focusNextInputField=function(){return this.each(function(){setTimeout(function(){var e=$(this);if(axInlineGridEdit&&!$($(e).closest("div")).hasClass("form-group"))var t=$j(e).parents("input:eq(0),body").find('button,input[type!="hidden"],textarea,select');else t=$j(e).parents("form:eq(0),body").find('button,input[type!="hidden"],textarea,select');var a=t.index(e);if(a>-1&&a+1<t.length){var i=t.eq(a+1),r=i.prop("disabled");if(1==r||"disabled"==r||"togCol"==i.prop("class"))t.eq(a+1).focusNextInputField();else if(axInlineGridEdit&&!$(e.closest("div")).hasClass("form-group")){var l=t.eq(a).closest("td").attr("data-focus-index");t.eq(a).closest("tr").attr("last-focus-index")!=l&&(l=parseInt(l)+1),$j(e).parents("input:eq(0),body").find("td[data-focus-index='"+l+"']").find("input").focus()}else isMobile||t.eq(a+1).focus()}return!1},0)})};var fcontrols=new Array,found=!1,process=!1,fc=0,ch,strch,cmdfchar,cresult=!0,cond="",skip,fld,count=0,cont=!1,fldExtn="",isobject=!1,btnObject=!1,firstFldDc="NONGRID",secFldDc="NONGRID",isFieldBtn=!1,arrVisibleTabDcs=new Array;function DoFormControl(e){var t,a=GetFieldsName(e),i=GetFieldsDcNo(e),r=GetFieldsRowNo(e),l=IsDcGrid(i);if(fldExtn=r+"F"+i,firstFldDc=l?"GRID":"NONGRID",0==fcontrols.length)for(var o=0;o<Formcontrols.length;o++){var n=Formcontrols[o];n.startsWith("f")&&(t=n.substr(1,n.length),fcontrols[fc]=t,fc++)}found=!1;for(var s=0;s<fcontrols.length;s++)if(fcontrols[s]==a){found=!0;break}process=!1,found&&EvaluateFormControl(a)}function AddVisTabDcsInArray(){for(var e=PagePositions.length,t=0;t<e;t++)arrVisibleTabDcs.push("")}function DoFormControlOnload(){if(0==fcontrols.length)for(var e=0;e<Formcontrols.length;e++){var t=Formcontrols[e];t.startsWith("f")&&(v=t.substr(1,t.length),fcontrols[fc]=v,fc++)}try{var a=$j("#recordid000F0").val();""==a&&(a="0");for(var i=0;i<fcontrols.length;i++)("0"==a&&"_On Form Load"==fcontrols[i]||"0"!=a&&"_On Data Load"==fcontrols[i])&&EvaluateFormControl(fcontrols[i])}catch(r){console.log(r.message)}}function EvaluateFormControl(e){for(var t=0;t<Formcontrols.length;t++)if(i=Formcontrols[t],strch=i,i=i.split(""),"1"==(cmdfchar=strch.startsWith("10")||strch.startsWith("11")||strch.startsWith("12")?i[0]+i[1]:i[0])&&i.length>1&&("0"==i[1]||"1"==i[1])&&"d"==i[2]&&"c"==i[3]?(cmdfchar=i[0]+i[1],fldname=strch.substr(2,strch.length)):fldname="10"==cmdfchar||"11"==cmdfchar||"12"==cmdfchar?strch.substr(2,strch.length):strch.substr(1,strch.length),"f"!=cmdfchar||fldname!=e)if("e"!=cmdfchar||1!=process){if(0!=process){if(3==cmdfchar&&1==cresult){t+=1,"''"==(a=(a=Formcontrols[t]).substring(1,a.length))&&(a="");if(":"==(i=a.split(""))[0]){if("yes",a=a.substring(1,a.length),a=GetComponentName(GetExactFieldName(a),fldExtn),!($j("#"+a).length>0))continue;a=GetFieldValue(a)}CallProcessFormControl(fldname,fldExtn,"3",a)}else if(12==cmdfchar&&1==cresult){var a;t+=1,"''"==(a=(a=Formcontrols[t]).substring(2,a.length))&&(a="");var i;if(":"==(i=a.split(""))[0]){if("yes",a=a.substring(1,a.length),a=GetComponentName(GetExactFieldName(a),fldExtn),!($j("#"+a).length>0))continue;a=GetFieldValue(a)}CallProcessFormControl(fldname,fldExtn,"12",a)}else if(1!=cmdfchar&&2!=cmdfchar&&4!=cmdfchar&&5!=cmdfchar&&6!=cmdfchar&&7!=cmdfchar&&8!=cmdfchar&&9!=cmdfchar&&10!=cmdfchar&&11!=cmdfchar||1!=cresult){if("c"==cmdfchar)if("if"==fldname){count=0;try{cresult=Getcondition(t),(skip=cresult)&&(count=1),t+=3}catch(r){}}else"elseif"==fldname?(skip?(cresult=!1,count=3):cresult=!cresult,cresult&&(cresult=Getcondition(t),(skip=cresult)&&(count=2)),t+=3):"else"==fldname?skip=cresult=1!=skip&&!cresult:"and"==fldname?(cresult=cresult&&Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"or"==fldname?(cresult=cresult||Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"end"==fldname&&(cresult=!0,skip=!1)}else CallProcessFormControl(fldname,fldExtn,cmdfchar.toString())}}else process=!1;else process=!0}function CallProcessFormControl(e,t,a,i){if("4"==a||"5"==a||/^dc\d+$/.test(e.toLowerCase())&&("8"==a||"9"==a||"10"==a||"11"==a))ProcessFormControl(e,a,i);else{e=GetExactFieldName(e);var r=GetDcNo(e),l=IsDcGrid(r);if(secFldDc=l?"GRID":"NONGRID","NONGRID"==firstFldDc&&"NONGRID"==secFldDc||"GRID"==firstFldDc&&"NONGRID"==secFldDc)ProcessFormControl(e=e+"000F"+r,a,i);else if("NONGRID"==firstFldDc&&"GRID"==secFldDc)for(var o=GetDcRowCount(r),n=1;n<=o;n++){ProcessFormControl(e+GetRowNoHelper(n)+"F"+r,a,i)}else if("GRID"==firstFldDc&&"GRID"==secFldDc){ProcessFormControl(e=e+GetClientRowNo(AxActiveRowNo,r)+"F"+r,a,i)}else ProcessFormControl(e=e,a,i)}}function ProcessFormControl(e,t,a){isFieldBtn=!1,-1!=e.indexOf(".")&&e.replace(".","\\.");var i=$j("#"+e);if("4"==t||"5"==t||/^dc\d+$/.test(e.toLowerCase())&&("8"==t||"9"==t||"10"==t||"11"==t)){var r=e.substr(2);0==(i=$j("#DivFrame"+e.toString().substring(2))).length&&-1!=$j.inArray(r,TabDCs)&&(i=$j("#ank"+r))}var l=GetFieldsRowNo(e),o=GetFieldsDcNo(e),n=GetDbRowNo(l,o),s=!1;if(i.length<=0){var d,c=e;-1!=e.toString().indexOf("F")&&(c=e.substring(0,e.lastIndexOf("F")-3)),$j(".axpBtn,.axpBtnCustom").each(function(){if($j(this).attr("id")==c)return i=$j(this),isFieldBtn=!0,!1}),$j(".action img").each(function(){if($j(this).attr("id")==c)return d=$j(this),isFieldBtn=!0,!1});var p=!1;$j(".AxpTstBtn input,img").each(function(){if($j(this).attr("value")==c||$j(this).attr("id")=="AxpTstBtn_"+c)return d=$j(this),isFieldBtn=!0,p=!0,!1}),"remove"==c.toLowerCase()?c="delete":"list view"==c.toLowerCase()?c="listview":"new"==c.toLowerCase()&&(c="add"),"save"==c.toLowerCase()&&(s=!0);var u=c;"listview"==u.toLowerCase()&&(u="list view"),$j("#icons").find("a").each(function(){return void 0!==$j(this).attr("title")&&$j(this).attr("class")==c.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(i=$j(this),isFieldBtn=!0,!1):void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(i=$j(this),isFieldBtn=!0,!1):void 0}),$j(".toolbarRightMenu").find("a").each(function(){if(void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)return i=$j(this),isFieldBtn=!0,!1}),isFieldBtn||$j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==c.toLowerCase()&&(i=$j(this),isFieldBtn=!0)}),isFieldBtn||$j(".tstructMainBottomFooter").find("a").each(function(){$j(this).attr("id").toLowerCase()==c.toLowerCase()&&(i=$j(this),isFieldBtn=!0)}),isFieldBtn||$(".toolbarRightMenu .menu-item a").each(function(){(void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==c.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(i=$j(this),isFieldBtn=!0)}),$j(".tstformbutton").each(function(){(void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==c.toLowerCase()||void 0!==$j(this).attr("value")&&$j(this).attr("value").toLowerCase()==c.toLowerCase())&&(i=$j(this),isFieldBtn=!0)}),d!=undefined&&d.length>0&&(i=d.parent(0)),p&&(i=d)}if(i.length>0)switch(t){case"1":if(isFieldBtn)s?EnableSaveBtn(!0):EnableDisableBtns(i,!0);else{if(1==IsPickListField(i.attr("id")))(h=document.getElementById("img~"+i.attr("id"))).disabled=!1,h.className="input-group-addon handCur pickimg";if(0==i.val()&&"select-one"!=i.prop("type")&&i.val(""),i.attr("title")==dateString&&""==i.val()&&i.val(dateString),"checkbox"==i.attr("type"))EnableDisableCheckbox(i.attr("id"),!1);else(i.attr("id").startsWith("rtf_")||i.attr("id").startsWith("rtfm_")||i.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(i.attr("id"))))&&($j("#cke_"+i.attr("id")).prop("disabled",!1),i.css("display","none"),$j("#cke_"+i.attr("id")).removeAttr("disabled")),"axpImg"==i.attr("class")&&i.attr("onclick",null),i.prop("disabled",!1),i.prop("readOnly",!1),i.removeAttr("readOnly"),SetAutoCompAccess("enabled",i)}break;case"2":if(isFieldBtn)s?EnableSaveBtn(!1):EnableDisableBtns(i,!1);else{if(1==IsPickListField(i.attr("id")))(h=document.getElementById("img~"+i.attr("id"))).disabled=!0,h.className="pickimg input-group-addon handCur";if(i.attr("title")!=dateString||i.val()!=dateString&&"''"!=i.val()||i.val(""),"checkbox"==i.attr("type")){EnableDisableCheckbox(i.attr("id"),!0)}else{(i.attr("id").startsWith("rtf_")||i.attr("id").startsWith("rtfm_")||i.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(i.attr("id"))))&&($j("#cke_"+i.attr("id")).attr("disabled","disabled"),i.css("display","none"),$j("#cke_"+i.attr("id")).prop("readonly",!0)),"axpImg"==i.attr("class")&&i.attr("onclick","callnull");try{if(i.hasClass("selectTextArea")){var f=GetFieldsDcNo(i.attr("id"));IsDcGrid(f)||i.prop("disabled",!0)}else i.prop("disabled",!0)}catch(x){i.prop("disabled",!0)}SetAutoCompAccess("disabled",i)}}break;case"3":var m=GetDcNo(fldname);if($j("#"+e).hasClass("multiFldChk")&&""==a.trim())if(IsDcGrid(m))$j("input[id="+e+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+e).val(""),$("#"+e).data("valuelist",""),$("#"+e).tokenfield("setTokens",[])}catch(x){}else CallSetFieldValue(e,a);UpdateFieldArray(e,n,a,"parent","");break;case"4":if(/^dc\d+$/.test(fldname.toLowerCase()))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"enable");break;case"5":if(/^dc\d+$/.test(fldname.toLowerCase()))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"disable");break;case"6":if(isFieldBtn)s?EnableSaveBtn(!0):EnableDisableBtns(i,!0);else{if(1==IsPickListField(i.attr("id")))(h=document.getElementById("img~"+i.attr("id"))).disabled=!1,h.className="input-group-addon handCur pickimg";i.prop("disabled",!1),i.prop("readOnly",!1),isFieldBtn||i.removeClass("dis"),i[0].children[0].className="handCur"}break;case"7":if(isFieldBtn)s?EnableSaveBtn(!1):EnableDisableBtns(i,!1);else{var h;if(1==IsPickListField(i.attr("id")))(h=document.getElementById("img~"+i.attr("id"))).disabled=!0,h.className="input-group-addon  pickimg";i.prop("disabled",!0),i.prop("readOnly",!1),i.addClass("dis"),i[0].children[0].className=""}break;case"8":if(/^dc\d+$/.test(fldname.toLowerCase())){m=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(m,"hide"):ShowingDc(m,"hide")}else{try{if(""!=(f=GetDcNo(fldname))&&IsDcGrid(f)){var v=0;v=GetDcRowCount(f);getGridFldType(fldname,f);for(var g=1;g<=v;g++){i=$j("#"+fldname+GetClientRowNo(g,f)+"F"+f);fldname,GetClientRowNo(g,f);if(i.length>0)-1==(F=$j.inArray(f+"~"+fldname+"~show",AxFormContSetFldActGrid))&&-1==(F=$j.inArray(f+"~"+fldname+"~hide",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(f+"~"+fldname+"~hide"):AxFormContSetFldActGrid[F]=f+"~"+fldname+"~hide"}}}catch(x){}HideShowField(fldname,"hide");var b=GetFieldIndex(fldname),w=GetDWBFieldType("",b);b>-1&&(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=w&&"time"==w.toLowerCase())&&($j("#"+i.attr("id")+" .tstOnlyTime").removeClass("hasDatepicker"),$j("#"+i.attr("id")+" .tstOnlyTime24hours").removeClass("hasDatepicker"))}break;case"9":if(/^dc\d+$/.test(fldname.toLowerCase())){m=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(m,"show"):ShowingDc(m,"show")}else{try{if(""!=(f=GetDcNo(fldname))&&IsDcGrid(f)){v=0;v=GetDcRowCount(f);for(getGridFldType(fldname,f),g=1;g<=v;g++){i=$j("#"+fldname+GetClientRowNo(g,f)+"F"+f);fldname,GetClientRowNo(g,f);if(i.length>0)-1==(F=$j.inArray(f+"~"+fldname+"~hide",AxFormContSetFldActGrid))&&-1==(F=$j.inArray(f+"~"+fldname+"~show",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(f+"~"+fldname+"~show"):AxFormContSetFldActGrid[F]=f+"~"+fldname+"~show"}}}catch(x){}HideShowField(fldname,"show");b=GetFieldIndex(fldname),w=GetDWBFieldType("",b);b>-1&&(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=w&&"time"==w.toLowerCase())&&($j("#"+i.attr("id")+" .tstOnlyTime").addClass("hasDatepicker"),$j("#"+i.attr("id")+" .tstOnlyTime24hours").addClass("hasDatepicker"))}break;case"10":if(/^dc\d+$/.test(fldname.toLowerCase()))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"hidepopdc");break;case"11":if(/^dc\d+$/.test(fldname.toLowerCase()))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"showpopdc");break;case"12":m=GetDcNo(fldname);IsDcGrid(m)?($("#gridHd"+m+" th[id='th-"+fldname+"']").text(a),$("#wrapperForEditFields"+m+" label[for='"+e+"']").text(a)):"checkbox"==$j("#"+e).attr("type")?$("label[for='"+e+"'] span").text(a):$("label[for='"+e+"']").text(a);break;default:return}else if(EnableDisableField(e,t,"0"),("4"==t||"5"==t)&&/^dc\d+$/.test(fldname.toLowerCase())){var C="";C="4"==t?"enable":"disable";var F;m=parseInt(fldname.substr(2,fldname.length),10);-1==(F=$j.inArray(m+"~"+C,DisabledDcs))&&DisabledDcs.push(m+"~"+C)}}function EnableDisableCheckbox(e,t){$j("#chkAll_"+e).prop("disabled",t),$j("#chkAll_"+e).attr("readOnly",t),$j("input:checkbox[id='"+e+"']").each(function(){$j(this).prop("disabled",t),$j(this).attr("readOnly",t)})}function EnableDisableField(e,t,a){"1"==a?ProcessFormControl(e,t,""):-1==$j.inArray(e+"~"+t,AxFormContDisableFlds)&&AxFormContDisableFlds.push(e+"~"+t)}function HideShowField(e,t){var a=GetDcNo(e),i="";if(IsDcGrid(a)){"hide"==t?($j("#th-"+e).hide(),$j("#tf-"+e).addClass("d-none")):($j("#th-"+e).show(),$j("#tf-"+e).removeClass("d-none"));var r;r=GetDcRowCount(a);try{var l=GetFieldIndex(e);FFieldHidden[l]="hide"==t?"True":"False"}catch(c){}getGridFldType(e,a);for(var o=1;o<=r;o++){var n;if((i=$j("#"+e+GetClientRowNo(o,a)+"F"+a)).length>0)if("hide"==t)i.hide(),inputValue.css("display","none"),i.parent().hide(),(n=i.attr("data-style"))!=undefined&&i.attr("data-style",n.indexOf("display: inline")>0?n.replace("display: inline;","display: none;"):n.indexOf("display: none")>0?n:n+"display: none;"),$j("#dvGrid"+e).length&&$j("#dvGrid"+e).hide(),i.closest(".gridElement").length&&i.closest(".gridElement").hide(),!i.parent().is("td")&&i.parent().parent().length>0&&(i.parent().parent().is("td")?i.parent().parent().hide():i.parent().parent().parent().is("td")&&i.parent().parent().parent().hide());else i.show(),i.parent().show(),inputValue.css("display","inline"),(n=i.attr("data-style"))!=undefined&&i.attr("data-style",n.indexOf("display: inline")>0?n:n+"display: inline;"),$j("#dvGrid"+e)&&$j("#dvGrid"+e).show(),i.closest(".gridElement").length&&i.closest(".gridElement").show(),!i.parent().is("td")&&i.parent().parent().length>0&&(i.parent().parent().is("td")?i.parent().parent().show():i.parent().parent().parent().is("td")&&i.parent().parent().parent().show());else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}else{i=$j("#dv"+e);try{var s=GetFieldIndex(e);FFieldHidden[s]="hide"==t?"True":"False"}catch(c){}if(i.length>0)if("hide"==t)i.addClass("d-none").parents(".grid-stack-item").addClass("d-none");else{i.removeClass("d-none").parents(".grid-stack-item").removeClass("d-none");var d=i.find(":input");d.css("visibility"),d.css("visibility","")}else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}var inputValue="",s;function getGridFldType(e,t){var a=0==$("#gridHd"+t+" tbody tr").length?1:$("#gridHd"+t+" tbody tr").length,i=(inputValue=$j("#"+e+GetClientRowNo(a,t)+"F"+t)).closest(".gridElement");return eleType="",i.find("span.picklist").length>0?(eleType="pickList",hiddenData=i.find("span.picklist input[type = hidden]").attr("id")+"~"+i.find("span.picklist input[type = hidden]").val()):i.find("input.grdAttach").length>0?(eleType="gridattach",isAttachMentExist=!0):i.find("input.date").length>0?eleType="datepicker":inputValue.hasClass("fldFromSelect")?(inputValue.hasClass("fastdll")?eleType="fromselect-select":eleType="fromselect-pick",eleType=inputValue.hasClass("isrefreshsave")?eleType+"~isrefreshsave":eleType):(eleType=inputValue[0].nodeName.toLowerCase(),"input"==eleType&&"checkbox"==inputValue[0].type&&(eleType="checkbox"),"input"==eleType&&inputValue.hasClass("number")&&(eleType="numeric")),eleType}function Getcondition(i){var isfld=!1,expFldname1="",fieldVal="";s=Formcontrols[i+1];var firstChar=s.substring(0,1);":"==firstChar&&(s=s.substring(1,s.length)),s=GetExactFieldName(s),fld=GetComponentName(s,fldExtn),cond=GetCondFldValue(fld),""==cond&&(cond="''");var op=Formcontrols[i+2];"et"==op&&(op="=="),"net"==op&&(op="!="),"gt"==op&&(op=">"),"lt"==op&&(op="<"),"gtoet"==op&&(op=">="),"ltoet"==op&&(op="<="),cond+=op,s=Formcontrols[i+3];var firstChar=s.substring(0,1);return":"==firstChar&&(s=s.substring(1,s.length),s=GetExactFieldName(s),s=GetComponentName(s,fldExtn),s=GetCondFldValue(s)),s=TrimAll(s),s=s.replace(/\s/g,""),isNaN(s)&&(s=s.replace(/\"/g,""),s='"'+s+'"'),cond+=s,result=eval(cond),result}function GetComponentName(e,t){var a=GetDcNo(e),i=IsDcGrid(a);if(""==t)r=i?e+"001F"+a:e+"000F"+a;else var r=e+t;return document.getElementById(r)||(r=i?e+"001F"+a:e+"000F"+a),r}function GetCondFldValue(e){var t="";if($j("#"+e).length>0)t=GetFieldValue(e);else{var a=0;if(Parameters.length>1)for(var i=1;i<Parameters.length;i++){var r=Parameters[i].toString();r=r.split("~"),varlist[a]=r[0].toString(),valuelist[a]=r[1].toString(),a++}for(var l=0;l<varlist.length;l++)if(s==varlist[l]){t=valuelist[l];break}}return(t=t!=undefined?t.replace(/\s/g,""):"''")==dateString&&(t="''"),isNaN(t)&&(t='"'+t+'"'),t}function ShowingDc(e,t,a){try{AxBeforeShowingDc(e,t)}catch(h){}IsDcGrid(e);var i=parseInt(e,10),r="visible",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="show",n="hand";if("hide"==(t=t.toString().toLowerCase()))r="hidden","none",l="glyphicon glyphicon-chevron-up icon-arrows-up",o="show",n="default","true";else if("show"==t){var s=GetTabDcIndexPagePos(i);-1!=s&&(""==arrVisibleTabDcs[s]?(arrVisibleTabDcs[s]=i,callGetTab=!0):arrVisibleTabDcs[s]==i?(arrVisibleTabDcs[s]=i,callGetTab=!0):callGetTab=!1),r="visible","block",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="hide",n="hand","false"}var d=$j("#dcButspan"+e);d.length>0&&(d.attr("alt",o),d.attr("class",l),d.css("visibility",r),d.css("cursor",n)),$j(".fbutton").each(function(){"hide"==t?$j(this).prop("disabled",!0):$j(this).prop("disabled",!1)});var c=$j("#DivFrame"+e),p="";if(c.length>0){if("showpopdc"!=t&&"hidepopdc"!=t||(createPopDcDialog(e,c),void 0!==fld||null!=fld||""!=fld?p=fld:parseInt(dcno,10)>0&&("true"==DCIsGrid[dcno-1].toLowerCase()?(rowNo=GetRowNoHelper(AxActiveRowNo),p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)):(rowNo="000",p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)))),"show"==t){if(c.removeClass("d-none"),$("#gridHd"+e).length>0&&$("#gridHd"+e+" tbody tr").hasClass("inline-edit"))updateInlineGridRowValues(),$("#gridHd"+e+" tbody tr").removeClass("inline-edit");else if($("#gridHd"+e).length>0&&!$("#gridHd"+e+" tbody tr").hasClass("inline-edit")&&$("#gridHd"+e+" tbody tr").find(".dropzone").length>0)try{DropzoneInit("#divDc"+e),DropzoneGridInit("#divDc"+e)}catch(h){}}else if("hide"==t)c.addClass("d-none");else if("showpopdc"==t)"complete"==document.readyState&&c.dialog("open"),c.find("#head"+e).find("a[onclick^='javascript:ShowDc(']").hide(),$("#"+p).parent().next().hasClass("ShowPopDc")||$('<span class="fa fa-external-link ShowPopDc" onclick="ShowingDc(\''+e+"','showpopdc'); return false;\"></span>").insertAfter($("#"+p).parent());else if("hidepopdc"==t)"complete"==document.readyState&&c.dialog("close"),$("#"+p).parent().next().hasClass("ShowPopDc")&&$("#"+p).parent().next().remove();else if("enable"==t)$j("#DivFrame"+e).find("input,textarea, img, select, a").not(".flddis").removeAttr("disabled"),$j("#DivFrame"+e).find(".rowdelete").removeClass("disabledelete"),$j("#wrapperForEditFields"+e).show(),$j("#gridToggleBtn"+e).removeClass("disables").prop("disables",!1),$j("#DivFrame"+e).find(".rowadd").removeClass("disableadd"),$j("#DivFrame"+e).find(".fillcls").removeClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!1).removeClass("disableadd"),$j("#DivFrame"+e+" .gridIconBtns a").not("[id^=clearThisDC]").prop("disabled",!1).removeClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").removeClass("disabled").prop("disabled",!1),$j("#fillgrid"+e).prop("disabled",!1).removeClass("disabled"),$j("#fillgridList"+e).prop("disabled",!1).removeClass("disabled"),$j("#gridHd"+e+" tbody tr").removeClass("disableTheRow"),$j("#gridHd"+e+" tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").removeClass("disabled").prop("disabled",!1).parent().removeClass("disabled").prop("disabled",!1),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!1).on("click"),$j("#DivFrame"+e+" .newgridbtn ul li").css("pointer-events","");else if("disable"==t){for(var u in $j("#DivFrame"+e).find("input,textarea, img, select, a").not(".subGrid,.chkShwSel").attr("disabled",!0),CKEDITOR.instances)try{CKEDITOR.instances[u].setReadOnly(!0)}catch(h){}$j("#DivFrame"+e).find("a img").removeClass("handCur"),$j("#DivFrame"+e).find("img").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(".dvImgClear .icon-arrows-remove").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(":button").removeClass("handCur"),$j("#DivFrame"+e).find(".rowdelete").addClass("disabledelete"),$j("#DivFrame"+e).find(".rowadd").addClass("disableadd"),$j("#gridAddBtn"+e).prop("disabled",!0).addClass("disabled"),$j("#DivFrame"+e+" .gridIconBtns a").not("[id^=clearThisDC]").prop("disabled",!0).addClass("disabled"),$j("#clearThisDC"+e).prop("disabled",!0).find(".gridActs").addClass("disabled"),$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("#DivFrame"+e).find(".fillcls").addClass("disablefill"),$j("#fillgrid"+e).prop("disabled",!0).addClass("disabled"),$j("#fillgridList"+e).prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click"),$j("#DivFrame"+e+" .newgridbtn ul li").css("pointer-events","none"),$j("#DivFrame"+e).find(".upload-icon").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attach-files .grdAttach, .grdAttach").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attachment-count").removeAttr("disabled")}}else"disable"!=t&&"enable"!=t||-1==$j.inArray(e+"~"+t,DisabledDcs)&&DisabledDcs.push(e+"~"+t);var f=$j("#li"+e);if(f.length>0&&("show"==t?f.removeClass("d-none"):"hide"==t&&f.addClass("d-none")),f.hasClass("active")&&"hide"==t){var m=GetFirstTabDcNo(e);-1!=m&&$j("#ank"+m).click()}try{AxAfterShowingDc(e,t)}catch(h){}}function createPopDcDialog(e,t){var a=.97*$(window).width();$(window).height();"complete"==document.readyState&&(t.dialog({modal:!0,autoOpen:!1,width:a,open:function(){$(".ui-widget-overlay").bind("click",function(){t.dialog("close")})},close:function(){$(this).dialog("close"),$(this).dialog("destroy"),t.hide()},buttons:[{text:"Save",click:function(){ValidateBeforeSubmit(e)&&t.dialog("close")},"class":"ui-button ui-corner-all ui-widget hotbtn"},{text:"Cancel",click:function(){ClearFieldsInDC(e),t.dialog("close")},"class":"coldbtn btn",style:"background: antiquewhite"}]}),$(".ui-dialog-titlebar").hide(),0==t.find("div:eq(0) button").length&&t.find("div:eq(0)").prepend('<button class="remodal-close icon-basic-remove" style="color:rgba(76, 53, 53, 0.61);"></button>'),$(".remodal-close").bind("click",function(){t.dialog("close")}))}function createDataGridDialog(e){createBootstrapModal("divDc"+e+" #gridheaddiv","DC"+e+" ","wrapperForEditFields"+e,"","","97%")}function clearDataGrid(editGridDC){var calledfrom=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==editGridDC&&(isExitDummy=!0)}),isExitDummy)return!1;if($j("#clearThisDC"+editGridDC).find("a[disabled='disabled']").length>0)return!1;if($j("#chkallgridrow"+editGridDC).prop("checked"))if($(".wrapperForGridData"+editGridDC+" table tbody tr").length>0){var cutMsg=eval(callParent("lcm[25]"));try{var _cutMsg=AxBeforeAllGridRowsDelete(editGridDC);""!=_cutMsg&&(cutMsg=_cutMsg)}catch(ex){}cutMsg=cutMsg.replace("{0}",GetDcCaption(editGridDC));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var rid=$j("#recordid000F0").val();if("0"!=rid&&"excelimport"!=calledfrom)var clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){$(".jconfirm-buttons .hotbtn").focus(),disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){try{FldListParents=new Array,FldListData=new Array}catch(ex){}clearThisDCGrid.close();var e=GetDcRowCount(editGridDC);DeleteAllRows(editGridDC,e),ShowDimmer(!1),$("#chkallgridrow"+editGridDC).prop("checked",!1),$("#clearThisDC"+editGridDC).addClass("disabled"),AxFormContSetGridCell.length>0&&(AxFormContSetGridCell=jQuery.grep(AxFormContSetGridCell,function(e){return e.split("~")[0]!=editGridDC||e.split("~")[0]==editGridDC&&"*"==e.split("~")[2]}))}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){AxWaitCursor(!1),ShowDimmer(!1),disableBackDrop("destroy")}}}});else{try{FldListParents=new Array,FldListData=new Array}catch(ex){}var fDcRowCount=GetDcRowCount(editGridDC);DeleteAllRows(editGridDC,fDcRowCount),ShowDimmer(!1),$("#chkallgridrow"+editGridDC).prop("checked",!1),$("#clearThisDC"+editGridDC).addClass("disabled"),AxFormContSetGridCell.length>0&&(AxFormContSetGridCell=jQuery.grep(AxFormContSetGridCell,function(e){return e.split("~")[0]!=editGridDC||e.split("~")[0]==editGridDC&&"*"==e.split("~")[2]}))}}else showAlertDialog("info",2004,"client");else if($j("input[name=grdchkItemTd"+editGridDC+"]:checked").length>0){try{FldListParents=new Array,FldListData=new Array}catch(ex){}DeleteSelectedRows(editGridDC)}}function DeleteSelectedRows(editGridDC){var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var cutMsg=eval(callParent("lcm[5]"));try{var _cutMsg=AxBeforeSingleGridRowDelete(editGridDC);""!=_cutMsg&&(cutMsg=_cutMsg)}catch(ex){}var rid=$j("#recordid000F0").val();if("0"!=rid)$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),content:cutMsg,escapeKey:"buttonB",rtl:isRTL,onContentReady:function(){disableBackDrop("bind")},buttons:{buttonA:{text:eval(callParent("lcm[279]")),btnClass:"btn btn-primary",action:function(){try{var e=$j("input[name=grdchkItemTd"+editGridDC+"]:checked").length,t=0;$j("input[name=grdchkItemTd"+editGridDC+"]:checked").each(function(){t++;var a=$j(this).attr("id"),i=a.substring(a.lastIndexOf("F"),a.lastIndexOf("F")-3);axInlineGridEdit&&updateInlineGridRowValues(),t==e?DeleteGridRow(editGridDC,i,undefined):DeleteGridRow(editGridDC,i,"all"),SetPositionfldDisplayTot()})}catch(ex){AxWaitCursor(!1)}}},buttonB:{text:eval(callParent("lcm[280]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){}}}});else try{var chkdCount=$j("input[name=grdchkItemTd"+editGridDC+"]:checked").length,loopCount=0;$j("input[name=grdchkItemTd"+editGridDC+"]:checked").each(function(){loopCount++;var e=$j(this).attr("id"),t=e.substring(e.lastIndexOf("F"),e.lastIndexOf("F")-3);axInlineGridEdit&&updateInlineGridRowValues(),loopCount==chkdCount?DeleteGridRow(editGridDC,t,undefined):DeleteGridRow(editGridDC,t,"all"),SetPositionfldDisplayTot()})}catch(ex){AxWaitCursor(!1)}if(arrRefreshDcs.length>0)for(var i=0;i<arrRefreshDcs.length;i++){var arrDcNos=arrRefreshDcs[i].split(":");if(arrDcNos[1]=="dc"+editGridDC){arrRefreshFldDirty[i]=!0;break}}OnRowChangeSetHeight(editGridDC),checkTableBodyWidths(editGridDC),"True"==isTstPop&&TstructTabEventsInPopUP("")}function GetFirstTabDcNo(e){var t=0;for(t=0;t<PagePositions.length;t++)if(-1!=PagePositions[t].toString().indexOf(",")){var a=PagePositions[t].toString().split(","),i=0;for(i=0;i<a.length;i++)if(e==a[i])return a[0]}return-1}function EnableDisableDc(e,t){var a=IsDcGrid(e),i=(parseInt(e,10),!1),r="hand";"Enable"==t?(i=!1,r="hand"):"Disable"==t&&(i="disabled",r="default");var l=$j("#dcButspan"+e);if(l.length>0&&(l.attr("alt","hide"),l.attr("class","glyphicon glyphicon-chevron-down icon-arrows-down"),l.attr("disabled",i),l.css("cursor",r)),a){var o=$j("#DivFrame"+e);o.length>0&&("Enable"==t?o.attr("disbaled",!1):o.attr("disbaled","disbaled"))}else{var n=$j("#DivFrame"+e);if(n.length>0)"Enable"==t?n.attr("disbaled",!1):n.attr("disbaled","disbaled");else{var s=$j("#tab-"+e);s.length>0&&("Enable"==t?s.attr("disbaled",!1):s.attr("disbaled","disbaled"))}}}function AddGroup(e,t){fillDcname=e;var a=GetDcRowCount(e);if(1==parseInt(a,10)){var i=t+GetClientRowNo("001",e)+"F"+e,r=GetFieldValue(i);""!=r&&UpdateFieldArray(i,"001",r,"")}var l=$j("#recordid000F0").val();ArrActionLog="AddGroup-DcNo-"+e+"-KeyColumn-"+t+"-Recordid-"+l;var o=GetFormatGridIndex(e);if(-1!=o){var n=DcMultiSelect[o].toString().toLowerCase();try{if("true"==n)ASB.WebService.GetAddGroupsHtml(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,transid,tstDataId,resTstHtmlLS,SuccessGetFillGridMS,OnException);else{var s=GetDeletedRows(),d=GetChangedRows(),c=$j("#recordid000F0").val();ShowDimmer(!0),ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,c,transid,e,"","",s,d,tstDataId,resTstHtmlLS,SuccExecActionValue,OnException)}}catch(u){AxWaitCursor(!1);var p=u.name+"^♠^"+u.message;showAlertDialog("error",2030,"client",p)}}}$j.curCSS=function(e,t,a){$j(e).css(t,a)};var fillGridDc="",fillOrAdd="",AxActivefillGridName="",dialogObj;function FillGrid(frNo,addGroup,fillGridName,fastFill){GetCurrentTime("Tstruct FillGrid button click(ws call)"),fastFill!=undefined||(fastFill=!1);var IsConfirm=!1;AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var stTime=new Date;try{AxBeforeFillGrid()}catch(ex){}if(AxActivefillGridName=fillGridName,void 0===$j("[name="+fillGridName+"]").attr("class")||-1==$j("[name="+fillGridName+"]").attr("class").indexOf("disablefill")){var vallist=new Array;fillGridDc=frNo;var ind=$j.inArray(fillGridName,FillGridName),dcIdx=$j.inArray(frNo,DCFrameNo),isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&(isExitDummy=!0)}),"APPEND"==FillCondition[ind]&&$("#gridHd"+frNo+" tbody tr").length>0&&isExitDummy)UpdateFieldArray(axpIsRowValid+frNo+"001F"+frNo,GetDbRowNo("001",frNo),"false","parent","fillgrid");else if("INIT"==FillCondition[ind]){if($("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy){IsConfirm=!0;var cutMsg=eval(callParent("lcm[26]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var FillGridCB=$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){GetCurrentTime("Tstruct FillGrid button click(ws call)"),FillGridCB.close(),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1}),FillGridAfterConfirm(fastFill)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),AxWaitCursor(!1),ShowDimmer(!1)}}}})}}else if("AOWE"==FillCondition[ind]&&$("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy&&"True"==DCHasDataRows[dcIdx]){IsConfirm=!0;var cutMsg=eval(callParent("lcm[519]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var FillGridCB=$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){GetCurrentTime("Tstruct FillGrid button click(ws call)"),FillGridCB.close();var e=GetDcRowCount(frNo);DeleteAllRows(frNo,e),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1}),FillGridAfterConfirm(fastFill)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),AxWaitCursor(!1),ShowDimmer(!1)}}}})}0==IsConfirm&&FillGridAfterConfirm(fastFill)}function FillGridAfterConfirm(e){AxWaitCursor(!0),ShowDimmer(!0);var t="";-1!=ind&&(ashow=FillAutoShow[ind],multiselect=FillMultiSelect[ind].toString().toLowerCase(),t=FillParamFld[ind]);try{FldListParents=new Array,FldListData=new Array}catch(ex){}""!=FillSourceDc[ind]&&"true"==multiselect&&(multiselect="false");var a="";if(""!=t&&"true"==multiselect)for(var i=t.toString().split(","),r=0;r<i.length;r++){var l=IsGridField(i[r]),o=GetDcNo(i[r]);if(1==l){var n=GetDcRowCount(o);n=parseInt(n,10);for(var s=1;s<=n;s++){if(s=GetRowNoHelper(s),i[r]=GetExactFieldName(i[r]),$j("#"+i[r]+s+"F"+o)){var d=i[r].toString()+s+"F"+o,c=GetFieldValue(d,"fillGrid");c=CheckSpecialCharsInStr(c),a+="<"+i[r]+" rowno='"+s+"' >"+c+"</"+i[r]+">"}}}else{d=i[r].toString()+"000F"+o;if($("#"+d).length>0){c=GetFieldValue(d,"fillGrid");c=CheckSpecialCharsInStr(c),a+="<"+i[r]+">"+c+"</"+i[r]+">"}else{(c=CheckGlobalVars(i[r].toString()))==i[r].toString()?a+="<"+i[r]+"></"+i[r]+">":a+="<"+i[r]+">"+c+"</"+i[r]+">"}}}var p="fill";if(addGroup&&""!=addGroup&&(p=addGroup),fillOrAdd=p,"true"==multiselect)if(e){var u="t";try{callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.GetFastFillGridData(frNo,fillGridName,transid,p,tstDataId,u,resTstHtmlLS,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);var f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f)}}else{u="t";""!=FillGridVExpr[ind]&&(u=EvalPrepared("","000",FillGridVExpr[ind],"expr")),a="<tid>"+transid+"</tid><dc>"+frNo+"</dc>"+a;try{callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.GetFillGridData(a,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,transid,p,tstDataId,u,resTstHtmlLS,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f),UpdateExceptionMessageInET("GetFillGridData exception : "+ex.message)}}else{IsFormDirty||SetFormDirty(!0);try{changeFillGridDc=frNo,callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.DoGetFillGridNonMS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,tstDataId,resTstHtmlLS,SuccessFillGridNonMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f),UpdateExceptionMessageInET("DoGetFillGridNonMS exception : "+ex.message),GetProcessTime(),GetTotalElapsTime()}}var m=new Date;AxTimeBefSerCall=m-stTime}}var fgHt=400,fgWid=400;function SuccessGetFillGridMS(result,eventArgs){if(""!=result)if(result.split("♠*♠").length>1&&(tstDataId=result.split("♠*♠")[0],result=result.split("♠*♠")[1]),result.split("*♠♠*").length>1){var serverprocesstime=result.split("*♠♠*")[0],requestProcess_logtime=result.split("*♠♠*")[1];result=result.split("*♠♠*")[2],WireElapsTime(serverprocesstime,requestProcess_logtime,!0)}else UpdateExceptionMessageInET("Error : "+result);if(-1===result.toLowerCase().indexOf("access violation")){if(CheckSessionTimeout(result))return;try{AxBeforeFillPopUp()}catch(ex){}resTstHtmlLS="";var fillTitle="";if(fillTitle="FILL"==fillOrAdd?"FILL "+GetDcCaption(fillGridDc):"ADD "+GetDcCaption(fillGridDc),""==result){var cutMsg=eval(callParent("lcm[0]"));result="<label>"+cutMsg+"</label>"}var resSplit=result.split("*♠*");ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array;var tablehtml=resSplit[0].toString();if(""!=tablehtml&&"<label>No data found.</label>"==tablehtml)showAlertDialog("warning","No data found.");else if(""!=tablehtml&&"<label>All rows are already selected.</label>"==tablehtml)showAlertDialog("warning","All rows are already selected.");else{if($j("#dvFillGrid").length>0?$j("#dvFillGrid").html(tablehtml):($("#bootstrapModalWrapP").remove(),$("#pagebdy").append('<div id="dvFillGrid" style=""></div>'),$j("#dvFillGrid").html(tablehtml)),resSplit.length>1&&""!=resSplit[1].toString()){var _buttonResize$classLi,fgSize=resSplit[1].toString(),fgsizeSplit=fgSize.split(",");try{fgHt=fgsizeSplit[2].toString(),fgWid=fgsizeSplit[3].toString()}catch(e){}"0"!=fgHt&&"0"!=fgWid||(fgHt=400,fgWid=400);var modalData="";modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),$j("#bootstrapModalWrapP").html(""),buttons={count:2,button1:{name:eval(callParent("lcm[281]")),"function":"ProcessFillGrid("+fillGridDc+", '"+AxActivefillGridName+"')","class":"btn hotbtn",id:"modalCnfirmbtn"},button2:{name:eval(callParent("lcm[192]")),"class":"btn coldbtn"}};var myModal=new BSModal("dvFillGrid",fillTitle,modalData,function(){$("#dvFillGrid .dataTables_scrollHeadInner,#dvFillGrid .dataTables_scrollHeadInner .customSetupTableMN").addClass("vw-100"),$("#dvFillGrid .dataTables_scrollBody,#dvFillGrid .dataTables_scrollBody .customSetupTableMN").addClass("vw-100"),$("#dvFillGrid .dataTables_scroll").addClass("vw-100")},function(){});myModal.changeSize("xl"),myModal.modalHeader.classList.add("py-4"),myModal.modalBody.classList.add("py-3"),myModal.modalFooter.classList.add("py-4"),myModal.okBtn.innerText=eval(callParent("lcm[281]")),myModal.okBtn.setAttribute("onClick","ProcessFillGrid('"+fillGridDc+"','"+AxActivefillGridName+"')"),myModal.cancelBtn.innerText=eval(callParent("lcm[192]"));var buttonResizeHTML='<button type="button" class="btn btn-light shadow-sm" onclick="saveFillgridColResize(\''+fillGridDc+"','"+AxActivefillGridName+"');\">Save Resize</button>",footerExtras=document.createDocumentFragment();myModal.footerExtras=footerExtras;var buttonResize=document.createElement("div");(_buttonResize$classLi=buttonResize.classList).add.apply(_buttonResize$classLi,_toConsumableArray("d-flex gap-2".split(" "))),myModal.modalFooter.prepend(buttonResize),myModal.footerExtras.buttonResize=buttonResize,myModal.footerExtras.buttonResize.innerHTML=buttonResizeHTML,jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}else{var modalData="",buttons={count:1,button1:{name:eval(callParent("lcm[281]")),"class":"btn hotbtn"}};modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),createBootstrapModal("dvFillGrid",fillTitle,modalData,buttons),jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}$("#bootstrapModal").ready(function(){try{var glCulture=eval(callParent("glCulture")),dtFormat="DD/MM/YYYY";"en-us"==glCulture&&(dtFormat="MM/DD/YYYY"),$.fn.dataTable.moment(dtFormat)}catch(ex){}fillGridDatatbl=$("table[id^=tblFillGrid]").DataTable({fixedHeader:{header:!0,footer:!0},dom:'R<"float-start"f><"float-end"l><"w-100 overflow-auto"t>ip',columnDefs:[{orderable:!1,targets:0,width:"5%"}],aaSorting:"undefined"!=typeof fillGridDataQueryOrder&&"true"==fillGridDataQueryOrder.toString()?[]:[[1,"asc"]],language:{search:"_INPUT_",searchPlaceholder:"Search..."},scrollCollapse:!0,scrollX:!0,scrollY:300,lengthMenu:"undefined"!=typeof fillGridDataShowAll&&"true"==fillGridDataShowAll.toString()?[[-1,500,100],["All",500,100]]:[[100,500,-1],[100,500,"All"]],autoWidth:!1}),$("#dvFillGrid .dataTables_filter input[type=search]").addClass("serachdatatbl form-control"),$("#dvFillGrid table").addClass("table table-bordered table-row-bordered border-gray-300"),$("#dvFillGrid .dataTables_scrollHeadInner table").addClass("bg-light-dark"),$("#dvFillGrid .dataTables_length select").removeClass("form-control input-sm selectPaddingFix").addClass("showentries"),setTimeout(function(){fillGridDatatbl.columns.adjust()},0)})}AxWaitCursor(!1),ShowDimmer(!1)}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function GetDcCaption(e){e="dc"+e;var t="",a=$j.inArray(e,DCName);return-1!=a&&(t=DCCaption[a]),t}function SuccessFillGridNonMS(e,t){if(""!=e)if(e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]),e.split("*♠♠*").length>1){var a=e.split("*♠♠*")[0],i=e.split("*♠♠*")[1];e=e.split("*♠♠*")[2],WireElapsTime(a,i,!0)}else UpdateExceptionMessageInET("Error : "+e);if(-1===e.toLowerCase().indexOf("access violation")){gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1});var r=new Date;if(CheckSessionTimeout(e))return;resTstHtmlLS="",""!=e&&ParseServiceResult(e,"FillGrid");var l=$j("#axp_colmerge_"+fillGridDc+"000F1");null!=(l=l.val())&&""!=l&&l!=undefined&&GetGridDcTable(l,fillGridDc),UpdateFldArrayInFillgrid(fillGridDc);try{$(".griddivColumn ").addClass("gridFixedHeader").css({overflow:"auto"}),"undefined"!=typeof gridFixedHeader&&"true"!=gridFixedHeader||((!isMobile||"form"!=AxpGridForm)&&$(".griddivColumn").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table thead tr th").css({background:"#fff",position:"sticky",top:"0"}))}catch(s){}try{AxAfterFillGrid()}catch(s){}if(changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),EvaluateSetFont(fillGridDc),showAttachmentPopover(),"true"==AxLogTimeTaken){var o=(new Date).getTime()-r.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,o,ASBTotal,ASBDbTime,"FillGridNonMS")}if(setDesignedLayout("#divDc"+fillGridDc),checkTableBodyWidths(fillGridDc),FocusOnFirstGridField(fillGridDc),isMobile&&"none"==mobileCardLayout){$("#wrapperForEditFields"+fillGridDc).removeClass("d-none"),$("#wrapperForEditFields"+fillGridDc).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillGridDc+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillGridDc).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(fillGridDc," .newgridbtn")).addClass("d-none");var n=$("#DivFrame".concat(fillGridDc," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(fillGridDc)).append('<div class="clearfix"></div><div class="grdButtons btnMobile"><ul class="left">'.concat(n,"</ul></div>")),$("#wrapperForEditFields".concat(fillGridDc," .btnMobile")).find("#viewGrid".concat(fillGridDc)).addClass("d-none"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(s){}}SetPositionfldDisplayTot(),gridFreezeCols(fillGridDc)}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}var addGroupDc="";function ProcessAddGroup(e){addGroupDc=e;var t=$j("#tblFillGrid"+e),a="";t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined&&0==$j(this).prop("disabled")){var e=$j(this).val().split("¿");a+=""==a?e[0].toString():"¿"+e[0].toString()}});var i=GetDcClientRows(e).getMaxVal(),r=parseInt(i,10)+1,l=GetRowNoHelper(r);try{ASB.WebService.GetNewGroupsHtml(e,transid,a,l,tstDataId,resTstHtmlLS,SuccAddGroups)}catch(n){AxWaitCursor(!1);var o=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",o)}}function SuccAddGroups(e,t){if(""!=e&&e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]),!CheckSessionTimeout(e)&&(resTstHtmlLS="",""!=addGroupDc)){var a=e.split("♣");$j("#gridDc"+addGroupDc).html();if($j("#gridDc"+addGroupDc+" > tbody:last").append(a[1]),""!=a[0])for(var i=new Array,r=a[0].toString().split(","),l=0;l<r.length;l++)UpdateDcRowArrays(addGroupDc,r[l],"Add"),UpdateKeyColValues(addGroupDc,r[l]);ResetRowCount(addGroupDc,r.length),ResetGridRowsStyle(addGroupDc),i.push("#DivFrame"+addGroupDc),AssignJQueryEvents(i),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show())}}function ResetRowCount(e,t){var a=parseInt($j("#hdnRCntDc"+addGroupDc).val(),10);SetRowCount(addGroupDc,a+t)}function UpdateKeyColValues(e,t){var a=GetFormatGridIndex(e);if(-1!=a){var i=DcKeyColumns[a],r=($j("#"+i+t+"F"+e),GetFieldValue(i+t+"F"+e)),l=GetDbRowNo(t,e);UpdateFieldArray(i+t+"F"+e,l,r,"parent"),UpdateAllFieldValues(i+t+"F"+e,r)}}function ProcessFormatStaticFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),a="",i="",r="",l=$j.inArray("dc"+e,DCName),o="";-1!=l&&(o=DcKeyColumns[l]),t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var a=e[t].split("♣");0==t&&a[0]==o&&(r=a[0]),a[0]==r&&(""==i?i=a[1]:i+=","+a[1])}}),a=a.replace(/&/g,"&amp;");$j("#recordid000F0").val();try{ASB.WebService.ExecuteFormatFill(transid,e,i,tstDataId,resTstHtmlLS,SuccExecActionValue)}catch(s){AxWaitCursor(!1);var n=s.name+"^♠^"+s.message;showAlertDialog("error",2030,"client",n)}}function ProcessFormatFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),a="",i="",r="",l="";if(t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var a=e[t].split("♣");0==t&&"selection"==a[0].substring(1)&&(r=a[0],l=a[0].substring(0,1)),a[0]==r&&("n"!=l?""==i?i="'"+a[1]+"'":i+=",'"+a[1]+"'":""==i?i=a[1]:i+=","+a[1])}}),""==i)return showAlertDialog("warning",2005,"client"),void AxWaitCursor(!1);a=(a="<selections>"+i+"</selections>").replace(/&/g,"&amp;");var o=$j("#recordid000F0").val(),n=$j("#recordid000F0").val();ArrActionLog="FillFormatGrid-DcNo-"+e+"-Selected groups-"+i+"-Recordid-"+n;var s=GetDeletedRows(),d=GetChangedRows();try{ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,o,transid,e,a,i,s,d,tstDataId,resTstHtmlLS,SuccExecActionValue,OnException)}catch(p){AxWaitCursor(!1);var c=p.name+"^♠^"+p.message;showAlertDialog("error",2030,"client",c)}}function SuccExecActionValue(e,t){ArrActionLog="",""!=e&&e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]),CheckSessionTimeout(e)||(resTstHtmlLS="",""!=e&&ParseServiceResult(e,"Action"),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()))}function ProcessFillGrid(e,t){GetCurrentTime("Tstruct Process FillGrid Ok button click(ws call)"),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(t){t.split("~")[0]==e&&gridDummyRowVal.splice($.inArray(t,gridDummyRowVal),1),gridRowEditOnLoad=!1}),AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var a=new Date;fillDcname=e,ShowDimmer(!0),AxWaitCursor(!0),IsFormDirty||SetFormDirty(!0);$j("#tblFillGrid"+e);var i="",r="";if(0!=$('input[name="grdchkItemTd"]:checked').length,fillGridDatatbl.rows().every(function(){var e=this.node(),t=($(e).find("td"),$(e).find('td input[type="checkbox"]'));if(t.is(":checked")){r=t.val(),i+="<row>";for(var a=r.split("¿"),l=0;l<a.length;l++){var o=a[l].split("♣"),n=CheckSpecialCharsInStr(o[1]);i+="<"+o[0]+">"+n+"</"+o[0]+">"}i+="</row>"}}),"<GridList></GridList>"!=(i="<GridList>"+i+"</GridList>"))try{changeFillGridDc=e,callBackFunDtls="ProcessFillGrid♠"+e+"♠"+t,GetProcessTime(),ASB.WebService.DoGetFillGrid(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,i,tstDataId,resTstHtmlLS,SuccGetResultValue,OnException)}catch(n){AxWaitCursor(!1),ShowDimmer(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show());var l=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",l),UpdateExceptionMessageInET("DoGetFillGridWS exception : "+n.message),GetProcessTime(),GetTotalElapsTime()}else ShowDimmer(!1),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()),GetProcessTime(),GetTotalElapsTime();var o=new Date;AxTimeBefSerCall=o-a,AxActivefillGridName=""}function SuccGetResultValue(e,t){if(""!=e)if(e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]),e.split("*♠♠*").length>1){var a=e.split("*♠♠*")[0],r=e.split("*♠♠*")[1];e=e.split("*♠♠*")[2],WireElapsTime(a,r,!0)}else UpdateExceptionMessageInET("Error : "+e);if(-1===e.toLowerCase().indexOf("access violation")){var l=new Date;if(CheckSessionTimeout(e))return;resTstHtmlLS="",ParseServiceResult(e,"FillGrid"),UpdateFldArrayInFillgrid(fillDcname);try{$(".griddivColumn ").addClass("gridFixedHeader").css({overflow:"auto"}),"undefined"!=typeof gridFixedHeader&&"true"!=gridFixedHeader||((!isMobile||"form"!=AxpGridForm)&&$(".griddivColumn").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table thead tr th").css({background:"#fff",position:"sticky",top:"0"}))}catch(v){}var o=!0;if("true"==AxRuesDefFormcontrol&&(o=AxRulesDefParser("formcontrol","","formcontrol")),"Approved"!=appstatus&&"Rejected"!=appstatus&&!AxExecFormControl&&"design"!=theMode&&o&&DoFormControlOnload(),"Approved"!=appstatus&&"Rejected"!=appstatus&&!AxExecFormControl&&"design"!=theMode&&o){var n=$j("#recordid000F0").val();DoScriptFormControl("",""!=n&&"0"!=n?"On Data Load":"On Form Load")}var s=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=dc"+fillDcname+"_image]"),d=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=axp_gridattach_]"),c=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[class^=axpAttach]");s.length>0&&s.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var a=$("textarea#"+$(t).attr("id")).text();""!=a&&a!=undefined&&(ConstructAttachHTML(a,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}}),d.length>0&&d.each(function(e,t){var a=$("textarea#"+$(t).attr("id")).text();ConstructAttachHTML(a,$(t).attr("id"),"FillGrid"),showAttachmentPopover()}),c.length>0&&c.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var a=$("textarea#"+$(t).attr("id")).text();""!=a&&a!=undefined&&(ConstructAxpAttachHTML(a,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}});var p=$j("#axp_colmerge_"+fillDcname+"000F1");null!=(p=p.val())&&""!=p&&p!=undefined&&GetGridDcTable(p,fillDcname);try{AxAfterFillGrid()}catch(v){}fillgridColOptVisibility(fillDcname),EvaluateSetFont(fillDcname),changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),axInlineGridEdit&&UpdateDcRowArrays(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),"Add");var u=GetGridFields(FillGridCurrentDC),f=getNewEditRowNo(FillGridCurrentDC);if(AxActiveRowNo=parseInt(f),AxActiveDc=FillGridCurrentDC,"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),u,"FillGrid"):CallEvaluateOnAdd(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),u,"FillGrid"),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()),"true"==AxLogTimeTaken){var m=(new Date).getTime()-l.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,m,ASBTotal,ASBDbTime,"FillGridMS")}if(setDesignedLayout("#divDc"+fillDcname),FocusOnFirstGridField(fillDcname),customAlignTstructFlds([],FillGridCurrentDC),$j("textarea[id^='axpvalid']").each(function(){DoFormControlPrivilege($j(this).attr("id"),$j(this).val())}),isMobile&&"none"==mobileCardLayout){$("#wrapperForEditFields"+fillDcname).removeClass("d-none"),$("#wrapperForEditFields"+fillDcname).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillDcname+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillDcname).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(fillDcname," .newgridbtn")).addClass("d-none");var h=$("#DivFrame".concat(fillDcname," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(fillDcname)).append('<div class="clearfix"></div><div class="grdButtons btnMobile"><ul class="left">'.concat(h,"</ul></div>")),$("#wrapperForEditFields".concat(i+1," .btnMobile")).find("#viewGrid".concat(i+1)).addClass("d-none"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(v){}}gridFreezeCols(fillDcname),SetPositionfldDisplayTot()}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}function UpdateFldArrayInFillgrid(e){try{$(".wrapperForGridData"+e+" table tbody tr").each(function(){$(this).find("td").each(function(){var t=$(this).find("textarea").attr("id");if(void 0!==t&&""!=t&&!t.startsWith("axp_recid"+e)){t=t.replace("EDIT~","");var a=$(this).find("textarea").val();UpdateAllFieldValues(t,a)}})})}catch(t){}}function UpdateFldArrayInDeleteRow(e,t){try{$(".wrapperForGridData"+e+" table tbody tr#"+("sp"+e+"R"+t+"F"+e)).each(function(){$(this).find("td").each(function(){var e=$(this).find("textarea").attr("id");if(AllFieldNames.length>0&&void 0!==e&&""!=e){e=e.replace("EDIT~","");var t=$j.inArray(e,AllFieldNames);-1!=t&&(AllFieldValues.splice(t,1),AllFieldNames.splice(t,1))}})})}catch(a){}}function ClearFldArrays(){ChangedFields.length=0,ChangedFieldDbRowNo.length=0,ChangedFieldValues.length=0,DeletedDCRows.length=0}function ParseServiceResult(e,t){if(""!=e){ClearFldArrays();var a=e.split("*♠*"),i=e.split("*♠*~");if(a[0]!=undefined)try{AssignLoadValues(a[0].toString(),t)}catch(d){AxWaitCursor(!1),ShowDimmer(!1)}if(a[2]!=undefined){try{var r=designObj,l=JSON.parse(a[2]);if($.isEmptyObject(l))designObj=r;else{var o=designObj[0].dcs.map(function(e,t){return e.dc_id}).indexOf(l.dc_id);o>-1?designObj[0].dcs[o]=l:designObj[0].dcs=_.sortBy([].concat(_toConsumableArray(designObj[0].dcs),[l]),"dc_id")}}catch(d){designObj=r}jsonText=JSON.stringify(designObj,null,"")}if(a[1]!=undefined)if(a[1].substring(0,ErrLength)==ErrStr){var n=a[1].substring(ErrLength,a[1].length-8);AxWaitCursor(!1),showAlertDialog("error",n)}else AssignHTML(a[1],"FillGrid",t),0!=changeFillGridDc&&(CheckShowHideFldsGrid(changeFillGridDc.toString()),changeFillGridDc=0),AxWaitCursor(!1);if("GetTabData"==t&&i!=undefined&&i.length>1&&"false"==i[1]){var s=$j.inArray(CurrTabNo.toString(),DCFrameNo);IsDcGrid(CurrTabNo)&&"False"==DCHasDataRows[s]&&UpdateAxpRowVldInArray(CurrTabNo,"001","1"),EvalDcFldExpressions(CurrTabNo)}}try{AfterParseServiceResult(t)}catch(d){}ShowDimmer(!1),AxWaitCursor(!1)}function EvalDcFldExpressions(e){for(var t=GetGridFields(e),a=0;a<t.length;a++){var i=t[a];i!="axp_recid"+e&&(IsGridField(i)?EvaluateAxFunction(t[a],i,"001F"+e):EvaluateAxFunction(t[a],i,"000F"+e))}}function DoFillControlPrivilege(strSingleLineText){var rno,noofrows=1;if(""!=strSingleLineText)for(var myfdcJSONObject=eval("("+strSingleLineText+")"),i=0;i<myfdcJSONObject.root.length;i++)for(var dcvalues=myfdcJSONObject.root[i].dc,fields=dcvalues.split("###"),gdslno=1,fpar=0;fpar<fields.length;fpar++){var valSplit=fields[fpar].toString();valSplit=valSplit.split("~"),rno=noofrows+"";var rnolength=rno.length;2==rnolength?nrno="0"+rno:1==rnolength?nrno="00"+rno:3==rnolength&&(nrno=rno),nrno=nrno+"F"+fillDcname;var fldVal="";for(m=0;m<valSplit.length;m++){var FldSplit=valSplit[m].split("=");if(-1!=FldSplit[0].toString().indexOf("axpvalid")&&(fldVal=FldSplit[1]),""!=fldVal){var strValue=fldVal.toString().toUpperCase();if("B"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"))}if("C"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"));for(var l=0;l<valSplit.length;l++){var FldSplit=valSplit[l].split("="),FieldId=window.opener.document.getElementById(FldSplit[0]+nrno);if(FieldId){var id=FieldId.id;window.opener.document.getElementById(id).disabled="true"}}break}}}dnrno="'"+nrno+"'",noofrows+=1}}function CheckAll(e,t){"t"==t||"true"==t?$j("input[name=chkItem]:checkbox").each(function(){0==$j(this).prop("disabled")&&"none"!=$j(this).parent().parent().parent().css("display")&&$j(this).prop("checked",e.checked)}):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function ChkHdrCheckbox(e,t){"t"==t||"true"==t?$j(".fgChk").parents("table.gridData tbody").find(".fgChk:visible").length==$j(".fgChk").parents("table.gridData tbody").find(".fgChk:checked").length?$j(".fgHdrChk").parents("table.gridData thead").find(".fgHdrChk").prop("checked",!0):$j(".fgHdrChk").parents("table.gridData thead").find(".fgHdrChk").prop("checked",!1):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function DeleteAllRows(e,t){var a=parseInt(t,10);a>1&&!axInlineGridEdit&&"form"!=AxpGridForm&&(grdRCOunt=$("#gridHd"+e+" tbody tr").length,grdRCOunt==a&&a++);for(var i=axInlineGridEdit?a:"form"==AxpGridForm?a:a-1;i>=1;i--)DeleteGridRow(e,GetClientRowNo(i,e),"all");if(axInlineGridEdit||"form"!=AxpGridForm){adjustEditLayoutId(e),AxActiveRowNo="1";var r=GetGridFields(e);"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(e,"001",r,"AllRowClear"):CallEvaluateOnAdd(e,"001",r),IsAddRowCalled?axInlineGridEdit||UpdateDcRowArrays(e,"001","Add"):(IsDcPopGridCleared=!0,DeleteGridRow(e,"001F"+e,undefined))}else $("#divDc"+e+" .grid-icons").append(gridDivHtml[e]),$("#divDc"+e+" .formGridRow").remove(),0==$(".wrapperForGridData"+e+" table tbody tr").length&&adjustEditLayoutId(e),setDesignedLayout("divDc"+e),editTheRow("",e,"",event);SetPositionfldDisplayTot()}function ChangeDir(e){$j("#form1").attr("dir",e)}function LoadPdfDDL(e){document.getElementById("dvPdfDDl").innerHTML=e}function tstSearchTable(){setTimeout(function(){var e=$j("#grdSearchRes");e.find("tbody>tr>th").length>0&&(e.find("tbody").before("<thead><tr></tr></thead>"),e.find("thead:first tr").append(e.find("th")),e.find("tbody tr:first").remove()),osTable=e.DataTable({searching:!0,dom:'<"float-end"f><"d-block w-100 overflow-auto"t>',paging:!1,ordering:!1,info:!1,language:{search:"_INPUT_",searchPlaceholder:"Search..."},scrollCollapse:!0})},0)}function bindUpdownEvents(e,t){unbindKeyDownEvent(),"single"!=t&&$("#"+e+" input[type='checkbox']").each(function(){$(this).parents("td,th").addClass("text-center")}),jQuery("#"+e+" tr:nth-child(2)").length,jQuery("#"+e).length>0&&(jQuery("#"+e).on("keydown.tstrctSrch","tr:not(:first)",function(a){var i=$(this);if($(i).addClass("activeSearchTr"),9!=a.keyCode||a.shiftKey)if(9==a.keyCode&&a.shiftKey)jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,i,"top"),$(i).prev().is("tr")&&!$(i).prev().is("#"+e+" tr:first")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(i).prev().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),a.preventDefault()));else if(38==a.keyCode){a.preventDefault(),0!=jQuery("#"+e).find("tr.activeSearchTr").index()&&jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,i,"top"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").prevAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else if(40==a.keyCode){"single"==t&&a.preventDefault(),jQuery("#"+e).find("tr.activeSearchTr").index()<jQuery("#"+e).find("tr").last().index()&&jQuery("#"+e).find("tr.activeSearchTr").nextAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,i,"bottom"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").nextAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else 32==a.keyCode?"searchInput"!=$(a.target).attr("id")&&"single"==t&&unbindKeyDownEvent():13==a.keyCode&&"searchInput"!=$(a.target).attr("id")&&("multiple"==t?(a.preventDefault(),unbindKeyDownEvent(),$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()):(jQuery("#"+e+" tr.activeSearchTr input").click(),"single"==t&&unbindKeyDownEvent()),unbindKeyDownEvent());else jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,i,"bottom"),$(i).next().is("tr")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(i).next().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),a.preventDefault()))}),jQuery("#"+e).on("keydown.tstrctSrch","tr:first",function(e){13==e.keyCode&&$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()}),jQuery("#"+e+" tr").hover(function(){jQuery("#"+e+" tr.activeSearchTr").removeClass("activeSearchTr")},function(){}),jQuery("#"+e+" tr").click(function(a){"single"==t&&unbindKeyDownEvent(),"checkbox"!=$(a.target).attr("type")&&"radio"!=$(a.target).attr("type")&&0==$(this).parent("thead").length&&("single"==t&&"grdSearchRes"==e?loadTstruct(jQuery(this).find('input[type="radio"]').val()):jQuery(this).find('input[type="checkbox"]').click())})),"grdSearchRes"==e&&tstSearchTable()}function checkTheHeight(e,t,a){var i=parseInt(jQuery("#dvFillGrid").parents(".modal-body-content").css("height").replace("px","")),r=jQuery("#dvFillGrid").parents(".modal-body-content").scrollTop(),l=$(t),o=$(t).next().height(),n=$(t).prev().height(),s=l.position().top;"bottom"==a?s+o+50>i&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r+o+30},"fast"):"top"==a&&s-n<0&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r-n-30},"fast")}function unbindKeyDownEvent(){jQuery(document).unbind("keydown.tstrctSrch")}function GetGridDcTable(e,t){var a="gridHd"+t,i=document.getElementById(a),r=i.querySelector("thead").cloneNode(!0);i.insertBefore(r,i.childNodes[0]);for(var l=e.split("#"),o=0;o<r.children[0].children.length;o++)for(var n=l[0].split(",").toString(),s=n.substr(n.indexOf("~")+1).split(","),d=n.split("~",1).toString().trim(),c=0;c<s.length;c++){var p="th-"+s[c].trim(),u=r.children[0].children[o];if(u.id==p){u.offsetWidth;u.setAttribute("colspan",s.length),u.innerHTML='<div id="div-'+s[0]+'" style="text-align: center;"><b style="font-weight: bold;">'+d+"</b></div>";for(var f=o+1;f<o+s.length;f++)getTotalWidth(r.children[0].children[f]),r.children[0].children[f].classList.add("d-none"),r.children[0].children[f].innerHTML="",r.children[0].children[f].removeAttribute("style");l.length>1&&l.splice(0,1),o=o+s.length-1;break}u.innerHTML=""}$("#"+a+" thead:first tr th").each(function(){var e="a-"+$(this).attr("id");$(this).attr("id",e)})}function getTotalWidth(e){var t=window.getComputedStyle(e),a=parseFloat(t.borderLeftWidth),i=parseFloat(t.borderRightWidth),r=parseFloat(t.paddingLeft),l=parseFloat(t.paddingRight);return e.offsetWidth+a+i+r+l}function SetHeader(e,t,a){for(var i=0;i<e.length;i++){theadName="th-"+e[t+i];var r=document.getElementById(theadName);i-(e.length-1)!=0&&(r.style.borderColor="grey"),0==i?(r.innerHTML='<div id="div-'+e[0]+'"><b style="font-weight:101">'+a+"</b></div>",r.style.borderBottom="solid 1px white",r.style.maxWidth=r.style.width):(r.innerHTML="",r.style.borderBottom="solid 1px white")}SetHeaderWidth(e,e[0],t)}function SetHeaderWidth(e,t,a){for(var i=parseInt(0),r=(parseInt(0),$j("#div-"+t)),l=0;l<e.length;l++)theadName="th-"+e[a+l],i+=parseInt(document.getElementById(theadName).offsetWidth);navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(r=document.getElementById("div-"+t)).childNodes[0].innerHTML.indexOf("_")>-1?(r.style.width=i+"px",r.style.maxWidth=i+"px",r.childNodes[0].innerHTML=r.childNodes[0].innerHTML.replace(/_/g," ")):(r.style.width=i+"px",r.style.maxWidth=i+"px"):(r=$j("#div-"+t))[0].innerText.indexOf("_")>-1?(r.css({width:i,maxWidth:i}),r[0].innerText=r[0].innerText.replace(/_/g," ")):(i=40*i/100,r.css({marginLeft:i}))}$("body").on("click",function(e){$("[data-toggle=popover]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),$j(function(){if(""==callParentNew("originalUri"))for(var e=0;e<VisibleDCs.length;e++)if("true"==DCIsGrid[e].toLowerCase()&&$j("#axp_colmerge_"+VisibleDCs[e]+"000F1").length>0){var t=$j("#axp_colmerge_"+VisibleDCs[e]+"000F1");null!=(t=t[0].value)&&""!=t&&t!=undefined&&GetGridDcTable(t,VisibleDCs[e])}});var popUpTitle="";function OpenPopUp(e,t){var a=GetFieldsRowNo(e),i=GetFieldsDcNo(e);AxActivePDc=i,RegisterActivePRow(a,i),AxIsPopActive=!0;var r=t.substring(t.lastIndexOf("F")+1);AxActiveDc=r;var l=$j.inArray(r,PopGridDCs);if(-1!=l){if(""!=PopCondition[l]&&"f"==EvalPrepared("","000",PopCondition[l],"expr").toLowerCase())return void showAlertDialog("error",2006,"client")}var o=IsPopGridFirmBind(r);SetPopDcStyle(r,o);var n=GetPopRows(i,a,r),s=n.split(",");parseInt($j("#hdnRCntDc"+r).val(),10),popUpTitle="<span style='font-size: 20PX;color: white;font-weight: bold;'>"+(popUpTitle=$j("#popDcTitle"+r).val())+"</span>",$j("#gridDc"+r+" tbody tr").each(function(){$j(this);$j(this).hide()});for(var d=0;d<s.length;d++){var c="#sp"+r+"R"+s[d]+"F"+r;$j(c).show()}if($j(".AxAddRows").length>0&&$j(".AxAddRows").val("1"),""==n&&1==IsPopParBound(r,i,a)){if(1==GetDcRowCount(r)&&IsEmptyRow("001",r))0==IsRowInPopRows(i,r,a,"001")&&(1,UpdatePopUpArrays(r,"001",!0,"Add"),UpdatePopParentFlds(r,i,"001",a),SetRowCount(r,"1"),$j("#sp"+r+"R001F"+r).show(),RefreshFillFldsInSubGrid(r,"001"),AxActiveRowNo="1",CallGetSubGridDDL(r,a,i,"001"));else AddSubGridRow(r)}else RefreshFillFldsInSubGrid(r,n),$j("#DivFrame"+r).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(r)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(r,$j(this))}}})}function RefreshFillFldsInSubGrid(e,t){for(var a=GetGridFields(e),i=0;i<a.length;i++){var r=GetFieldIndex(a[i]),l=FldParents[r].toString().split(",");if("Fill"==FMoe[r]&&""!=l)for(var o=0;o<l.length;o++){var n=GetDcNo(l[o]);if(!IsDcGrid(n)&&-1!=$j.inArray(l[o],ComboParentField))for(var s=GetFieldValue(l[o]+"000F"+n),d=(l[o],l[o]),c=0;c<ComboParentField.length;c++)if(ComboParentField[c]==d&&ComboParentValue[c]==s){for(var p=t.split(","),u=0;u<p;u++)if(""!=p[u]){var f=p[u]+"F"+e,m=GetDbRowNo(p[u],e),h=ComboDepField[c]+f,v=ComboDepValue[c].toString();$j("#"+h).length>0&&(CallSetFieldValue(h,v),UpdateFieldArray(h,m,v,"parent"))}break}}}}function AddSubGridRow(dcNo,calledFrom){var tableName="gridDc"+dcNo,newRow="",sTRowIndx=-1;newRow=$j("#"+tableName+" tbody>tr:last").clone(!0);var oldRowNo=newRow.attr("id"),hdnRowCount=$j("#hdnRCntDc"+dcNo);if(hdnRowCount.length>0){var dcClientRows=GetDcClientRows(dcNo),lastRow=dcClientRows.getMaxVal(),rowCount=$j("#hdnRCntDc"+dcNo).val(),newCnt=parseInt(lastRow,10)+1,newRowNo=GetRowNoHelper(newCnt);newRow.attr("id","sp"+dcNo+"R"+newRowNo+"F"+dcNo),newRow.find(":input").val(""),newRow.find("select,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),newRowNo)}),RegisterActiveRow(newRowNo,dcNo),AxActiveDc=dcNo;var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="dd/mm/yy";"en-us"==glCulture&&(dtFormat="mm/dd/yy"),$j(".date").datepicker({isRTL:dtpkrRTL,dateFormat:dtFormat,showOn:"both",buttonImage:"../AxpImages/icons/16x16/calendar.png",buttonImageOnly:!0,buttonText:"Select date",changeMonth:!0,changeYear:!0,yearRange:"-100:+100"}),delImg=newRow.find(".rowdelete"),delImg.attr("id")!=undefined&&delImg.attr("id","del"+newRowNo+"F"+dcNo),newRow.insertAfter("#"+tableName+" tbody>tr:last"),$j("#sp"+dcNo+"R"+newRowNo+"F"+dcNo).show(),calledFrom==undefined?SetRowCount(dcNo,newCnt,"i"+newRowNo):SetRowCount(dcNo,parseInt(rowCount,10)+1),"GetDep"==calledFrom&&UpdateNewPopInfo(dcNo,newRowNo);var rowFrameNo=newRowNo+"F"+dcNo,ind=$j.inArray(rowFrameNo,DeletedDCRows);if(-1!=ind&&DeletedDCRows.splice(ind,1),CheckScroll(dcNo),UpdateDcRowArrays(dcNo,newRowNo,"Add"),calledFrom==undefined&&(UpdateFieldsInNewRow(dcNo,newRowNo),UpdatePopParentFlds(dcNo,AxActivePDc,newRowNo,GetClientRowNo(AxActivePRow,AxActivePDc))),IsFunction="","GetDep"==calledFrom)if(""!=AxParStrFromDep){var parStr=AxParStrFromDep.split("~"),parDc=parStr[0],pRow=GetClientRowNo(parStr[1],parDc);UpdatePopUpArrays(dcNo,newRowNo,!0,"Add",pRow,parDc)}else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");calledFrom==undefined&&(RefreshFillFldsInSubGrid(dcNo,newRowNo),""==subGridJson?CallGetSubGridDDL(dcNo,AxActivePRow,AxActivePDc,newRowNo):ApplyPopJson(dcNo)),adjustwin("10",window)}}function CallGetSubGridDDL(e,t,a,i){try{var r=$j("#recordid000F0").val();ASB.WebService.GetSubGridDropdown(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,tstDataId,r,t,a,i,resTstHtmlLS,SuccessSubGridCombos,OnException)}catch(l){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}var subGridJson="",result;function SuccessSubGridCombos(e,t){if(""!=e&&e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]),!CheckSessionTimeout(e)&&(resTstHtmlLS="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,""!=e)){subGridJson=e;var a=GetDcClientRows(AxActiveDc);AxPopRowNo=a.getMaxVal(),AssignLoadValues(e,"PopGridCombos");try{AxAfterSubGridAddRow()}catch(i){}$j("#DivFrame"+AxActiveDc).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(AxActiveDc)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(AxActiveDc,$j(this))}}})}}function ApplyPopJson(e){var t=GetDcClientRows(e);AxPopRowNo=t.getMaxVal(),AssignLoadValues(subGridJson,"PopGridCombos"),UpdateRowInDataObj();try{AxAfterSubGridAddRow()}catch(a){}}function IsRowInPopRows(e,t,a,i){for(var r=GetPopRows(e,a,t).split(","),l=0;l<r.length;l++)if(r[l]==i)return!0;return!1}function IsPopParBound(e,t,a){for(var i=GetParentFields(e),r=!0,l=0;l<i.length;l++){var o=i[l]+a+"F"+t,n=GetFieldValue(o);try{n=parseFloat(n)}catch(s){}if(""==n.toString()){r=!1;break}}return r}function UpdatePopParentFlds(e,t,a,i){for(var r=GetParentFields(e),l=0;l<r.length;l++){var o=r[l].toString().trim()+i+"F"+t,n=GetSubFieldId("sub"+e+"_"+r[l].toString(),a,e),s=GetFieldValue(o);SetFieldValue(n,s);var d=GetDbRowNo(a,e);UpdateFieldArray(n,d,s,"parent")}}function EvaluateSubGridDep(e){for(var t=GetGridFields(e),a=0;a<t.length;a++){var i,r=GetFieldIndex(t[a]);if(-1!=r&&(depStr=FldDependents[r].toString()),""!=depStr&&(i=depStr.split(","))!=undefined)for(var l=0;l<i.length;l++){var o=i[l].toString(),n=o.substring(0,1),s=o.substring(1);e!=GetDcNo(s)&&"e"==n&&EvaluateAxFunction(s,t[a]+AxActiveRowNo+"F"+e)}}}function ClosePopUp(e,t){var a=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(",");if(1!=a.length)for(var i=a.length-1;i>=0;i--){var r=GetDcRowCount(e);""!=a[i].toString()&&IsEmptyRow(a[i],e)&&1!=r&&DeletePopRow(e,a[i])}$j("#dvPickList").is(":visible")&&$j("#dvPickList").hide(),AxIsPopActive=!1,t!=undefined&&t.dialog("close");var l=$j("#"+AxActiveField);l.length>0&&l.focus(),subGridJson="",EvaluateSubGridDep(e),DisplaySummaryInPopUp(e)}function DeletePopRow(e,t){var a=GetSerialNoCnt(e);a=parseInt(a,10)-1,SetSerialNoCnt(e,a);GetDcRowCount(e);var i=t+"F"+e;UpdateDcRowArrays(e,t,"Delete");for(var r=GetGridFields(e),l=0;l<r.length;l++){var o=r[l]+i;RemoveDeletedFields(o)}$j("#"+("sp"+e+"R"+t+"F"+e)).remove(),UpdatePopUpArrays(e,t,!0,"Delete");var n=GetDcRowCount(e);SetRowCount(e,n-1)}function UpdatePopUpParents(e){for(var t=GetFieldsName(e),a=GetFieldsDcNo(e),i=GetFieldsRowNo(e),r=0;r<PopParentDCs.length;r++)if(PopParentDCs[r]==a){popParentFlds=PopParentFlds[r].toString().split(",");var l;l=GetParentString(a,i,PopGridDCs[r]);for(var o=!1,n=GetParentFields(PopGridDCs[r]),s=0;s<n.length;s++)if(n[s]==t){o=!0;break}if(!o)continue;if(CheckDuplicateParents(a,popParentFlds,l,PopGridDCs[r],i)&&""!=l)return errorFlag=!0,void(errorField=e);SetPopParents(a,PopGridDCs[r],i,l);for(var d=PopGridDCs[r],c=GetPopRows(a,i,d).split(","),p=GetFieldValue(e),u=0;u<c.length;u++)if(""!=c[u].toString()){var f=GetSubFieldId("sub"+d+"_"+t,c[u].toString(),d);f="#"+f;try{var m=f.substring(1);SetFieldValue(m,p);var h=GetDbRowNo(c[u].toString(),d);UpdateFieldArray(m,h,p,"parent")}catch(v){}}}}function CheckDuplicateParents(e,t,a,i,r){var l,o=!1;l=parseInt(GetDcRowCount(e),10);for(var n=1;n<l;n++){GetParentString(e,GetRowNoHelper(n),i)==a&&n!=parseInt(r,10)&&(o=!0)}return o}function SetPopParents(e,t,a,i){for(var r=0;r<ParentDcNo.length;r++)ParentDcNo[r]==e&&PopGridDcNo[r]==t&&ParentClientRow[r]==a&&(PopParentsStr[r]=i)}function DisplaySummaryInPopUp(e){var t=-1,a=0;for(a=0;a<PopGridDCs.length;a++)if(PopGridDCs[a]==e){t=a;break}var i="",r="",l="",o="";-1!=t&&(i=PopSummaryParent[t],r=PopSummaryFld[t],l=""==PopSummDelimiter[t]?",":PopSummDelimiter[t]),-1!=r.indexOf(":")&&(r=r.replace(":",""));for(var n=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(","),s=0;s<n.length;s++){var d=r+n[s]+"F"+e;(d=$j("#"+d)).length>0&&(o+=d.val()+l)}o=o.substring(0,o.length-1),i=i+GetClientRowNo(AxActivePRow,AxActivePDc)+"F"+AxActivePDc,$j("#"+i).length>0&&$j("#"+i).val(o)}function GetPopRows(e,t,a){for(var i="",r=0;r<ParentDcNo.length;r++)if(ParentDcNo[r]==e&&ParentClientRow[r]==GetRowNoHelper(t)&&PopGridDcNo[r]==a){i=PopRows[r];break}return i}function ClearPopRows(e,t,a){for(var i=0;i<ParentDcNo.length;i++)ParentDcNo[i]==e&&ParentClientRow[i]==t&&PopGridDcNo[i]==a&&(PopRows[i]="")}function AddDeletePopRow(e,t,a,i,r){for(var l=!1,o=0;o<ParentDcNo.length;o++)if(ParentDcNo[o]==e&&ParentClientRow[o]==t&&PopGridDcNo[o]==a){l=!0;var n=PopRows[o].toString();if("Add"==r){if(""==n)n=i;else{var s=n.split(",");-1==$j.inArray(i,s)&&(n+=","+i)}PopRows[o]=n}else{for(var d=(n=n.split(",")).length-1;d>=0;d--)if(n[d].toString()==i){n.splice(d,1);break}for(var c="",p=0;p<n.length;p++)c+=""==c?n[p].toString():","+n[p].toString();PopRows[o]=c}break}if("Add"==r){if(!l){ParentDcNo.push(e),ParentClientRow.push(t);var u=GetParentString(e,t,a);PopGridDcNo.push(a),PopParentsStr.push(u),PopRows.push(i)}for(var f=0;f<PopParentDCs.length;f++)if(PopParentDCs[f]==e){parentFlds=PopParentFlds[f].toString().split(",");for(o=0;o<parentFlds.length;o++){var m=parentFlds[o]+t+"F"+e,h=GetSubFieldId("sub"+a+"_"+parentFlds[o],i,a),v=$j("#"+m),g=$j("#"+h);v.length>0&&g.length>0&&g.val(v.val())}}}}function IsEmptyRow(e,t){for(var a,i=!1,r=0;r<FldDcRange.length;r++){var l=FldDcRange[r].split("~");if(l[0]==t){a=l[1].split(",");break}}if(a!=undefined)for(var o=parseInt(a[0].toString(),10),n=parseInt(a[1].toString(),10),s=o;s<=n;s++){var d=FNames[s];if("Accept"==FMoe[s]||"Select"==FMoe[s]){d=d+e+"F"+t;var c=GetFieldValue(d),p=$j("#"+d);if(p.length>0&&"hidden"!=p.attr("type")){if("numeric"==FDataType[s].toLowerCase()&&""!=c&&(c=parseInt(c,10)),""!=c&&"0"!=c){i=!1;break}i=!0}}}return i}function SetPopDcStyle(e,t){var a=document.getElementById("add"+e),i=document.getElementById("btnClear"+e),r=document.getElementById("btnOk"+e);t?(a&&(a.disabled=!0,a.style.cursor="default"),i&&(i.style.visibility="hidden"),r&&(r.value="Close"),ShowingDc(e,"Disable")):(a&&(a.disabled=!1,a.style.cursor="hand"),i&&(i.style.visibility="visible"),r&&(r.value="Ok"))}function RegisterActivePRow(e,t){AxActivePRow=GetDbRowNo(e,t),AxActivePDc=t;for(var a=!1,i=Parameters.length-1;i>=0;i--){if("activeprow"==Parameters[i].split("~")[0]){Parameters[i]="activeprow~"+AxActivePRow,a=!0;break}}a||(Parameters[Parameters.length]="activeprow~"+AxActivePRow)}function IsPopGridFirmBind(e){for(var t=0;t<PopGridDCs.length;t++)if(PopGridDCs[t]==e&&"t"==PopGridDCFirm[t].toString().toLowerCase())return!0;return!1}function GetParentFields(e){for(var t,a=0;a<PopGridDCs.length;a++)if(PopGridDCs[a]==e){t=PopParentFlds[a].toString().split(",");break}return t}function GetParentString(e,t,a){var i="",r=GetParentFields(a);if(r!=undefined)for(var l=0;l<r.length;l++){var o=r[l]+t+"F"+e;""==i?i=GetFieldValue(o):i+="¿"+GetFieldValue(o)}return i}function GetPopGrids(e){for(var t="",a=0;a<PopParentDCs.length;a++)PopParentDCs[a]==e&&(""==t?t=PopGridDCs[a]:t+=","+PopGridDCs[a]);return t}function GetPopGridDcNo(e){for(var t="",a=0;a<PopParentDCs.length;a++)PopParentDCs[a]==e&&(""==t?t="dc"+PopGridDCs[a]:t+=",dc"+PopGridDCs[a]);return t}function AddParentRow(e,t,a,i){for(var r=!1,l=0;l<=e.length;l++)if(ParentDcNo[l]==e&&PopGridDcNo[l]==a&&ParentClientRow[l]==t){PopParentsStr[l]=i,r=!0;break}r||(ParentDcNo.push(e),ParentClientRow.push(t),PopGridDcNo.push(a),PopParentsStr.push(i),PopRows.push(""))}function UpdatePopUpArrays(e,t,a,i,r,l){if(TstructHasPop)if(a){var o=GetClientRowNo(AxActivePRow,AxActivePDc),n=AxActivePDc,s=o;r!=undefined&&l!=undefined&&(n=l,s=r),AddDeletePopRow(n,s,AxActiveDc,t,"Add"==i?"Add":"Delete")}else for(var d=GetPopGrids(e).split(","),c=0;c<d.length;c++)""!=d[c]&&AddParentRow(e,t,d[c],"")}function DeletePopRowsAfterGetDep(){for(var e=AxSubGridRows.split("¿"),t=AxParStrFromDep.split("~"),a=0;a<e.length;a++)if(""!=e[a]){var i=e[a].split("~"),r=i[0];ClearPopRows(t[0],GetClientRowNo(t[1],t[0]),r);for(var l=i[1].split(","),o=l.length-1;o>=0;o--){var n=GetClientRowNo(parseInt(l[o],10),r);if(1==$j("#gridDc"+r)[0].rows.length){var s=$j("#gridDc"+r)[0].rows[0].id;n=s.substring(s.lastIndexOf("R")+1,s.lastIndexOf("F"));ClearDeletedFields(r,n);var d=$j.inArray(r,DCFrameNo);DCHasDataRows[d]="False";var c="sp"+r+"R"+l[o]+"F"+r,p=$j("#"+c);p.attr("id","sp"+r+"R001F"+r),p.find(":input").val(""),p.find("select,a,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),"001")}),SetRowCount(r,"1"),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1)}else{c="sp"+r+"R"+n+"F"+r;$j("#"+c).remove(),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1),SetRowCount(r,GetDcRowCount(r)-1)}}}}function AddRowAfterGetDep(e,t,a){if(TstructHasPop)if("1"!=e||"True"==a)AddRow(t,"GetDep"),AxDepRows.push(e+"~"+GetDcRowCount(t));else{if(AxDepRows.push(e+"~1"),$j("#sp"+t+"R001F"+t).show(),UpdateNewPopInfo(t,"001"),""!=AxParStrFromDep){var i=AxParStrFromDep.split("~"),r=i[0];UpdatePopUpArrays(t,"001",!0,"Add",GetClientRowNo(i[1],r),r)}UpdateDcRowArrays(t,"001","Add")}}function GetDbPopRows(e,t){if(""!=e){var a=e.split(",");a.sort();for(var i="",r=0;r<a.length;r++){var l=GetRowNoHelper(GetDbRowNo(a[r],t));""==i?i=l:i+=","+l}return i}return e}function GetSubDsRowNo(e,t){var a=0,i=$j.inArray(e,AxSubWsRows);return-1==i?(AxSubWsRows.push(e),a=GetDcRowCount(t)+1,AxSubDsRows.push(a)):a=AxSubDsRows[i],a}function toggleSwitch(e){var t="";1==$j("#ckbPurposeUser").prop("checked")?($j("#ckbPurposeUser").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($j("#ckbPurposeUser").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("normal",t)}catch(a){result=a.toString()}}function toggleSwitchDesign(e){var t="";1==$("#ckbPurposeDev").prop("checked")?($("#ckbPurposeDev").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($("#ckbPurposeDev").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("design",t)}catch(a){result=a.toString()}}function GetChoiceStatusForDSign(){$.ajax({type:"POST",url:"TstructDesign.aspx/GetPrpLblStatusForDSign",data:"",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"true"==e.d?($j(".clsPrps").css("display","block"),$j("#ckbPurposeDev").prop("checked",!0)):($j(".clsPrps").css("display","none"),$j("#ckbPurposeDev").prop("checked",!1))}})}function pageloadlogtime(e){console.log("Page Load:  "+e+" milliseconds.")}function disableDC(e){var t=$j("#DivFrame"+e);t.find("input,textarea, img, select, a").not(".subGrid,.chkShwSel,.swtchDummyAnchr,.tgl").attr("disabled",!0),t.find("a img").removeClass("handCur"),t.find("img").attr("onclick","Callnull"),t.find(":button").removeClass("handCur"),t.find(".rowdelete").addClass("disabledelete"),t.find(".rowadd").addClass("disableadd"),t.find(".axpBtn").css({"pointer-events":"none",cursor:"default"}),t.find(".axpBtnCustom").css({"pointer-events":"none",cursor:"default"}),t.find(".upload-icon").attr("disabled",!0).css("cursor","default"),t.find(".fillcls").addClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!0),axInlineGridEdit||"form"==AxpGridForm||$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("#fillgrid"+e).prop("disabled",!0).addClass("disabled"),$j("#fillgridList"+e).prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-remove").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click")}function createEditors(){$("textarea").each(function(){var e=$(this),t="";if(0===(t=e.attr("id")!=undefined?e.attr("id"):"").toLowerCase().indexOf("sql_editor")||0===t.toLowerCase().indexOf("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))||0===t.toLowerCase().indexOf("js_editor")||0===t.toLowerCase().indexOf("html_editor")){if(IsGridField(GetFieldsName(t))&&"form"!=AxpGridForm&&!e.parent("div").hasClass("edit-mode-content")&&!e.parents(".modal").length)return!0;if(e.hasClass("CodeMirrorApplied"))return!0;if(e.addClass("CodeMirrorApplied"),e.data("myeditor")&&e.data("myeditor").toTextArea(),0===t.toLowerCase().indexOf("sql_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))){createTheEditor({type:"sql",textarea:t,loadSqlHintObj:!1,sqlHintObj:"mainSQLhintObj",customValidationFn:customValidationFn});var a='<div id="dvpop'+t+'" class="tstsqleditorbtn"><a value="SQL Editor" onclick=javascript:createPopup(\'AxDBScript.aspx\',true); tooltip="SQL Editor"><i class="fa fa-external-link"></i></a></div>';$("#"+t).after(a)}else 0===t.toLowerCase().indexOf("exp_editor")||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))?createTheEditor({type:"expression",textarea:t,customValidationFn:customValidationFn}):0===t.toLowerCase().indexOf("html_editor")?createHtmlEditor(t):0===t.toLowerCase().indexOf("js_editor")?createJSEditor(t,"text/javascript"):console.log("Not Applied "+t)}createAxAutocomplete(t),createAxAutocompleteColon(t)})}function createPopupdesignnew(e){htmlContent='<div id="axpertPopupWrapperDWB"  class="remodal" data-pushtxt-id="'+e+'" data-remodal-id="axpertPopupModalDWB"><button data-remodal-action="close" class="remodal-close remodalCloseBtn icon-basic-remove" title="Close"></button><div style="height:100%;" id="iframeMarkUp1"><div id="QryEditor"><div ><button id="exeQuery" title="Execute"><i class="fa fa-bolt"></i></button><textarea id="dwbtxtEditorsql" rows="4" cols="50"></textarea></div><div class="dvOutput"><div class="rsltHeader">Result<span id="spnRowCnt"></span></div><div id="txtOutput"></div><table id="tblOutput" class="table-responsive"></table></div></div></div></div>',$("head").append(htmlContent);var t=$("[data-remodal-id=axpertPopupModalDWB]:not(.remodal-is-initialized):not(.remodal-is-closed):eq(0)").remodal({closeOnOutsideClick:!0,hashTracking:!1,closeOnEscape:!0});t&&"opened"!=t.state&&t.open(),CodeMirror.fromTextArea(document.getElementById("dwbtxtEditorsql"),{mode:"text/x-sql",smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,theme:"default",hintOptions:{tables:callParentNew("mainSqlHintObj")}}).on("keyup",function(e,t){(!t.ctrlKey&&t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=122||t.keyCode>=46&&t.keyCode<=57)&&CodeMirror.commands.autocomplete(e,null,{completeSingle:!1})});var a="#dv"+$("#axpertPopupWrapperDWB").attr("data-pushtxt-id").split("0")[0];$("#QryEditor .CodeMirror")[0].CodeMirror.setValue($(a+" .CodeMirror")[0].CodeMirror.getDoc().getValue())}function customValidationFn(textarea){var jsonData="",webServiceName="",textSqlandExpression=textarea.value;if(!(textSqlandExpression.length<=0)&&(textarea.id.toLocaleLowerCase().startsWith("sql_editor")||textarea.id.toLocaleLowerCase().startsWith("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(textarea.id))||"Expression Editor"==GetDWBFieldType(GetFieldsName(textarea.id)))){var SuccessCallbackAction=function(e,t){ShowDimmer(!1);try{var a=$.parseJSON(e),i=a.result[0].msg,r=a.result[0].status;"undefined"!=typeof a.result[0].metadata?autocompleteMetadataJson(a.result[0].metadata):(sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson=""),"failed"==r.toLowerCase()&&(i=i.replace("<error>","").replace("</error>",""),showAlertDialog("warning",i))}catch(l){}},_OnException=function(e){ShowDimmer(!1)},sourcefield="",sourcetable="",Axp_Web_SqlExp_Val_Def_RestRad="",calfrom="",fgname="",fieldname="",fldordno="",datatype="",fieldType="",sfrom="",expression="",validateExpression="",transid="",savenorm="",refresh="",autoselect="",combobox="",sql="",iviewparams="",pmetadata="",sourcefieldid="",sourcetableid="",dcNo="";fieldType=GetFieldValue(GetComponentName("type",GetDcNo("type")))||"",fieldname=GetFieldValue(GetComponentName("name",GetDcNo("name")))||"",fldordno=GetFieldValue(GetComponentName("fldordno",GetDcNo("fldordno")))||"",datatype=GetFieldValue(GetComponentName("datatype",GetDcNo("datatype")))||"","field"===fieldType.toLowerCase()?sfrom=GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))||"":"Fill Grid"===fieldType.toLowerCase()&&(sfrom="fillgrid"),transid=GetFieldValue(GetComponentName("stransid",GetDcNo("stransid")))||callParentNew("transid"),expression=GetFieldValue(GetComponentName("exp_editor_expression",GetDcNo("exp_editor_expression")))||"",validateExpression=GetFieldValue(GetComponentName("exp_editor_validateexpression",GetDcNo("exp_editor_validateexpression")))||"",sfrom=sfrom.toLowerCase(),"select from sql"===sfrom?(savenorm=GetFieldValue(GetComponentName("savenormalized",GetDcNo("savenormalized")))||"",refresh=GetFieldValue(GetComponentName("refreshonsav",GetDcNo("refreshonsav")))||"",autoselect=GetFieldValue(GetComponentName("autoselect_sql",GetDcNo("autoselect_sql")))||"",combobox=""|GetFieldValue(GetComponentName("combobox_sql",GetDcNo("combobox_sql"))),sql=GetFieldValue(GetComponentName("sql_editor_test",GetDcNo("sql_editor_test")))||"",sourcefield=GetFieldValue(GetComponentName("sourcefield",GetDcNo("sourcefield")))||"",sourcetable=GetFieldValue(GetComponentName("sourcetable",GetDcNo("sourcetable")))||"",pmetadata=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||"",sourcefieldid="sourcefield",sourcetableid="sourcetable"):"select from form"===sfrom?(savenorm=GetFieldValue(GetComponentName("savenormalized_form",GetDcNo("savenormalized_form")))||"",refresh=GetFieldValue(GetComponentName("refreshonsave_form",GetDcNo("refreshonsave_form")))||"",autoselect=GetFieldValue(GetComponentName("autoselect_form",GetDcNo("autoselect_form")))||"",combobox=GetFieldValue(GetComponentName("combobox_form",GetDcNo("combobox_form")))||"",sql=GetFieldValue(GetComponentName("sql_editor_sqltextform",GetDcNo("sql_editor_sqltextform")))||"",sourcefield=GetFieldValue(GetComponentName("selectfield",GetDcNo("selectfield")))||"",sourcetable=GetFieldValue(GetComponentName("tname",GetDcNo("tname")))||"",pmetadata=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||""):"accept"===sfrom?sql=GetFieldValue(GetComponentName("sql_editor_detail",GetDcNo("sql_editor_detail")))||"":""==sql&&(sql=textSqlandExpression),Axp_Web_SqlExp_Val_Def_RestRad=GetFieldValue(GetComponentName("Axp_Web_SqlExp_Val_Def_RestRad",GetDcNo("Axp_Web_SqlExp_Val_Def_RestRad")))||"",textarea.id.toLocaleLowerCase().startsWith("sql_editor")?(jsonData={_parameters:[{tstructs:{axpapp:callParentNew("mainProject"),transid:transid,fieldname:fieldname,iviewparams:iviewparams,fldordno:fldordno,datatype:datatype,sfrom:sfrom,expression:expression,validateexpression:validateExpression,savenorm:savenorm,refresh:refresh,autoselect:autoselect,combobox:combobox,sql:sql,sourcefield:sourcefield,sourcetable:sourcetable,Axp_Web_SqlExp_Val_Def_RestRad:Axp_Web_SqlExp_Val_Def_RestRad,metadata:pmetadata,sourcefieldid:sourcefieldid,sourcetableid:sourcetableid}}]},webServiceName="ValidateSQL"):textarea.id.toLocaleLowerCase().startsWith("exp_editor")&&(textAreaID=textarea.id.toLocaleLowerCase(),calfrom=-1!=textAreaID.indexOf("exp_editor_expression")?"field":-1!=textAreaID.indexOf("exp_editor_validateexpression")?"fgval":-1!=textAreaID.indexOf("exp_editor_footerstring")?"fgfootstr":"field",jsonData={_parameters:[{tstructs:{axpapp:eval(callParent("mainProject")),transid:transid,calfrom:calfrom,expression:textSqlandExpression,fgname:fieldname,Axp_Web_SqlExp_Val_Def_RestRad:Axp_Web_SqlExp_Val_Def_RestRad}}]},webServiceName="ValidateExpression"),ShowDimmer(!0);try{ASB.WebService.CallRestWS(JSON.stringify(jsonData),webServiceName,SuccessCallbackAction,_OnException)}catch(exp){}}}function IsTabDc(e){return-1!=$j.inArray(e,TabDCs)}function createJSEditor(e,t){var a={smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,autoRefresh:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]};a.mode=t,jsCodeMirror=CodeMirror.fromTextArea(document.getElementById(e),a),jsCodeMirror.on("blur",function(){SetFieldValue(e,jsCodeMirror.getValue()),UpdateFieldArray(e,"000",$("#"+e).val(),"parent")}),jsCodeMirror.on("keyup",function(e,t){(!t.ctrlKey&&t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=122||t.keyCode>=46&&t.keyCode<=57)&&CodeMirror.commands.autocomplete(e,null,{completeSingle:!1})})}function discardLodaData(){try{var e=$j("#recordid000F0").val();GetLoadDataForDiscard(e,"")}catch(t){}}function hideDiscardButton(){try{var e=$j("#recordid000F0").val();""!=e&&"0"!=e&&"old"!=AxpTstButtonStyle?$("#ftbtn_iDiscard").removeClass("d-none"):$("#ftbtn_iDiscard").hasClass("d-none")||$("#ftbtn_iDiscard").addClass("d-none")}catch(t){}}function autocompleteMetadataJson(e){if(""!=e)try{sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson=e,e.forEach(function(e){sourceAcMetaJsonFlds.push(e.name)})}catch(t){}}function tstwfcomments(){if(0==$(".toolbarRightMenu").find(".content").length){var e='<section class="content">';$("#breadcrumb-panel .bcrumb span:not(.ivirCButton):not(.icon-arrows-down).tstivtitle").css("padding","3px 0px 0px 46px"),e+='<button type="button" class="btn btn-default btn-circle waves-effect waves-circle waves-float wftstBackBtn" onclick="wftstBackBtn();" style="float: left;margin-top: -8px;margin-left: -15px;">',e+='<i class="material-icons">arrow_back</i>',e+="</button></section>",$(".toolbarRightMenu .newRequestJson").length>0?$($(".toolbarRightMenu .newRequestJson")[0]).before(e):$(".toolbarRightMenu #iconsNewOption").length>0?$(".toolbarRightMenu #iconsNewOption").before(e):$(".toolbarRightMenu").append(e)}}function wftstBackBtn(){window.parent.globalChange=!1;var e=$("#stransid000F1").val(),t=$("#wfname000F1").val();parent.LoadIframeac("WorkflowNew.aspx?prevTransId="+e+"&prevWfName="+t)}function DoScriptFormControl(e,t){if(SFormControls.length>0)if("On Form Load"==t||"On Data Load"==t){var a=$j("#recordid000F0").val();$.each(SFCApply,function(e,t){if("On Form Load"==t&&"0"==a)isScriptFormLoad="true",EvaluateScriptFormControl(SFormControls[e]);else if("On Data Load"==t&&"0"!=a){isScriptFormLoad="true",EvaluateScriptFormControl(SFormControls[e])}})}else if(""!=e){var i=GetFieldsName(e);$.each(SFCFldNames,function(a,r){("On Click"==SFCApply[a]&&"On Field Enter"==t&&(t="On Click"),r==i&&SFCApply[a]==t)&&(isScriptFormLoad="false",EvaluateScriptFormControl(SFormControls[a],e))})}}function EvaluateScriptFormControl(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(""!=e){""!=t&&GetFieldValue(t);var a=""==t?"":t,i=e.split("♥");AxFormControlList=new Array;var r=EvalExprSet(i);AxFormControlList.length>0?ProcessScriptFormControlOnList(a):""!=r&&r.split("~").length>=2?ProcessScriptFormControl(r.split("~")[1],r.split("~")[0],a):""!=r&&r.split("♠").length>0&&0==FormControlSameFormLoad&&ProcessScriptFormControlEvents(r,a)}}function ProcessScriptFormControlOnList(e){$.each(AxFormControlList,function(t,a){""!=a&&ProcessScriptFormControl(a.split("~")[1],a.split("~")[0],e)})}function ProcessScriptFormControl(e,t,a){var i="",r=0;e.indexOf("♦")>0&&(r=e.split("♦")[2],i=e.split("♦")[1],e=e.split("♦")[0]),e.split(",").forEach(function(e){var l="";e.indexOf("^")>0&&(l=e.split("^")[1],e=e.split("^")[0]);var o=GetExactFieldName(e);if(e=o,"0"!=(O=GetDcNo(e))){var n=IsDcGrid(O);if("NONGRID"==(secFldDc=n?"GRID":"NONGRID"))e=e+"000F"+O;else if("GRID"==secFldDc){var s,d=e;if("0"==AxActiveRowNo||""==AxActiveRowNo)e=e+"001"+"F"+O;else e=e+GetClientRowNo(AxActiveRowNo,O)+"F"+O;if(0==(s=$j("#"+e+":not(.tstformbutton,.axpBtnCustom)")).length){var c=$("#gridHd"+O+" tbody tr:first").length>0?$("#gridHd"+O+" tbody tr:first").attr("id"):"";""!=c&&(e=d+(c=c.substring(c.lastIndexOf("F")-3)))}}}if(isFieldBtn=!1,0==(s=$j("#"+e+":not(.tstformbutton,.axpBtnCustom,.dwbIvBtnbtm,.dwbBtn,.menu-link)")).length){if(0==(s=$j("#DivFrame"+e.toString().substring(2))).length){var p=e.substr(2);-1!=$j.inArray(p,TabDCs)&&(s=$j("#ank"+p))}}else s.length>0&&s.parents(".menu.menu-sub-dropdown").length>0&&(isFieldBtn=!0);var u=GetFieldsRowNo(e),f=GetFieldsDcNo(e),m=(GetDbRowNo(u,f),!1);if(s.length<=0){var h,v=e;""!=e&&-1!=e.toString().indexOf("F")&&(""!=(v=e.substring(0,e.lastIndexOf("F")-3))&&-1!=FNames.indexOf(v)||(v=e)),$j(".axpBtn,.axpBtnCustom").each(function(){if($j(this).attr("id")==v)return s=$j(this),isFieldBtn=!0,!1}),$j(".action img").each(function(){if($j(this).attr("id")==v)return h=$j(this),isFieldBtn=!0,!1});var g=!1;$j(".AxpTstBtn input,img").each(function(){if($j(this).attr("value")==v||$j(this).attr("id")=="AxpTstBtn_"+v)return h=$j(this),isFieldBtn=!0,g=!0,!1}),$j(".tstformbutton").each(function(){if($j(this).attr("id")==v)return h=$j(this),isFieldBtn=!0,g=!0,!1}),"remove"==v.toLowerCase()?v="delete":"list view"==v.toLowerCase()?v="listview":"new"==v.toLowerCase()&&(v=$j(".tstructMainBottomFooter").find("a[title^=new]").length>0?"new":"add"),"save"!=v.toLowerCase()&&"submit"!=v.toLowerCase()||(m=!0,v="save");var b=v;"listview"==b.toLowerCase()&&(b="list view"),$j("#icons").find("a").each(function(){return void 0!==$j(this).attr("title")&&$j(this).attr("class")==v.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(s=$j(this),isFieldBtn=!0,!1):void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName||void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==b.toLowerCase()?(s=$j(this),isFieldBtn=!0,!1):void 0}),$j(".toolbarRightMenu").find("a").each(function(){if(void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)return s=$j(this),isFieldBtn=!0,!1}),isFieldBtn||$j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==v.toLowerCase()&&(s=$j(this),isFieldBtn=!0)}),isFieldBtn||$j(".tstructMainBottomFooter").find("a").each(function(){($j(this).attr("id").toLowerCase()==v.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(s=$j(this),isFieldBtn=!0)}),isFieldBtn||$(".toolbarRightMenu .menu-item a").each(function(){(void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==v.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(s=$j(this),isFieldBtn=!0)}),h!=undefined&&h.length>0&&(s=h.parent(0)),g&&(s=h),0!=s.length||"lnknext"!=v.toLowerCase()&&"lnkprev"!=v.toLowerCase()&&"ftbtn_idiscard"!=v.toLowerCase()&&"discard"!=v.toLowerCase()||AxDiscardNxtPrevFc.push(v+"~"+t),s.length>0&&("ftbtn_idiscard"==v.toLowerCase()||"discard"==v.toLowerCase())&&AxDiscardNxtPrevFc.push("discard~"+t)}else(s.length>0&&"lnknext"==s.attr("id").toLowerCase()&&"lnknext"==e.toLowerCase()||"lnkprev"==s.attr("id").toLowerCase()&&"lnkprev"==e.toLowerCase())&&AxDiscardNxtPrevFc.push(e+"~"+t),s.length>0&&("ftbtn_idiscard"==e.toLowerCase()||"discard"==e.toLowerCase())&&AxDiscardNxtPrevFc.push("discard~"+t);if(s.length>0)switch(t){case"enable":if(isFieldBtn)m?EnableSaveBtn(!0):EnableDisableBtns(s,!0);else if(/^dc\d+$/.test(o.toLowerCase())){var w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"enable"):ShowingDc(w,"enable")}else{var C=GetDcNo(o);try{var F=GetFieldsName(s.attr("id")),x=$j.inArray(F,FNames);FFieldReadOnly[x]="False"}catch(he){}if(IsDcGrid(C)){var y=0;y=GetDcRowCount(C);getGridFldType(o,C);for(var D=1;D<=y;D++){s=$j("#"+o+GetClientRowNo(D,C)+"F"+C);GetClientRowNo(D,C);if(s.length>0){if(-1==(de=$j.inArray(C+"~"+o+"~disable",AxFormContSetFldActGrid))&&-1==(de=$j.inArray(C+"~"+o+"~enable",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(C+"~"+o+"~enable"):AxFormContSetFldActGrid[de]=C+"~"+o+"~enable",1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!1,le.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!1);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s)}}}else{if(1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!1,le.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type")){EnableDisableCheckbox(s.attr("id"),!1)}else{(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s);try{s.length>1&&$(s[0]).hasClass("profile-pic")&&$(s[0]).siblings("span.fldImageCamera").removeClass("d-none").removeClass("disabledFldFrmControl")}catch(he){}}}}break;case"disable":if(isFieldBtn)m?EnableSaveBtn(!1):EnableDisableBtns(s,!1);else if(/^dc\d+$/.test(o.toLowerCase())){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"disable"):ShowingDc(w,"disable")}else{C=GetDcNo(o);try{var A=GetFieldsName(s.attr("id")),S=$j.inArray(A,FNames);FFieldReadOnly[S]="True"}catch(he){}if(IsDcGrid(C)){y=0;y=GetDcRowCount(C);for(getGridFldType(o,C),D=1;D<=y;D++){s=$j("#"+o+GetClientRowNo(D,C)+"F"+C);GetClientRowNo(D,C);if(s.length>0){if(-1==(de=$j.inArray(C+"~"+o+"~enable",AxFormContSetFldActGrid))&&-1==(de=$j.inArray(C+"~"+o+"~disable",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(C+"~"+o+"~disable"):AxFormContSetFldActGrid[de]=C+"~"+o+"~disable",1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!0,le.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!0);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),SetAutoCompAccess("disabled",s)}}}else{if(1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!0,le.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type")){EnableDisableCheckbox(s.attr("id"),!0)}else{(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),s.prop("disabled",!0),SetAutoCompAccess("disabled",s);try{s.length>1&&$(s[0]).hasClass("profile-pic")&&$(s[0]).siblings("span.fldImageCamera").addClass("d-none").addClass("disabledFldFrmControl")}catch(he){}}}}break;case"hide":if(/^dc\d+$/.test(o.toLowerCase())){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"hide"):ShowingDc(w,"hide")}else if(isFieldBtn)EnableDisableSFCBtns(s,"hide"),void 0!==s.attr("id")&&"ftbtn_iSave"==s.attr("id")&&(btnfooteropenlist=btnfooteropenlist.replace("ftbtn_iSave","Save")),void 0!==s.attr("id")&&"ftbtn_iNew"==s.attr("id")&&(btnfooteropenlist=btnfooteropenlist.replace("ftbtn_iNew","New"));else{HideShowField(o,"hide");var G=GetFieldIndex(o),T=GetDWBFieldType("",G);G>-1&&(o.startsWith("axptm_")||o.startsWith("axpdbtm_")||""!=T&&"time"==T.toLowerCase())&&($j("#"+s.attr("id")+" .tstOnlyTime").removeClass("hasDatepicker"),$j("#"+s.attr("id")+" .tstOnlyTime24hours").removeClass("hasDatepicker"))}break;case"show":if(/^dc\d+$/.test(o.toLowerCase())){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"show"):ShowingDc(w,"show")}else if(isFieldBtn)EnableDisableSFCBtns(s,"show");else{HideShowField(o,"show");G=GetFieldIndex(o),T=GetDWBFieldType("",G);G>-1&&(o.startsWith("axptm_")||o.startsWith("axpdbtm_")||""!=T&&"time"==T.toLowerCase())&&($j("#"+s.attr("id")+" .tstOnlyTime").addClass("hasDatepicker"),$j("#"+s.attr("id")+" .tstOnlyTime24hours").addClass("hasDatepicker"))}break;case"setvalue":axpScriptIsAddrow=!1;w=GetDcNo(o);var k="";if(IsDcGrid(w)){var N="001",I=r.length;2==I?N="0"+r:1==I?N="00"+r:3==I&&(N=r),k=o+GetClientRowNo(r,w)+"F"+w,AxActiveRowNo=GetDbRowNo(N,w)}else k=o+"000F"+w;if($j("#"+k).hasClass("multiFldChk")&&""==i.trim())if(IsDcGrid(w))$j("input[id="+k+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+k).val(""),$("#"+k).data("valuelist",""),$("#"+k).tokenfield("setTokens",[])}catch(he){}else CallSetFieldValue(k,i);var P=GetFieldsRowNo(k),R=GetDbRowNo(P,w);if(UpdateFieldArray(k,R,i,"parent",""),""!=a){a.startsWith("barqr_")&&$j($j("#"+a)).val("");try{var j=!1;if("undefined"!=typeof AxpNotFillDepFields&&""!=AxpNotFillDepFields&&""!=a){var L=GetFieldsName(a);if(void 0!==L&&""!=L)AxpNotFillDepFields.split(",").indexOf(L)>-1&&(j=!0)}j&&MainBlur($("#"+k))}catch(he){}}break;case"axaddrow":axpScriptIsAddrow=!0;var E=e.substring(2),_=!1;gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==E&&(_=!0)}),AxWaitCursor(!0),ShowDimmer(!0),CallAddRowFromScript(E,a,_);break;case"setfieldcaption":var O;if("0"!=(O=GetFieldsDcNo(e)))if(n=IsDcGrid(O)){var B=GetFieldsName(e);s.parents(".customSetupTableMN").find("thead th#th-".concat(B," .thhead")).text(l)}else s.parents(".grid-stack-item").find(".fld-wrap3 label").text(l);break;case"collapse":if(/^dc\d+$/.test(o.toLowerCase())){var M=parseInt(o.substr(2,o.length),10);$("#dcBlean"+M).length>0&&($("#dcBlean"+M).is(":checked")&&$("#dcBlean"+M).removeAttr("checked"),$("#divDc"+M+" .gridIconBtns").length>0?($("#divDc"+M+" .griddivColumn").addClass("d-none"),$("#divDc"+M+" .gridIconBtns").addClass("d-none")):$("#divDc"+M).addClass("d-none"),GetDcStateValue(M,"F"))}break;case"expand":if(/^dc\d+$/.test(o.toLowerCase())){var V=parseInt(o.substr(2,o.length),10);$("#dcBlean"+V).length>0&&($("#dcBlean"+V).is(":checked")||$("#dcBlean"+V).attr("checked","checked"),$("#divDc"+V+" .gridIconBtns").length>0?($("#divDc"+V+" .griddivColumn").removeClass("d-none"),$("#divDc"+V+" .gridIconBtns").removeClass("d-none")):$("#divDc"+V).removeClass("d-none"),GetDcStateValue(V,"T"))}break;case"mask":var W=GetFieldIndex(o);if(W>-1){var z=i,H=r.split("♠");if("false"==isScriptFormLoad)if(ScriptMaskFields.length>0)-1==(de=$j.inArray(o,ScriptMaskFields))&&ScriptMaskFields.push(o);else ScriptMaskFields.push(o);H.length>1?(FldMaskType[W]="Show few characters",FldMaskDetails[W]=H[0]+"♦"+H[1]+"♦"+z+"♦"):(FldMaskType[W]="Mask all characters",FldMaskDetails[W]="0♦0♦"+z+"♦");var U=GetDcNo(o);if(IsDcGrid(U)){var q=GetDcRowCount(U);for(D=1;D<=q;D++){var K=o+GetClientRowNo(D,U)+"F"+U;if($j("#"+K).length>0){var J=GetFieldValue(K);""!=J&&(UpdateAllFieldValues(K,J),"all"==H[0]?J=MaskCharacter(J.toString(),z,0):(J=MaskCharacter(J.toString(),z,J.length-H[0]),J=RevMaskCharacter(J.toString(),z,H[1])),$("#"+K).val(J),$("#"+K).attr("value",J))}}}else{var Q=o+"000F"+U,Y=GetFieldValue(Q);""!=Y&&(UpdateAllFieldValues(Q,Y),"all"==H[0]?Y=MaskCharacter(Y.toString(),z,0):(Y=MaskCharacter(Y.toString(),z,Y.length-H[0]),Y=RevMaskCharacter(Y.toString(),z,H[1])),$("#"+Q).val(Y),$("#"+Q).attr("value",Y))}}break;case"nomask":var X=GetFieldIndex(o);if(X>-1){if("false"==isScriptFormLoad)if(ScriptMaskFields.length>0)(de=$j.inArray(o,ScriptMaskFields))>-1&&ScriptMaskFields.splice(de,1);FldMaskType[X]="",FldMaskDetails[X]="";var Z=GetDcNo(o);if(IsDcGrid(Z)){var ee=GetDcRowCount(Z);for(D=1;D<=ee;D++){var te=o+GetClientRowNo(D,Z)+"F"+Z;if($j("#"+te).length>0){var ae=GetFieldValue(te);""!=ae&&(UpdateAllFieldValues(te,ae),$("#"+te).val(ae),$("#"+te).attr("value",ae))}}}else{var ie=o+"000F"+Z,re=GetFieldValue(ie);""!=re&&(UpdateAllFieldValues(ie,re),$("#"+ie).val(re),$("#"+ie).attr("value",re))}}break;case"gridcelldisable":C=GetDcNo(o);if(IsDcGrid(C)&&""!=i&&0!=i&&(s=$j("#"+o+GetClientRowNo(i,C)+"F"+C)).length>0){if(-1==(de=$j.inArray(C+"~"+o+"~"+GetClientRowNo(i,C)+"~enable",AxFormContSetGridCell))&&-1==(de=$j.inArray(C+"~"+o+"~"+GetClientRowNo(i,C)+"~disable",AxFormContSetGridCell))?AxFormContSetGridCell.push(C+"~"+o+"~"+GetClientRowNo(i,C)+"~disable"):AxFormContSetGridCell[de]=C+"~"+o+"~"+GetClientRowNo(i,C)+"~disable",1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!0,le.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!0);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),s.prop("disabled",!0),SetAutoCompAccess("disabled",s)}break;case"gridcellenable":C=GetDcNo(o);if(IsDcGrid(C)&&""!=i&&0!=i&&(s=$j("#"+o+GetClientRowNo(i,C)+"F"+C)).length>0){var le;if(-1==(de=$j.inArray(C+"~"+o+"~"+GetClientRowNo(i,C)+"~disable",AxFormContSetGridCell))&&-1==(de=$j.inArray(C+"~"+o+"~"+GetClientRowNo(i,C)+"~enable",AxFormContSetGridCell))?AxFormContSetGridCell.push(C+"~"+o+"~"+GetClientRowNo(i,C)+"~enable"):AxFormContSetGridCell[de]=C+"~"+o+"~"+GetClientRowNo(i,C)+"~enable",1==IsPickListField(s.attr("id")))(le=document.getElementById("img~"+s.attr("id"))).disabled=!1,le.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!1);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s)}break;case"setfontproperty":C=GetDcNo(o);if(IsDcGrid(C)){var oe=r;if(""!=i&&0!=i&&""!=oe)if("allrows"==i){y=0;y=GetDcRowCount(C);for(D=1;D<=y;D++){if($j("#"+o+GetClientRowNo(D,C)+"F"+C).length>0){var ne=oe.split("♠"),se="";ne.forEach(function(e,t){""!=e&&0==t?se+="font-family:"+e+";":""!=e&&1==t?se+="font-size:"+e+";":""!=e&&2==t?se+="font-weight:"+e+";":""!=e&&3==t?se+="color:"+e+";":""!=e&&4==t&&(se+="background-color:"+e+" !important")}),document.getElementById(o+GetClientRowNo(D,C)+"F"+C).setAttribute("style",se),-1==(de=$j.inArray(C+"~"+o+"~*~setfont~"+se,AxFormContSetGridCell))?AxFormContSetGridCell.push(C+"~"+o+"~*~setfont~"+se):AxFormContSetGridCell[de]=C+"~"+o+"~*~setfont~"+se}}}else{if($j("#"+o+GetClientRowNo(i,C)+"F"+C).length>0){var de,ce=oe.split("♠"),pe="";ce.forEach(function(e,t){""!=e&&0==t?pe+="font-family:"+e+";":""!=e&&1==t?pe+="font-size:"+e+";":""!=e&&2==t?pe+="font-weight:"+e+";":""!=e&&3==t?pe+="color:"+e+";":""!=e&&4==t&&(pe+="background-color:"+e+" !important")}),document.getElementById(o+GetClientRowNo(i,C)+"F"+C).setAttribute("style",pe),-1==(de=$j.inArray(C+"~"+o+"~"+GetClientRowNo(i,C)+"~setfont~"+pe,AxFormContSetGridCell))?AxFormContSetGridCell.push(C+"~"+o+"~"+GetClientRowNo(i,C)+"~setfont~"+pe):AxFormContSetGridCell[de]=C+"~"+o+"~"+GetClientRowNo(i,C)+"~setfont~"+pe}}}else{var ue=r;if(""!=ue)if($j("#"+o+"000F"+C).length>0){var fe=ue.split("♠"),me="";fe.forEach(function(e,t){""!=e&&0==t?me+="font-family:"+e+";":""!=e&&1==t?me+="font-size:"+e+";":""!=e&&2==t?me+="font-weight:"+e+";":""!=e&&3==t?me+="color:"+e+";":""!=e&&4==t&&(me+="background-color:"+e+" !important")}),document.getElementById(o+"000F"+C).setAttribute("style",me)}}break;default:return}})}function ProcessScriptFormControlEvents(e,t){if(""!=e){var a=e.split("♠");switch(a[0]){case"LoadPage":var i=a[1];i=i.substring(2),u=(u=a[2]).replace(/♦/g,"&");var r=a[3];a[4];if(""==r||"d"==r.toLowerCase()||"default"==r.toLowerCase()){var l=$(window.frameElement);void 0!==l&&"axpiframeac"==l.attr("id")?callParentNew("LoadIframeac(htmlPages.aspx?load="+i+"&"+u+")","function"):callParentNew("LoadIframe(htmlPages.aspx?load="+i+"&"+u+")","function")}else{tparams=u+"&AxPop=true",tparams+="&axp_refresh=true";var o="htmlPages.aspx?load="+i+"&"+tparams;setTimeout(function(){setTimeout(function(){createPopup(o)},150)},0)}break;case"OpenPage":case"LoadForm":var n=a[1];u=(u=a[2]).replace(/♦/g,"&");r=a[3],a[4];if(""==r||"d"==r.toLowerCase()||"default"==r.toLowerCase())if(transid==n)""!=u&&u.split("&").forEach(function(e){var t=e.split("=")[0],a=e.split("=")[1];a=ReplaceUrlSpecialChars(a);var i=GetDcNo(t),r="";if(r=IsDcGrid(i)?t+"001F"+i:t+"000F"+i,$j("#"+r).hasClass("multiFldChk")&&""==a.trim())if(IsDcGrid(i))$j("input[id="+r+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+r).val(""),$("#"+r).data("valuelist",""),$("#"+r).tokenfield("setTokens",[])}catch(n){}else CallSetFieldValue(r,a);var l=GetFieldsRowNo(r),o=GetDbRowNo(l,i);UpdateFieldArray(r,o,a,"parent","")});else{var s=$(window.frameElement);void 0!==s&&"axpiframeac"==s.attr("id")?callParentNew("LoadIframeac(tstruct.aspx?transid="+n+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=open)","function"):callParentNew("LoadIframe(tstruct.aspx?transid="+n+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=open)","function")}else{tparams=u+"&AxPop=true",tparams+="&axp_refresh=true";o="tstruct.aspx?act=open&transid="+n+"&"+tparams+"&isDupTab=".concat(callParentNew("isDuplicateTab"));setTimeout(function(){setTimeout(function(){createPopup(o)},150)},0)}break;case"LoadFormAndData":n=a[1];u=(u=a[2]).replace(/♦/g,"&");r=a[3],a[4];if(""==r||"d"==r.toLowerCase()||"default"==r.toLowerCase())if(transid==n){var d="",c="";""!=u?(u.split("&").forEach(function(e){d+=e+"♠",e.toLowerCase().indexOf("recordid=")>-1&&(c=e.split("=")[1])}),d+="act=load"):d="act=load♠",d=ReplaceUrlSpecialChars(d),setTimeout(function(){FormControlSameFormLoad=!0,""!=c?GetLoadData(c,d):(d+="♠loadformdata=true",GetFormLoadData(d,"false","false","true"))},0)}else{var p=$(window.frameElement);void 0!==p&&"axpiframeac"==p.attr("id")?callParentNew("LoadIframeac(tstruct.aspx?transid="+n+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=load&loadformdata=true)","function"):callParentNew("LoadIframe(tstruct.aspx?transid="+n+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=load&loadformdata=true)","function")}else{tparams=u+"&AxPop=true",tparams+="&axp_refresh=true";o="tstruct.aspx?act=load&transid="+n+"&"+tparams+"&isDupTab=".concat(callParentNew("isDuplicateTab"),"&loadformdata=true");setTimeout(function(){setTimeout(function(){createPopup(o)},150)},0)}break;case"LoadIView":var u,f=a[1];u=(u=a[2]).replace(/♦/g,"&");r=a[3],a[4];if(""==r||"d"==r.toLowerCase()||"default"==r.toLowerCase()){var m=$(window.frameElement);void 0!==m&&"axpiframeac"==m.attr("id")?callParentNew("LoadIframeac(ivtoivload.aspx?ivname="+f+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=load)","function"):window.top.LoadIframe("ivtoivload.aspx?ivname="+f+"&"+u+"&isDupTab=".concat(callParentNew("isDuplicateTab"))+"&act=load")}else{tparams=u+"&AxIsPop=true";var h="ivtoivload.aspx?ivname="+f+"&"+tparams+"&isDupTab=".concat(callParentNew("isDuplicateTab"));setTimeout(function(){setTimeout(function(){createPopup(h)},150)},0)}break;default:return}}}function CallAddRowFromScript(addDcNo,sfName,isExitDummy){GetCurrentTime("Tstruct grid dc addrow through script(ws call)");var dcClientRows=GetDcClientRows(addDcNo),lastRow=dcClientRows.getMaxVal();0==lastRow&&(lastRow=1),isExitDummy&&(lastRow=1);var newCnt=parseInt(lastRow,10),newRowNo=GetRowNoHelper(newCnt),visDcname=GetOpenTabDcs(),dbRowNo=GetDbRowNo(newRowNo,addDcNo);try{if(1!=lastRow&&!validateInlineGridRow(addDcNo,"fromscript")){var _grid=$("#gridHd"+addDcNo+" tbody tr:last").attr("id");if(void 0!==_grid&&1!=lastRow){var _grlastId=_grid.substr(_grid.lastIndexOf("F")-3,3);dbRowNo=GetDbRowNo(_grlastId,addDcNo);var slNo=GetSerialNoCnt(addDcNo);slNo=parseInt(slNo,10)-1,SetSerialNoCnt(addDcNo,slNo),AddDeletedRowsToArray(addDcNo,_grlastId);var a="sp"+addDcNo+"R"+_grlastId+"F"+addDcNo;$j("#"+a).hasClass("editWrapTr")||$j("#"+a).remove();var rowCnt=$j("#hdnRCntDc"+addDcNo).val();rowCnt=parseInt(rowCnt,10),axInlineGridEdit&&SetRowCount(addDcNo,rowCnt-1,"d");var dcIndx=GetFormatGridIndex(addDcNo);UpdateDcRowArrays(addDcNo,_grlastId,"Delete",dcIndx)}}}catch(ex){}var rid=$j("#recordid000F0").val(),filename=traceSplitStr+"AddRowFromScript-"+transid+traceSplitChar,ixml='<sqlresultset axpapp="'+proj+'" transid="'+transid+'" recordid="'+rid+'" dcname="'+addDcNo+'" rowno="'+dbRowNo+'" dcnames="'+visDcname+'" sessionid="'+sid+'" trace="'+filename+'" >';try{GetProcessTime(),ASB.WebService.AddRowPerfWS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ixml,addDcNo,tstDataId,!0,resTstHtmlLS,SuccessCalAddDataForce,ErrorAddRowForceWS)}catch(exp){$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",ServerErrMsg),UpdateExceptionMessageInET("AddRowPerfWS exception : "+exp.message),GetProcessTime(),GetTotalElapsTime()}function SuccessCalAddDataForce(result,eventArgs){""!=result&&result.split("♠*♠").length>1&&(tstDataId=result.split("♠*♠")[0],result=result.split("♠*♠")[1]);var passResult=result;try{""!=result&&(result=result.split("*♠*")[2])}catch(ex){}if(!CheckSessionTimeout(result)){resTstHtmlLS="";var isValidRow=!0;""==result||"Not a valid row!"!=result&&!result.startsWith("Notavalidrow♦")||(isValidRow=!1,"Not a valid row!"==result?(showAlertDialog("warning",eval(callParent("lcm[517]"))),UpdateExceptionMessageInET("warning : "+eval(callParent("lcm[517]")))):(showAlertDialog("warning",result.split("♦")[1]),UpdateExceptionMessageInET("warning : "+result.split("♦")[1]))),isValidRow?(axpScriptaddrowres=passResult,isExitDummy&&!isMobile?(isScriptFCAddClick=!0,isExitDummy&&(gridDummyRowVal.splice($.inArray(addDcNo.toString()+"~001",gridDummyRowVal),1),gridDummyRows=!1,gridRowEditOnLoad=!1),AssignLoadValues(result,"CallAdd"),isScriptFCAddClick=!1):axInlineGridEdit?addNewInlineGridRow(addDcNo):AddNewRowInDc(addDcNo),axpScriptaddrowres="",updateInlineGridRowValues()):(GetProcessTime(),GetTotalElapsTime()),$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1)}}function ErrorAddRowForceWS(e){try{UpdateExceptionMessageInET("ErrorAddRowForceWS : "+e._message)}catch(ex){}ArrActionLog="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1)}}function EnableDisableSFCBtns(e,t){e.length>0&&("hide"==t?$(e).hasClass("dwbIvBtnbtm")?$(e).addClass("d-none"):$(e).hasClass("dwbBtn")?$(e).addClass("d-none"):$(e).parent(".toolbarRightMenu").length>0?$(e).addClass("d-none"):$(e).parent("li").length>0?$(e).parent("li").hide():$(e).parent("div").length>0?$(e).parent("div").addClass("d-none"):($(e).parent("td").hide(),$(e).parents("table").find("th#th-"+$(e).attr("id")).hide(),$(e).parents("table").find("tfoot td#tf-"+$(e).attr("id")).addClass("d-none")):$(e).hasClass("dwbIvBtnbtm")?$(e).removeClass("d-none"):$(e).hasClass("dwbBtn")?$(e).removeClass("d-none"):$(e).parent(".toolbarRightMenu").length>0?$(e).removeClass("d-none"):$(e).parent("li").length>0?$(e).parent("li").show():$(e).parent("div").length>0?$(e).parent("div").removeClass("d-none"):($(e).parent("td").show(),$(e).parents("table").find("th#th-"+$(e).attr("id")).show(),$(e).parents("table").find("tfoot td#tf-"+$(e).attr("id")).removeClass("d-none")))}function AlertNoAction(){var e=$("#smtphost000F1").val(),t=$("#smtpport000F1").val(),a=$("#smtpuser000F1").val(),i=$("#smtppwd000F1").val();try{ASB.WebService.TestMailSettings(e,t,a,i,sucessCallbackMail,OnException)}catch(r){}}function sucessCallbackMail(e,t){var a=e;try{var i=jQuery.parseXML(e);i&&(a=-1!=e.indexOf("result")?i.getElementsByTagName("result")[0].firstChild.nodeValue:i.getElementsByTagName("error")[0].firstChild.nodeValue),-1!=a.indexOf("Test mail has been sent to")?showAlertDialog("success",a):showAlertDialog("warning",a)}catch(r){}}function barCodeScannerInit(){var e=$j(document).find("input[id^=barqr_]").attr("id");if(void 0!==e){try{onScan.detachFrom(document)}catch(t){}loadAndCall({files:{css:[],js:["/ThirdParty/onscan.js-master/onscan.min.js"]},callBack:function(){onScan.attachTo(document,{reactToPaste:!0,ignoreIfFocusOn:"none"==$j("#waitDiv").css("display")!=1,onScan:function(t){"none"==$j("#waitDiv").css("display")==1?($j("#"+e).val(t),isScriptFCAddClick=!0,axpScanBarFldFocus=e,$j($j("#"+e)).blur(),0==axpScriptIsAddrow&&$j($j("#"+e)).val("").focus(),isScriptFCAddClick=!1):showAlertDialog("warning","Please wait till the process complete!")},onKeyDetect:function(e,a){try{var i=$(a.target).attr("id");if(void 0!==i&&""!=i&&!i.toLowerCase().startsWith("barqr_"))return!1}catch(t){}}})}})}}function getHybridWeightScaleInfo(e){try{var t=0,a=setInterval(function(){10==++t&&(clearInterval(a),ShowDimmer(!1));var i=getRedisString("HybridWeightScaleInfo",callParentNew("hybridGUID"));if(""!=i){var r=JSON.parse(i);i=r.data.weight+r.data.unit,SetFieldValue(e,i),UpdateFieldArray(e,GetFieldsRowNo(e),i,"parent",""),MainBlur($j("#"+e)),$("#"+e).blur(),clearInterval(a),ShowDimmer(!1)}},1e3)}catch(i){}}function closeWeightScalePort(){try{ASB.WebService.NotifyCloseWeightScalePort(callParentNew("hybridGUID"),function(e){},function(e){})}catch(e){}}function DropzoneInit(dvId){var _thisDiv;_thisDiv=void 0!==dvId?$(dvId+" .dropzone:not(.dropzoneGrid)"):$("[id^='divDc']:not(:has(.editWrapTr)) .dropzone:not(.dropzoneGrid)"),_thisDiv.each(function(){if(!($(this).parents(".editWrapTr").length>0&&axInlineGridEdit||!axInlineGridEdit&&"form"==AxpGridForm&&!$(this).parents(".editWrapTr").length>0&&0!=$(this).parents(".editWrapTr").length)){var id="#"+$(this).attr("id"),dropzone=document.querySelector(id),previewNode=dropzone.querySelector(".dropzone-item");previewNode.id="";var previewTemplate=previewNode.parentNode.innerHTML;previewNode.parentNode.removeChild(previewNode);var url=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),fuName=$(id).attr("id").substr(9);funame=fuName.substring(0,fuName.lastIndexOf("F")-3);var attachmentSizeMB=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),maxFilesUpload="0"!=AxpFileUploadlmt?AxpFileUploadlmt:100,_uploadFileTypes="";"undefined"!=typeof UploadFileTypes&&"true"==UploadFileTypes&&"undefined"!=typeof UploadFileTypesVal&&(_uploadFileTypes=UploadFileTypesVal);var isthisReadOnly=!1,_ffuIndex=$j.inArray(funame,FNames);if("True"==FFieldReadOnly[_ffuIndex]){var _thisFldId=$(id).attr("id").substr(9);$("#"+_thisFldId).prop("disabled",!0),$(id).parent().addClass("readonly"),isthisReadOnly=!0}var myDropzone=new Dropzone(id,{url:url+"TstFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat($(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val()==undefined?"":$(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val(),"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(GetFieldsName($(id).attr("id").substr(9)),"&fileExt=").concat(_uploadFileTypes),maxFilesize:attachmentSizeMB,previewTemplate:previewTemplate,previewsContainer:id+" .dropzone-items",clickable:isthisReadOnly?"":void 0!==$(id+" .dropzone-select").parents(".grdattch").attr("id")?"#"+$(id+" .dropzone-select").parents(".grdattch").attr("id"):"#"+$(id+" .dropzone-select").parents(".nongrdattch").attr("id"),maxFiles:maxFilesUpload}),dzdefault=dropzone.querySelectorAll(".dz-default");$(dzdefault).addClass("d-none"),isthisReadOnly&&$(id).on("dragenter",function(e){myDropzone.fileAddedVia="drag"}),myDropzone.on("addedfile",function(file){if(!isthisReadOnly||"drag"!=myDropzone.fileAddedVia){ShowDimmer(!0);var extension=file.name.substring(file.name.lastIndexOf(".")+1);if(""!=_uploadFileTypes&&-1==_uploadFileTypes.indexOf(extension.toLowerCase()))return showAlertDialog("error",eval(callParent("lcm[521]"))),void ShowDimmer(!1);if(gridRowEditOnLoad){var thisFldId=$(id).attr("id").substr(9),fieldRowNo=GetFieldsRowNo(thisFldId),fldDcNo=GetFieldsDcNo(thisFldId);UpdateGridRowFlags(thisFldId,fldDcNo,fieldRowNo)}var _thisFilePath=$(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val();if(void 0===_thisFilePath){var _textareaId="axpfilepath_"+$(id).attr("id").substring("dropzone_axpfile_".length),_textarea=$("textarea").filter(function(){return this.id&&this.id.toLowerCase()===_textareaId.toLowerCase()});void 0!==_textarea&&0!=_textarea.length?(_thisFilePath=$(_textarea).val(),void 0===_thisFilePath&&(_thisFilePath="")):_thisFilePath=""}this.options.url=url+"TstFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat(_thisFilePath,"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(GetFieldsName($(id).attr("id").substr(9)),"&fileExt=").concat(_uploadFileTypes);var dropzoneItems=dropzone.querySelectorAll(".dropzone-item");dropzoneItems.forEach(function(e){e.style.display=""})}}),myDropzone.on("complete",function(e){if(isthisReadOnly&&"drag"==myDropzone.fileAddedVia)myDropzone.fileAddedVia=null;else{ShowDimmer(!0);dropzone.querySelectorAll(".dz-complete");if("success"==e.status){if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var t=e.xhr.response,a="";""!=t&&(a=t.split("♠")[1]),$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("#gridAttachCounter").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("span.spanAttCount").text(this.files.length);var i=$(e.previewElement).parents(".dropzone").attr("id").substr(9),r=$("#"+i).val();if(""==r){r=a;var l=$("#"+i).parent().width();$("#"+i).parent().width(l)}else{var o;if(null===(o=r.split(",").filter(function(e){return e==a}))||void 0===o?void 0:o[0])return myDropzone.removeFile(e),!1;r=r+","+a}$("#"+i).val(r);var n=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";n+=a,$(e.previewElement).find(".dropzone-filename").attr("onclick","ShowAxpFileuploadLink('"+i+"','"+a+"','"+n+"')");var s=GetFieldsRowNo(i),d=GetFieldsDcNo(i),c=GetDbRowNo(s,d);UpdateFieldArray(i,c,r,"parent",""),UpdateAllFieldValues(i,r),showAlertDialog("success",t.split(":")[1])}else if("error:File already exists, please rename and upload again!"==e.xhr.response){var p=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",p.split(":")[1])}else{var u=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",u.split(":")[1])}myDropzone.emit("queuecomplete")}else if("added"==e.status){var f=$(myDropzone.element).attr("id").substr(9),m=$("input#"+f).val();","==(m=m.replace(file.name+",","").replace(file.name,""))[m.length-1]&&(m=m.substring(0,m.length-1)),$("input#"+f).val(m);s=GetFieldsRowNo(f),d=GetFieldsDcNo(f),c=GetDbRowNo(s,d);UpdateFieldArray(f,c,m,"parent",""),UpdateAllFieldValues(f,m),""==m?($(myDropzone.element).find(".fileuploadmore").addClass("d-none"),$(myDropzone.element).find("#gridAttachCounter").addClass("d-none"),$(myDropzone.element).find("span.spanAttCount").text(this.files.length)):this.files.length>0&&$(myDropzone.element).find("span.spanAttCount").text(this.files.length)}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text()),myDropzone.emit("queuecomplete")}}),myDropzone.on("queuecomplete",function(e,t){ShowDimmer(!1)}),myDropzone.on("error",function(e){myDropzone.removeFile(e)}),myDropzone.on("removedfile",function(e){try{if("undefined"!=typeof e.xhr&&"error:File already exists, please rename and upload again!"==e.xhr.response)return}catch(c){}var t=$(myDropzone.element).attr("id").substr(9);if(!$(myDropzone.element).hasClass("isgridEdit")){var a=$("input#"+t).val(),i=t.substr(7),r="";if(""!=(r="undefined"!=typeof $("textarea[id*="+i+"]").not(".axpAttach")[0]&&""!=$("textarea[id*="+i+"]").not(".axpAttach")[0].value?$("textarea[id*="+i+"]").not(".axpAttach")[0].value:$("input[id*="+i+"]").not(".axpAttach,.grdAttach").length>0?$("input[id*="+i+"]").not(".axpAttach,.grdAttach")[0].value:"")&&r.endsWith("\\*")){var l="";if($.each(a.split(","),function(a,i){i.substr(20)!=e.name&&i!=e.name?l+=i+",":DeletedFieldValue.push(t+"~"+i)}),(a=l).lastIndexOf(",")>-1){var o=a.lastIndexOf(",");a=a.substring(0,o)}}else a=a.replace(e.name+",","").replace(e.name,""),DeletedFieldValue.push(t+"~"+e.name);try{$("textarea#"+t).val(a),$("textarea#"+t).attr("value",a)}catch(c){}$("input#"+t).val(a),$("input#"+t).attr("value",a);var n=GetFieldsRowNo(t),s=GetFieldsDcNo(t),d=GetDbRowNo(n,s);UpdateFieldArray(t,d,a,"parent",""),UpdateAllFieldValues(t,a),""==a?($(myDropzone.element).find(".fileuploadmore").addClass("d-none"),$(myDropzone.element).find("span.spanAttCount").text(this.files.length),$(myDropzone.element).find("#gridAttachCounter").addClass("d-none")):this.files.length>0&&$(myDropzone.element).find("span.spanAttCount").text(this.files.length)}});var fuInpId=$(id).attr("id").substr(9),fuInpVal=void 0===$("textarea#"+fuInpId).val()?$("#"+fuInpId).val():$("textarea#"+fuInpId).val();if(""!=fuInpVal){var axpFName=fuInpId.substr(7),axpPath="";axpPath="undefined"!=typeof $("textarea[id*="+axpFName+"]").not(".axpAttach")[0]&&""!=$("textarea[id*="+axpFName+"]").not(".axpAttach")[0].value?$("textarea[id*="+axpFName+"]").not(".axpAttach")[0].value:$("input[id*="+axpFName+"]").not(".axpAttach,.grdAttach").length>0?$("input[id*="+axpFName+"]").not(".axpAttach,.grdAttach")[0].value:"",$.each(fuInpVal.split(","),function(e,t){var a=t;if(""!=a){""!=axpPath&&axpPath.endsWith("\\*")&&(t=t.substr(20));var i={name:a,size:"0",status:Dropzone.ADDED,accepted:!0};myDropzone.emit("addedfile",i),myDropzone.emit("complete",i),myDropzone.files.push(i);var r=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";r+=a,$(i.previewElement).find(".dropzone-filename span").text(t),$(i.previewElement).find(".dropzone-filename span").attr("data-fullfile",a),$(i.previewElement).find(".dropzone-filename").attr("onclick","ShowAxpFileuploadLink('"+$(myDropzone.files[0].previewElement).parents(".dropzone").attr("id").substr(9)+"','"+a+"','"+r+"')"),isthisReadOnly&&$(i.previewElement).find(".dropzoneItemDelete").addClass("d-none")}}),$(id).find(".fileuploadmore").removeClass("d-none"),$(id).find("#gridAttachCounter").removeClass("d-none"),$(id).find("span.spanAttCount").text(myDropzone.files.length)}}})}function TstFldImageUpload(e){for(var t=e.files,a=new FormData,i=0;i<t.length;i++)a.append(t[i].name,t[i]);var r=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),l=$("#isAxpImagePathHidden").val();$.ajax({url:r+"TstImageUpload.ashx?fldname=".concat($(e).attr("id"),"&isAxpImagePath=").concat(l),type:"POST",data:a,contentType:!1,processData:!1,success:function(a){var i=$(e).attr("id");if(a.indexOf("success:")>-1){$(e).parents(".image-input").find(".imageFileUpload").addClass("d-none"),$(e).parents(".image-input").find(".profile-pic").removeClass("d-none");var r=$j("#hdnScriptsUrlpath"),o=GetFieldsName(i),n="";n=o.startsWith("nodb_")||"true"==l?r.val()+"axpert/"+sid+"/"+o+"/"+t[0].name:r.val()+"axpert/"+sid+"/"+t[0].name,$("img#"+i).css({"background-image":"unset"}),$("img#"+i).prop("src",n),$("#"+i).parent().find(".delete-button").removeClass("d-none");try{if(DeletedFieldValue.length>0&&DeletedFieldValue.filter(function(e){return e.startsWith(i+"~")}).length>0){var s=DeletedFieldValue.filter(function(e){return e.startsWith(i+"~")}),d=DeletedFieldValue.indexOf(s[0]);DeletedFieldValue.splice(d,1)}}catch(c){}UpdateFieldArray(i,"0",t[0].name,"parent",""),UpdateAllFieldValues(i,t[0].name),showAlertDialog("success",a.replace("success:",""))}else $("img#"+i).css({"background-image":"unset"}),"error:sessionexpired"==a?CheckSessionTimeout(a):a.startsWith("error:")&&showAlertDialog("error",a.replace("error:",""))},error:function(e){handlerType="upload",showAlertDialog("error",e.statusText)}})}function HeaderAttachFiles(){var id="#attachment-overlay",dropzone=document.querySelector(id);if(null!=dropzone){var previewNode=dropzone.querySelector(".dropzone-item");if(null!=previewNode){previewNode.id="";var previewTemplate=previewNode.parentNode.innerHTML;previewNode.parentNode.removeChild(previewNode);var url=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),attachmentSizeMB=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),isSameFile=!1,AxtstAFSDB="false";"undefined"!=typeof AxtstAttachFSDB&&"true"==AxtstAttachFSDB&&(AxtstAFSDB="true");var _uploadFileTypes="";"undefined"!=typeof UploadFileTypes&&"true"==UploadFileTypes&&"undefined"!=typeof UploadFileTypesVal&&(_uploadFileTypes=UploadFileTypesVal);var _delFileList="",myhdrDropzone=new Dropzone(id,{url:url+"HeaderFileUpload.ashx?act=attach&transid=".concat(transid,"&delFile=").concat(_delFileList,"&AxtstAFSDB=").concat(AxtstAFSDB,"&fileExt=").concat(_uploadFileTypes),maxFilesize:attachmentSizeMB,previewTemplate:previewTemplate,previewsContainer:id+" .dropzone-items",clickable:id+" .dropzone-select",dictDuplicateFile:"Duplicate Files Cannot Be Uploaded",preventDuplicates:!0}),dzdefault=dropzone.querySelectorAll(".dz-default");$(dzdefault).addClass("d-none"),myhdrDropzone.on("addedfile",function(file){var extension=file.name.substring(file.name.lastIndexOf(".")+1);if(""==_uploadFileTypes||-1!=_uploadFileTypes.indexOf(extension.toLowerCase())){this.options.url=url+"HeaderFileUpload.ashx?act=attach&transid=".concat(transid,"&delFile=").concat(_delFileList,"&AxtstAFSDB=").concat(AxtstAFSDB,"&fileExt=").concat(_uploadFileTypes);var dropzoneItems=dropzone.querySelectorAll(".dropzone-item");dropzoneItems.forEach(function(e){e.style.display=""})}else showAlertDialog("error",eval(callParent("lcm[521]")))}),myhdrDropzone.on("complete",function(e){dropzone.querySelectorAll(".dz-complete");if("success"==e.status)if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var t,a,i=e.xhr.response,r=null===(t=filenamearray.filter(function(t){return t==e.name}))||void 0===t?void 0:t[0];if(void 0===r&&fileonloadarray.length>0)r=null===(a=fileonloadarray.filter(function(t){return t==e.name}))||void 0===a?void 0:a[0];if(r)return isSameFile=!0,myhdrDropzone.removeFile(e),showAlertDialog("error","File already exists, please rename and upload again!"),!1;isSameFile=!1,$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("#hattachCounter").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("span.spanAttCount").text(this.files.length),filenamearray.push(e.name);var l=0;$j("#recordid000F0").length>0&&(l=$j("#recordid000F0").val());var o=CheckUrlSpecialChars(e.name);$(e.previewElement).find(".dropzone-filename").attr("onclick","OpenAttachment('"+o+"','"+l+"',true);"),showAlertDialog("success",i.split(":")[1])}else if("error:File already exists, please rename and upload again!"==e.xhr.response){var n=e.xhr.response;isSameFile=!0,myhdrDropzone.removeFile(e),showAlertDialog("error",n.split(":")[1])}else{var s=e.xhr.response;myhdrDropzone.removeFile(e),showAlertDialog("error",s.split(":")[1])}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text())}),myhdrDropzone.on("error",function(e){myhdrDropzone.removeFile(e)}),myhdrDropzone.on("removedfile",function(e){isSameFile?isSameFile=!1:(_delFileList+=""!=_delFileList?"♦"+e.name:e.name,RemoveArrVal(e.name,filenamearray)),this.files.length>0?$(this.element).find("span.spanAttCount").text(this.files.length):($(this.element).find(".fileuploadmore").addClass("d-none"),$(this.element).find("span.spanAttCount").text(this.files.length),$(this.element).find("#hattachCounter").addClass("d-none"))}),fileonloadarray.length>0&&($.each(fileonloadarray,function(e,t){var a={name:t,size:"0",status:Dropzone.ADDED,accepted:!0};myhdrDropzone.emit("addedfile",a),myhdrDropzone.emit("complete",a),myhdrDropzone.files.push(a);var i=0;$j("#recordid000F0").length>0&&(i=$j("#recordid000F0").val());var r=CheckUrlSpecialChars(a.name);$(a.previewElement).find(".dropzone-filename").attr("onclick","OpenAttachment('"+r+"','"+i+"');")}),$(id).find("span.spanAttCount").text(myhdrDropzone.files.length),$(id).find(".fileuploadmore").removeClass("d-none"),$(id).find("#hattachCounter").removeClass("d-none"))}}}function rtfCkeditorAlignment(){for(var e=document.getElementsByTagName("textarea")&&document.getElementsByClassName("memofam"),t=0;t<e.length;t++){var a;if(e[t].id.startsWith("rtf_")||e[t].id.startsWith("rtfm_")||e[t].id.startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(e[t].id))||"Large Text"==GetDWBFieldType(GetFieldsName(e[t].id))&&!e[t].id.startsWith("exp_editor_"))e[t].parentElement.classList.add("flex-root"),(a=e[t].parentElement.parentElement.classList).add.apply(a,_toConsumableArray("d-flex flex-column".split(" ")));else if(e[t].id.startsWith("exp_editor_")){var i;e[t].parentElement.classList.add("flex-root"),staticRunMode&&(i=e[t].parentElement.parentElement.classList).add.apply(i,_toConsumableArray("d-flex flex-column".split(" ")))}}}function DropzoneGridInit(dvId){var _thisDiv;_thisDiv=void 0!==dvId?$(dvId+" .dropzoneGrid"):$("[id^='divDc']:not(:has(.editWrapTr)) .dropzoneGrid"),_thisDiv.each(function(){if(!($(this).parents(".editWrapTr").length>0)){var id="#"+$(this).attr("id"),dropzone=document.querySelector(id),previewNode=dropzone.querySelector(".dropzone-item");previewNode.id="";var previewTemplate=previewNode.parentNode.innerHTML;previewNode.parentNode.removeChild(previewNode);var url=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),fuName=$(id).attr("id").substr(9);funame=fuName.substring(0,fuName.lastIndexOf("F")-3);var attachmentSizeMB=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),maxFilesUpload="0"!=AxpFileUploadlmt?AxpFileUploadlmt:100,AxtstAFSDB="false";"undefined"!=typeof AxtstAttachFSDB&&"true"==AxtstAttachFSDB&&(AxtstAFSDB="true");var _uploadFileTypes="";"undefined"!=typeof UploadFileTypes&&"true"==UploadFileTypes&&"undefined"!=typeof UploadFileTypesVal&&(_uploadFileTypes=UploadFileTypesVal);var _valFiles="",myDropzone=new Dropzone(id,{url:url+"TstGridFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat($("#"+funame+"path"+$(id).attr("id").substring($(id).attr("id").lastIndexOf("F")-3)).val()==undefined?"nofield":$("#"+funame+"path"+$(id).attr("id").substring($(id).attr("id").lastIndexOf("F")-3)).val(),"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(funame,"&attTransId=").concat(transid,"&rcId=").concat(recordid,"&upldFiles=").concat(_valFiles,"&AxtstAFSDB=").concat(AxtstAFSDB,"&fileExt=").concat(_uploadFileTypes),maxFilesize:attachmentSizeMB,previewTemplate:previewTemplate,previewsContainer:id+" .dropzone-items",clickable:"#"+$(id+" .dropzone-select").parents(".grdattch").attr("id"),maxFiles:maxFilesUpload}),dzdefault=dropzone.querySelectorAll(".dz-default");$(dzdefault).addClass("d-none"),myDropzone.on("addedfile",function(file){if(ShowDimmer(!0),gridRowEditOnLoad){var thisFldId=$(id).attr("id").substr(9),fieldRowNo=GetFieldsRowNo(thisFldId),fldDcNo=GetFieldsDcNo(thisFldId);UpdateGridRowFlags(thisFldId,fldDcNo,fieldRowNo)}var extension=file.name.substring(file.name.lastIndexOf(".")+1);if(""!=_uploadFileTypes&&-1==_uploadFileTypes.indexOf(extension.toLowerCase()))return showAlertDialog("error",eval(callParent("lcm[521]"))),void ShowDimmer(!1);funame=GetFieldsName($(id).attr("id").substr(9));var _thisDcNo=GetDcNo(funame);_valFiles="",$("#gridHd"+_thisDcNo+" tbody tr").each(function(){var e=$(this).attr("id"),t=e.substring(e.lastIndexOf("F"),e.lastIndexOf("F")-3),a=funame+t+"F"+_thisDcNo;if($("#"+a).length>0&&""!=$("#"+a).val()){var i=GetDbRowNo(t,_thisDcNo);$("#"+a).val().split(",").forEach(function(e){_valFiles+=e+"♠"+i+","})}}),this.options.url=url+"TstGridFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat($("#"+funame+"path"+$(id).attr("id").substring($(id).attr("id").lastIndexOf("F")-3)).val()==undefined?"nofield":$("#"+funame+"path"+$(id).attr("id").substring($(id).attr("id").lastIndexOf("F")-3)).val(),"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(funame,"&attTransId=").concat(transid,"&rcId=").concat(recordid,"&upldFiles=").concat(_valFiles,"&AxtstAFSDB=").concat(AxtstAFSDB,"&fileExt=").concat(_uploadFileTypes);var dropzoneItems=dropzone.querySelectorAll(".dropzone-item");dropzoneItems.forEach(function(e){e.style.display=""})}),myDropzone.on("complete",function(e){dropzone.querySelectorAll(".dz-complete");if("success"==e.status)if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var t=e.xhr.response;$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("#gridAttachCounter").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("span.spanAttCount").text(this.files.length);var a=$(e.previewElement).parents(".dropzone").attr("id").substr(9),i=$("#"+a).val();if(""==i){var r=$("#"+a).parent().width();$("#"+a).parent().width(r)}i=""==i?e.name:i+","+e.name,$("#"+a).val(i);var l=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";l+=e.name,$(e.previewElement).find(".dropzone-filename").attr("onclick","ShowGridAttLink('"+l+"')");var o=GetFieldsRowNo(a),n=GetFieldsDcNo(a),s=GetDbRowNo(o,n);UpdateFieldArray(a,s,i,"parent",""),UpdateAllFieldValues(a,i),showAlertDialog("success",t.split(":")[1])}else if("error:File already exists, please rename and upload again!"==e.xhr.response){var d=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",d.split(":")[1])}else if(""!=e.xhr.response&&e.xhr.response.startsWith("error:File already exists at row no ")){var c=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",c.split(":")[1])}else{var p=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",p.split(":")[1])}else if("added"==e.status){var u=$(myDropzone.element).attr("id").substr(9),f=$("#"+u).val();","==(f=f.replace(file.name+",","").replace(file.name,""))[f.length-1]&&(f=f.substring(0,f.length-1)),$("#"+u).val(f);o=GetFieldsRowNo(u),n=GetFieldsDcNo(u),s=GetDbRowNo(o,n);UpdateFieldArray(u,s,f,"parent",""),UpdateAllFieldValues(u,f),""==f?($(myDropzone.element).find(".fileuploadmore").addClass("d-none"),$(myDropzone.element).find("#gridAttachCounter").addClass("d-none"),$(myDropzone.element).find("span.spanAttCount").text(this.files.length)):this.files.length>0&&$(myDropzone.element).find("span.spanAttCount").text(this.files.length)}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text());myDropzone.emit("queuecomplete")}),myDropzone.on("queuecomplete",function(e,t){ShowDimmer(!1)}),myDropzone.on("error",function(e){myDropzone.removeFile(e)}),myDropzone.on("removedfile",function(e){try{if("undefined"!=typeof e.xhr&&"error:File already exists, please rename and upload again!"==e.xhr.response)return;if("undefined"!=typeof e.xhr&&e.xhr.response.startsWith("error:File already exists at row no "))return}catch(o){}var t=$(myDropzone.element).attr("id").substr(9),a=$("#"+t).val();","==(a=a.replace(e.name+",","").replace(e.name,""))[a.length-1]&&(a=a.substring(0,a.length-1)),$("#"+t).val(a);var i=GetFieldsRowNo(t),r=GetFieldsDcNo(t),l=GetDbRowNo(i,r);UpdateFieldArray(t,l,a,"parent",""),UpdateAllFieldValues(t,a),""==a?($(myDropzone.element).find(".fileuploadmore").addClass("d-none"),$(myDropzone.element).find("#gridAttachCounter").addClass("d-none"),$(myDropzone.element).find("span.spanAttCount").text(this.files.length)):this.files.length>0&&$(myDropzone.element).find("span.spanAttCount").text(this.files.length)});var fuInpId=$(id).attr("id").substr(9),fuInpVal=$("#"+fuInpId).val();""!=fuInpVal&&($.each(fuInpVal.split(","),function(e,t){var a={name:t,size:"0",status:Dropzone.ADDED,accepted:!0};myDropzone.emit("addedfile",a),myDropzone.emit("complete",a),myDropzone.files.push(a);var i=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";i+=a.name,$(a.previewElement).find(".dropzone-filename").attr("onclick","ShowGridAttLink('"+i+"')")}),$(id).find(".fileuploadmore").removeClass("d-none"),$(id).find("#gridAttachCounter").removeClass("d-none"),$(id).find("span.spanAttCount").text(myDropzone.files.length))}})}function GetDcStateValue(e,t){try{if($("#axp_dcstate000F1").length>0){var a=IsFormDirty;try{var i=$j.inArray("axp_dcstate",FNames);FFieldReadOnly[i]="False",FFieldHidden[i]="False"}catch(p){}if(""==e){if(AxpDcstateVal=$("#axp_dcstate000F1").val(),$("[id^=dcBlean]").length>0){var r="";""==r&&DCName.forEach(function(){r+="T"});var l=Array.from(r);$("[id^=dcBlean]").each(function(){if($(this).hasClass("gridHeaderSwitch")){var e=$(this).attr("id");e=parseInt(e.substring(7)),$("#dcBlean"+e).is(":checked")?l[e-1]="T":l[e-1]="F"}});var o=l.join(""),n=$("#axp_dcstate000F1").attr("id");SetFieldValue(n,o),UpdateFieldArray(n,"000",o,"parent"),MainBlur($("#axp_dcstate000F1"))}AxExecFormControl=!1}else{var s=$("#axp_dcstate000F1").val();(l=Array.from(s))[parseInt(e)-1]=t;var d=l.join(""),c=$("#axp_dcstate000F1").attr("id");SetFieldValue(c,d),UpdateFieldArray(c,"000",d,"parent"),MainBlur($("#axp_dcstate000F1"))}a||(IsFormDirty=!1)}}catch(p){}}function GetDcStateOnLodaData(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=$j("#recordid000F0").val();if("0"!=t)$("#axp_dcstate000F1").length>0&&""!=$("#axp_dcstate000F1").val()&&""!=AxpDcstateVal&&(Array.from(AxpDcstateVal).forEach(function(e,t){if(0==t)return!0;"T"==e?AxFormControlList.push("expand~"+DCName[t]):AxFormControlList.push("collapse~"+DCName[t])}),AxFormControlList.length>0&&ProcessScriptFormControlOnList("axp_dcstate"));else if("0"==t&&e){Array.from(AxpDcstateVal).forEach(function(e,t){if(0==t)return!0;"T"==e?AxFormControlList.push("expand~"+DCName[t]):AxFormControlList.push("collapse~"+DCName[t])}),AxFormControlList.length>0&&ProcessScriptFormControlOnList("axp_dcstate")}}function ExpFldsonDcExpand(e){""==e||IsDcGrid(e)||GetGridFields(e).forEach(function(e){""!=e&&GetActualFieldName(e).split(",").forEach(function(t){""!=t&&EvaluateAxFunction(e,t)})})}function createAxAutocomplete(e){var t=this,a=GetFieldsName(e),i=GetFieldIndex(a),r=FFieldIntelli[i];if(-1!=i&&"T"==r&&"Rich Text"!=FFieldType[i]&&!a.toLowerCase().startsWith("rtf_")){var l="";new Tribute({requireLeadingSpace:!1,trigger:"{",lookup:function(e){return e[l]},itemClass:"d-table-row",noMatchTemplate:function(){t.showMenu()},loadingItemTemplate:'<div style="padding: 3px"><img src="../AxpImages/icons/5-1.gif" width="30",height="30"/></div>',selectTemplate:function(e){return void 0===e?null:"{"+e.original[l]+"}"},menuItemTemplate:function(e){return Object.values(e.original).map(function(e){return'<span class="d-table-cell px-2 py-1">'.concat(e,"</span>")}).join("")},values:function(t,a){var i=GetFieldsName(e),r=GetFieldIndex(i),o=FFieldAcceptApi[r];if(void 0!==o&&""!=o){var n=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,i,t.trim(),"",n,function(e){"SESSION_TIMEOUT"==e&&(parent.window.location.href="../aspx/sess.aspx"),""!=e&&e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]);try{dataJSON=JSON.parse(e),l=dataJSON.fields[0].name,dataJSON.row?a(dataJSON.row):a([])}catch(t){a([])}},function(){a([])})}else a([])}}).attach(document.getElementById(e))}}function createAxAutocompleteColon(e){var t=this,a=GetFieldsName(e),i=GetFieldIndex(a),r=FFieldIntelli[i];if(-1!=i&&"T"==r&&"Rich Text"!=FFieldType[i]&&!a.toLowerCase().startsWith("rtf_")){var l="";new Tribute({requireLeadingSpace:!1,trigger:":",lookup:function(e){return e[l]},itemClass:"d-table-row",noMatchTemplate:function(){t.showMenu()},loadingItemTemplate:'<div style="padding: 3px"><img src="../AxpImages/icons/5-1.gif" width="30",height="30"/></div>',selectTemplate:function(e){return void 0===e?null:e.original[l]},menuItemTemplate:function(e){return Object.values(e.original).map(function(e){return'<span class="d-table-cell px-2 py-1">'.concat(e,"</span>")}).join("")},values:function(t,a){var i=GetFieldsName(e),r=GetFieldIndex(i),o=FFieldAcceptApi[r];if(void 0!==o&&""!=o){var n=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,i,t.trim(),"",n,function(e){"SESSION_TIMEOUT"==e&&(parent.window.location.href="../aspx/sess.aspx"),""!=e&&e.split("♠*♠").length>1&&(tstDataId=e.split("♠*♠")[0],e=e.split("♠*♠")[1]);try{dataJSON=JSON.parse(e),l=dataJSON.fields[0].name,dataJSON.row?a(dataJSON.row):a([])}catch(t){a([])}},function(){a([])})}else a([])}}).attach(document.getElementById(e))}}function createCKAutoComplete(e){function t(e){return e.collapsed?CKEDITOR.plugins.textMatch.match(e,a):null}function a(e,t){var a=e.slice(0,t).match(/\{([A-z]|)*$/i);return a?{start:a.index,end:t}:null}function i(e,t){var a=[],i=e.autocomplete.view.element.$;i.style.bottom="unset",$(i).addClass("cke_autocomplete_opened").html('<li style="padding: 3px" class="loader"><img src="../AxpImages/icons/5-1.gif" width="30",height="30"/></li>'),e.autocomplete.view.updatePosition(e.range);var r=$(e.autocomplete.editor.element.$).attr("id"),l=GetFieldsName(r),o=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,l,"","",o,function(i){"SESSION_TIMEOUT"==i&&(parent.window.location.href="../aspx/sess.aspx"),""!=i&&i.split("♠*♠").length>1&&(tstDataId=i.split("♠*♠")[0],i=i.split("♠*♠")[1]);try{if(dataJSON=JSON.parse(i),"ad_fp"==transid||"a__fn"==transid||"ad_pn"==transid){var r,l=dataJSON.fields[0].name,o=dataJSON.fields[1].name;null!==(r=dataJSON)&&void 0!==r&&r.row&&dataJSON.row.length&&(a=dataJSON.row.filter(function(t){return 0==("{"+t[o]+"["+t[l]+"]}").indexOf(e.query)}))}else{var n,s=dataJSON.fields[0].name;null!==(n=dataJSON)&&void 0!==n&&n.row&&dataJSON.row.length&&(a=dataJSON.row.filter(function(t){return 0==("{"+t[s]+"]}").indexOf(e.query)}))}t(a),setTimeout(function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:e.autocomplete.view.element.$;t.getBoundingClientRect().y+t.getBoundingClientRect().height>document.getElementsByClassName("tstructMainBottomFooter")[0].getBoundingClientRect().y+document.getElementsByClassName("tab-content")[0].getBoundingClientRect().y?(t.style.bottom=window.innerHeight-t.getBoundingClientRect().y+40+"px",t.style.top="unset"):t.style.bottom="unset"},0)}catch(d){}},function(){t([])})}CKEDITOR.plugins.load(["autocomplete","textmatch","textwatcher"],function(a){var r=GetFieldsName(e.editor.name),l=GetFieldIndex(r),o=FFieldAcceptApi[l],n=FFieldIntelli[l];if(void 0!==o&&""!=o&&"T"==n){var s=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,r,"","t",s,function(a){"SESSION_TIMEOUT"==a&&(parent.window.location.href="../aspx/sess.aspx"),""!=a&&a.split("♠*♠").length>1&&(tstDataId=a.split("♠*♠")[0],a=a.split("♠*♠")[1]);try{if(dataJSON=JSON.parse(a),dataJSON.row){var r="<li data-id='{".concat(dataJSON.fields[0].name,'}\' class="d-table-row">').concat(dataJSON.fields.map(function(e){return'<span class="d-table-cell px-2 py-1">{'.concat(e.name,"}</span>")}).join(""),"</li>"),l="{".concat(dataJSON.fields[0].name,"}"),o=new CKEDITOR.plugins.autocomplete(e.editor,{followingSpace:!0,textTestCallback:t,dataCallback:i,itemTemplate:r,outputTemplate:l});if("ad_fp"==transid||"a__fn"==transid||"ad_pn"==transid){var n=dataJSON.fields[1].name;o.getHtmlToInsert=function(e){return"{"+e[n]+"["+this.outputTemplate.output(e)+"]}"}}else o.getHtmlToInsert=function(e){return"{"+this.outputTemplate.output(e)+"}"}}}catch(s){}},function(){cb([])})}})}function createCKAutoCompleteColon(e){function t(e){return e.collapsed?CKEDITOR.plugins.textMatch.match(e,a):null}function a(e,t){var a=e.slice(0,t).match(/\:([A-z]|)*$/i);return a?{start:a.index,end:t}:null}function i(e,t){var a=[],i=e.autocomplete.view.element.$;i.style.bottom="unset",$(i).addClass("cke_autocomplete_opened").html('<li style="padding: 3px" class="loader"><img src="../AxpImages/icons/5-1.gif" width="30",height="30"/></li>'),e.autocomplete.view.updatePosition(e.range);var r=$(e.autocomplete.editor.element.$).attr("id"),l=GetFieldsName(r),o=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,l,"","",o,function(i){"SESSION_TIMEOUT"==i&&(parent.window.location.href="../aspx/sess.aspx"),""!=i&&i.split("♠*♠").length>1&&(tstDataId=i.split("♠*♠")[0],i=i.split("♠*♠")[1]);try{var r;dataJSON=JSON.parse(i);var l=dataJSON.fields[0].name;null!==(r=dataJSON)&&void 0!==r&&r.row&&dataJSON.row.length&&(a=dataJSON.row.filter(function(t){return 0==(":"+t[l]+":").indexOf(e.query)})),t(a),setTimeout(function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:e.autocomplete.view.element.$;t.getBoundingClientRect().y+t.getBoundingClientRect().height>document.getElementsByClassName("tstructMainBottomFooter")[0].getBoundingClientRect().y+document.getElementsByClassName("tab-content")[0].getBoundingClientRect().y?(t.style.bottom=window.innerHeight-t.getBoundingClientRect().y+40+"px",t.style.top="unset"):t.style.bottom="unset"},0)}catch(o){}},function(){t([])})}CKEDITOR.plugins.load(["autocomplete","textmatch","textwatcher"],function(a){var r=GetFieldsName(e.editor.name),l=GetFieldIndex(r),o=FFieldAcceptApi[l],n=FFieldIntelli[l];if(void 0!==o&&""!=o&&"T"==n){var s=resTstHtmlLS;resTstHtmlLS="",ASB.WebService.GetAutoIntelliFromAPI(tstDataId,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,r,"","t",s,function(a){"SESSION_TIMEOUT"==a&&(parent.window.location.href="../aspx/sess.aspx"),""!=a&&a.split("♠*♠").length>1&&(tstDataId=a.split("♠*♠")[0],a=a.split("♠*♠")[1]);try{if(dataJSON=JSON.parse(a),dataJSON.row){var r="<li data-id='{".concat(dataJSON.fields[0].name,'}\' class="d-table-row">').concat(dataJSON.fields.map(function(e){return'<span class="d-table-cell px-2 py-1">{'.concat(e.name,"}</span>")}).join(""),"</li>"),l="{".concat(dataJSON.fields[0].name,"}");new CKEDITOR.plugins.autocomplete(e.editor,{followingSpace:!0,textTestCallback:t,dataCallback:i,itemTemplate:r,outputTemplate:l}).getHtmlToInsert=function(e){return"ad_fp"==transid||"a__fn"==transid||"ad_pn"==transid?":"+this.outputTemplate.output(e):this.outputTemplate.output(e)}}}catch(o){}},function(){cb([])})}})}function tstFileDeleteConfir(myDropzone,delFileName){var cutMsg=eval(callParent("lcm[47]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var RemoveFileCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){RemoveFileCB.close(),myDropzone.removeFile(delFileName)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}function tstDummyLoad(e){if(tstSessInfo=$("#hdnTstSInfo").val(),callParentNew("isdummyLoad=","true"),""!=callParentNew("originalUri"))return resTstLoadDummy=$("#hdnTstLoadDummy").val(),$("#hdnTstLoadDummy").val(""),void callParentNew("LoadIframe("+callParentNew("originalUri")+")","function");if("middle1"!=window.frameElement.id||"fromiview"==callParentNew("lastLoadtstId")||"true"!=isServerSide){var t=window.location.href;isServerDummyRec="";var a=callParentNew("lastLoadtstId");return"fromiview"!=callParentNew("lastLoadtstId")&&(a="?"+callParentNew("lastLoadtstId").split("?")[1]),void(window.location.search.toLowerCase()!=a.toLowerCase()&&"fromiview"!=callParentNew("lastLoadtstId")?callParentNew("LoadIframe("+callParentNew("lastLoadtstId")+")","function"):(resTstLoadDummy=$("#hdnTstLoadDummy").val(),$("#hdnTstLoadDummy").val(""),callParentNew("LoadIframe("+t+")","function")))}var i=window.frameElement.contentWindow.jQuery("#form1").attr("action");i.startsWith("./")&&(i=i.slice(2));var r=callParentNew("lastLoadtstId");if(r.startsWith("./")&&(r=r.slice(2)),r==i);else{isServerDummyRec="";var l=callParentNew("lastLoadtstId");callParentNew("LoadIframe("+l+")","function")}}function tstHtmlDummyLoad(e){try{if(tstSessInfo=$("#hdnTstSInfo").val(),callParentNew("isdummyLoad=","true"),"middle1"==window.frameElement.id&&"fromiview"!=callParentNew("lastLoadtstId")){var t=window.frameElement.contentWindow.jQuery("#form1").attr("action");t.startsWith("./")&&(t=t.slice(2));var a=callParentNew("lastLoadtstId");if(a.startsWith("./")&&(a=a.slice(2)),""!=e&&a!=t){isServerDummyRec="";var i=callParentNew("lastLoadtstId");return void callParentNew("LoadIframe("+i+")","function")}}resTstLoadDummy=$("#hdnTstLoadDummy").val(),$("#hdnTstLoadDummy").val("");var r=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")),l=$("#hdntstHtmlDummy").val();$("#hdntstHtmlDummy").val("");try{var o=callParentNew("getKeysWithPrefix(tstHtml♠"+e+"-"+r+"♥)","function");if(o.length>0){var n,s=_createForOfIteratorHelper(o);try{for(s.s();!(n=s.n()).done;){var d=n.value;localStorage.removeItem(d)}}catch(w){s.e(w)}finally{s.f()}}var c=(new Date).getTime();localStorage.setItem("tstHtml♠"+e+"-"+r+"♥"+c,l)}catch(C){if(C.message.indexOf("exceeded the quota")>-1){var p=JSON.stringify(l),u=new Blob([p]).size,f=callParentNew("getKeysWithPrefix(tstHtml♠)","function");if(f.length>0){var m,h=_createForOfIteratorHelper(f.filter(function(e){return e.split("♥")[1]}).sort(function(e,t){return parseInt(e.split("♥")[1],10)-parseInt(t.split("♥")[1],10)}));try{for(h.s();!(m=h.n()).done;){var v=m.value;if(localStorage.removeItem(v),10485760-getUsedLocalStorageSpace()>u)break}}catch(w){h.e(w)}finally{h.f()}try{var g=(new Date).getTime();localStorage.setItem("tstHtml♠"+e+"-"+r+"♥"+g,l)}catch(C){}}}}callParentNew("originalContent=",""),0==callParentNew("originaltrIds").filter(function(t){return t==e}).length&&callParentNew("originaltrIds").push(e)}catch(C){}var b=window.location.href;b=b.replace(isServerDummyRec,""),isServerDummyRec="",callParentNew("LoadIframe("+b+")","function")}function GetUriFormCurrentUri(e,t){var a=decodeURI(e).split("?")[1].split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var a=_slicedToArray(t,2),i=a[0],r=a[1];return"transid"==i.toLowerCase()&&(e[i]=r),e},{});return a.transid!=t&&(e=e.replace("transid="+a.transid,"transid="+t)),e}$(document).on("mouseover",".fileuploadmore",function(){if($(this).parents(".dropzone").find(".dropzone-items").hasClass("d-none")){var e=$(this).parents(".dropzone").attr("id"),t=bootstrap.Popover.getInstance(this);null!=t.tip&&t.tip.classList.add("mw-350px"),t._config.content='<div class="dropzone dropzone-queue mt-n3" id="'+e+'">'+$(this).parents(".dropzone").find(".dropzone-items").html()+"</div>",t.show(),setTimeout(function(){var e;null!=t.tip&&(e=t.tip.classList).add.apply(e,_toConsumableArray("mh-400px overflow-auto".split(" ")))},0)}else $(this).parents(".dropzone").find(".dropzone-items").addClass("d-none")}),$j(document).on("mouseover","body",function(e){$(e.target).hasClass("fileuploadmore")||$(e.target).hasClass("grdattch")||$(e.target).hasClass("gridattach")||$(e.target).hasClass("fw-boldest")||$(e.target).hasClass("popover-arrow")||$(e.target).hasClass("popover")||$(e.target).hasClass("popover-body")||$(e.target).hasClass("dropzone-delete")||$(e.target).hasClass("dropzoneItemDelete")||$(e.target).hasClass("dropzoneItemDeleteHeader")||$(e.target).hasClass("dropzoneGridItemDelete")||$(e.target).hasClass("dropzone-panel")||$(e.target).hasClass("dropzone-file")||$(e.target).hasClass("dropzone")||$(e.target).hasClass("dropzone-items")||$(e.target).hasClass("dropzone-item")||$(e.target).hasClass("dropzone-filename")||$(e.target).parent().hasClass("dropzone-filename")||$("[data-bs-toggle]").popover("hide")}),$j(document).off("click",".popover-body .dropzoneItemDelete").on("click",".popover-body .dropzoneItemDelete",function(e){var t,a=$(e.target).parents(".dropzone").attr("id"),i=document.querySelector("#"+a),r=Dropzone.forElement(i),l=void 0===$(e.target).parents(".dropzone-item").find(".dropzone-filename span").data("fullfile")?$(e.target).parents(".dropzone-item").find(".dropzone-filename").text():$(e.target).parents(".dropzone-item").find(".dropzone-filename span").data("fullfile"),o=null===(t=r.files.filter(function(e){return e.name==l}))||void 0===t?void 0:t[0];o&&($("[data-bs-toggle]").popover("hide"),tstFileDeleteConfir(r,o))}),$j(document).off("click",".popover-body .dropzoneItemDeleteHeader").on("click",".popover-body .dropzoneItemDeleteHeader",function(e){var t,a=document.querySelector("#attachment-overlay"),i=Dropzone.forElement(a),r=$(e.target).parents(".dropzone-item").find(".dropzone-filename").text(),l=null===(t=i.files.filter(function(e){return e.name==r}))||void 0===t?void 0:t[0];if(l){var o=0;$j("#recordid000F0").length>0&&(o=$j("#recordid000F0").val()),RemoveFile(r,o,l)}}),$j(document).off("click",".popover-body .dropzoneGridItemDelete").on("click",".popover-body .dropzoneGridItemDelete",function(e){var t,a=$(e.target).parents(".dropzone").attr("id"),i=document.querySelector("#"+a),r=Dropzone.forElement(i),l=$(e.target).parents(".dropzone-item").find(".dropzone-filename").text(),o=null===(t=r.files.filter(function(e){return e.name==l}))||void 0===t?void 0:t[0];o&&($("[data-bs-toggle]").popover("hide"),tstFileDeleteConfir(r,o))}),$j(document).off("click",".gridHeaderSwitch").on("click",".gridHeaderSwitch",function(e){var _thisDicId=$(this).attr("id");if(_thisDicId=_thisDicId.substr(7),$(this).is(":checked"))$("#divDc"+_thisDicId+" .gridIconBtns").length>0?($("#divDc"+_thisDicId+" .griddivColumn").removeClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").removeClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Hide Dc").text("expand_less")):($("#divDc"+_thisDicId).removeClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Hide Dc").text("expand_less")),GetDcStateValue(_thisDicId,"T"),setTimeout(function(){ExpFldsonDcExpand(_thisDicId)},0);else{var isRecLoad=!1,rid=$j("#recordid000F0").val();"0"!=rid&&(isRecLoad=!0);var isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==_thisDicId&&(isExitDummy=!0)}),!isExitDummy&&$(".wrapperForGridData"+_thisDicId+" table tbody tr").length>0){var cutMsg=eval(callParent("lcm[520]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(_thisDicId));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var isKeyOutClick=!0,clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},onDestroy:function(){isKeyOutClick&&($("#divDc"+_thisDicId+" .griddivColumn").removeClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").removeClass("d-none"),$("#dcBlean"+_thisDicId).prop("checked",!0))},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){isKeyOutClick=!1,clearThisDCGrid.close();var e=GetDcRowCount(_thisDicId);DeleteAllRows(_thisDicId,e),ShowDimmer(!1),$("#chkallgridrow"+_thisDicId).prop("checked",!1),$("#divDc"+_thisDicId+" .griddivColumn").addClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").addClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Show Dc").text("expand_more"),GetDcStateValue(_thisDicId,"F")}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){isKeyOutClick=!1,$("#divDc"+_thisDicId+" .griddivColumn").removeClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").removeClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Hide Dc").text("expand_less"),$("#dcBlean"+_thisDicId).prop("checked",!0),disableBackDrop("destroy")}}}})}else if($("#divDc"+_thisDicId+" .gridIconBtns").length>0)$("#divDc"+_thisDicId+" .griddivColumn").addClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").addClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Show Dc").text("expand_more");else if(IsFormDirty||isRecLoad){var cutMsg=eval(callParent("lcm[520]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(_thisDicId));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var isKeyOutClick=!0,clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},onDestroy:function(){isKeyOutClick&&($("#divDc"+_thisDicId).removeClass("d-none"),$("#dcBlean"+_thisDicId).prop("checked",!0))},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){isKeyOutClick=!1,clearThisDCGrid.close(),GetGridFields(_thisDicId).forEach(function(e){if(e!="axp_recid"+_thisDicId){var t=e+"000F"+_thisDicId;SetFieldValue(t,""),UpdateFieldArray(t,0,"","parent","")}}),ShowDimmer(!1),$("#divDc"+_thisDicId).addClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Show Dc").text("expand_more"),GetDcStateValue(_thisDicId,"F")}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){isKeyOutClick=!1,$("#divDc"+_thisDicId).removeClass("d-none"),$("#dcBlean"+_thisDicId).prop("checked",!0),$("#tabCollapseButton"+_thisDicId).attr("title","Hide Dc").text("expand_less"),disableBackDrop("destroy")}}}})}else $("#divDc"+_thisDicId).addClass("d-none"),$("#tabCollapseButton"+_thisDicId).attr("title","Show Dc").text("expand_more")}}),$j(document).off("click",".ckbGridStretchSwitch").on("click",".ckbGridStretchSwitch",function(e){var t=$(this).attr("id");t=t.substr(14),1==$(this).prop("checked")?($(this).prop("checked",!1),toggleGridStretch(t),$(this).prop("checked",!0)):($(this).prop("checked",!0),toggleGridStretch(t),$(this).prop("checked",!1))});