/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}function _iterableToArrayLimit(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var a,r,o=[],n=!0,i=!1;try{for(s=s.call(e);!(n=(a=s.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(c){i=!0,r=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}var axProcessObj,armToken="",LoadIframe=callParentNew("LoadIframe"),cardsData={},cardsDesign={},xmlMenuData="",menuJson="",_horizontalFlow=!0,_autoLoadNextTask=!0,_pagesize=100,_pageno=1,pendingtasksJson={},processflowJson={},taskdetailsJson={},completedtasksJson={},_pendingTaskCount=0;callParentNew("AxNotifyMsgId=","");var axProcessTreeObj,axTimeLineObj,cardsDashboardObj={dirLeft:!0,enableMasonry:!1,homePageType:"cards",isCardsDashboard:!0,isMobile:isMobileDevice()},files={css:[],js:[]},queryString=window.location.search,taskcards="",AxProcessFlow=function(){function e(){_classCallCheck(this,e),this.isAxpertFlutter=!this.isNullOrEmpty(armToken),this.cardParams={},this.cardFlds={},this.processName="",this.keyField="",this.keyValue="",this.taskCompleted=!1,this.taskId="",this.userType="GUEST",this.isTaskEditable=!1,this.currentElem=null,this.taskStatus="",this.currentIndex=1,this.stepHtml='\n            <div class="step">\n                <div>\n                    <div class="circle d-none">\n                        <i class="fa fa-check"></i>\n                        <span class="Emp-steps-counts">{{sno}}</span>\n                    </div>\n                    <div class="line"></div>\n                </div>\n                <div class="Task-process-wrapper">\n                    {{groupNameHtml}}\n                    {{taskCaptionHtml}}\n                </div>\n            </div>',this.groupNameHtml='\n            <div class="title">\n                <a href="#">{{taskgroupname}}</a>\n                    <span data-groupname="{{taskgroupname}}" class="Process-flow accordion-icon rotate">\n                    <span  class="material-icons material-icons-style material-icons-2">chevron_right</span>\n                </span>\n            </div>',this.taskCaptionHtml="<div class=\"process-sub-flow\" data-groupname=\"{{taskgroupname}}\">\n            <div class=\"Task-process-list vertical-steps status-{{taskstatus}}\" data-indexno='{{indexno}}' onclick=\"axProcessObj.openTask(this, '{{taskname}}', '{{tasktype}}', '{{transid}}', '{{keyfield}}', '{{keyvalue}}', '{{recordid}}', '{{taskid}}', '{{indexno}}','{{hlink_transid}}','{{hlink_params}}','{{processname}}');\" data-taskid=\"{{taskid}}\" data-tasktype=\"{{tasktype}}\" data-transid=\"{{transid}}\" data-recordid=\"{{recordid}}\">\n                <a href=\"#\">{{taskname}}</a>\n            </div>\n        </div>",this.bulkTaskRowHtml='\n        <div class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card">\n            \n               \n                        <div class="d-flex flex-column task-name">\n<div class="d-flex">\n                            <input type="checkbox" value="" class="form-check-input task-list-checkbox my-auto" data-taskid="{{taskid}}" >\n                            <a href="javascript:void(0)"  class="text-gray-800 fw-bolder fs-6 task-title pt-0 pb-2 px-0" title="{{displaytitle}}"><span href="javascript:void(0)"><span class="material-icons material-icons-style material-icons-1 display-icon task-listing-icons">{{displayicon}}</span>{{displaytitle}}</span></a>\n                            </div><div class="task-subtitle">{{displaycontent}}</div>\n                        </div>\n                  \n\n                        <div class="d-flex flex-row task-process gap-5">\n                            <a href="javascript:void(0)" class="d-flex text-gray-800 task-assignedBy my-auto mb-1 gap-2" title="Assigned By"><span class="material-icons material-icons-style p-0">person</span><span class="p-0"> {{fromuser}}</span></a>\n                            <a href="javascript:void(0)" title="Assigned On" class="d-flex text-gray-800 mb-1 task-date my-auto gap-2"><span class="material-icons material-icons-style p-0">today</span><span class="p-0"> {{eventdatetime}}</span></a>\n                        </div>\n                                      \n           \n        </div>',this.horizontalStepHtml="<li class=\"{{taskstatus}}\">\n                                <a href=\"javascript:void(0)\" onclick=\"axProcessObj.openTask(this, '{{taskname}}', '{{tasktype}}', '{{transid}}', '{{keyfield}}', '{{keyvalue}}', '{{recordid}}', '{{taskid}}', '{{indexno}}','{{hlink_transid}}','{{hlink_params}}','{{processname}}');\" data-taskid=\"{{taskid}}\" data-tasktype=\"{{tasktype}}\" data-transid=\"{{transid}}\" data-recordid=\"{{recordid}}\" data-taskname=\"{{taskname}}\" data-indexno='{{indexno}}' class=\"horizontal-steps {{taskstatus}}\">\n                                    <span class=\"circle\">{{sno}}</span>\n                                    <span class=\"label\">{{taskname}}</span>\n                                </a>\n                            </li>",this.dataSources=[],this.processFlowObj={},this.processProgressObj={},this.getUrlParams(),this.horizontalFlow=_horizontalFlow,this.autoLoadNextTask=_autoLoadNextTask,this.processVars={plistTbIcons:["add_task","receipt_long","post_add","library_books","free_cancellation","published_with_changes"],plistCols:{taskName:{caption:"Task Name",hidden:!1}},pStatus:{approve:{badgeColor:"badge-light-success",bgColor:"bg-light-success",borderColor:"border-light-success",color:"bg-success",iconColor:"text-success"},approved:{badgeColor:"badge-light-success",bgColor:"bg-light-success",borderColor:"border-light-success",color:"bg-success",iconColor:"text-success"},check:{badgeColor:"badge-light-custom-checked",bgColor:"bg-light-custom-checked",borderColor:"border-light-custom-checked",color:"bg-custom-checked",iconColor:"text-custom-checked"},checked:{badgeColor:"badge-light-custom-checked",bgColor:"bg-light-custom-checked",borderColor:"border-light-custom-checked",color:"bg-custom-checked",iconColor:"text-custom-checked"},made:{badgeColor:"badge-light-primary",bgColor:"bg-light-primary",borderColor:"border-light-primary",color:"bg-primary"},make:{badgeColor:"badge-light-primary",bgColor:"bg-light-primary",borderColor:"border-light-primary",color:"bg-primary"},rejected:{badgeColor:"badge-light-danger",bgColor:"bg-light-danger",borderColor:"border-light-danger",color:"bg-danger"},returned:{badgeColor:"badge-light-warning",bgColor:"bg-light-warning",borderColor:"border-light-warning",color:"bg-warning"}}},this.toolbarDrawerHTML='<div class="Tkts-toolbar-Right">\n                            <button id="" type="submit" class="btn btn-sm btn-icon btn-primary btn-active-primary btn-custom-border-radius d-none">\n                                <span class="material-icons material-icons-style material-icons-2">add_task</span>\n                            </button>\n                            <button type="submit" class="btn btn-icon btn-white btn-color-gray-600 btn-active-primary shadow-sm tb-btn btn-sm" onclick="axProcessObj.taskFilter(\'reset\')" id="reset">\n                                <span class="material-icons material-icons-style material-icons-2">refresh</span>\n                            </button>\n\n\n                            <button type="submit" id="" class="btn btn-icon btn-white btn-color-gray-600 btn-active-primary shadow-sm  tb-btn btn-sm">\n                                <span class="material-icons material-icons-style material-icons-2">history_toggle_off</span>\n                            </button>\n                        </div>',this.annHTML='<div class="menu-item px-3">\n            <a class="menu-link px-3 border-bottom" href="javascript:void(0);" data-newtstruct>\n                <span class="symbol symbol-30px symbol-circle me-5">\n                    <span class="symbol-label bg-primary text-white fw-normal fs-3 material-icons"></annIcon></span>\n                </span>\n                <span class="fw-normal addCaption"></annCaption></span>\n            </a>\n        </div>',this.allTskHTML='<div class="custom-menu-item px-3">\n            <span class="custom-menu-link px-3 border-bottom">\n                <span class="form-check form-check-custom form-check-solid me-2">\n                    <input class="form-check-input h-25px w-25px menu-task" type="checkbox" checked="checked"/>\n                </span>\n                <span class="symbol symbol-30px symbol-circle me-2">\n                    <span class="symbol-label bg-light-primary text-primary fw-normal fs-3 material-icons border border-light-primary"></annIcon></span>\n                </span>\n                <span class="fw-normal menu-task-text"></annCaption></span>\n            </span>\n        </div>',this.calledFrom="",this.getProcessUserType()}return _createClass(e,[{key:"getProcessUserType",value:function(){var e,t=this,s=this;e={processName:this.processName},this.callAPI("../aspx/AxPEG.aspx/AxGetProcessUserType",e,!1,function(e){if(e.success){var a=JSON.parse(e.response);if("Error in ARM connection."==a.d)return void showAlertDialog("error","Error in ARM connection.");s.dataConvert(a,"ARM").every(function(e){var s,a;return"APPROVE"==(null===(s=e.tasktype)||void 0===s?void 0:s.toUpperCase())?(t.userType="APPROVER",!1):"MAKE"!=(null===(a=e.tasktype)||void 0===a?void 0:a.toUpperCase())||(t.userType="MAKER",!1)})}})}},{key:"getNextTaskInProcess",value:function(){var e=this,t=!1;if(!this.autoLoadNextTask)return t;var s,a=this;return"../aspx/AxPEG.aspx/AxGetNextTaskInProcess",s={processName:this.processName,keyValue:this.keyValue},this.callAPI("../aspx/AxPEG.aspx/AxGetNextTaskInProcess",s,!1,function(s){if(s.success){var r=JSON.parse(s.response),o=a.dataConvert(r,"ARM");if(o.length>0){var n=o[0];if(e.horizontalFlow&&"Current Process"!=n.nexttasktype&&(t=!1),"URLSearchParams"in window){t=!0;var i=new URLSearchParams(window.location.search);i.set("keyfield",n.keyfield),i.set("keyvalue",n.keyvalue),i.set("taskid",n.taskid),i.set("target",""),window.location.search=i.toString()}}else callParentNew("LoadIframe(loadhomepage)","function"),t=!0}}),t}},{key:"showProcessTree",value:function(){(this.isNullOrEmpty(axProcessTreeObj)||this.isUndefined(axProcessTreeObj))&&(axProcessTreeObj=new AxProcessTree(this.processName)),axProcessTreeObj.showProcessTree()}},{key:"reloadProcess",value:function(e){this.taskCompleted=!0,ShowDimmer(!0);var t=this,s={processName:this.processName,recordId:e};this.callAPI("../aspx/AxPEG.aspx/AxGetKeyValue",s,!1,function(e){if(e.success){var s=JSON.parse(e.response),a=t.dataConvert(s,"ARM");t.refreshProcess(a[0].keyvalue)}})}},{key:"refreshPage",value:function(){window.location.href=window.location.href}},{key:"refreshProcess",value:function(e){ShowDimmer(!0);var t=new URLSearchParams(location.search);t.set("keyvalue",e),window.history.replaceState({},"","".concat(location.pathname,"?").concat(t.toString())),document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.remove("d-none");var s=document.querySelector("#rightIframe");s.setAttribute("src",""),s.classList.remove("d-none"),this.keyValue=e,this.horizontalFlow?this.showProgress():this.showVerticalProgress(),this.fetchProcessList("ProcessList","TaskCompletion")}},{key:"hideDefaultCenterPanel",value:function(){document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.remove("d-none")}},{key:"fetchProcessList",value:function(e,t){var s,a=this,r="";r=void 0!==t&&"TaskCompletion"==t?"../aspx/AxPEG.aspx/AxGetCompletedTasks":"../aspx/AxPEG.aspx/AxGetPendingActiveTasks",s={pageNo:_pageno,pageSize:_pagesize},this.callAPI(r,s,!0,function(e){if(e.success){var s=JSON.parse(e.response);if("Error in ARM connection."==s.d)return ShowDimmer(!1),void showAlertDialog("error","Error in ARM connection.");var r=a.dataConvert(s,"ARM");_pendingTaskCount=r.result.count,void 0!==t&&"TaskCompletion"==t?void 0!==(completedtasksJson=r.result.completedtasks)&&completedtasksJson.length>0?a.showProcessList("completed"):ShowDimmer(!1):(pendingtasksJson=r.result.pendingtasks).length>0?a.showProcessList("pending"):ShowDimmer(!1)}})}},{key:"filterProcessList",value:function(e){e&&(document.querySelector("#advTextSearch").value="");var t=document.querySelector("#advTextSearch").value;if(this.inValid(t))document.querySelectorAll(".filterApplied").forEach(function(e){e.classList.remove("d-none"),e.classList.remove("filterApplied")});else{t=t.toLowerCase();var s=axProcessObj.dataSources.ProcessList.list.filter(function(e){var s;return null===(s=e.displaytitle)||void 0===s?void 0:s.toLowerCase().includes(t)});document.querySelectorAll("#plistAccordion tr").forEach(function(e){e.classList.add("d-none"),e.classList.add("filterApplied")}),s.length>0&&s.forEach(function(e){document.querySelectorAll('.filterApplied [data-taskid="'.concat(e.taskid,'"]')).forEach(function(e){var t,s;null==e||null===(t=e.closest("tr"))||void 0===t||t.classList.remove("d-none"),null==e||null===(s=e.closest("tr"))||void 0===s||s.classList.remove("filterApplied")})})}}},{key:"fetchProcessKeyValues",value:function(e){var t=this,s=this,a={processName:this.processName};this.callAPI("../aspx/AxPEG.aspx/AxGetProcessKeyValues",a,!0,function(e){if(e.success){var a=JSON.parse(e.response),r=s.dataConvert(a,"ARM"),o=[];r.forEach(function(e){o.push({id:e.keyvalue,text:e.keyvalue})}),$("select#keyvalues-select").select2({placeHolder:"Search...",data:o}).on("select2:select",function(e){var t=e.params.data.text;s.refreshProcess(t)}).on("select2:open",function(){$(t).find(".select2-search__field").focus()}).on("select2:close",function(){$(".searchBoxChildContainer.search").addClass("d-none")})}})}},{key:"callAPI",value:function(e,t,s,a){var r=this,o=new XMLHttpRequest;o.open("POST",e,s),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.isAxpertFlutter&&(o.setRequestHeader("Authorization","Bearer ".concat(armToken)),t.armSessionId=armSessionId),o.onreadystatechange=function(){4==this.readyState&&(200==this.status?a({success:!0,response:this.responseText}):(r.catchError(this.responseText),a({success:!1,response:this.responseText})))},o.send(JSON.stringify(t))}},{key:"catchError",value:function(e){showAlertDialog("error",e)}},{key:"showSuccess",value:function(e){showAlertDialog("success",e)}},{key:"dataConvert",value:function(e,t){if("AXPERT"==t)try{if("undefined"!=typeof(e=JSON.parse(e.d)).result[0].result.row)return e.result[0].result.row;if("undefined"!=typeof e.result[0].result)return e.result[0].result}catch(s){this.catchError(s.message)}else if("ARM"==t)try{if(this.isAxpertFlutter||(e=JSON.parse(e.d)),e.result&&e.result.success){if(!this.isUndefined(e.result.data))return e.result.data}else this.isUndefined(e.result.message)||this.catchError(e.result.message)}catch(s){this.catchError(s.message)}return e}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"isEmpty",value:function(e){return""==e}},{key:"isNull",value:function(e){return null==e||"null"==e}},{key:"isNullOrEmpty",value:function(e){return null==e||"null"==e||""==e}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"inValid",value:function(e){return null==e||void 0===e||""==e}},{key:"showVerticalProgress",value:function(e){var t,s,a=this,r=this;s={processName:this.processName,keyField:this.keyField,keyValue:this.keyValue};var o=(null==e?void 0:null===(t=e.dataset)||void 0===t?void 0:t.taskid)||this.taskId;this.callAPI("../aspx/AxPEG.aspx/AxGetProcess",s,!0,function(e){if(e.success){r.hideDefaultCenterPanel(),ShowDimmer(!1);var t=JSON.parse(e.response),s=r.dataConvert(t,"ARM");a.processProgressObj={},s.forEach(function(e,t){var s=e.tasktype.toUpperCase();if(-1==["IF","ELSE","ELSE IF","END"].indexOf(s)){if(a.isNullOrEmpty(e.taskstatus)&&e.indexno>1)return void(e.taskstatus="disabled");a.isUndefined(a.processProgressObj[e.taskname])&&(a.processProgressObj[e.taskname]={},a.processProgressObj[e.taskname].group_name_html="",a.processProgressObj[e.taskname].task_caption_html=""),a.isNullOrEmpty(e.recordid)&&(e.recordid="0");var r=a.processProgressObj[e.taskname];r.indexno=e.indexno,r.task_caption_html+=Handlebars.compile(a.taskCaptionHtml)(e)}}),document.querySelector("#procflow-steps").innerHTML="";for(var n,i,c,l=1,d=0,u=Object.entries(a.processProgressObj);d<u.length;d++){var p=_slicedToArray(u[d],2),m=(p[0],p[1]);document.querySelector("#procflow-steps").insertAdjacentHTML("beforeend"," ".concat(a.stepHtml.replace("{{sno}}",l).replace("{{groupNameHtml}}",m.group_name_html).replace("{{taskCaptionHtml}}",m.task_caption_html)," ")),l++}if(ShowDimmer(!1),a.taskCompleted){if(a.taskCompleted=!1,!a.getNextTaskInProcess())if(a.inValid(document.querySelector(".vertical-steps.status-Active"))){if(!a.inValid(document.querySelector(".vertical-steps"))){var h,f,v;a.calledFrom="ProgressBar",null===(h=document.querySelector(".vertical-steps"))||void 0===h||h.click(),null===(f=document.querySelector(".vertical-steps"))||void 0===f||f.scrollIntoView(),o=null===(v=document.querySelector(".vertical-steps").dataset)||void 0===v?void 0:v.taskid}}else a.calledFrom="ProgressBar",null===(n=document.querySelector(".vertical-steps.status-Active"))||void 0===n||n.click(),null===(i=document.querySelector(".vertical-steps.status-Active"))||void 0===i||i.scrollIntoView(),o=null===(c=document.querySelector(".vertical-steps.status-Active").dataset)||void 0===c?void 0:c.taskid}else if(a.inValid(a.taskId)){if(!a.inValid(a.target)){a.calledFrom="ProgressBar";var y,k,g,b='.vertical-steps[data-taskname="'.concat(a.target,'"]');if(a.inValid(document.querySelector(b))){if(!a.inValid(document.querySelector(".vertical-steps"))){var S,x,w;a.calledFrom="ProgressBar",null===(S=document.querySelector(".vertical-steps"))||void 0===S||S.click(),null===(x=document.querySelector(".vertical-steps"))||void 0===x||x.scrollIntoView(),a.inValid(o)&&(o=null===(w=document.querySelector(".vertical-steps").dataset)||void 0===w?void 0:w.taskid)}}else null===(y=document.querySelector(b))||void 0===y||y.click(),null===(k=document.querySelector(b))||void 0===k||k.scrollIntoView(),a.inValid(o)&&(o=null===(g=document.querySelector(b).dataset)||void 0===g?void 0:g.taskid);a.target=null}}else{a.calledFrom="ProgressBar";var T,A,P,L='.vertical-steps[data-taskid="'.concat(a.taskId,'"]');if(!a.inValid(document.querySelector(L)))null===(T=document.querySelector(L))||void 0===T||T.click(),null===(A=document.querySelector(L))||void 0===A||A.scrollIntoView(),a.inValid(o)&&(o=null===(P=document.querySelector(L).dataset)||void 0===P?void 0:P.taskid);a.target=null}r.inValid(o)||r.setActiveInList(o),$(".accordion-icon").click(function(){var e=$(this).attr("data-groupname");$(this).toggleClass("rotate"),$('.process-sub-flow[data-groupname="'.concat(e,'"]')).toggle()})}})}},{key:"showHorizontalProcessFlow",value:function(){var e=this,t=1;document.querySelector("#horizontal-processbar").innerHTML="",this.dataSources.Process.forEach(function(s,a){var r,o=s.tasktype.toUpperCase();-1==["IF","ELSE","ELSE IF","END"].indexOf(o)&&(e.isNullOrEmpty(s.taskstatus)&&s.indexno>1?s.taskstatus="disabled":["APPROVED","REJECTED","RETURNED","CHECKED","MADE"].indexOf(null===(r=s.taskstatus)||void 0===r?void 0:r.toUpperCase())&&(s.taskstatus="completed"),e.taskId==s.taskid&&(s.taskstatus="active"),e.isNullOrEmpty(s.recordid)&&(s.recordid="0"),s.sno=t,t++,document.querySelector("#horizontal-processbar").insertAdjacentHTML("beforeend"," ".concat(Handlebars.compile(e.horizontalStepHtml)(s)," ")))}),ShowDimmer(!1)}},{key:"openTask",value:function(e,t,s,a,r,o,n,i,c,l,d,u,p,m){switch(ShowDimmer(!0),this.currentIndex=parseInt(c),this.keyField=r,this.keyValue=o||this.keyValue,this.taskId=i,this.processName=u,this.taskType=s,this.inValid(m)||(this.calledFrom=m),callParentNew("AxNotifyMsgId=",""),this.inValid(p)||"message"!=p.toLowerCase()&&"form notification"!=p.toLowerCase()&&"periodic notification"!=p.toLowerCase()||(s=p),s.toUpperCase()){case"MAKE":document.querySelector("#pd_timeline").classList.remove("d-none"),this.showProgressNew(),this.openTstruct(t,a,r,o,n);break;case"CHECK":case"APPROVE":document.querySelector("#pd_timeline").classList.remove("d-none"),this.showProgressNew(),this.openProcessTask(t,s,i);break;case"FORM NOTIFICATION":case"PERIODIC NOTIFICATION":case"MESSAGE":document.querySelector("#pd_timeline").classList.add("d-none"),this.openMessageLink(l,d);break;case"CACHED SAVE":document.querySelector("#pd_timeline").classList.add("d-none"),this.openMessageLinkCachedSave(l,d,i);break;case"EXPORT":this.DownloadExportFile(d)}}},{key:"DownloadExportFile",value:function(e){if(""!=e&&(e.startsWith("http:")||e.startsWith("https:"))){var t=e,s=e.substring(e.lastIndexOf("/")+1),a=s.lastIndexOf("_"),r=s.substring(0,a)+s.substring(s.lastIndexOf(".")),o=document.createElement("a");o.href=t,o.download=r,document.body.appendChild(o),o.click(),setTimeout(function(){setTimeout(function(){document.body.removeChild(o)},0)},500),ShowDimmer(!1)}else{var n=e.substring(0,e.lastIndexOf("\\")+1),i=e.substring(e.lastIndexOf("\\")+1);$.ajax({type:"POST",url:"../WebService.asmx/LoadExportFileToScript",cache:!1,async:!1,contentType:"application/json;charset=utf-8",data:JSON.stringify({filePath:n,fileName:i}),dataType:"json",success:function(e){if(e.d&&""!=e.d){var t=e.d,s=e.d.substring(e.d.lastIndexOf("/")+1),a=document.createElement("a");a.href=t,a.download=s,document.body.appendChild(a),a.click(),setTimeout(function(){setTimeout(function(){document.body.removeChild(a)},0)},500),ShowDimmer(!1)}else ShowDimmer(!1)},error:function(e){ShowDimmer(!1)},failure:function(e){ShowDimmer(!1)}})}}},{key:"setActiveInList",value:function(e){document.querySelectorAll('[data-taskid="'.concat(e,'"]')).forEach(function(e){var t,s,a;e.classList.contains("Procurement-list")&&(null===(t=document.querySelector(".Procurement-list-wrap.active"))||void 0===t||t.classList.remove("active"),null===(s=e.closest(".Procurement-list-wrap"))||void 0===s||s.classList.add("active"));e.classList.contains("horizontal-steps")&&(document.querySelectorAll(".horizontal-steps").forEach(function(e){var t;null===(t=e.closest("li"))||void 0===t||t.classList.remove("Active")}),null===(a=e.closest("li"))||void 0===a||a.classList.add("Active"))})}},{key:"openRightSideCards",value:function(e,t){ShowDimmer(!0),files.js.push("/../ThirdParty/lodash.min.js?v=1"),files.js.push("/../ThirdParty/deepdash.min.js"),files.js.push("/../Js/handlebars.min.js?v=2"),files.js.push("/../Js/handleBarsHelpers.min.js"),files.js.push("/../ThirdParty/Highcharts/highcharts-3d.js"),files.js.push("/../ThirdParty/Highcharts/highcharts-more.js"),files.js.push("/../ThirdParty/Highcharts/highcharts.js"),files.js.push("/../ThirdParty/Highcharts/highcharts-exporting.js"),files.js.push("/../Js/high-charts-functions.min.js?v=20"),files.js.push("/../Js/AxInterface.min.js?v=12"),files.js.push("/../ThirdParty/DataTables-1.10.13/media/js/jquery.dataTables.js"),files.js.push("/../ThirdParty/DataTables-1.10.13/media/js/dataTables.bootstrap.js"),files.js.push("/../ThirdParty/DataTables-1.10.13/extensions/Extras/moment.min.js"),files.css.push("/../ThirdParty/fullcalendar/lib/main.min.css"),files.js.push("/../ThirdParty/fullcalendar/lib/main.min.js"),cardsDashboardObj.isMobile&&files.js.push("/../ThirdParty/jquery-ui-touch-punch-master/jquery.ui.touch-punch.min.js"),cardsDashboardObj.enableMasonry&&files.js.push("/../ThirdParty/masonry/masonry.pkgd.min.js"),document.getElementsByTagName("body")[0].classList.contains("btextDir-rtl")&&(cardsDashboardObj.dirLeft=!1),loadAndCall({files:files,callBack:function(){$(function(){$.ajax({url:"../aspx/AxPEG.aspx/AxGetCardsData",type:"POST",cache:!1,async:!0,data:JSON.stringify({processName:axProcessObj.processName||"",taskName:e||"",keyValue:t||""}),dataType:"json",contentType:"application/json",success:function(e){if(e.d&&""!=e.d){var t,s,a=JSON.parse(e.d);if(null==a||null===(t=a.result)||void 0===t||!t.success)return document.querySelector("#PROFLOW_Right_Last").classList.add("d-none"),(s=document.querySelector("#PROFLOW_Right").classList).add("col-md-9","col-xl-9"),void s.remove("col-md-7","col-xl-7");if(document.querySelector("#PROFLOW_Right_Last").classList.remove("d-none"),(s=document.querySelector("#PROFLOW_Right").classList).remove("col-md-9","col-xl-9"),s.add("col-md-7","col-xl-7"),cardsData.value=JSON.stringify(a.result.cards),cardsDesign.value="",""!=xmlMenuData){xmlMenuData=xmlMenuData.replace(/&apos;/g,"'");var r=parseXml(xmlMenuData),o=xml2json(r,"");menuJson=JSON.parse(o)}appGlobalVarsObject._CONSTANTS.menuConfiguration=$.extend(!0,{},appGlobalVarsObject._CONSTANTS.menuConfiguration,{menuJson:menuJson}),appGlobalVarsObject._CONSTANTS.cardsPage=$.extend(!0,{},appGlobalVarsObject._CONSTANTS.cardsPage,{setCards:!0,cards:(JSON.parse(""!==cardsData.value?ReverseCheckSpecialChars(cardsData.value):"[]",function(e,t){try{return"object"===_typeof(t)||isNaN(t)||""===t.toString().trim()?t:"string"==typeof t&&(t.startsWith("0")||t.startsWith("-"))?parseFloat(t,10):JSON.parse(t)}catch(s){return t}})||[]).map(function(e){return _.mapKeys(e,function(e,t){return t.toString().toLowerCase()})}),design:(JSON.parse(""!==cardsDesign.value?cardsDesign.value:"[]",function(e,t){try{return"object"===_typeof(t)||isNaN(t)||""===t.toString().trim()?t:"string"==typeof t&&(t.startsWith("0")||t.startsWith("-"))?parseFloat(t,10):JSON.parse(t)}catch(s){return t}})||[]).map(function(e){return _.mapKeys(e,function(e,t){return t.toString().toLowerCase()})}),enableMasonry:cardsDashboardObj.enableMasonry,staging:{iframes:".splitter-wrapper",cardsFrame:{div:".cardsPageWrapper",cardsDiv:".cardsPlot",cardsDesigner:".cardsDesigner",cardsDesignerToolbar:".designer",editSaveButton:".editSaveCardDesign",icon:"span.material-icons",divControl:"#arrangeCards"}}});appGlobalVarsObject.lcm;var n=$.axpertUI.init({isHybrid:appGlobalVarsObject._CONSTANTS.isHybrid,isMobile:cardsDashboardObj.isMobile,compressedMode:appGlobalVarsObject._CONSTANTS.compressedMode,dirLeft:cardsDashboardObj.dirLeft,axpertUserSettings:{settings:appGlobalVarsObject._CONSTANTS.axpertUserSettings},cardsPage:appGlobalVarsObject._CONSTANTS.cardsPage});appGlobalVarsObject._CONSTANTS.cardsPage=n.cardsPage,ShowDimmer(!1)}else showAlertDialog("error","Error while loading cards dashboard..!!")},error:function(e){ShowDimmer(!1),showAlertDialog("error","Error while loading cards dashboard..!!")},failure:function(e){ShowDimmer(!1),showAlertDialog("error","Error while loading cards dashboard..!!")}})})}})}},{key:"isEditableTask",value:function(e,t){var s=!1,a=this,r={processName:this.processName,taskName:e,keyValue:t,indexNo:this.currentIndex};return this.callAPI("../aspx/AxPEG.aspx/AxGetEditableTask",r,!1,function(e){if(e.success){var t=JSON.parse(e.response),r=a.dataConvert(t,"ARM");if((null==r?void 0:r.length)>0){var o=r[0];"T"==(null==o?void 0:o.editable)&&(s=!0)}}}),s}},{key:"openTstruct",value:function(e,t,s,a,r){var o;ShowDimmer(!0);var n="APPROVER"==this.userType?"&fromprocess=true":"",i="";if(!this.inValid(this.keyValue)&&"NA"!=this.keyValue&&(null==document.querySelector('[data-tasktype="Make"][data-transid="'.concat(t,'"][data-recordid="0"]'))||null!==(o=this.currentElem)&&void 0!==o&&o.classList.contains("completed"))){var c=this.isEditableTask(e,this.keyValue);i="&ispegedit=".concat(c.toString()),this.isTaskEditable=!1!==c}var l="../aspx/tstruct.aspx?transid=".concat(t).concat(n).concat(i);this.isNullOrEmpty(r)&&(r="0"),l+="0"!=r?"&act=load&recordid=".concat(r):""!=a&&"{{keyvalue}}"!=a?"&act=open&".concat(s,"=").concat(a):"&act=open&".concat(this.keyField,"=").concat(this.keyValue),document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.remove("d-none");var d=document.querySelector("#rightIframe");d.classList.remove("d-none"),d.setAttribute("src",""),d.setAttribute("src",l)}},{key:"openMessageLink",value:function(e,t){if(ShowDimmer(!0),""==e)return showAlertDialog("error","Page name should not be empty."),!1;var s="";t=t.replace("^","&"),e.startsWith("i")?(e=e.substring(1),s="../aspx/iview.aspx?ivname=".concat(e,"&").concat(t)):e.startsWith("t")?(e=e.substring(1),s="../aspx/tstruct.aspx?transid=".concat(e,"&").concat(t)):e.startsWith("c")&&(s="../aspx/".concat(t)),document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.add("d-none");var a=document.querySelector("#rightIframe");a.classList.remove("d-none"),a.setAttribute("src",""),a.setAttribute("src",s),e.startsWith("c")&&ShowDimmer(!1)}},{key:"openMessageLinkCachedSave",value:function(e,t,s){if(ShowDimmer(!0),""==e)return showAlertDialog("error","Page name should not be empty."),!1;var a="";t=t.replace("^","&"),e.startsWith("i")?(e=e.substring(1),a="../aspx/iview.aspx?ivname=".concat(e,"&").concat(t)):e.startsWith("t")?(e=e.substring(1),callParentNew("AxNotifyMsgId=",s),a="../aspx/tstruct.aspx?transid=".concat(e,"&").concat(t)):e.startsWith("c")&&(a="../aspx/".concat(t)),document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.add("d-none");var r=document.querySelector("#rightIframe");r.classList.remove("d-none"),r.setAttribute("src",""),r.setAttribute("src",a),e.startsWith("c")&&ShowDimmer(!1)}},{key:"newTstruct",value:function(e,t){ShowDimmer(!0),document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.remove("d-none");var s="APPROVER"==this.userType?"fromprocess=true&":"",a="../aspx/tstruct.aspx?".concat(s,"transid=").concat(e,"&act=open"),r=document.querySelector("#rightIframe");r.classList.remove("d-none"),r.setAttribute("src",""),r.setAttribute("src",a),this.keyValue="NA",this.horizontalFlow?this.showProgress():this.showVerticalProgress(),axProcessObj.openRightSideCards(t,"NA"),ShowDimmer(!1)}},{key:"openBulkApprove",value:function(){try{var e;"../aspx/AxPEG.aspx/AxGetBulkApprovalCount",e={},this.callAPI("../aspx/AxPEG.aspx/AxGetBulkApprovalCount",e,!0,function(e){if(e.success){var t=JSON.parse(e.response);t=JSON.parse(t.d),t=JSON.parse(t.result.data);var s="";t.forEach(function(e){s+='<div class="d-flex custom-menu-item px-4 py-2 border-1 border-bottom">\n<div class="symbol symbol-45px">\n                        <span class="symbol-label">\n                            <img alt="{{processname}}" class=" w-30px" src="../custompages/icons/{{processname}}.png"\n                                onerror="this.onerror=null;this.src=\'../custompages/icons/default.png\';">\n\n                        </span></div>\n            <div class="d-flex align-items-center " onclick="axProcessObj.openBulkApprovePopup(\''.concat(e.processname,'\')">\n                        <span class="custom-menu-link px-3">\n                            <span class="fw-normal fs-5 menu-task-text">').concat(e.processname," (").concat(e.pendingapprovals,")</span>\n                        </span></div>\n                        </div>")}),document.getElementsByTagName("pd-allTasksNew")[0].outerHTML=s}})}catch(t){showAlertDialog("error",t.message)}}},{key:"openBulkApprovePopup",value:function(e){var t=this;document.querySelector("body").click(),this.processName=e;var s={id:"ldbApprove",iFrameModalBody:'\n            <div class="card-body d-flex  row">\n                <div class="w-100" id="Bulk-SelectALL-wrap">\n                    <div class="form-check" style="position:absolute">\n                      <input class="form-check-input task-list-checkbox" type="checkbox" id="select-all-checkbox">\n                      <label class="form-check-label" for="select-all-checkbox">\n                        Select All\n                      </label>\n                    </div>\n                    <h4 style="margin-left: 295px; font-weight:bold">Bulk Approvals</h4>\n                </div>\n                <div class="w-100" id="BulkActiveList_Container">\n                </div>\n                <div class="w-100 mt-3">\n                    <div class="approval-controls" data-tasktype="Approve">\n                        <label class="form-label col-form-label mandatory">Bulk Approval Comments</label>\n                        <div class="input-group">\n                            <textarea data-tasktype="Approve" class="form-control"\n                                data-tasktype="Approve" id="BULKAPPROVEComments"></textarea>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <button  style="float:right " class="btn btn-primary btn-sm mt-2" type="button" onclick="axProcessObj.doBulkAction(\'BULKAPPROVE\',\'APPROVE\');">Bulk Approve</button>\n                </div>\n            </div>',size:"lg"};s.opening=t.bulkInit;try{var a=new BSModal("modal_".concat(s.id),"",s.iFrameModalBody,function(e){t.bulkInit(),ShowDimmer(!1)},function(e){});a.changeSize(s.size||"fullscreen"),a.hideHeader(),a.hideFooter(),a.showFloatingClose()}catch(r){showAlertDialog("error",r.message)}}},{key:"fetchBulkTasks",value:function(e){var t=this,s=this,a={processName:s.processName,taskType:"Approve"};this.callAPI("../aspx/AxPEG.aspx/AxGetBulkActiveTasks",a,!0,function(a){if(a.success){var r=JSON.parse(a.response),o=s.dataConvert(r,"ARM");s.dataSources[e]=JSON.parse(o),t.showBulkTasks(),ShowDimmer(!1)}else ShowDimmer(!1)})}},{key:"bulkInit",value:function(){this.fetchBulkTasks("BulkTasks");var e=document.getElementById("select-all-checkbox");null==e||e.addEventListener("change",function(){document.querySelectorAll(".task-list-checkbox").forEach(function(t){t.checked=e.checked})})}},{key:"showBulkTasks",value:function(){var e,t=this;document.querySelector("#BulkActiveList_Container").innerHTML="",(null===(e=this.dataSources.BulkTasks)||void 0===e?void 0:e.length)==undefined||0==this.dataSources.BulkTasks.length?this.isUndefined(parent.axProcessObj)?document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.noRecordsRowHtml," ")):document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.processedRowHtml," ")):this.dataSources.BulkTasks.forEach(function(e,s){var a=Handlebars.compile(t.bulkTaskRowHtml)(e);document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(a," "))})}},{key:"doBulkAction",value:function(e,t){var s=this;ShowDimmer(!0);var a=document.querySelector("#".concat(e,"Comments")).value,r=document.querySelectorAll(".task-list-checkbox:checked");if(0==r.length)return showAlertDialog("Error","Select atleast one task for approval."),ShowDimmer(!1),!1;if(""==a)return showAlertDialog("Error","Bulk Approval Comments cannot be left empty."),ShowDimmer(!1),!1;var o=[];r.forEach(function(e){o.push(e.dataset.taskid)});var n={action:e,taskId:o=o.join(","),taskType:t,statusText:a,processName:this.processName};this.callAPI("../aspx/AxPEG.aspx/AxDoBulkAction",n,!0,function(e){if(ShowDimmer(!1),e.success){var t=JSON.parse(e.response);s.isAxpertFlutter||(t=JSON.parse(t.d)),t.result.success?(s.showSuccess(t.result.message),s.isUndefined(parent.axProcessObj)?setTimeout(function(){axProcessObj.refreshPage()},1e3):parent.window.location.reload()):s.catchError(t.result.message)}})}},{key:"getUrlParams",value:function(){var e=window.location.search,t=new URLSearchParams(e);this.keyField=t.get("keyfield"),this.keyValue=t.get("keyvalue")||"NA",this.processName=t.get("processname")||_processName,this.taskId=t.get("taskid")||"",this.transId=t.get("transid")||"",this.target=t.get("target")||"",this.add=t.get("add")||"T",this.leftPanel=t.get("left")||"T",this.rightPanel=t.get("right")||"T",this.showTree=t.get("tree")||"T",this.bulkApproval=t.get("bulk")||"T",this.horizontal=t.get("horizontal")||"T",_autoLoadNextTask="F"!=t.get("autoloadnexttask")&&_autoLoadNextTask}},{key:"openProcessTask",value:function(e,t,s){ShowDimmer(!0);var a="../aspx/processflow.aspx?loadcaption=Active Lists&processname=".concat(this.processName,"&keyfield=").concat(this.keyField,"&keyvalue=").concat(this.keyValue,"&taskname=").concat(e,"&tasktype=").concat(t,"&taskid=").concat(s);document.querySelector("#process_centerpanel").classList.add("d-none"),document.querySelector("#horizontal-processbar").classList.remove("d-none");var r=document.querySelector("#rightIframe");r.classList.remove("d-none"),r.setAttribute("src",""),r.setAttribute("src",a)}},{key:"openSearch",value:function(){$(".searchBoxChildContainer.search").hasClass("d-none")?($(".searchBoxChildContainer.search").removeClass("d-none"),$("select#keyvalues-select").select2("open")):($(".searchBoxChildContainer.search").addClass("d-none"),$("select#keyvalues-select").select2("close"))}},{key:"init",value:function(){try{var e,t;ShowDimmer(!0);var s,a,r,o,n=document.createElement("div");if((e=n.classList).add.apply(e,_toConsumableArray("d-flex gap-4".split(" "))),n.innerHTML=this.toolbarDrawerHTML,"APPROVER"==this.userType&&(null===(t=document.querySelector("#kt_drawer_bulkApprove_button"))||void 0===t||t.classList.remove("d-none")),KTMenu.init(),("F"==this.horizontal||void 0!==_horizontalFlow&&!_horizontalFlow)&&(this.horizontalFlow=!1),"F"==this.add&&document.querySelector("#pd_ann").classList.add("d-none"),"F"==this.leftPanel)document.querySelector("#PROFLOW_Left").classList.add("d-none"),null===(s=document.querySelector("#PROFLOW_Right"))||void 0===s||s.classList.add("right-only");if(this.horizontalFlow)"F"!=this.leftPanel&&this.fetchProcessList("ProcessList");else document.querySelector("#PROFLOW_Left").classList.remove("d-none"),document.querySelector("#PROFLOW_Left .card-header").classList.add("d-none"),document.querySelector("#PROFLOW_Left #PROFLOW-profile-container").classList.remove("d-none"),document.querySelector("#PROFLOW_Left #plistAccordion").classList.add("d-none"),null===(a=document.querySelector("#PROFLOW_Right"))||void 0===a||a.classList.remove("right-only"),this.showVerticalProgress();if("F"==this.rightPanel){var i;null===(i=document.querySelector("#PROFLOW_Right_Last"))||void 0===i||i.classList.add("d-none");var c=document.querySelector("#PROFLOW_Right").classList;c.remove("col-md-7","col-xl-7"),c.add("col-md-9","col-xl-9")}if("F"==this.bulkApproval)null===(r=document.querySelector("#kt_drawer_bulkApprove_button"))||void 0===r||r.classList.add("d-none");if("F"==this.showTree)null===(o=document.querySelector("#proFlw_Tree_button"))||void 0===o||o.classList.add("d-none");document.querySelectorAll("#pd_all_tasksNew").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){axProcessObj.openBulkApprove()})}),document.querySelectorAll("#pd_timeline").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){axProcessObj.showTimeLine()})})}catch(l){this.catchError(l.message)}}},{key:"processNewNode",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],s="";if(axProcessObj.dataSources.ProcessList.addnewnode&&axProcessObj.dataSources.ProcessList.addnewnode.length>0)s=Object.values(axProcessObj.dataSources.ProcessList.addnewnode).map(function(t){var s=axProcessObj.annHTML;return!e.isUndefined(t.transid)&&(s=s.replace("data-newtstruct","onclick=\"axProcessObj.newTstruct('".concat(t.transid,"','").concat(t.taskname,"')\""))),s=(s=s.replace("</annIcon>",t.taskicon)).replace("</annCaption>",t.taskname||"")}).join("");else{var a=axProcessObj.annHTML;s=a=(a=a.replace("</annIcon>","playlist_remove")).replace("</annCaption>","No data")}if(t)return s;this.isUndefined(document.getElementsByTagName("anncontent")[0])||(document.getElementsByTagName("anncontent")[0].outerHTML=s)}},{key:"showProcessList",value:function(e){ShowDimmer(!0);try{var t=void 0!==e&&"pending"==e?pendingtasksJson:completedtasksJson,s="",a=document.getElementById("plistContentPending"),r=document.getElementById("plistContentCompleted");if(t.length>0){document.querySelector("#PROFLOW_Left").classList.remove("d-none"),document.querySelector("#PROFLOW_Right").classList.remove("right-only");var o=_toConsumableArray(new Set(t.map(function(e){return e.taskname}))),n=_toConsumableArray(new Set(t.map(function(e){return e.displayicon}))).splice(0,o.length);if(s='<div class="custom-menu-item px-3">\n                    <span class="custom-menu-link px-3 border-bottom">\n                        <span class="form-check form-check-custom form-check-solid me-4">\n                            <input class="form-check-input h-25px w-25px all-task" type="checkbox" checked="checked" />\n                        </span>                        \n                        <span class="fw-normal all-task-text">Unselect All</span>\n                        <button class="btn btn-sm btn-light-primary ms-auto btn-custom-border-radius" onclick="axProcessObj.taskFilter(\'task\')">Apply</button>\n                    </span>\n                </div>',o.forEach(function(e,t){var a=axProcessObj.allTskHTML;a=(a=a.replace("</annCaption>",e)).replace("</annIcon>",n[t]),s+=a}),!this.isUndefined(document.getElementsByTagName("pd-allTasks")[0])&&(document.getElementsByTagName("pd-allTasks")[0].outerHTML=s),"pending"==e){var i,c=document.createElement("table");(i=c.classList).add.apply(i,_toConsumableArray("table table-sm table-row-bordered table-responsive overflow-auto".split(" "))),c.setAttribute("id","pendingList");var l=Object.keys(axProcessObj.processVars.plistCols).map(function(e){return axProcessObj.processVars.plistCols[e]}).filter(function(e){return 0==e.hidden}),d=document.createElement("tbody"),u=0;if(Object.values(t).map(function(e){var t=document.createElement("tr");l.map(function(s){var a=document.createElement("td"),r=axProcessObj.processListData(e,s);a.innerHTML=r,a.setAttribute("data-fromuser",e.fromuser),a.setAttribute("data-tasktime",e.tasktime),t.appendChild(a)}),d.appendChild(t),u++}).join(""),c.appendChild(d),a&&u)a.innerHTML="",a.appendChild(c);else{a.innerHTML='<label class="form-label fs-4">No data available...!!!</label>'}}else{var p,m=document.createElement("table");(p=m.classList).add.apply(p,_toConsumableArray("table table-sm table-row-bordered table-responsive overflow-auto".split(" "))),m.setAttribute("id","completedList");var h=Object.keys(axProcessObj.processVars.plistCols).map(function(e){return axProcessObj.processVars.plistCols[e]}).filter(function(e){return 0==e.hidden}),f=document.createElement("tbody"),v=0;if(Object.values(t).map(function(e){var t=document.createElement("tr");h.map(function(s){var a=document.createElement("td"),r=axProcessObj.processListData(e,s);a.innerHTML=r,a.setAttribute("data-fromuser",e.fromuser),a.setAttribute("data-tasktime",e.tasktime),t.appendChild(a)}),f.appendChild(t),v++}).join(""),m.appendChild(f),r&&v)r.innerHTML="",r.appendChild(m);else{r.innerHTML='<label class="form-label fs-4">No data available...!!!</label>'}}$("#pdFilFrom, #pdFilTo").flatpickr({dateFormat:"d-M-Y",enableTime:!1}),KTMenu.init(),$(document).on("click",".all-task",function(e){var t=document.querySelector("#pd_all_tasks");KTMenu.getInstance(t).element.children.forEach(function(t,s){0!=s&&(t.getElementsByClassName("menu-task")[0].checked=e.currentTarget.checked)}),e.currentTarget.checked?$(".all-task-text").text("Unselect All"):$(".all-task-text").text("Select All")}),$(document).on("click",".menu-task",function(e){var t=document.querySelectorAll(".menu-task"),s=document.querySelectorAll(".menu-task:checked");t.length>0&&t.length==s.length?(document.querySelector(".all-task").checked=!0,$(".all-task-text").text("Unselect All")):(document.querySelector(".all-task").checked=!1,$(".all-task-text").text("Select All"))})}else document.querySelector("#PROFLOW_Left").classList.add("d-none"),document.querySelector("#PROFLOW_Right").classList.add("right-only");this.inValid(this.taskId)||this.taskCompleted||this.setActiveInList(this.taskId)}catch(y){this.catchError(y.message)}document.querySelectorAll(".accordion-button").forEach(function(e){e.addEventListener("click",function(e){var t=this.getAttribute("data-target");this.classList.toggle("collapsed"),document.querySelector(t).classList.toggle("show")})}),ShowDimmer(!1)}},{key:"processListData",value:function(e,t){try{var s="";switch(t.caption){case"Task Name":s='<div class="ProcessFlow_New-List-Items">\n                                                            <div class="d-flex align-items-center Ticket-Num ">\n                                                                <div class="symbol symbol-30px me-5">\n                                                                    <span class="symbol-label">\n                                                                        <span class="material-icons material-icons-style text-warning">add_task</span>\n                                                                    </span>\n                                                                </div>\n                                                                <div class=" d-flex flex-column">\n                                                                    <a href="javascript:void(0)" class="ProcessFlow_New-List-Title Procurement-list" onclick="axProcessObj.openTask(this, \''.concat(e.taskname,"','").concat(e.tasktype,"','").concat(e.transid,"','").concat(e.keyfield,"','").concat(e.keyvalue,"','").concat(e.recordid,"','").concat(e.taskid,"', '").concat(e.indexno,"','").concat(e.hlink_transid,"','").concat(e.hlink_params,"','").concat(e.processname,"','").concat(e.msgtype,"', 'LeftPanel');\" data-caption=\"").concat(e.taskname,'" data-keyvalue="').concat(e.keyvalue,'" data-keyfield="').concat(e.keyfield,'" data-processname="').concat(e.processname,'" data-taskid="').concat(e.taskid,'">').concat(e.displaytitle,'</a>\n                                                                </div>\n                                                            </div>\n                                                            <div class=" ms-14 Ticket-Description">').concat(e.displaycontent,'</div>\n                                                            <div class="Ticket-Details ms-14 ">\n                                                                <div class="Ticket-Value">\n                                                                    <span class="Assigned-By"><span class="material-icons material-icons-style material-icons-2">person</span>').concat(e.fromuser,'</span>\n                                                                </div>\n                                                                <div class="Ticket-Value">\n                                                                    <span class="Assigned-Date">\n                                                                        <span class="material-icons material-icons-style material-icons-2">today</span>\n                                                                        ').concat(e.eventdatetime.split(" ")[0],'\n                                                                    </span>\n                                                                    <span class="Assigned-Date">\n                                                                        <span class="material-icons material-icons-style material-icons-2">schedule</span>\n                                                                        ').concat(e.eventdatetime.split(" ")[1],"\n                                                                    </span>\n                                                                </div>\n                                                            </div>\n                                                        </div>");break;default:s=""}return s}catch(a){this.catchError(a.message)}}},{key:"getProStatusDetails",value:function(e,t){var s={counter:0,returnProStatus:""};"Task Name"==e.caption?(s.counter=1,s.icon=t.displayicon,s.taskType=this.processVars.pStatus[t.tasktype.toLowerCase()]||"make",s.title=""):"Next Step"==e.caption&&(s.counter=""!=t.nexttask?t.nexttask.split(",").length:0,s.nextTask=t.nexttask.split(","));for(var a=0;a<s.counter;)"Next Step"==e.caption&&(s.curTask=s.nextTask[a].split("~"),s.icon=s.curTask[0],s.taskType=this.processVars.pStatus[s.curTask[1].toLowerCase()]||"make",s.title=s.curTask[2]),s.returnProStatus+='<button class="btn btn-icon btn-sm '.concat(s.taskType.bgColor," border ").concat(s.taskType.borderColor,' shadow-sm flex-column me-2" ').concat(""!=s.title?'title="'.concat(s.title,'"'):"",'>\n                <span class="blinker bullet bullet-dot h-8px w-8px position-relative bottom-25 start-25 animation-blinkz ').concat(s.taskType.color,'"></span>\n                <span class="material-icons material-icons-style material-icons-3 mt-n2 ').concat(s.taskType.iconColor,'">').concat(s.icon,"</span>\n            </button>"),a++;return s.returnProStatus}},{key:"taskFilter",value:function(e){var t,s;ShowDimmer(!0);var a={user:document.getElementById("pdFilUser").value||"",from:(null===(t=document.getElementById("pdFilFrom").value)||void 0===t?void 0:t.replaceAll("-","/"))||"",to:(null===(s=document.getElementById("pdFilTo").value)||void 0===s?void 0:s.replaceAll("-","/"))||""};if(a.allTrs=document.querySelectorAll("#pendingList tr, #completedList tr"),"reset"==e)document.getElementById("pdFilUser").value="",document.getElementById("pdFilFrom").value="",document.getElementById("pdFilTo").value="","pending"==$("#PROFLOW_Left li a.active").attr("id")?this.fetchProcessList("ProcessList"):this.fetchProcessList("ProcessList","TaskCompletion");else if("filter"==e&&""==(a&&(a.user||a.from||a.to)))ShowDimmer(!1),this.catchError("Filter parameters cannot be left empty..!!");else{var r,o=$("#PROFLOW_Left li a.active").attr("id"),n=this;"../aspx/AxPEG.aspx/AxGetFilteredActiveTasks",r={filterType:o,pageNo:_pageno,pageSize:_pagesize,fromuser:a.user,processname:"",fromdate:a.from,todate:a.to,searchtext:""},this.callAPI("../aspx/AxPEG.aspx/AxGetFilteredActiveTasks",r,!0,function(e){if(e.success){var t=JSON.parse(e.response),s=n.dataConvert(t,"ARM");_pendingTaskCount=s.result.count,void 0!==o&&"completed"==o?"undefined"!=typeof s.result.completedtasks&&s.result.completedtasks.length>0?(completedtasksJson=s.result.completedtasks,n.showProcessList("completed")):showAlertDialog("warning","No task available."):"undefined"!=typeof s.result.pendingtasks&&s.result.pendingtasks.length>0?(pendingtasksJson=s.result.pendingtasks,n.showProcessList("pending")):showAlertDialog("warning","No task available."),document.getElementById("pdFilUser").value="",document.getElementById("pdFilFrom").value="",document.getElementById("pdFilTo").value="",ShowDimmer(!1)}else ShowDimmer(!1)})}}},{key:"taskSearch",value:function(e){ShowDimmer(!0);var t={searchVal:document.getElementById("advTextSearch").value||""};if("reset"==e)document.getElementById("advTextSearch").value="","pending"==$("#PROFLOW_Left li a.active").attr("id")?this.fetchProcessList("ProcessList"):this.fetchProcessList("ProcessList","TaskCompletion");else if("search"==e&&""==(t&&t.searchVal))ShowDimmer(!1),this.catchError("Search cannot be left empty..!!");else{var s,a=$("#PROFLOW_Left li a.active").attr("id"),r=this;"../aspx/AxPEG.aspx/AxGetFilteredActiveTasks",s={filterType:a,pageNo:_pageno,pageSize:_pagesize,fromuser:"",processname:"",fromdate:"",todate:"",searchtext:t.searchVal},this.callAPI("../aspx/AxPEG.aspx/AxGetFilteredActiveTasks",s,!0,function(e){if(e.success){var t=JSON.parse(e.response),s=r.dataConvert(t,"ARM");_pendingTaskCount=s.result.count,void 0!==a&&"completed"==a?"undefined"!=typeof s.result.completedtasks&&s.result.completedtasks.length>0?(completedtasksJson=s.result.completedtasks,r.showProcessList("completed")):showAlertDialog("warning","No task available."):"undefined"!=typeof s.result.pendingtasks&&s.result.pendingtasks.length>0?(pendingtasksJson=s.result.pendingtasks,r.showProcessList("pending")):showAlertDialog("warning","No task available."),document.getElementById("advTextSearch").value="",ShowDimmer(!1)}else ShowDimmer(!1)})}}},{key:"showProgress",value:function(e){var t,s=this;setTimeout(function(){axProcessObj.beforeLoad()},100);var a=this,r={};var o=(null==e?void 0:null===(t=e.dataset)||void 0===t?void 0:t.taskid)||this.taskId;if(void 0!==e)r={processName:this.processName,keyField:this.keyField,keyValue:this.keyValue};else{var n=$($(".Procurement-list")[0]);r={processName:n.data("processname"),keyField:n.data("keyfield"),keyValue:n.data("keyvalue")},o=n.data("taskid"),this.processName=n.data("processname")}this.callAPI("../aspx/AxPEG.aspx/AxGetProcess",r,!0,function(e){if(e.success){a.hideDefaultCenterPanel(),ShowDimmer(!1);var t,r,n,i=JSON.parse(e.response),c=a.dataConvert(i,"ARM"),l=1;if(document.querySelector("#horizontal-processbar").innerHTML="",c.forEach(function(e,t){var a,r=e.tasktype.toUpperCase();-1==["IF","ELSE","ELSE IF","END"].indexOf(r)&&("1"==e.indexno&&s.inValid(e.taskstatus)?e.taskstatus="pending":"Active"==e.taskstatus&&(e.taskstatus="pending"),s.isNullOrEmpty(e.taskstatus)&&e.indexno>1?e.taskstatus="disabled":["APPROVED","REJECTED","RETURNED","CHECKED","MADE"].indexOf(null===(a=e.taskstatus)||void 0===a?void 0:a.toUpperCase())>-1&&(e.taskstatus="completed"),s.isNullOrEmpty(e.recordid)&&(e.recordid="0"),e.sno=l,l++,document.querySelector("#horizontal-processbar").insertAdjacentHTML("beforeend"," ".concat(Handlebars.compile(s.horizontalStepHtml)(e)," ")))}),s.taskCompleted){if(s.taskCompleted=!1,!s.getNextTaskInProcess())if(s.inValid(document.querySelector(".horizontal-steps.pending"))){if(!s.inValid(document.querySelector(".horizontal-steps"))){var d,u,p;s.calledFrom="ProgressBar",null===(d=document.querySelector(".horizontal-steps"))||void 0===d||d.click(),null===(u=document.querySelector(".horizontal-steps"))||void 0===u||u.scrollIntoView(),o=null===(p=document.querySelector(".horizontal-steps.pending").dataset)||void 0===p?void 0:p.taskid}}else s.calledFrom="ProgressBar",null===(t=document.querySelector(".horizontal-steps.pending"))||void 0===t||t.click(),null===(r=document.querySelector(".horizontal-steps.pending"))||void 0===r||r.scrollIntoView(),o=null===(n=document.querySelector(".horizontal-steps.pending").dataset)||void 0===n?void 0:n.taskid}else if(s.inValid(s.taskId))if(s.inValid(s.target)){var m;s.calledFrom="ProgressBar";var h,f,v=".horizontal-steps";if(s.inValid(document.querySelector(".horizontal-steps.pending"))){if(!s.inValid(document.querySelector(v))){var y,k;null===(y=document.querySelector(v))||void 0===y||y.click(),null===(k=document.querySelector(v))||void 0===k||k.scrollIntoView()}}else null===(h=document.querySelector(v))||void 0===h||h.click(),null===(f=document.querySelector(".horizontal-steps.pending"))||void 0===f||f.scrollIntoView();s.inValid(o)&&(o=null===(m=document.querySelector(v).dataset)||void 0===m?void 0:m.taskid),s.target=null}else{var g;s.calledFrom="ProgressBar";var b,S,x='.horizontal-steps.pending[data-taskname="'.concat(s.target,'"]'),w='.horizontal-steps[data-taskname="'.concat(s.target,'"]');if(s.inValid(document.querySelector(x))){if(!s.inValid(document.querySelector(w))){var T,A;null===(T=document.querySelector(w))||void 0===T||T.click(),null===(A=document.querySelector(w))||void 0===A||A.scrollIntoView()}}else null===(b=document.querySelector(w))||void 0===b||b.click(),null===(S=document.querySelector(x))||void 0===S||S.scrollIntoView();s.inValid(o)&&(o=null===(g=document.querySelector(w).dataset)||void 0===g?void 0:g.taskid),s.target=null}else{s.calledFrom="ProgressBar";var P,L,O,C='.horizontal-steps[data-taskid="'.concat(s.taskId,'"]');if(!s.inValid(document.querySelector(C)))null===(P=document.querySelector(C))||void 0===P||P.click(),null===(L=document.querySelector(C))||void 0===L||L.scrollIntoView(),s.inValid(o)&&(o=null===(O=document.querySelector(C).dataset)||void 0===O?void 0:O.taskid);s.target=null}a.inValid(o)||a.setActiveInList(o),setTimeout(function(){axProcessObj.afterLoad()},100)}else ShowDimmer(!1)})}},{key:"showProgressNew",value:function(){var e=this;setTimeout(function(){axProcessObj.beforeLoad()},100);var t,s=this;t={processName:this.processName,taskType:this.taskType,taskId:this.taskId,keyValue:this.keyValue},this.callAPI("../aspx/AxPEG.aspx/AxPEGGetTaskDetails",t,!0,function(t){if(t.success){var a=JSON.parse(t.response),r=s.dataConvert(a,"ARM");if((processflowJson=r.result.processflow).length>0){var o=processflowJson,n=1;document.querySelector("#horizontal-processbar").innerHTML="",o.forEach(function(t,s){var a,r=t.tasktype.toUpperCase();-1==["IF","ELSE","ELSE IF","END"].indexOf(r)&&("1"==t.indexno&&e.inValid(t.taskstatus)?t.taskstatus="pending":"Active"==t.taskstatus&&(t.taskstatus="pending"),e.isNullOrEmpty(t.taskstatus)&&t.indexno>1?t.taskstatus="disabled":["APPROVED","REJECTED","RETURNED","CHECKED","MADE"].indexOf(null===(a=t.taskstatus)||void 0===a?void 0:a.toUpperCase())>-1&&(t.taskstatus="completed"),e.isNullOrEmpty(t.recordid)&&(t.recordid="0"),t.sno=n,n++,document.querySelector("#horizontal-processbar").insertAdjacentHTML("beforeend"," ".concat(Handlebars.compile(e.horizontalStepHtml)(t)," ")))}),setTimeout(function(){axProcessObj.afterLoad()},100)}else ShowDimmer(!1)}else ShowDimmer(!1)})}},{key:"beforeLoad",value:function(){}},{key:"afterLoad",value:function(){}},{key:"showTimeLine",value:function(){(axTimeLineObj=new ProcessTimeLine).keyvalue=this.keyValue,axTimeLineObj.processName=this.processName,this.inValid(axTimeLineObj.keyvalue)||"NA"==axTimeLineObj.keyvalue||axTimeLineObj.getTimeLineData()}},{key:"showList",value:function(){document.querySelectorAll("#showList,#PROFLOW-profile-container").forEach(function(e){e.classList.add("d-none")}),document.querySelectorAll("#plistAccordion,#showProgress").forEach(function(e){e.classList.remove("d-none")})}},{key:"showDefaultList",value:function(){document.querySelectorAll("#showList,#PROFLOW-profile-container,#showProgress").forEach(function(e){e.classList.add("d-none")}),document.querySelectorAll("#plistAccordion").forEach(function(e){e.classList.remove("d-none")})}},{key:"refreshCards",value:function(e,t){this.inValid(e)||$.ajax({url:"../aspx/AxPEG.aspx/AxRefreshCardsData",type:"POST",cache:!1,async:!0,data:JSON.stringify({cardsIds:e.join(","),cardsParams:t}),dataType:"json",contentType:"application/json",success:function(e){if(e.d&&""!=e.d){var t=JSON.parse(e.d);cardsData.value=JSON.parse(cardsData.value);var s=cardsData.value.concat(t.result.cards).reduce(function(e,t){var s=e.find(function(e){return e.axp_cardsid===t.axp_cardsid});return s?(s.cardsql=t.cardsql,e):e.concat([t])},[]);if(cardsData.value=JSON.stringify(s),cardsDesign.value="",""!=xmlMenuData){xmlMenuData=xmlMenuData.replace(/&apos;/g,"'");var a=parseXml(xmlMenuData),r=xml2json(a,"");menuJson=JSON.parse(r)}appGlobalVarsObject._CONSTANTS.menuConfiguration=$.extend(!0,{},appGlobalVarsObject._CONSTANTS.menuConfiguration,{menuJson:menuJson}),appGlobalVarsObject._CONSTANTS.cardsPage=$.extend(!0,{},appGlobalVarsObject._CONSTANTS.cardsPage,{setCards:!0,cards:(JSON.parse(""!==cardsData.value?ReverseCheckSpecialChars(cardsData.value):"[]",function(e,t){try{return"object"===_typeof(t)||isNaN(t)||""===t.toString().trim()?t:"string"==typeof t&&(t.startsWith("0")||t.startsWith("-"))?parseFloat(t,10):JSON.parse(t)}catch(s){return t}})||[]).map(function(e){return _.mapKeys(e,function(e,t){return t.toString().toLowerCase()})}),design:(JSON.parse(""!==cardsDesign.value?cardsDesign.value:"[]",function(e,t){try{return"object"===_typeof(t)||isNaN(t)||""===t.toString().trim()?t:"string"==typeof t&&(t.startsWith("0")||t.startsWith("-"))?parseFloat(t,10):JSON.parse(t)}catch(s){return t}})||[]).map(function(e){return _.mapKeys(e,function(e,t){return t.toString().toLowerCase()})}),enableMasonry:cardsDashboardObj.enableMasonry,staging:{iframes:".splitter-wrapper",cardsFrame:{div:".cardsPageWrapper",cardsDiv:".cardsPlot",cardsDesigner:".cardsDesigner",cardsDesignerToolbar:".designer",editSaveButton:".editSaveCardDesign",icon:"span.material-icons",divControl:"#arrangeCards"}}});appGlobalVarsObject.lcm;var o=$.axpertUI.init({isHybrid:appGlobalVarsObject._CONSTANTS.isHybrid,isMobile:cardsDashboardObj.isMobile,compressedMode:appGlobalVarsObject._CONSTANTS.compressedMode,dirLeft:cardsDashboardObj.dirLeft,axpertUserSettings:{settings:appGlobalVarsObject._CONSTANTS.axpertUserSettings},cardsPage:appGlobalVarsObject._CONSTANTS.cardsPage});appGlobalVarsObject._CONSTANTS.cardsPage=o.cardsPage}else showAlertDialog("error","Error while loading cards dashboard..!!")},error:function(e){showAlertDialog("error","Error while loading cards dashboard..!!")},failure:function(e){showAlertDialog("error","Error while loading cards dashboard..!!")}})}}]),e}(),AxProcessTree=function(){function e(t){_classCallCheck(this,e),this.definitionFetched=!1,this.dataSources=[],this.processName=t,this.stepHtml='\n            <div class="step">\n                <div>\n                    <div class="circle ">\n                        <i class="fa fa-check"></i>\n                        <span class="Emp-steps-counts">{{sno}}</span>\n                    </div>\n                    <div class="line"></div>\n                </div>\n                <div class="Task-process-wrapper">\n                    {{groupNameHtml}}\n                    {{taskCaptionHtml}}\n                </div>\n            </div>',this.groupNameHtml='\n            <div class="title">\n                <a href="javascript:void(0)">{{taskgroup}}</a>\n                <span data-groupname="{{taskgroup}}" class="Process-flow accordion-icon rotate">\n                    <span  class="material-icons material-icons-style material-icons-2">chevron_right</span>                    \n                </span>\n            </div>',this.taskCaptionHtml='<div class="process-sub-flow" data-groupname="{{taskgroup}}" data-tasktype="{{tasktype}}">',this.taskCaptionHtml+='<div class="positionRel Task-process-list">',this.taskCaptionHtml+='<a href="javascript:void(0)" onclick="return false;">{{taskname}}</a>',this.taskCaptionHtml+="</div></div>"}return _createClass(e,[{key:"fetchProcessDefinition",value:function(e){var t=this,s={processName:this.processName};this.callAPI("../aspx/AxPEG.aspx/AxGetProcessDefinition",s,!1,function(s){if(s.success){var a=JSON.parse(s.response),r=t.dataConvert(a,"ARM");t.dataSources[e]=r,t.definitionFetched=!0}})}},{key:"showProcessTree",value:function(){var e=this;try{var t=new BSModal("modal_ProcessTree","",'<div class="PROFLOW-Info-Steps ax-data accordion arrows" id="procflow-steps"></div>',function(t){ShowDimmer(!0),e.definitionFetched||e.fetchProcessDefinition("Process"),e.showProcessDefinition(),ShowDimmer(!1)},function(e){});t.changeSize("md"),t.hideHeader(),t.hideFooter(),t.showFloatingClose()}catch(s){showAlertDialog("error",s.message)}}},{key:"showProcessDefinition",value:function(){var e=this;if(""==document.querySelector("#procflow-steps").innerHTML){this.processFlowObj={},this.dataSources.Process.forEach(function(t,s){e.isUndefined(e.processFlowObj[t.taskgroup])&&(e.processFlowObj[t.taskgroup]={},e.processFlowObj[t.taskgroup].group_name_html="",e.processFlowObj[t.taskgroup].task_caption_html=""),e.isNullOrEmpty(t.taskstatus)&&t.indexno>1&&(t.taskstatus="disabled"),e.isNullOrEmpty(t.recordid)&&(t.recordid="0");var a=e.processFlowObj[t.taskgroup];a.indexno=t.indexno,a.group_name_html=Handlebars.compile(e.groupNameHtml)(t),a.task_caption_html+=Handlebars.compile(e.taskCaptionHtml)(t)}),document.querySelector("#procflow-steps").innerHTML="";for(var t=1,s=0,a=Object.entries(this.processFlowObj);s<a.length;s++){var r=_slicedToArray(a[s],2),o=(r[0],r[1]);document.querySelector("#procflow-steps").insertAdjacentHTML("beforeend"," ".concat(this.stepHtml.replace("{{sno}}",t).replace("{{groupNameHtml}}",o.group_name_html).replace("{{taskCaptionHtml}}",o.task_caption_html)," ")),t++}ShowDimmer(!1),$(".accordion-icon").click(function(){var e=$(this).attr("data-groupname");$(this).toggleClass("rotate"),$('.process-sub-flow[data-groupname="'.concat(e,'"]')).toggle()})}}},{key:"callAPI",value:function(e,t,s,a){var r=this,o=new XMLHttpRequest;o.open("POST",e,s),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.isAxpertFlutter&&(o.setRequestHeader("Authorization","Bearer ".concat(armToken)),t.armSessionId=armSessionId),o.onreadystatechange=function(){4==this.readyState&&(200==this.status?a({success:!0,response:this.responseText}):(r.catchError(this.responseText),a({success:!1,response:this.responseText})))},o.send(JSON.stringify(t))}},{key:"catchError",value:function(e){showAlertDialog("error",e)}},{key:"showSuccess",value:function(e){showAlertDialog("success",e)}},{key:"dataConvert",value:function(e,t){if("AXPERT"==t)try{if("undefined"!=typeof(e=JSON.parse(e.d)).result[0].result.row)return e.result[0].result.row;if("undefined"!=typeof e.result[0].result)return e.result[0].result}catch(s){ShowDimmer(!1),this.catchError(s.message)}else if("ARM"==t)try{if(this.isAxpertFlutter||(e=JSON.parse(e.d)),e.result&&e.result.success){if(!this.isUndefined(e.result.data))return e.result.data}else this.isUndefined(e.result.message)||this.catchError(e.result.message)}catch(s){ShowDimmer(!1),this.catchError(s.message)}return e}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"isEmpty",value:function(e){return""==e}},{key:"isNull",value:function(e){return null==e}},{key:"isNullOrEmpty",value:function(e){return null==e||""==e}},{key:"inValid",value:function(e){return null==e||void 0===e||""==e}},{key:"isUndefined",value:function(e){return void 0===e}}]),e}(),ProcessTimeLine=function(){function e(){_classCallCheck(this,e),this.keyvalue="",this.processName="",this.make='<li class="make">                                   \n                    <p class="T-Desc">{{taskname}}#{{keyvalue}}</p>\n \t\t    <p class="T-Heading">{{taskfromuser}}</p>\n \t\t    <div class="time">{{tasktime}}</div>\n                </li>',this.check='<li class="check">\n                    <p class="T-Desc">{{taskname}}#{{keyvalue}} - {{taskstatus}}</p>\n                    <p class="T-Heading">{{taskfromuser}}</p>                    \n\t\t    <div class="time">{{tasktime}}</div>\n                </li>',this.approve='<li class="approve">\n                   <p class="T-Desc">{{taskname}}#{{keyvalue}} - {{taskstatus}}</p>\n                    <p class="T-Heading">{{taskfromuser}}</p>                    \n\t\t    <div class="time">{{tasktime}}</div>\n                </li>'}return _createClass(e,[{key:"getTimeLineData",value:function(){ShowDimmer(!0);var e=this,t={keyValue:e.keyvalue,processName:e.processName};this.callAPI("../aspx/AxPEG.aspx/AxGetTimelineData",t,!0,function(t){if(t.success){var s=JSON.parse(t.response),a=e.dataConvert(s,"ARM");e.constructTimeline(a),ShowDimmer(!1)}else ShowDimmer(!1)})}},{key:"constructTimeline",value:function(e){var t=this;if(this.isUndefined(e)||0==e.length)document.querySelector(".Timel-sessions").classList.add("d-none"),document.querySelector("#nodata").classList.remove("d-none");else{document.querySelector("#nodata").classList.add("d-none"),document.querySelector(".Timel-sessions").classList.remove("d-none");var s="";document.querySelector(".Timel-sessions").innerHTML="",e.forEach(function(e){s+=Handlebars.compile(t[e.tasktype.toLowerCase()])(e)}),document.querySelector(".Timel-sessions").insertAdjacentHTML("beforeend",s)}}},{key:"callAPI",value:function(e,t,s,a){var r=this,o=new XMLHttpRequest;o.open("POST",e,s),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.isAxpertFlutter&&(o.setRequestHeader("Authorization","Bearer ".concat(armToken)),t.armSessionId=armSessionId),o.onreadystatechange=function(){4==this.readyState&&(200==this.status?a({success:!0,response:this.responseText}):(r.catchError(this.responseText),a({success:!1,response:this.responseText})))},o.send(JSON.stringify(t))}},{key:"catchError",value:function(e){showAlertDialog("error",e)}},{key:"showSuccess",value:function(e){showAlertDialog("success",e)}},{key:"dataConvert",value:function(e,t){if("AXPERT"==t)try{if("undefined"!=typeof(e=JSON.parse(e.d)).result[0].result.row)return e.result[0].result.row;if("undefined"!=typeof e.result[0].result)return e.result[0].result}catch(s){this.catchError(s.message)}else if("ARM"==t)try{if(this.isAxpertFlutter||(e=JSON.parse(e.d)),e.result&&e.result.success){if(!this.isUndefined(e.result.data))return e.result.data}else this.isUndefined(e.result.message)||this.catchError(e.result.message)}catch(s){this.catchError(s.message)}return e}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"isEmpty",value:function(e){return""==e}},{key:"isNull",value:function(e){return null==e}},{key:"isNullOrEmpty",value:function(e){return null==e||""==e}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"inValid",value:function(e){return null==e||void 0===e||""==e}}]),e}();$(document).ready(function(){ShowDimmer(!0),(axProcessObj=new AxProcessFlow).init();document.querySelector("#PROFLOW_Right").classList;var e=document.querySelector("#filter"),t=document.querySelector("#reset"),s=document.querySelector("#filterClose"),a=document.querySelector("#filterCloseAdvanced"),r=document.querySelector("#filterResetAdvanced"),o=document.querySelector("#filterSearchAdvanced");e.addEventListener("click",function(){var e=document.querySelector("#filterProcess");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}),t.addEventListener("click",function(){var e=document.querySelector("#filterProcess");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}),s.addEventListener("click",function(){var e=document.querySelector("#filterProcess");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}),o.addEventListener("click",function(){var e=document.querySelector("#filterProcessAdvanced");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}),r.addEventListener("click",function(){var e=document.querySelector("#filterProcessAdvanced");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}),a.addEventListener("click",function(){var e=document.querySelector("#filterProcessAdvanced");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")})});