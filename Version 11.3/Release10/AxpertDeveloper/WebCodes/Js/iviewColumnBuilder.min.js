/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _defineProperties(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,a){return n&&_defineProperties(e.prototype,n),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,t=new Array(n);a<n;a++)t[a]=e[a];return t}var ivColDesignJSON=[],dwbiName="",tableColumnWidth=0,visibleTableColumnWidth=0,minCellWidth=15,listViewCheckBoxSize=40,cbDataTableApi=null;function axDevIvDrawTable(e,n){dwbiName=n;var a=[];$.each(e,function(e,n){var t={};t.name=this.f_name,t.width=this.column_width,t.mergeid=this.mergeid&&"*"!=this.mergeid?this.mergeid:"",t.mergename=this.mergename&&"*"!=this.mergename?this.mergename:"",t.Savestr=this.f_name+"="+Math.ceil(this.column_width),a.push(t)}),ivColDesignJSON[dwbiName]=a,headerText=[""].concat(_toConsumableArray(e.map(function(e){return e.f_caption}))),fieldName=["rowno"].concat(_toConsumableArray(e.map(function(e){return e.f_name}))),colWidth=["10"].concat(_toConsumableArray(e.map(function(e){return e.column_width}))),hideColumn=[!0].concat(_toConsumableArray(e.map(function(e){return"T"==e.hidden||"F"!=e.hidden&&e.hidden}))),recordIds=["0"].concat(_toConsumableArray(e.map(function(e){return e.recordid}))),queryCol=[!0].concat(_toConsumableArray(e.map(function(e){return"*"==e.isquerycol||"f"!=e.isquerycol.toString().toLowerCase()&&e.isquerycol}))),hyperlinkid=["0"].concat(_toConsumableArray(e.map(function(e){return e.hyperrecid}))),cndformatid=["0"].concat(_toConsumableArray(e.map(function(e){return e.cformatrecid})));tableColumnWidth=0,visibleTableColumnWidth=0,tableColumnWidth+=null==findGetParameter("tstcaption")?minCellWidth:listViewCheckBoxSize,$("#GridView1Wrapper").hide(),$("#GridView2Wrapper").empty(),$("#GridView2Wrapper").show(),$("#GridView2Wrapper").append($('\n    <table class="gridData ivirMainGrid iviewBuilder stripe row-border hover order-column table dataTable" rules="all" border="1" id="GridView1Dnd" data-row>\n        <thead>\n            <tr>\n                <th id="GridView1Dnd_ctl01_rowno" data-column-name="rowno" style="width:'.concat(null==findGetParameter("tstcaption")?minCellWidth:listViewCheckBoxSize,'px;" scope="col"><input name="chkall" id="chkall" onclick="javascript:CheckAll();" style="height:12px;" type="checkbox"></th>\n                ').concat(headerText.map(function(e,n,a){if("rowno"!=fieldName[n]){var t=colWidth[n]||minCellWidth;return"false"==("undefined"!=typeof hideColumn[n]?hideColumn[n].toString():"true")&&(tableColumnWidth+=parseInt(t,10)),'\n                        <th id="GridView1Dnd_ctl01_'.concat(fieldName[n],'" scope="col" data-column-name="').concat(fieldName[n],'" style="width:').concat(t,'px;" class="').concat(hideColumn[n]?"hiddenColumnUI":"",'">\n                            <a href="javascript:void(0);" onclick="').concat(generateHyperlink(recordIds[n]),'">').concat(e.replace(/~/g,"<br />"),'</a>\n                            <div class="three-dot" role="button">\n                                <div class="btn-group colOptDropDown" data-toggle="popover">\n                                    <button type="button" class="btn btn-secondary">\n                                        <i class="fa fa-ellipsis-v"></i>\n                                    </button>\n                                    <div class="dropdown-menu columnPropOptions popover-content">\n                                        <a class="dropdown-item" href="javascript:void(0);" onclick="').concat(openHyperlinkPopUp(fieldName[n],hyperlinkid[n]),'"><span class="material-icons columnPropOptionsIcon">link</span>\n                                            <span class="columnPropOptionsText">Hyperlink</span>\n                                        </a>\n                                        <a class="dropdown-item" href="javascript:void(0);" onclick="').concat(openConditinalFomatPopUp(fieldName[n],cndformatid[n]),'"><span class="material-icons columnPropOptionsIcon">format_paint</span>\n                                            <span class="columnPropOptionsText">Conditional Format</span>\n                                        </a>\n                                        <a class="dropdown-item ddMergeColOpt" href="javascript:void(0);" onclick="generateColumnMerege(this)"><span class="material-icons columnPropOptionsIcon">merge_type</span><span class="columnPropOptionsText">Merge with prior</span></a>\n                                        ').concat(hideColumn[n]?"":'\n                                            <a class="dropdown-item hide" href="javascript:void(0);" onclick="$(\'#middle1\')[0].contentWindow.iviewTemplate(\''.concat(fieldName[n],'\');"><span class="material-icons columnPropOptionsIcon">code</span>   <span class="columnPropOptionsText">Template</span></a>\n                                            '),'\n                                        <a class="dropdown-item" href="javascript:void(0);" onclick="LoadIframeDwb(\'tstruct.aspx?act=open&transid=ad_ic&iName=').concat(dwbiName,'\');return false;"><span class="material-icons columnPropOptionsIcon">add_circle_outline</span>\n                                            <span class="columnPropOptionsText">Add Column</span>\n                                        </a>                                               \n                                        ').concat(queryCol[n]?"":'\n                                            <a class="dropdown-item" href="javascript:void(0);" onclick="delNonQueryElem('.concat(recordIds[n],",'ad_ic','").concat(dwbiName,'\');"><span class="material-icons columnPropOptionsIcon">remove_circle_outline</span>   <span class="columnPropOptionsText">Delete Column</span></a>\n                                            '),'\n                                         <a class="dropdown-item" href="javascript:void(0);" onclick="').concat(openRowOptionUIPopUp(fieldName[n]),'"><span class="material-icons columnPropOptionsIcon">toc</span>\n                                            <span class="columnPropOptionsText">Row Option UI</span>\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </th>')}}).join(""),"\n            </tr>\n        </thead>\n    </table>\n    ")).css({width:"".concat(tableColumnWidth,"px")}).removeAttr("cellspacing rules border style").addClass("ivirMainGrid stripe row-border hover order-column table")),axDevIvInitDatatable(headerText,fieldName,colWidth,hideColumn,recordIds,queryCol,hyperlinkid,cndformatid)}function axDevIvInitDatatable(e,n,a,t,i,r,o,l){$.fn.dataTableExt.ofnSearch["alt-status"]=function(e){},$.fn.dataTable.moment("DD/MM/YYYY"),$.fn.dataTable.ext.errMode="none",$.fn.dataTable.Api.register("order.neutral()",function(){return this.iterator("table",function(e){e.aaSorting.length=0,e.aiDisplay.sort(function(e,n){return e-n}),e.aiDisplayMaster.sort(function(e,n){return e-n})})});var c=new DataTableObj(e,n,a,t,i,r,o,l);cbDataTableApi=$(".ivirMainGrid.iviewBuilder").DataTable(c),initColumnMerge(),$(".ivirMainGrid.iviewBuilder").on("column-resize.dt.mouseup",function(e,n){saveIvColDesign()}).on("column-reorder.dt.mouseup",function(e,n){saveIvColDesign()})}var DataTableObj=_createClass(function e(n,a,t,i,r,o,l,c){_classCallCheck(this,e);var s,d="false";(s=a.indexOf("rowno"))>=0&&(d=("false"==i[s].toString()).toString());var m=[0];tableColumnWidth=0,visibleTableColumnWidth=0;var p=0;try{p=$("#GridView1Dnd thead tr th:eq(0)").outerWidth()-$("#GridView1Dnd thead tr th:eq(0)").width()||0}catch(u){p=0}tableColumnWidth+=null==findGetParameter("tstcaption")?minCellWidth:listViewCheckBoxSize,this.columns=a.map(function(e,n){var a=t[n]||minCellWidth;return-1==m.indexOf(n)&&(visibleTableColumnWidth+=parseInt(a,10)+p),tableColumnWidth+=parseInt(a,10)+p,$("#GridView1Dnd").css({width:"".concat(visibleTableColumnWidth||tableColumnWidth,"px")}).parent().css({width:"".concat(visibleTableColumnWidth||tableColumnWidth,"px")}),{data:e,name:e,width:"".concat(t[n],"px")}}),this.data=[[a.reduce(function(e,n){return e[n]="",e},{})],[a.reduce(function(e,n){return e[n]="",e},{})],[a.reduce(function(e,n){return e[n]="",e},{})]],this.scrollX=!0,this.dom="t",this.colReorder={resizeCallback:function(){}},this.ordering=!1,this.lengthChange=!1,this.autoWidth=!1,this.fixedHeader=!1,this.initComplete=function(e,n){$(".gridData").css({width:"".concat(visibleTableColumnWidth,"px")}),$("#GridView1Dnd_wrapper").parent().css({width:""}),$(".dataTables_scrollBody table").on("scroll",function(){$(".dataTables_scrollHeadInner table").scrollLeft($(this).scrollLeft())}),$(".dataTables_scrollBody").closest(".dataTables_scroll").width($(".dataTables_scrollBody").closest(".dataTables_scroll").find(".dataTables_scrollHead table thead").width()),$(".dataTables_scrollBody").closest(".dataTables_scroll").find(".dataTables_scrollHead table thead th:eq(0)").css("cursor","col-resize")},this.columnDefs="true"==d?[{targets:0,orderable:!1}]:[],this.columnDefs.push({targets:m,visible:!1,searchable:!1}),this.columnDefs.push({targets:0,searchable:!1})});function generateHyperlink(e){return""!=e?"LoadIframeDwb('tstruct.aspx?transid=ad_ic&amp;recordid=".concat(e,"');"):""}function openHyperlinkPopUp(e,n){return 0==n?"createPopupdesign('tstruct.aspx?act=open&amp;transid=ad_ih&amp;hypsource=".concat(e,"&amp;iName=").concat(dwbiName,"&amp;AxPop=true');return false;"):"createPopupdesign('tstruct.aspx?act=load&amp;transid=ad_ih&amp;recordid=".concat(n,"&amp;AxPop=true');return false;")}function openRowOptionUIPopUp(e){var n="";if(""!=dwbIvDefName&&dwbIvDefName.indexOf("(")>-1&&dwbIvDefName.indexOf(")")>-1)n=dwbIvDefName;else{var a=$(".developerbreadcrumbTitle").text(),t=a.indexOf("-");n=-1!==t?a.substring(t+1):a}return n=(n=n.replace("(","-(")).trimStart(),"createPopupdesign('tstruct.aspx?act=load&amp;transid=ad_rc&amp;names=".concat(n,"&amp;elements=").concat(e,"&amp;AxPop=true');return false;")}function saveIvColDesign(){var e=[];$.each($(".dataTables_scrollHead .ivirMainGrid.iviewBuilder thead tr:not(.col-merge) th"),function(n,a){var t,i,r,o,l={};l.name=$(this).data("column-name"),l.width=$(this).width(),l.mergeid=((null===(t=ivColDesignJSON[dwbiName])||void 0===t?void 0:null===(i=t[n])||void 0===i?void 0:i.mergeid)||"").trim(),l.mergename=((null===(r=ivColDesignJSON[dwbiName])||void 0===r?void 0:null===(o=r[n])||void 0===o?void 0:o.mergename)||"").trim(),l.Savestr=$(this).data("column-name")+"="+Math.ceil($(this).width()),e.push(l)}),e.map(function(e,n,a){return 1==a.filter(function(n){return n.mergeid==e.mergeid}).length&&(e.mergeid="",e.mergename=""),e}),ivColDesignJSON[dwbiName]=e}function openConditinalFomatPopUp(e,n){return 0==n?"createPopupdesign('tstruct.aspx?act=open&amp;transid=ad_if&amp;name=".concat(e,"&amp;iName=").concat(dwbiName,"&amp;AxPop=true');return false;"):"createPopupdesign('tstruct.aspx?act=load&amp;transid=ad_if&amp;recordid=".concat(n,"&amp;AxPop=true');return false;")}function generateColumnMerege(e){var n=ivColDesignJSON[dwbiName].findIndex(function(n){var a,t,i,r,o;return n.name==(null===(a=$(e))||void 0===a?void 0:null===(t=a.parents(".columnDropdonwMenuPopover"))||void 0===t?void 0:null===(i=t.data("bs.popover"))||void 0===i?void 0:null===(r=i.$element)||void 0===r?void 0:null===(o=r.parents("th"))||void 0===o?void 0:o.data("columnName"))});"1"!=($(".dataTables_scrollHead .ivirMainGrid.iviewBuilder thead tr.col-merge th:eq(".concat(getMergeColumnIndex(n),")")).attr("colspan")||"1")&&getNormalColumnIndex(getMergeColumnIndex(n))!=n||updateColumnMerge(n)}function getMergeColumnIndex(e){var n=[];return $(".dataTables_scrollHead .ivirMainGrid.iviewBuilder thead tr:not(.col-merge) th").toArray().reduce(function(a,t,i,r){return i<e?(n.push(i),n.length==parseInt($(".dataTables_scrollHead .ivirMainGrid.iviewBuilder thead tr.col-merge th:eq(".concat(a,")")).attr("colspan")||1)&&(n=[]),a+1-(n.length>0?1:0)):a},0)}function getNormalColumnIndex(e){return $(".dataTables_scrollHead .ivirMainGrid.iviewBuilder thead tr.col-merge th:lt(".concat(e,")")).toArray().reduce(function(e,n,a,t){return e+parseInt($(n).attr("colspan")||1)},0)}function mergeColumnsExist(){return(ivColDesignJSON[dwbiName]||[]).filter(function(e){return e.mergeid}).length>0}function getMergeColumnColspan(e){return(ivColDesignJSON[dwbiName]||[]).filter(function(n){return n.mergeid==e}).length||1}function generateMergeColumnHTML(e,n,a){return'\n    <th align="center" colspan="'.concat(e,'" rowspan="1" class="pivotHeaderStyle dt-center" ').concat(a.mergeid?'data-mergeid="'.concat(a.mergeid,'"'):"",' data-title="').concat(n,'">\n        ').concat(n.replace(/~/g,"<br />")||"&nbsp;","\n        ").concat(a.mergeid?'\n        <div class="three-dot" role="button">\n            <div class="btn-group colOptDropDown" data-toggle="popover">\n                <button type="button" class="btn btn-secondary">\n                    <i class="fa fa-ellipsis-v"></i>\n                </button>\n                <div class="dropdown-menu columnPropOptions popover-content">\n                    <a class="dropdown-item" href="javascript:void(0);" onclick="setMergeCaption(this, '.concat(a.mergeid-1,')"><span class="material-icons columnPropOptionsIcon">mode_comment</span>\n                        <span class="columnPropOptionsText">Merge Caption</span>\n                    </a>\n                    <a class="dropdown-item" href="javascript:void(0);" onclick="removeMerge(this, ').concat(a.mergeid-1,')"><span class="material-icons columnPropOptionsIcon">remove_circle_outline</span>\n                        <span class="columnPropOptionsText">Remove Merge</span>\n                    </a>\n                    <a class="dropdown-item" href="javascript:void(0);" onclick="removeAllMerge(this)"><span class="material-icons columnPropOptionsIcon">highlight_off</span>\n                        <span class="columnPropOptionsText">Remove All Merge</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n        '):"","\n    </th>")}function createMergeHeaders(){var e="";if(mergeColumnsExist()){var n=[];e='<tr role="row"  class="col-merge">'+(ivColDesignJSON[dwbiName]||[]).map(function(e,a){return""==e.mergeid||-1==n.indexOf(e.mergeid)?(n.push(e.mergeid),generateMergeColumnHTML(""==e.mergeid?"1":getMergeColumnColspan(e.mergeid),e.mergename,e)):""}).join("")+"</tr>",cbDataTableApi.colReorder.disableReorder()}else cbDataTableApi.colReorder.enableReorder();return e}function initColumnMerge(){$(".dataTables_scrollHead table.iviewBuilder thead tr.col-merge").remove(),$(".dataTables_scrollHead table.iviewBuilder thead").prepend(createMergeHeaders())}function setMergeCaption(e,n){var a,t,i='\n    <div class="mergeCaptionWrapper">\n        <div class="mergeCaptionBody">\n            <div>\n                <div class="mergeCapInput"> <input type="text" class="form-control" value="'.concat((null===(a=ivColDesignJSON[dwbiName])||void 0===a?void 0:null===(t=a[n])||void 0===t?void 0:t.mergename)||"",'" /> </div>\n            </div>\n        </div>      \n        <div class="clearfix"></div>\n        <div class="mergeCaptionFooter">\n            <div class="pull-right">\n                <input type="button" name="btnFilter" value="Ok" onclick="updateColumnMerge(').concat(n,')" id="btnFilter" title="Ok" class="hotbtn btn handCursor allow-enter-key" />\n            </div>\n            <div class="clearfix"></div>\n        </div>\n    </div> ');displayBootstrapModalDialog("Merge Column Caption","md","auto",!1,i,"",function(){$(".mergeCapInput input").focus()})}function removeMerge(e,n){ivColDesignJSON[dwbiName].map(function(e){var a=(n+1).toString();return e.mergeid==a&&(e.mergeid="",e.mergename=""),e}),initColumnMerge()}function removeAllMerge(e){ivColDesignJSON[dwbiName].map(function(e){return e.mergeid="",e.mergename="",e}),initColumnMerge()}function updateColumnMerge(e){var n="";if($(".mergeCapInput:visible").length>0)n=$(".mergeCapInput input").val()||"",ivColDesignJSON[dwbiName].map(function(a){var t=(e+1).toString();return a.mergeid==t&&(a.mergeid=t,a.mergename=n),a}),closeModalDialog();else{var a,t;if(a=ivColDesignJSON[dwbiName][e].mergename,t=ivColDesignJSON[dwbiName][e-1].mergename,n=a||t||"",ivColDesignJSON[dwbiName][e-1].mergeid=ivColDesignJSON[dwbiName][e-1].mergeid||e.toString(),ivColDesignJSON[dwbiName][e].mergeid){var i=ivColDesignJSON[dwbiName][e].mergeid;ivColDesignJSON[dwbiName].map(function(n){return n.mergeid==i&&(n.mergeid=ivColDesignJSON[dwbiName][e-1].mergeid),n})}else ivColDesignJSON[dwbiName][e].mergeid=ivColDesignJSON[dwbiName][e-1].mergeid;ivColDesignJSON[dwbiName].map(function(a){var t=(getNormalColumnIndex(getMergeColumnIndex(e-1))+1).toString();return a.mergeid==t&&(a.mergeid=t,a.mergename=n),a})}initColumnMerge()}