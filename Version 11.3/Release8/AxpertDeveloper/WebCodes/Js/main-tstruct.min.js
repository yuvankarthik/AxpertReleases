/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _createForOfIteratorHelper(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,n=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){n=!0,l=e},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(n)throw l}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var isMozilla,objDiv=null,originalDivHTML="",DivID="",over=!1,addHeader="",fillGridDatatbl="",shouldFaceUser=!1,flipCamera=!1,gridDummyRows=!1,gridDummyRowVal=new Array,AxpGridForm="popup",fldmultiSelectdep=!1,dcLayoutType="default",isDcLayoutSelected=!1,formLabelJSON=[],buttonFieldFontJSON=[],saveValueFlag="F",sql_editor_test="",sql_editor_depflds="",dynamicMobileResolution=function(){$(".grid-stack").hasClass("dynamicRunMode")&&((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=renderGridOptions.minWidth?$(".grid-stack").addClass("grid-stack-one-column-mode"):0==$(".tileLayoutDiv").length&&$(".grid-stack").removeClass("grid-stack-one-column-mode"))};function hideacoptions(){"undefined"!=typeof axpShowKeyboard&&"false"==axpShowKeyboard&&isMobile?($(".autoClickddl").parent(".edit").hide(),$(".autoinputtxtclear").hide(),$(".virtualKeyboard").hide()):"undefined"!=typeof axpShowKeyboard&&"true"==axpShowKeyboard&&isMobile&&($(".autoClickddl").parent(".edit").removeAttr("style"),$(".autoinputtxtclear").removeAttr("style"),$(".virtualKeyboard").removeAttr("style"))}function getLocation(){var e={};if(findGetParameter("recordid")>0)e.latitude=$("#latitude000F"+GetDcNo("latitude")).val()||0,e.longitude=$("#longitude000F"+GetDcNo("longitude")).val()||0;else try{var t=callParentNew("ok");t&&(e=JSON.parse(t.getAndroidLocation()))}catch(i){}($.isEmptyObject(e)||0==e.latitude||0==e.longitude)&&navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):showPosition({coords:{latitude:e.latitude,longitude:e.longitude}})}function showPosition(e){var t="",i="";if(e&&e.coords&&0!=e.coords.latitude&&0!=e.coords.latitude&&!IsGridField("latitude")&&!IsGridField("longitude")){var a=GetDcNo("latitude"),r=GetDcNo("longitude");t="latitude000F"+a,i="longitude000F"+r,""==$("#"+t).val()&&($("#"+t).val(e.coords.latitude),UpdateFieldArray(t,"000",$("#"+t).val(),"parent")),""==$("#"+i).val()&&($("#"+i).val(e.coords.longitude),UpdateFieldArray(i,"000",$("#"+i).val(),"parent"));var l={css:[],js:["https://maps.googleapis.com/maps/api/js?key=".concat(callParentNew("googleMapsApiKey"))]};-1!=$.inArray("latlongmap",FNames)&&loadAndCall({files:l,callBack:function(){var e=GetDcNo("latlongmap"),a=$("#"+("latlongmap000F"+e)),r=center={lat:parseFloat($("#"+t).val()),lng:parseFloat($("#"+i).val())};(new google.maps.Geocoder).geocode({location:r},function(e,t){if("OK"===t&&e[0]&&(a.val(e[0].formatted_address).trigger("blur"),a.is("textarea"))){var i=new google.maps.Map(a.hide().before('<div class="'.concat(a.attr("class"),' style="').concat(a.attr("style"),'"></div>')).prev()[0],{zoom:8,center:center}),l=new google.maps.InfoWindow;i.setZoom(11);var o=new google.maps.Marker({position:r,map:i});l.setContent(e[0].formatted_address),l.open(i,o)}})}})}}function AxpFileFields(){"undefined"!=typeof AxpFileUploadFields&&AxpFileUploadFields.length>0?callParentNew("tstAxpFileFlds=",!0):callParentNew("tstAxpFileFlds=",!1)}function SetFieldSetCarryValue(){"0"!=recordid||"Save"!=AxActiveAction&&"New"!=AxActiveAction||("undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var i=e+"000F"+t;$.each(SetCarryFlds,function(e,a){if(a.split("♠")[0]==i){SetFieldValue(i,a.split("♠")[1]);var r=GetFieldsRowNo(i),l=GetDbRowNo(r,t);UpdateFieldArray(i,l,a.split("♠")[1],"parent","AutoComplete")}})}}),SetCarryFlds=new Array)}function GetFldSetCarryValue(){try{SetCarryFlds.length>0&&(SetCarryFlds=new Array),"undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var i=e+"000F"+t;SetCarryFlds.push(i+"♠"+$("#"+i).val())}})}catch(e){}}function OnMobileNewTst(){$("#wizardTstructWrapper wizardWrapper").remove(),$.each(DCIsGrid,function(e,t){"True"===t&&$("#wrapperForEditFields"+(e+1)+" .btnMobile").remove()})}function checkIfFormChanges(){return $(".grid-stack ").hasClass("dirty")?isFormChange=!0:isFormChange=!1,isFormChange}function SetAutoCompAccess(e,t){try{t==undefined?$j("input.fldAutocomplete:disabled").parent().find("i").css("display","none"):"enabled"==e?t.parent().find("i").css("display","inline-block"):t.parent().find("i").css("display","none")}catch(i){console.log("SetAutoCompAccess-action"+e+"-msg"+i.message)}}function makeFieldInitCap(e){var t=GetFldNamesIndx("axp_initcap"),i="";if(-1!=t&&(GetExpressionType("axp_initcap",t),i=Expressions[t].toString()),""!=i){i=i.split(",");for(var a=0;a<i.length;a++)e?$("#DivFrame"+e).find('input[id*="'+i[a]+'"]').length>0&&$("#DivFrame"+e).find('input[id*="'+i[a]+'"]').addClass("initCapField"):$("input[id^='"+i[a]+"']").length>0&&$("input[id^='"+i[a]+"']").addClass("initCapField")}}function BeforeWindowClose(){draftTimer&&window.clearInterval(draftTimer),window.parent.globalChange&&SetFormDirty(!1),window.opener&&!window.opener.closed&&window.opener.parent.tstructPop&&""!=AxActiveAction&&(window.opener.parent.tstructPop=!1,ReloadListView(window.opener.parent.listViewPage));var e=$j("#recordid000F0").val();if("0"!=e&&0==AxIsTstructLocked&&callParentNew("isLockOnRead"))try{ASB.WebService.UnlockTStructRecord(tst,e,!1)}catch(a){}if(1==axpRefreshParent&&(window.opener.document.title="Iview")){var t=window.opener.document.getElementById("hdnparamValues").value,i="ivtoivload.aspx?ivname="+window.opener.iName;i=i+"&"+t.replace(/¿/g,"&").replace(/~/g,"=")+"&axp_refresh=true",window.opener.document.getElementById("hdnIvRefresh").value="true",window.opener.document.location.href=i,navigator.userAgent.toUpperCase().indexOf("CHROME")>-1&&window.opener.document.getElementById("button1").click()}callParentNew("removeOverlayFromBody()","function")}function CheckCustomTStSave(){var e=$j("#axp_savedirective000F1"),t="",i="",a="";(t=e.val())!=undefined&&(t.indexOf("$")>-1&&(t=GetPopUpVal(t)),t.indexOf("~")>-1?(a=t.split("~"))[1]!=undefined&&(i=a[1].split("*"),a[0]!=undefined&&""!=a[0]&&(a.indexOf("iview")>-1?(axCustomTstAction="ivtoivload.aspx?ivname="+i[0],i[1]!=undefined&&""!=i[1]&&(axCustomTstAction+="&"+i[1])):a.indexOf("tstruct")>-1&&(axCustomTstAction="tstruct.aspx?transid="+i[0],i[1]!=undefined&&""!=i[1]&&(axCustomTstAction+="&"+i[1])))):axCustomTstAction=e.val())}function GetPopUpVal(e){var t=e.indexOf("$"),i=e.indexOf("*");return AxPopup=i>-1?e.substring(t+1,i):e.substring(t+1),e=e.replace("$"+AxPopup,"")}function LoadEvents(dvId){$('[data-toggle="tooltip"]').tooltip(),CKEDITOR.on("instanceReady",function(e){e.editor.on("change",function(){currentCK=this.name}),isReadyCK=!0}),createEditors();var autoDiv=dvId==undefined?"#divDc1":dvId;createAutoComplete(autoDiv+" .fldAutocomplete"),$j(autoDiv).find(".fldAutocomplete").autocomplete();var jsonData=JSON.parse('{"data":[]}');$(".dropdown-mul").dropdown({data:jsonData.data,multipleMode:"label",choice:function(){MultiGroupSelectChoice(this)}}),"0"!=recordid&&multiSelectLoadVals.length>0&&$.each(multiSelectLoadVals,function(e,t){var i=t.split("♦")[0],a=t.split("♦")[1];$("#"+i).attr("data-selected",a);var r=$("#"+i).attr("data-sep");$.each(a.split(r),function(e,t){$("#"+i).next(".dropdown-display-label").find(".dropdown-chose-list").prepend('<span class="dropdown-selected">'+t+'<i class="del" data-id="'+t+'"></i></span>')})}),createCheckListTokens(dvId),$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp)").focus(function(){MainFocus($j(this))});var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="dd/mm/yy";"en-us"==glCulture&&(dtFormat="mm/dd/yy"),$j(".date").datepicker({isRTL:dtpkrRTL,dateFormat:dtFormat,changeMonth:!0,changeYear:!0,yearRange:"-100:+100",beforeShow:function(e,t){}}),$(document).off("mousedown.designer").on("mousedown.designer",".tstructDesignMode .grid-stack-item, .tstructDesignMode .ui-resizable",function(){setSelectedDesignElement(this)}),$(document).off("dragstop.designer").on("dragstop.designer",".tstructDesignMode.grid-stack",function(e,t){selectedDesignObject.elem=e.target}),$(document).off("change.designer").on("change.designer",".tstructDesignMode.grid-stack",function(e,t){setSelectedDesignElement(selectedDesignObject.elem)}),$(document).off("dragstart.designer resizestart.designer").on("dragstart.designer resizestart.designer",".tstructDesignMode.grid-stack",function(e,t){$(this).addClass("dirty"),changeStatus("notSaved")}),$(document).off("gsresizestop.designer").on("gsresizestop.designer",".tstructDesignMode.grid-stack",function(e,t){var i=$(t).attr("data-gs-height"),a=gsiPixels(i);gsiHeight={height:a.toString()+"px"},"undefined"!=typeof CKEDITOR.instances[$(t).find("textarea").attr("id")]&&CKEDITOR.instances[$(t).find("textarea").attr("id")].resize("100%",a)}),TimePickerEvent(dvId,dtpkrRTL),$j("textarea:not(#comment):not(.labelInp),[id]:text:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),[id][type=number]:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),:password").blur(function(e){"design"!=theMode&&MainBlur($j(this))}),$j(document).mousedown(function(e){""!=e.target.id?(blurNextPreventElement=new Object,blurNextPreventId=e.target.id):(blurNextPreventId="",blurNextPreventElement=e.target)}),$j("select:not(#ddlSearch,#selectbox):not(#designLayoutSelector)").change(function(){if(-1==$j(this).find(":selected").text().indexOf("+ Add"))MainBlur($j(this)),$j(this).blur(),$j(this).focus();else if(null!=$j(this).val()||$j(this).val()!=undefined){var ddlrefval=$j(this).val();$j(this).val(""),eval(ddlrefval)}}),$j(":checkbox:not([class=chkAllList]):not(.tokenSelectAll):not(#ckbCompressedMode):not(#ckbStaticRunMode):not(#ckbWizardDC):not('[id^=ckbGridStretch]'),:radio").not(".chkShwSel").change(function(){MainBlur($j(this))}),$j("textarea:not(.labelInp)").keydown(function(e){LimitText($j(this))}),$j("textarea:not(.labelInp)").keyup(function(){LimitText($j(this))}),$j(".number").keypress(function(e){return CheckNumeric(e,$j(this).val())}),$j(".pickimg").click(function(){DisplayPickList($j(this))}),$j(".picklisttxtclear").hover(function(e){1==$j(this).parent(".picklist").find("input").prop("disabled")&&$j(this).css("cursor","no-drop")}),$j(".picklisttxtclear").click(function(e){1!=$j(this).parent(".picklist").find("input:visible").prop("disabled")&&1!=$j(this).parent(".picklist").find("input:visible").prop("readonly")&&""!=$j(this).parent(".picklist").find("input:visible").val()&&($j(this).parent(".picklist").find("input:visible").val(""),MainFocus($j(this).parent(".picklist").find("input:visible")),$j(this).parent(".picklist").find("input:visible").trigger("blur"))}),$j(".autoinputtxtclear").click(function(e){var t=$j(this).parent(".autoinput-parent").find(".fldAutocomplete");if(1!=t.prop("disabled")&&1!=t.prop("readonly")&&""!=t.val()){MainFocus(t),t.val("");var i=t.attr("id"),a=i.substring(0,i.lastIndexOf("F")-3);AutoFillFlds[a]==undefined?$(t).addClass("blurme").autocomplete("search",""):t.trigger("blur")}}),$j(".inputClass2").keydown(function(e){13==e.keyCode&&1==pickStatus&&DisplayPickList($j(this)),pickStatus=!0}),$j("#searchoverrelay").unbind("keypress").keypress(function(e){if(13==e.keyCode&&!valid_submit())return!1}),$j(".axpImg").click(function(){if("Cancelled"!=tstructCancelled){var e=$j(this)[0].id;null==document.getElementById(e).onclick&&UploadImg(e)}}),$(".axpBtn").off("click.axpBtn").on("click.axpBtn",function(){var e=$j(this);if(e.length>0){var t=GetFieldsRowNo(e[0].id),i=GetFieldsDcNo(e[0].id);RegisterActiveRow(t,i),CallAction(e[0].id)}}),$j(".rowdelete").click(function(){DeleteCurrentRow($j(this))}),$j(".subGrid").click(function(){ShowPopUp($j(this))}),$j("#taskListPopUp").hide(),$j(".AxAddRows").blur(function(){if(!this.value||isNaN(this.value))return this.value="1"}),$j(".achklist").click(function(){$j(this).parent().next(".chkListBdr").toggle()}),$j(".spandate").click(function(){$j(this).prev().focus()}),$j(".spanTime").click(function(){$j(this).prev().find("input").focus()}),$(document).on("keypress",dvId+" .form-group span.fa-paperclip",function(e){"13"==e.which&&$(this).click()}),$j(".rowdelete img").hover(function(){$j(this).attr("src","../axpimages/icons/16x16/delete.png")},function(){$j(this).attr("src","../axpimages/icons/16x16/delete-fade.png")}),1==parent.MainNewEdit&&$j("html").addClass("makeFullHeight");try{$j("#middle1",parent.document).attr("src")!=undefined&&-1!==$j("#middle1",parent.document).attr("src").indexOf("ParamsTstruct.aspx")||$j(document).off("keydown").on("keydown",function(e){if(13==e.which&&$j("#dvPickList").is(":visible")&&$j("#tblPickData tr.active").length>0)if(initialSrchVal==$j("#"+$j("#tblPickData").attr("data-pick")).val()){e.stopPropagation();var t=$j("#tblPickData tr.active td").attr("onclick");SetPickVal(t=t.substring(23,t.length-2)),pickStatus=!1,selectedRow=0,e.which=-1,initialSrchVal=""}else DisplayPickList($j("#"+$j("#tblPickData").attr("data-pick")));return 40==e.which&&$j("#dvPickList").is(":visible")&&$j("#tblPickData tr.active").length>0?(e.preventDefault(),e.stopPropagation(),pickDownn(),($("#dvPickHead .active").offset().top-$("#dvPickHead").offset().top+$("#dvPickHead .active").outerHeight()>=$("#dvPickHead").height()||$("#dvPickHead .active").offset().top-$("#dvPickHead").offset().top<0)&&$("#dvPickHead").animate({scrollTop:$("#dvPickHead .active").offset().top-$("#dvPickHead").offset().top+$("#dvPickHead .active").height()},100),!1):38==e.which&&$j("#dvPickList").is(":visible")&&$j("#tblPickData tr.active").length>0?(e.preventDefault(),e.stopPropagation(),pickUpp(),$("#dvPickHead").animate({scrollTop:$("#dvPickHead .active").offset().top-$("#dvPickHead").offset().top-$("#dvPickHead .active").height()},100),!1):void 0}),$j("#popupIframeRemodal",parent.document).attr("src")!=undefined&&$j(document).keyup(function(e){27===e.keyCode&&(IsFormDirty&&0===$("#bootstrapModal").length?$.confirm({closeIcon:!1,title:eval(callParent("lcm[155]")),content:eval(callParent("lcm[121]")),escapeKey:"buttonB",onContentReady:function(){disableBackDrop("bind")},buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"hotbtn",action:function(){$j(".remodal-close",parent.document).click()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"coldbtn",action:function(){return disableBackDrop("destroy"),!0}}}}):1===$("#bootstrapModal").length||$j(".remodal-close",parent.document).click())})}catch(ex){console.log(ex.message)}$==undefined&&($=$j),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$j("input.number").on("input",function(){var e=$j(this).val(),t=$j(this).attr("id");if(t!=undefined){var i=GetFieldsName(t),a=$j.inArray(i,FNames);if(a!=undefined&&a>-1){var r=FMaxLength[a],l=FDecimal[a];if("Numeric"==FDataType[a]&&l!=undefined&&l>0){var o=r-l-1;if(-1==e.indexOf("."))e.length>o&&$j(this).val(e.slice(0,o));else if(-1!=e.indexOf(".")){var n=e.substring(0,e.indexOf(".")),d=e.substring(e.indexOf(".")+1,e.length);n.length>o&&(n=n.slice(0,o)),d.length>l&&(d=d.slice(0,l)),$j(this).val(n+"."+d)}}}}}),$j(".workflowOptions").click(function(){$(".wfselectbox").hasClass("hide")?$(".wfselectbox").removeClass("hide").css({left:"".concat(($(this).parent().prev().position().left||0)+10,"px")}):$(".wfselectbox").addClass("hide")})}function createCheckListTokens(e){$((e?"#"+e:"")+" .multiFldChk.form-control").each(function(){var e=$(this).data("valuelist"),t="object"==_typeof(e)?e:_toConsumableArray(new Set($(this).data("valuelist").split($(this).data("separator"))));$(this).tokenfield({autocomplete:{source:t,delay:100,minLength:0,appendTo:".dvheightframe",create:function(e,t){var i="";"design"==theMode?($(this).prevAll(".multiFldChk").parent().css({height:"calc(100% - 2px)",width:""}),$(this).closest(".autoinput-parent").css("height","calc(100% - 5px)")):(i=$(this).prevAll(".multiFldChk").outerHeight(),$(this).prevAll(".multiFldChk").parent().css({"max-height":i+"px","overflow-x":"auto",width:""})),$(this).data().uiAutocomplete.classesElementLookup["ui-autocomplete"].data("hiddenAutoComp",this.id.replace("-tokenfield",""))},open:function(e,t){var i=$(this).data("ui-autocomplete").menu.element.attr("id"),a=$("#"+i),r=$(".dvheightframe"),l=$("#"+i).offset().left+"px",o=$("#"+i)[0].offsetTop+$("#"+i)[0].offsetHeight+$(".dvheightframe")[0].offsetTop-$(".dvheightframe")[0].scrollTop+"px",n=$("#"+i)[0].offsetWidth+"px";$("#"+i).append("<li class='autoComFooter checklistfooter' style='float: left;z-index:9999999;width:"+n+" ;margin-top:1px solid;top: "+o+";left:"+l+";border-top: 1px solid #ccc;background: #f5f5f5; padding-left: 5px;';><input type='checkbox'  class='tokenSelectAll' onclick='checkAllCheckBoxTokens(this)'>Select All</input></li>");var d=a.offset().top+a.outerHeight(),s=$(".dvheightframe").outerHeight();d>s&&r.scrollTop(r.scrollTop()+(d-s))},search:function(e,t){var i=$(this).prevAll("input")[1],a=[],r=[];if("object"==_typeof($(i).data("valuelist"))){var l,o=_createForOfIteratorHelper($(i).data("valuelist"));try{for(o.s();!(l=o.n()).done;){var n=l.value;a.push(n.value)}}catch(p){o.e(p)}finally{o.f()}a=[a]}else a.push($(i).data("valuelist").split($(i).data("separator")));if($(".token-label").length>0){var d,s=_createForOfIteratorHelper($(".token-label"));try{for(s.s();!(d=s.n()).done;){var c=d.value;r.push(c.innerHTML)}}catch(p){s.e(p)}finally{s.f()}}r=r.filter(function(e){return!a[0].includes(e)||a[0].splice(a[0].indexOf(e),1)&&!1}),$(this).autocomplete("option","source",a[0])}},delimiter:$(this).data("separator"),beautify:!1,allowEditing:!1}).on("tokenfield:createtoken",function(e){var t=e.attrs.value,i=$(this).data("valuelist"),a="string"==typeof i?i.split($(this).data("separator")).indexOf(t)>-1:i.filter(function(t){return e.attrs.value==t.value&&e.attrs.label==t.label}).length;($(this).tokenfield("getTokens").filter(function(t){return t.value==e.attrs.value}).length>0||!a)&&($(this).nextAll("input:last").val(""),e.preventDefault())}).on("tokenfield:removedtoken",function(e){$(".selector").autocomplete("close"),$(this).parents(".input-group").find(".input-group-addon input.tokenSelectAll").prop("checked",!1)})})}function checkAllCheckBoxTokens(e){var t=$("#"+$(e).parents("ul").data("hiddenAutoComp")),i=$(e).parents(".input-group").find(".tokenfield input.multiFldChk");if(t==i)var a=i;else a=t;if($(e).is(":checked")){var r=a.data("valuelist");a.tokenfield("setTokens","string"==typeof r?r.split(a.data("separator")):r)}else a.val(""),a.tokenfield("setTokens",[]);try{i.data("bs.tokenfield").$input.trigger("blur")}catch(l){}}function ShowPopUp(e){var t=e.attr("id"),i=e.parent().find("input");0==i.length&&(i=e.parent().find("select")),OpenPopUp(i.attr("id"),t)}function FocusOnFirstField(e){if("form"==e)for(var t=$j('[id*="divDc"]'),i=0;i<t.length;i++)if($j(t[i]).is(":visible")){e=t[i].id.substring(t[i].id.indexOf("divDc")+5);break}var a="";if(a=IsDcGrid(e)?"#wrapperForEditFields"+e:"#divDc"+e,$j(a).length>0){try{-1!=$j.inArray("1",TabDCs)||isMobile?isMobile&&$("#wizardBodyContent").length&&$("#wizardBodyContent").scrollTop(0):$j(a).focus()}catch(l){}var r=getFirstFocusElement(a);if(r!=undefined&&r.length>0&&!isMobile)return r.focus(),r;if(isMobile&&$("#wizardBodyContent").length)$("#wizardBodyContent").scrollTop(0);else if(isMobile)return r.focus(),r}}function DisplaySearchDlg(){$j(window).keydown(function(e){OpenSearchPop(e)}),window.parent&&$j(window.parent).keydown(function(e){OpenSearchPop(e)})}function LockTstruct(){Readonlyform(),$j("#icons").find("*").attr("disabled",!0),$j("#icons").find("*").prop("disabled",!0),$j(".search").length>0&&$j(".search").removeProp("disabled"),$j(".add").length>0&&$j(".add").find("*").removeProp("disabled"),$j(".pdf").length>0&&$j(".pdf").find("*").removeProp("disabled"),$j(".listview").length>0&&$j(".listview").find("*").removeProp("disabled")}function loadingNew(){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler)}function EndRequestHandler(e,t){if(t.get_error()==undefined){if($j("#goval").length>0){var i=$j("#goval");"go"==i.val()&&(FillDiv("Show"),$j("#searstr").val(DecodeUrlSplChars($j("#hdnSearchStr").val())),i.val("d"))}ShowDimmer(!1);var a=$j("#hdnHtml"),r=$j("#hdnFilename");"Save"==a.val()&&(showAlertDialog("success",2028,"client",r.val()),a.val(""))}else showAlertDialog("error",2029,"client",t.get_error().message)}function displaysearchDiv(e,t){$j("#"+e).show(),$j("#"+e).addClass("Pagebody Bordercolor"),$j("#searchoverrelay").css("display","block"),Resizewindow()}function FillDiv(e){"Show"==e?$j("#srchcontent").show():$j("#srchcontent").hide(),Resizewindow()}function Pagination(){$j("#goval").val("go"),ShowDimmer(!0)}function Closediv(){$j("#Panel1").hide(),$j("#srchcontent").hide(),$j("#searchoverrelay").css("display","none")}function hiddenFloatingDiv(e){document.getElementById(e).style.display="none",document.getElementById("dimmer").style.display="none",DivID="",Resizewindow()}function Resizewindow(){document.getElementById("closeimg")}function togglesrchselect(){var e=!1;e=!!document.getElementById("searchall").checked;for(var t=0;t<document.getElementById("s1").options.length;t++){var i="search"+t;document.getElementById(i).checked=e}}function PopupfadeTo(e,t){e=$j("#"+e.id),t<=100&&(t<0?(t=100,document.body.style.cursor="default"):(document.body.style.cursor="Hand",t=65),SetOpacity(e,t))}function valid_submit(){$j("#goval").val("go");var e=$j("#searstr");if(txtVal=CheckUrlSplChars(e.val()),ValidateSrchFlds()){$j("#hdnSearchStr").val(txtVal),$j("#searstr").val("");var t=$j("#btnGo");t.length>0&&t.click()}else""!=txtVal&&null!=txtVal&&txtVal!=undefined||showAlertDialog("warning",2007,"client")}function DecodeUrlSplChars(e){return e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/%25/g,"%")).replace(/%26/g,"&")).replace(/%27/g,"'")).replace(/%22/g,'"')).replace(/%23/g,"#")}function ValidateSrchFlds(){var e=$j("#ddlSearch").val(),t=$j.inArray(e,FNames),i=$j.trim($j("#searstr").val());if(-1!=t&&""!=i){if("Date/Time"==FDataType[t]){var a=$j("#searstr");return isDate(a.val())?(a.focus(),!0):(a.focus(),!1)}return!0}return!1}function loadTstruct(e){ShowDimmer(!0),ResetNavGlobalVariables(),AxWaitCursor(!0);try{window.parent.isSessionCleared||window.opener||(ASB.WebService.ClearNavigationSession(),window.parent.isSessionCleared=!0),window.opener?window.opener.parent.disableNavigation=!0:window.parent.disableNavigation=!0,GetLoadData(e,"")}catch(t){Closediv()}}$j(document).ready(function(){if(AxpGridForm=""!=AxpGridFormCols?AxpGridFormCols.split("♠")[0]:"popup","design"==theMode&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),"function"==typeof commonReadyTasks&&commonReadyTasks(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal){var resval=isTstPostBackVal.split("*$*"),wBdrHtml=resval[0];"undefined"!=typeof isWizardTstruct&&isWizardTstruct&&($("#dvlayout").prepend($("#breadcrumb-panel").detach()),$("#heightframe").append($("#formContainer").detach()),$("#heightframe").append($("#toolBarBtns").detach())),$("#wBdr").html(""),$("#wBdr").prepend(wBdrHtml);var toolBarHtml=resval[1];"undefined"!=typeof isWizardTstruct&&0!=isWizardTstruct||($("#tstIcons").html(""),$("#tstIcons").prepend(toolBarHtml))}$("#btnSaveTst").prop({value:callParentNew("lcm")[392],title:eval(callParent("lcm[392]"))}),$("#New").prop({value:callParentNew("lcm")[393],title:eval(callParent("lcm[393]"))}),$(callParentNew("btn_iSDuplicate")).hide(),$(callParentNew("btn_nxclkDuplicate")).hide(),callParentNew("sqlRestCallInitiated=",!1),callParentNew("beforeRestCallId=",""),SetFormDirty(!1),AxpIviewDisableSplit=AxpIviewDisableSplit.toLowerCase(),isMobile||"false"!=isTstPop.toLowerCase()?($(callParentNew("split-btn","class")).addClass("hide"),$(callParentNew("split-btn-vertical","class")).addClass("hide")):AxpIviewDisableSplit!=undefined&&"false"==AxpIviewDisableSplit?($(callParentNew("split-btn","class")).css({display:""}).removeClass("hide"),$(callParentNew("split-btn-vertical","class")).css({display:""}).removeClass("hide")):"true"===AxpIviewDisableSplit?($(callParentNew("splitIcon","id")).addClass("hide"),$(callParentNew("spiltHeading","class")).addClass("hide")):""===AxpIviewDisableSplit&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),"true"==AxpIsAutoSplit.toLowerCase()&&!1===callParentNew("isTstructSplited")&&callParentNew("assocateIframe(true)","function");var glangType=eval(callParent("gllangType"));"ar"===glangType&&$("[data-toggle=popover]").each(function(){$(this).data("placement","left")}),$==undefined&&($=$j);try{AxBeforeTstLoad()}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}var t0=performance.now();AxStartTime=new Date,$(document).on("click","#icons,#btnSaveTst",function(e){if(actionCallFlag!=actionCallbackFlag)return e.stopPropagation,e.preventDefault(),void $("#icons,#btnSaveTst").css({"pointer-events":"none"})});try{switchTstructMode(),GetFormDetails(),loadingNew(),LoadGridScript(),AxAutoGenDeps=GetDependentArray(),AddVisTabDcsInArray(),OnTstructLoad(),SetFieldSetCarryValue(),AxpFileFields(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal&&(isTstPostBackVal="",recordid=$("#axp_recid1000F1").val(),$j("#recordid000F0").val($("#axp_recid1000F1").val())),"undefined"!=typeof isWizardTstruct&&isWizardTstruct&&($("#wizardFormContainer").append($("#formContainer").detach()),$("#wizardFormContainer").append($("#attachment-overlay").detach()))}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}"ARABIC"==gl_language&&$j("#pagebdy").css("direction","rtl"),SetGridBtnAccess(),"design"!=mode&&LoadEvents(),$(window).resize(dynamicMobileResolution),CheckCustFooter(),CheckCustomTStSave(),SetAutoCompAccess(""),FocusOnFirstField("form"),SetFocusFormControl();try{AxAfterTstLoad()}catch(ex){}if(AxIsTstructLocked&&LockTstruct(),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$('[data-toggle="popover"]').popover({container:"body"}),checkSuccessAxpertMsg(),eval(callParent("isPrintPDFClick"))&&$j(".printhtmltopdf").click(),eval(callParent("isSaveAndPrintClick"))){var isSPValues=[];isSPValues=eval(callParent("isSavePrintValues")),OpenPdfFile(isSPValues[0],isSPValues[1],isSPValues[2],isSPValues[3],""),eval(callParent("isSaveAndPrintClick")+"= false"),eval(callParent("isSavePrintValues")+"=[]")}makeFieldInitCap();var t1=performance.now();if($("div").scroll(function(){$("#ui-datepicker-div").hide()}),$("[data-axp-url]").each(function(){$(this).after("<br/>"),inputId=$(this).attr("for"),text=$(this).text(),$(this).text(""),$("#"+inputId).attr("type","hidden"),urlValue=$("#"+inputId).val(),url=""==$("#"+inputId).val()?"javascript:void(0);":"window.open('"+urlValue+"','newwindow','width=600,height=500')",$("#"+inputId).after("<a style='cursor:pointer' onclick="+url+">"+text+"</a>")}),"undefined"!=typeof hideToolBar&&hideToolBar&&0==$("#design").length&&"design"!=theMode){var srchBarHt=28;$("#searchBar").hide(),$(".dvheightframe").first().css("top","0px"),"undefined"!=typeof isWizardTstruct&&isWizardTstruct?$("#wizardBodyContent").height($("#wizardBodyContent").height()+srchBarHt):(srchBarHt=srchBarHt+5+8,$("#pagebdy").height($("#pagebdy").height()+srchBarHt),$(".dvheightframe").first().attr("style",$(".dvheightframe").first().attr("style")+";height:"+($(".dvheightframe").first().height()+srchBarHt)+"px !important;"))}var curFrameObj=$(window.frameElement);if(("axpiframe"===curFrameObj.attr("id")||"homePageDynamicFrame"===curFrameObj.attr("id")||curFrameObj.attr("id").startsWith("homePageFrame"))&&(iframeindex=1,$j("#goback").hide()),callParentNew("IsfieldaddInDesignMode")&&(callParentNew("IsfieldaddInDesignMode=",!1),$(".grid-stack").addClass("dirty")),isMobile&&($("#wizardHeader").addClass("mobileHeader"),$("#design").hide(),$.each(DCIsGrid,function(e,t){if("True"===t){$("#wrapperForEditFields"+(e+1)).removeClass("hide"),$("#wrapperForEditFields"+(e+1)).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+(e+1)+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+(e+1)).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#divDc"+(e+1)+" .grdButtons").addClass("hide");var i=$("#divDc"+(e+1)+" .grdButtons").html();$("#wrapperForEditFields"+(e+1)).append('<div class="clearfix"></div><div class="grdButtons btnMobile hide">'+i+"</div>")}})),isMobile||($j(".gridoptions").off("click.gridoptionsa"),$j(".gridoptions").on("click.gridoptionsa",function(e){var t;void 0!==$(this).closest("a")&&$(this).closest("a").length>0?(t=$(this).closest("a").attr("id").substring(3),$("#divDc"+t+" .grdButtons").css({left:$("#"+$(this).closest("a").attr("id")).offset().left-20+"px"})):void 0===$(this).closest("div").attr("id")||isWizardTstruct?(t=$(this).parent().next(".dvdcframe").attr("id").substring(8),$("#divDc"+t+" .grdButtons").css("left",$("#"+$(this).parent().next("div").attr("id")).offset().left+20)):(t=$(this).closest("div").attr("id").substring(4),$("body").hasClass("btextDir-ltr")?$("#divDc"+t+" .grdButtons").css({left:$("#"+$(this).closest("div").attr("id")).offset().left-20+"px"}):$("#divDc"+t+" .grdButtons").css({right:$("#"+$(this).closest("div").attr("id")).offset().right+20+"px"})),$("#divDc"+t+" .grdButtons").hasClass("hide")?$("#divDc"+t+" .grdButtons").removeClass("hide"):$("#divDc"+t+" .grdButtons").addClass("hide")}).on("mouseenter",function(){void 0!==$(this).closest("ul#myTab")&&$(this).closest("li.active").length>0?$(this).trigger("click"):$(this).closest("div[id^=head]").length>0?$(this).trigger("click"):$(this).closest("div[id^=grdOptId]").length>0&&$(this).trigger("click")}),$("#heightframe").off("keydown.heightframea"),$("#heightframe").on("keydown.heightframea",function(e){if(40==e.keyCode&&$(this).find(".grdUlButtons").not(".hide").length>0){var t=$(this).find(".grdUlButtons").not(".hide").closest(".mainIframe").attr("id");if($("#"+t+" .grdUlButtons ul li").hasClass("grdliHover")){var i=$("#"+t+" .grdUlButtons ul li.grdliHover").index();$("#"+t+" .grdUlButtons ul li").removeClass("grdliHover"),$("#"+t+" .grdUlButtons ul li:not([style*='display:none']):eq("+i+")").addClass("grdliHover"),$("#"+t+" .grdUlButtons ul li.grdliHover").children().focus()}else $("#"+t+" .grdUlButtons ul li:not([style*='display:none'])").first().addClass("grdliHover"),$("#"+t+" .grdUlButtons ul li.grdliHover").children().focus()}else if(38==e.keyCode&&$(this).find(".grdUlButtons").not(".hide").length>0){t=$(this).find(".grdUlButtons").not(".hide").closest(".mainIframe").attr("id");if($("#"+t+" .grdUlButtons ul li").hasClass("grdliHover")){var a=$("#"+t+" .grdUlButtons ul li.grdliHover").index()-$("#"+t+" .grdUlButtons ul li:hidden").length;$("#"+t+" .grdUlButtons ul li").removeClass("grdliHover"),$("#"+t+" .grdUlButtons ul li:not([style*='display:none']):eq("+(a-1)+")").addClass("grdliHover"),$("#"+t+" .grdUlButtons ul li.grdliHover").children().focus()}else $("#"+t+" .grdUlButtons ul li:not([style*='display:none'])").last().addClass("grdliHover"),$("#"+t+" .grdUlButtons ul li.grdliHover").children().focus()}}),$j(document).on("click","body",function(e){var t;""!=e.target.className&&"gridoptions glyphicon glyphicon-chevron-down"!=e.target.className&&$(".gridoptions").length>0&&(void 0!==$(".gridoptions").closest("a")&&$(".gridoptions").closest("a").length>0?$(".gridoptions").closest("a").each(function(){t=$(this).attr("id").substring(3),$("#divDc"+t+" .grdButtons").addClass("hide")}):void 0===$(".gridoptions").closest("div").attr("id")||isWizardTstruct?$(".gridoptions").closest("div").each(function(){void 0!==$(this).next(".dvdcframe").attr("id")&&(t=$(this).next(".dvdcframe").attr("id").substring(8),$("#divDc"+t+" .grdButtons").addClass("hide"))}):$(".gridoptions").closest("div").each(function(){t=$(this).attr("id").substring(4),$("#divDc"+t+" .grdButtons").addClass("hide")}));"workflowOptions icon-arrows-down downarrow"!=e.target.className&&$(".workflowOptions").length>0&&$(".wfselectbox").addClass("hide")})),$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox],li.dropdown-chose").bind("keydown",function(e){if(0!=isAutoComSelected){var t=e.keyCode||e.which,i=$(this);if($(this).hasClass("fldAutocomplete"))return;if(9!=t||e.shiftKey){if(9==t&&e.shiftKey){var a;l=$(this).closest("[class*=fldindex]").data("dataindex");void 0!==$(this).attr("id")?a=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).hasClass("tokenSelectAll")&&(a=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));o=[];$(this).closest("#divDc"+a).find(".rowDUMMY").find("[class*=fldindex]").each(function(e,t){"none"!=$(this).css("display")&&o.push($(this).data("dataindex"))}),o.sort(function(e,t){return e-t}).reverse(),$.each(o,function(t,r){if(l>r){var o=$j(i).closest("#divDc"+a).find("[data-dataindex="+r+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(o).attr("id")).attr("disabled")&&void 0===$("#"+$(o).attr("id")).attr("readonly")){if(!$("#"+$(o).attr("id")).hasClass("axpImg")&&!$("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).hasClass("fldAutocomplete")&&($("#"+$(o).attr("id")).addClass("autoComSelWithTab"),isAutoComSelWithTab=!1),$("#"+$(o).attr("id")).focus().select(),e.preventDefault(),!1);if($("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).parent(".dropdown-mul").find(".fldmultiSelectInput").click(),e.preventDefault(),!1)}}})}}else{var r,l=$(this).closest("[class*=fldindex]").data("dataindex");void 0!==$(this).attr("id")?r=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).hasClass("tokenSelectAll")&&(r=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));var o=[];$(this).closest("#divDc"+r).find(".rowDUMMY").find("[class*=fldindex]").each(function(e,t){"none"!=$(this).css("display")&&o.push($(this).data("dataindex"))}),o.sort(function(e,t){return e-t}),$.each(o,function(t,a){if(l<a){var o=$j(i).closest("#divDc"+r).find("[data-dataindex="+a+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(o).attr("id")).attr("disabled")&&void 0===$("#"+$(o).attr("id")).attr("readonly")){if(!$("#"+$(o).attr("id")).hasClass("axpImg")&&!$("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).hasClass("fldAutocomplete")&&($("#"+$(o).attr("id")).addClass("autoComSelWithTab"),isAutoComSelWithTab=!1),$("#"+$(o).attr("id")).focus().select(),e.preventDefault(),!1);if($("#"+$(o).attr("id")).hasClass("fldmultiSelect"))return 4!=$(o).length&&($("#"+$(o).attr("id")).parent(".dropdown-mul").find(".fldmultiSelectInput").click(),e.preventDefault(),!1)}}})}}}),callParentNew("isDWB")&&$("#breadcrumb-panel, #design, #designStatus, #RunMode").hide(),"undefined"!=typeof isWizardTstruct&&isWizardTstruct){var mainDiv=$("#wizardTstructWrapper").outerHeight(!0),toolBarOH=$("#toolBarBtns").outerHeight()-41,heighFrame=$("#wizardBodyFooterWrapper").outerHeight(!0),wizardHeader=$("#wizardHeader").outerHeight(!0);$("#wizardBodyContent").css({height:"calc(100vh - ".concat(mainDiv+toolBarOH+wizardHeader-heighFrame,"px)")})}else{var heighFrame=$("#heightframe").outerHeight(),mainDiv=$("#dvlayout").outerHeight();$("#heightframe").css({height:"calc(100vh - ".concat(mainDiv-heighFrame,"px)")})}"design"!=theMode&&-1!=$.inArray("latitude",FNames)&&-1!=$.inArray("longitude",FNames)&&getLocation(),$(".dropdown-mul").off("click.dropdown-mula"),$(".dropdown-mul").on("click.dropdown-mula",function(e){(void 0===fldmultiSelectdep||void 0!==fldmultiSelectdep&&0==fldmultiSelectdep)&&MultiGroupSelectClk(e,this)}),breadCrumbStr&&($("#breadcrumb-panel span").removeClass("tstivtitle"),$("#breadcrumb-panel .bcrumb .menuBreadCrumb").length>0&&$("#breadcrumb-panel .bcrumb .menuBreadCrumb").remove(),$("#breadcrumb-panel .bcrumb").append('<span class="menuBreadCrumb"><span class="breadCrumbCaption">'+breadCrumbStr+"</span>"+$("#breadcrumb-panel span.tstivCaption").text()+"</span>")),isMobile&&($("#breadcrumb-panel").attr({"data-toggle":"popover","data-placement":"bottom","data-content":""}),$("#breadcrumb-panel[data-toggle=popover]").popover({content:$(".menuBreadCrumb").text(),container:"body"})),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=savedraftKeyCreatedtime&&(loadSavedDraft(savedraftKeyCreatedtime),savedraftKeyCreatedtime=""),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=AutosaveDraftTime&&(draftSetTimeoutObj=setInterval(SaveAsDraft,parseInt(AutosaveDraftTime))),"undefined"!=typeof gridScrollBar&&"true"==gridScrollBar&&($("#heightframe").css({"overflow-x":"scroll"}),$(".griddivColumn").css({"padding-left":"0",width:"100%",overflow:"inherit"})),hideacoptions(),$("input.fldAutocomplete").off("click"),$("input.fldAutocomplete").on("click",function(){if("undefined"!=typeof axpShowKeyboard&&"false"==axpShowKeyboard&&isMobile){var e=$(this).attr("id");""!=e&&$("#"+e).hasClass("custmAutoSelect")&&$("#"+e).removeClass("custmAutoSelect")}}),appGlobalVarsObject._CONSTANTS.compressedMode&&appGlobalVarsObject.methods.toggleCompressModeUI($("body")),$(".glyphicon-th").off("click.glyphicon-tha"),$(".glyphicon-th").on("click.glyphicon-tha",function(e){FieldTypeTable(e,this)}),$(".fldCustTable ").off("keydown.fldtblA"),$(".fldCustTable ").on("keydown.fldtblA",function(e){13==e.keyCode&&FieldTypeTable(e,this)}),$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")}),$("#searchBar").on("click","ul.dropdown-menu [data-toggle=dropdown]",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open")}),saveValueFlag=""!=$j("#recordid000F0").val()&&"0"!=$j("#recordid000F0").val()&&$j("#savevale000F1").length>0&&"T"==$j("#savevale000F1").val()?"T":"F"}),$(document).on("click",".virtualKeyboard",function(){$(this).parent().children("input").attr("onfocus",function(e,t){return"blur()"==t?null:"blur()"}),$(this).parent().children("input").focus(),$(this).children().toggleClass("green")}),window.onbeforeunload=BeforeWindowClose,document.all||document.captureEvents(Event.MOUSEMOVE);var iX=0,iY=0;function getPosition(e){document.all?(iX=event.clientX+document.body.scrollLeft,iY=event.clientY+document.body.scrollTop):(iX=e.pageX,iY=e.pageY)}function findPosX(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}function findPosY(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}function FindCtrlPos(e){"string"==typeof e&&(e=document.getElementById(e));var t=e;jQuery(e).offset();iX=findPosX(t)+t.clientWidth+1,iY=findPosY(t)+t.clientHeight+1}function ShowTooltipDiv(){document.getElementById?div=document.getElementById("dvTip"):document.all&&(div=document.all.dvTip),""==div.style.display&&div.offsetWidth!=undefined&&div.offsetHeight!=undefined&&(div.style.display=0!=div.offsetWidth&&0!=elem.offsetHeight?"block":"none"),div.style.display="block",div.style.left=iX+"px",div.style.top=iY+"px"}var regexFld=new RegExp("^[a-zA-z0-9_]+$");function ShowTooltip(e,t){HideTooltip();var i=0,a="",r=new Array,l="";for(i=0;i<FNames.length;i++)if(FNames[i]==e){var o=(a=FToolTip[i]).indexOf("<h>");if(-1!=o){var n=a.indexOf("</h>");l="<a class='curHand' id='lblTip'  onclick='javascript:HyperlinkToolTip(\""+a.substring(o+3,n)+"\");'>"+a.substring(0,o)+" </a>",a=a.substring(n+4,a.length)}""!=a&&(r=a.split("/"));break}var d=0,s=t.attr("id"),c=t.value;for(d=0;d<r.length;d++)if(""!=r[d])if(-1==r[d].toString().indexOf(":"))r[d]=r[d].trim(),r[d].trim();else{var p=new Array,u=r[d],f="",h=0,v="",m=!1;for(h=0;h<=u.length;h++)if(":"==(v=u.charAt(h)))if("+"==u.charAt(h+1)){var g=u.substring(u.indexOf(":+"),u.indexOf("+:")+2);g=(g=g.replace(":+","")).replace("+:",""),g=Evaluate(s,c,g,"expr"),p.push(g),h=u.indexOf("+:")+2}else m=!0,""!=f&&p.push(f),f="";else{if(1==m){var b=regexFld.test(v);if(0==b){var w=GetFieldsRowFrameNo(s);b=GetFieldValue(f+w),p.push(b),f="",m=!1}}f+=v}""!=f&&p.push(f);var $=0;for(r[d]="",$=0;$<p.length;$++)r[d]+=p[$]}if(r.length>0){FindCtrlPos(s);var F=$j("#dvInnerTip");a="";for(i=0;i<r.length;i++)""!=r[i]&&(a+=r[i]+"<br/>");""!=l?(F.html("<br/>"+l+" "+a),ShowTooltipDiv()):""!=a&&(F.html("<br/>"+a),ShowTooltipDiv())}}function HideTooltip(){var e=$j("#dvTip");e.length>0&&e.hide()}document.onkeypress=function(e){27==e.keyCode&&HideTooltip()};var hlTipProps="",hlTipParmUrl="",hlTipUrl="",hlTipParamXml="";function HyperlinkToolTip(e){hlTipParmUrl="";var t="",i=new Array;new Array;i=e.split(",");var a="",r="",l="",o=new Array;if(i.length>0)for(var n=0;n<i.length;n++)"type"==(o=i[n].split("="))[0]?(temp=o[1],temp.startsWith("t")?(hlTipUrl="tstruct.aspx?act=open&transid=",r="t"):temp.startsWith("i")&&(hlTipUrl="ivtoivload.aspx?ivname=",r="i")):"name"==o[0]?(hlTipUrl+=o[1],t=o[1]):"popup"==o[0]?a=o[1]:"refresh"==o[0]?o[1]:"load"==o[0]?l=o[1]:"param"==o[0]&&CreatParamUrl(i[n]);if(hlTipProps=r+","+l+","+a,"t"==r&&""!=t&&l.startsWith("t"))try{ASB.WebService.GetRecordId(t,hlTipParamXml,SuccessGetRecId,OnException)}catch(d){}else GetUrl()}function SuccessGetRecId(e,t){var i="0";if(""!=e){var a=$j.parseXML(e),r=$j(a);r.find("recordid").length>0&&(i=r.find("recordid").text())}GetUrl(i)}function GetUrl(rId){var pType="",load="",openWin="",newWindow;if(""!=hlTipProps){var strHlProps=hlTipProps.split(",");pType=strHlProps[0],load=strHlProps[1],openWin=strHlProps[2]}if(""!=hlTipUrl)if("t"==pType&&rId!=undefined&&"0"!=rId&&load.startsWith("t")?hlTipUrl+="&recordid="+rId:hlTipUrl+=hlTipParmUrl,openWin.startsWith("t"))try{newWindow=window.open(hlTipUrl,"MyPopUp","resizable=yes")}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}else window.document.location.href=hlTipUrl}function CreatParamUrl(e){var t="";""!=hlTipProps&&(t=hlTipProps.split(",")[0]);if(hlTipParmUrl="",-1!=(a=e.indexOf("param="))){e.indexOf("=");e=e.substring(6,e.length)}if(arrParam=e.split("~"),arrParam.length>0)for(var i=0;i<arrParam.length;i++){var a=arrParam[i].indexOf("="),r=arrParam[i].substring(a+1,arrParam[i].count),l=arrParam[i].substring(0,a);if(r.startsWith(":")){r=r.substring(1,r.length);IsGridField(r);var o="";if(IsGridField(r)){var n=r+GetRowNoHelper(AxActiveRowNo)+"F"+AxActiveDc;o=GetFieldValue(n)}else{n=r+"000F"+GetDcNo(r);o=GetFieldValue(n)}}else r.startsWith("{")?(-1!=r.indexOf("{")&&(r=r.replace("{","")),-1!=r.indexOf("}")&&(r=r.replace("}","")),o=r.endsWith("*d")?r.substring(0,r.length-2):r):o=r;hlTipParamXml=hlTipParamXml+"<"+l+">"+o+"</"+l+">","i"==t&&""!=o?hlTipUrl=hlTipUrl+"&"+l+"="+o:""!=o&&(hlTipParmUrl=hlTipParmUrl+"&"+l+"="+o)}}function GetSetTtipHgt(e){var t=$j("#dvInnerTip"),i=$j("#dvTip");"new"==e?(t.height()<50&&t.height("50"),t.width()<100&&t.width("100"),i.height()<50&&i.height("50"),i.width()<100&&i.width("100")):(t.css("height","auto"),t.css("width","auto"),i.css("height","auto"),i.css("width","auto"))}var tmpFldName="";function DisplayPickList(e){ShowDimmer(!0),AxWaitCursor(!0);var t,i=e.attr("id").split("~"),a=i[t=2==i.length?1:0].substring(0,i[t].lastIndexOf("F")-3),r="",l=$j("#"+i[t]);if(l.attr("readonly")!=undefined||l.attr("disabled")!=undefined)return ShowDimmer(!1),void AxWaitCursor(!1);l.length>0&&(AxOldValue=l.val(),r=l.val()),totalPLRows=0,curPageNo=1;var o=$j("#hdnPickFldId");-1==e.attr("id").indexOf("~")?o.val("img~"+e.attr("id")):o.val(e.attr("id")),AxFromAssociated=!0,GetPickListData(a,r,curPageNo.toString(),pageSize.toString(),i[t])}function ShowPickList(){$j("#pickDimmer").css("display","none");var e,t=$j("#hdnPickFldId").val().split("~");e=2==t.length?1:0,FindCtrlPos(i=document.getElementById(t[e]));var i,a=(i=$j("#"+t[e])).width()+19,r=(i.height(),$j("#dvPickList")),l=GetFieldsDcNo(t[e]);IsDcGrid(l);r.width(a),r.show();$(".dvheightframe ").scrollLeft();var o=$(".dvheightframe ").scrollTop();axInlineGridEdit&&(o-=36);var n=i.offset().top-i.parents("."+(axInlineGridEdit?"input":"form")+"-group").outerHeight()+o;r.css("top",n+"px"),r.css("left",i.offset().left+"px"),$("#dvPickList .pickLstResultCntnr").length>0&&$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top>$(".dvheightframe").outerHeight()&&$(".dvheightframe").animate({scrollTop:$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top-$(".dvheightframe").outerHeight()+$(".dvheightframe").scrollTop()},100)}function CheckHeight(e,t){var i=$j("#middle1",parent.document),a=document.body.offsetHeight,r=e+t;r>a&&(a+=r-a,i.height(a+10))}function GetPickListData(e,t,i,a,r){currentPickList=r,initialSrchVal=t;var l="";if(arrRefreshDcs.length>0)for(var o=0;o<arrRefreshDcs.length;o++){var n=arrRefreshDcs[o].split(":");l=n[1].replace("dc","")+","+n[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var d=GetFieldsDcNo(r);AxActiveRowNo=parseInt(GetFieldsRowNo(r),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,d);var s=AxActiveRowNo,c="";""!=AxActivePRow&&""!=AxActivePDc&&(c=AxActivePDc+"~"+AxActivePRow);var p="";IsParentField(e,d)&&(p=GetSubGridInfoForParent(d,AxActiveRowNo));try{ASB.WebService.GetSearchResult(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,i.toString(),a.toString(),tstDataId,d,s,c,p,l,SuccGetSearchResult,OnException)}catch(f){AxWaitCursor(!1),ShowDimmer(!1);var u=f.name+"^♠^"+f.message;showAlertDialog("error",2030,"client",u)}}function GetTdFrameNo(){var e=$j("#hdnPickFldId").val();return GetFieldsDcNo(e)}var pickStatus=!0,selectedRow=0;function SuccGetSearchResult(result,eventArgs){if(!CheckSessionTimeout(result)){var hdnFilter=$j("#hdnFiltered"),resultArr;if(hdnFilter.val("true"),""!=result&&"<error>"!=result.substring(0,7)){TogglePrevNextLink("inline");var tableStr="";if(-1!=result.indexOf("♣")){var totRowStr=result.split("♣");totalPLRows=parseInt(totRowStr[0],10),totalPLRows/pageSize%1>0?noOfPLPages=Math.floor(totalPLRows/pageSize)+1:noOfPLPages=totalPLRows/pageSize,resultArr=totRowStr[1].split("¿")}else resultArr=result.split("¿");var dv=$j("#dvPickHead");if(resultArr!=undefined&&""!=resultArr){tableStr="<table id='tblPickData'  data-pick='"+currentPickList+"' class='pickGridData'>";for(var i=0;i<resultArr.length;i++){var tdId="axPickTd00"+(i+1)+"F"+GetTdFrameNo(),pickValue=CheckSpecialCharsInHTML(resultArr[i]);if(-1!=resultArr[i].toString().indexOf("^")){var displayText=resultArr[i].toString().split("^")[1];tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}else displayText=resultArr[i].toString(),-1!=pickValue.indexOf("\\")?(pickValue=pickValue.replace("\\","\\\\"),tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur' ><a>"+displayText+"</td></tr>"):tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}dv.length>0&&dv.html(tableStr),$j("#tblPickData tr").length>0&&$j("#tblPickData tr:nth-child(1)").addClass("active")}else if(dv.length>0){var cutMsg=eval(callParent("lcm[0]"));dv.html("<span>"+cutMsg+"</span>")}SetPrevNextLinks(),document.getElementById("advancebtn").style.visibility="visible",document.getElementById("advancesrch").style.visibility="visible"}else{tableStr="<table style='width:100%;height:auto;' id='tblPickData' cellpadding='1' cellspacing='1'>",tableStr+="</table>",document.getElementById("advancebtn").style.visibility="hidden",document.getElementById("advancesrch").style.visibility="hidden";var cutMsg=eval(callParent("lcm[0]"));tableStr+='<span style="font-size: 12px;">'+cutMsg+"</span>",TogglePrevNextLink("none");var dv=$j("#dvPickHead");dv.length>0&&dv.html(tableStr)}pickListRowCount=$j("#tblPickData tbody tr").length,pickListRowCount>1&&$j(".inputClass2").keydown(function(e){if(40==e.which){if(selectedRow<pickListRowCount){0==$j("#tblPickData tr:nth-child("+selectedRow+++")").length&&(selectedRow=2),$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg");for(var t=0,i=0;i<selectedRow;i++)t+=$j("#tblPickData tr:nth-child("+i+")").height();t+20>$j("#dvPickHead").height()&&$j("#dvPickHead").scrollTop($j("#dvPickHead")[0].scrollHeight)}}else if(38==e.which){if(selectedRow>2){0==$j("#tblPickData tr:nth-child("+selectedRow--+")").length&&selectedRow++,$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg"),1==selectedRow&&e.preventDefault();for(t=0,i=pickListRowCount;i>=selectedRow;i--)t+=$j("#tblPickData tr:nth-child("+i+")").height();if(t+10>$j("#dvPickHead").height()){var a=selectedRow-1;$j("#dvPickHead").scrollTop($j("#tblPickData tr:nth-child("+a+")").height())}}}else 39==e.which?$j("#nextPick").attr("onclick")!=undefined&&""!=$j("#nextPick").attr("onclick")&&(GetData("next"),$j("#dvPickHead").scrollTop(0),selectedRow=1):37==e.which?$j("#prevPick").attr("onclick")!=undefined&&""!=$j("#prevPick").attr("onclick")&&(GetData("prev"),selectedRow=1,$j("#dvPickHead").scrollTop(0)):27!=e.which&&9!=e.which||(HidePLDiv(!1),selectedRow=0);e.which=-1}),$j(document).keypress(function(e){if(-1!=e.keyCode){if(13==e.keyCode){var t=GetActivePickListId(),i=GetFieldsDcNo(t),a=GetFieldsRowNo(t);if(AxActiveRowNo=GetDbRowNo(a,i),$j("#dvPickList").is(":visible")){var r="#axPickTd00"+--selectedRow+"F"+GetTdFrameNo();if($j(r).length>0){var l=$j(r).find("a")[0].innerText;l==undefined&&(l=$j(r).find("a")[0].textContent),SetPickVal(l),pickStatus=!1}selectedRow=0}}e.which=-1}}),$j(document).click(function(e){"nextPick"!=e.target.id&&"prevPick"!=e.target.id&&"curHand"!=e.target.className&&"hdrRow"!=e.target.className&&("nextPick"==e.target.parentElement.id||"prevPick"==e.target.parentElement.id?$j("#pickDimmer").css("display","block"):HidePLDiv(!1),selectedRow=0)}),currentPickList="",ShowPickList(),ShowDimmer(!1),AxWaitCursor(!1)}}function GetActivePickListId(){var e=$j("#hdnPickFldId").val().split("~");return e[e.length>1?1:0]}function HidePLDiv(e){if(1==e){var t=$j("#hdnPickFldId").val();if(""!=t&&-1!=t.indexOf("~")){var i="#"+t.split("~")[1];$j(i).focusNextInputField()}}var a=$j("#dvPickList");a.length>0&&a.hide()}function GetData(e){"prev"==e&&curPageNo>1?curPageNo-=1:"next"==e&&curPageNo<noOfPLPages&&(curPageNo+=1);var t=$j("#hdnPickFldId");if(t.length>0){var i=t.val();if(""!=i&&-1!=i.indexOf("~")){var a=i.split("~");GetPickListData(a[1].substring(0,a[1].lastIndexOf("F")-3),$j("#"+a[1]).val(),curPageNo.toString(),pageSize.toString(),a[1])}}}function TogglePrevNextLink(e){var t=$j("#prevPick"),i=$j("#nextPick");"block"==e||"inline"==e?(t.show(),i.show()):(t.hide(),i.hide())}function SetPrevNextLinks(){var e=$j("#prevPick"),t=$j("#nextPick"),i=$j("#tblPickData");1==curPageNo?(e.attr("disabled","disabled"),e.css("display","none"),e.removeAttr("onclick")):(e.attr("disabled",!1),e.css("color","black"),t.css("color","black"),e.attr("onclick","javascript:GetData('prev')")),curPageNo<noOfPLPages?(t.attr("disabled",!1),t.css("color","black"),t.attr("onclick","javascript:GetData('next')")):curPageNo>=noOfPLPages?(t.attr("disabled","disabled"),t.css("display","none"),t.removeAttr("onclick")):(i.attr("disabled","disabled"),i.removeAttr("onclick"))}function SetPickVal(e){var t=$j("#hdnPickFldId");if(t){var i=t.val().split("~"),a=i[i.length>1?1:0],r=$j("#"+a);if($j("#pickfld000F0").val(a),-1!=e.indexOf("^")){GetFieldsRowFrameNo(a);var l=$j("#pickIdVal_"+a),o=e.split("^");l.val(o[0]),e=o[1]}e=RepSpecialCharsInHTML(e),r.val(e);try{r.focus()}catch(n){}AxFromAssociated=!0}HidePLDiv(!1)}function CallSearchOpen(){if(window.chrome&&$j("#HdnAxAdvPickSearch").val("true"),ShowDimmer(!0),AxWaitCursor(!0),HidePLDiv(!1),$j("#hdnPickFldId")){var e=$j("#hdnPickFldId").val(),t=$j("#"+e);$j(".pickimg").each(function(){$j(this).attr("id")==e&&(t=$j(this))}),t.length>0&&SearchOpen(t)}AxWaitCursor(!1)}$j.fn.focusNextInputField=function(){return this.each(function(){var e=$(this);if(axInlineGridEdit&&!$($(e).closest("div")).hasClass("form-group"))var t=$j(e).parents("input:eq(0),body").find('button,input[type!="hidden"],textarea,select');else t=$j(e).parents("form:eq(0),body").find('button,input[type!="hidden"],textarea,select');var i=t.index(e);if(i>-1&&i+1<t.length){var a=t.eq(i+1),r=a.prop("disabled");if(1==r||"disabled"==r||"togCol"==a.prop("class"))t.eq(i+1).focusNextInputField();else if(axInlineGridEdit&&!$(e.closest("div")).hasClass("form-group")){var l=t.eq(i).closest("td").attr("data-focus-index");t.eq(i).closest("tr").attr("last-focus-index")!=l&&(l=parseInt(l)+1),$j(e).parents("input:eq(0),body").find("td[data-focus-index='"+l+"']").find("input").focus()}else isMobile||t.eq(i+1).focus()}return!1})};var fcontrols=new Array,found=!1,process=!1,fc=0,ch,strch,cmdfchar,cresult=!0,cond="",skip,fld,count=0,cont=!1,fldExtn="",isobject=!1,btnObject=!1,firstFldDc="NONGRID",secFldDc="NONGRID",isFieldBtn=!1,arrVisibleTabDcs=new Array;function DoFormControl(e){var t,i=GetFieldsName(e),a=GetFieldsDcNo(e),r=GetFieldsRowNo(e),l=IsDcGrid(a);if(fldExtn=r+"F"+a,firstFldDc=l?"GRID":"NONGRID",0==fcontrols.length)for(var o=0;o<Formcontrols.length;o++){var n=Formcontrols[o];n.startsWith("f")&&(t=n.substr(1,n.length),fcontrols[fc]=t,fc++)}found=!1;for(var d=0;d<fcontrols.length;d++)if(fcontrols[d]==i){found=!0;break}process=!1,found&&EvaluateFormControl(i)}function AddVisTabDcsInArray(){for(var e=PagePositions.length,t=0;t<e;t++)arrVisibleTabDcs.push("")}function DoFormControlOnload(){if(0==fcontrols.length)for(var e=0;e<Formcontrols.length;e++){var t=Formcontrols[e];t.startsWith("f")&&(v=t.substr(1,t.length),fcontrols[fc]=v,fc++)}try{var i=$j("#recordid000F0").val();""==i&&(i="0");for(var a=0;a<fcontrols.length;a++)("0"==i&&"_On Form Load"==fcontrols[a]||"0"!=i&&"_On Data Load"==fcontrols[a])&&EvaluateFormControl(fcontrols[a])}catch(r){console.log(r.message)}}function EvaluateFormControl(e){for(var t=0;t<Formcontrols.length;t++)if(a=Formcontrols[t],strch=a,a=a.split(""),"1"==(cmdfchar=strch.startsWith("10")||strch.startsWith("11")||strch.startsWith("12")?a[0]+a[1]:a[0])&&a.length>1&&("0"==a[1]||"1"==a[1])&&"d"==a[2]&&"c"==a[3]?(cmdfchar=a[0]+a[1],fldname=strch.substr(2,strch.length)):fldname="10"==cmdfchar||"11"==cmdfchar||"12"==cmdfchar?strch.substr(2,strch.length):strch.substr(1,strch.length),"f"!=cmdfchar||fldname!=e)if("e"!=cmdfchar||1!=process){if(0!=process){if(3==cmdfchar&&1==cresult){t+=1,"''"==(i=(i=Formcontrols[t]).substring(1,i.length))&&(i="");if(":"==(a=i.split(""))[0]){if("yes",i=i.substring(1,i.length),i=GetComponentName(GetExactFieldName(i),fldExtn),!($j("#"+i).length>0))continue;i=GetFieldValue(i)}CallProcessFormControl(fldname,fldExtn,"3",i)}else if(12==cmdfchar&&1==cresult){var i;t+=1,"''"==(i=(i=Formcontrols[t]).substring(2,i.length))&&(i="");var a;if(":"==(a=i.split(""))[0]){if("yes",i=i.substring(1,i.length),i=GetComponentName(GetExactFieldName(i),fldExtn),!($j("#"+i).length>0))continue;i=GetFieldValue(i)}CallProcessFormControl(fldname,fldExtn,"12",i)}else if(1!=cmdfchar&&2!=cmdfchar&&4!=cmdfchar&&5!=cmdfchar&&6!=cmdfchar&&7!=cmdfchar&&8!=cmdfchar&&9!=cmdfchar&&10!=cmdfchar&&11!=cmdfchar||1!=cresult){if("c"==cmdfchar)if("if"==fldname){count=0;try{cresult=Getcondition(t),(skip=cresult)&&(count=1),t+=3}catch(r){}}else"elseif"==fldname?(skip?(cresult=!1,count=3):cresult=!cresult,cresult&&(cresult=Getcondition(t),(skip=cresult)&&(count=2)),t+=3):"else"==fldname?skip=cresult=1!=skip&&!cresult:"and"==fldname?(cresult=cresult&&Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"or"==fldname?(cresult=cresult||Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"end"==fldname&&(cresult=!0,skip=!1)}else CallProcessFormControl(fldname,fldExtn,cmdfchar.toString())}}else process=!1;else process=!0}function CallProcessFormControl(e,t,i,a){if("4"==i||"5"==i||"dc"==e.substring(0,2)&&("8"==i||"9"==i||"10"==i||"11"==i))ProcessFormControl(e,i,a);else{e=GetExactFieldName(e);var r=GetDcNo(e),l=IsDcGrid(r);if(secFldDc=l?"GRID":"NONGRID","NONGRID"==firstFldDc&&"NONGRID"==secFldDc||"GRID"==firstFldDc&&"NONGRID"==secFldDc)ProcessFormControl(e=e+"000F"+r,i,a);else if("NONGRID"==firstFldDc&&"GRID"==secFldDc)for(var o=GetDcRowCount(r),n=1;n<=o;n++){ProcessFormControl(e+GetRowNoHelper(n)+"F"+r,i,a)}else if("GRID"==firstFldDc&&"GRID"==secFldDc){ProcessFormControl(e=e+GetClientRowNo(AxActiveRowNo,r)+"F"+r,i,a)}else ProcessFormControl(e=e,i,a)}}function ProcessFormControl(e,t,i){isFieldBtn=!1,-1!=e.indexOf(".")&&e.replace(".","\\.");var a=$j("#"+e);if("4"==t||"5"==t||"dc"==e.substr(0,2)&&("8"==t||"9"==t||"10"==t||"11"==t)){var r=e.substr(2);0==(a=$j("#DivFrame"+e.toString().substring(2))).length&&-1!=$j.inArray(r,TabDCs)&&(a=$j("#ank"+r))}var l=GetFieldsRowNo(e),o=GetFieldsDcNo(e),n=GetDbRowNo(l,o),d=!1;if(a.length<=0){var s,c=e;-1!=e.toString().indexOf("F")&&(c=e.substring(0,e.lastIndexOf("F")-3)),$j(".axpBtn").each(function(){if($j(this).attr("id")==c)return a=$j(this),isFieldBtn=!0,!1}),$j(".action img").each(function(){if($j(this).attr("id")==c)return s=$j(this),isFieldBtn=!0,!1});var p=!1;$j(".AxpTstBtn input,img").each(function(){if($j(this).attr("value")==c||$j(this).attr("id")=="AxpTstBtn_"+c)return s=$j(this),isFieldBtn=!0,p=!0,!1}),"remove"==c.toLowerCase()?c="delete":"list view"==c.toLowerCase()?c="listview":"new"==c.toLowerCase()&&(c="add"),"save"==c.toLowerCase()&&(d=!0),$j("#icons").find("a").each(function(){($j(this).attr("class")==c.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(a=$j(this),isFieldBtn=!0)}),isFieldBtn||($j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==c.toLowerCase()&&(a=$j(this),isFieldBtn=!0)}),$(".dvdcframe input:button").each(function(){$j(this).val()==c&&(a=$j(this),isFieldBtn=!0)})),s!=undefined&&s.length>0&&(a=s.parent(0)),p&&(a=s)}if(a.length>0)switch(t){case"1":if(isFieldBtn)d?EnableSaveBtn(!0):EnableDisableBtns(a,!0);else{if(1==IsPickListField(a.attr("id")))(f=document.getElementById("img~"+a.attr("id"))).disabled=!1,f.className="input-group-addon handCur pickimg";if(0==a.val()&&"select-one"!=a.prop("type")&&a.val(""),a.attr("title")==dateString&&""==a.val()&&a.val(dateString),"checkbox"==a.attr("type"))EnableDisableCheckbox(a.attr("id"),!1);else(a.attr("id").startsWith("rtf_")||a.attr("id").startsWith("rtfm_")||a.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(a.attr("id"))))&&($j("#cke_"+a.attr("id")).prop("disabled",!1),a.css("display","none"),$j("#cke_"+a.attr("id")).removeAttr("disabled")),"axpImg"==a.attr("class")&&a.attr("onclick",null),a.prop("disabled",!1),a.prop("readOnly",!1),a.removeAttr("readOnly"),SetAutoCompAccess("enabled",a)}break;case"2":if(isFieldBtn)d?EnableSaveBtn(!1):EnableDisableBtns(a,!1);else{if(1==IsPickListField(a.attr("id")))(f=document.getElementById("img~"+a.attr("id"))).disabled=!0,f.className="pickimg input-group-addon handCur";if(a.attr("title")!=dateString||a.val()!=dateString&&"''"!=a.val()||a.val(""),"checkbox"==a.attr("type"))EnableDisableCheckbox(a.attr("id"),!0);else(a.attr("id").startsWith("rtf_")||a.attr("id").startsWith("rtfm_")||a.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(a.attr("id"))))&&($j("#cke_"+a.attr("id")).attr("disabled","disabled"),a.css("display","none"),$j("#cke_"+a.attr("id")).prop("readonly",!0)),"axpImg"==a.attr("class")&&a.attr("onclick","callnull"),a.prop("disabled",!0),a.attr("readOnly","readOnly"),SetAutoCompAccess("disabled",a)}break;case"3":var u=GetDcNo(fldname);if($j("#"+e).hasClass("multiFldChk")&&""==i.trim())if(IsDcGrid(u))$j("input[id="+e+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+e).val(""),$("#"+e).data("valuelist",""),$("#"+e).tokenfield("setTokens",[])}catch(g){}else CallSetFieldValue(e,i);UpdateFieldArray(e,n,i,"parent","");break;case"4":if("dc"==fldname.substr(0,2))ShowingDc(u=parseInt(fldname.substr(2,fldname.length),10),"enable");break;case"5":if("dc"==fldname.substr(0,2))ShowingDc(u=parseInt(fldname.substr(2,fldname.length),10),"disable");break;case"6":if(isFieldBtn)d?EnableSaveBtn(!0):EnableDisableBtns(a,!0);else{if(1==IsPickListField(a.attr("id")))(f=document.getElementById("img~"+a.attr("id"))).disabled=!1,f.className="input-group-addon handCur pickimg";a.prop("disabled",!1),a.prop("readOnly",!1),isFieldBtn||a.removeClass("dis"),a[0].children[0].className="handCur"}break;case"7":if(isFieldBtn)d?EnableSaveBtn(!1):EnableDisableBtns(a,!1);else{var f;if(1==IsPickListField(a.attr("id")))(f=document.getElementById("img~"+a.attr("id"))).disabled=!0,f.className="input-group-addon  pickimg";a.prop("disabled",!0),a.prop("readOnly",!1),a.addClass("dis"),a[0].children[0].className=""}break;case"8":if("dc"==fldname.substr(0,2)){u=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(u,"hide"):ShowingDc(u,"hide")}else{HideShowField(fldname,"hide");var h=GetFieldIndex(fldname),v=GetDWBFieldType("",h);(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=v&&"time"==v.toLowerCase())&&$j("#"+a.attr("id")+" .tstOnlyTime").removeClass("hasDatepicker")}break;case"9":if("dc"==fldname.substr(0,2)){u=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(u,"show"):ShowingDc(u,"show")}else{HideShowField(fldname,"show");h=GetFieldIndex(fldname),v=GetDWBFieldType("",h);(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=v&&"time"==v.toLowerCase())&&$j("#"+a.attr("id")+" .tstOnlyTime").addClass("hasDatepicker")}break;case"10":if("dc"==fldname.substr(0,2))ShowingDc(u=parseInt(fldname.substr(2,fldname.length),10),"hidepopdc");break;case"11":if("dc"==fldname.substr(0,2))ShowingDc(u=parseInt(fldname.substr(2,fldname.length),10),"showpopdc");break;case"12":u=GetDcNo(fldname);IsDcGrid(u)?($("#gridHd"+u+" th[id='th-"+fldname+"']").text(i),$("#wrapperForEditFields"+u+" label[for='"+e+"']").text(i)):"checkbox"==$j("#"+e).attr("type")?$("label[for='"+e+"'] span").text(i):$("label[for='"+e+"']").text(i);break;default:return}else if(EnableDisableField(e,t,"0"),("4"==t||"5"==t)&&"dc"==fldname.substr(0,2)){var m="";m="4"==t?"enable":"disable";u=parseInt(fldname.substr(2,fldname.length),10);-1==$j.inArray(u+"~"+m,DisabledDcs)&&DisabledDcs.push(u+"~"+m)}"undefined"!=typeof isWizardTstruct&&isWizardTstruct&&CheckWizardSaveButton()}function EnableDisableCheckbox(e,t){$j("#chkAll_"+e).prop("disabled",t),$j("#chkAll_"+e).attr("readOnly",t),$j("input:checkbox[id='"+e+"']").each(function(){$j(this).prop("disabled",t),$j(this).attr("readOnly",t)})}function EnableDisableField(e,t,i){"1"==i?ProcessFormControl(e,t,""):-1==$j.inArray(e+"~"+t,AxFormContDisableFlds)&&AxFormContDisableFlds.push(e+"~"+t)}function HideShowField(e,t){var i=GetDcNo(e),a="";if(IsDcGrid(i)){"hide"==t?$j("#th-"+e).hide():$j("#th-"+e).show();var r;r=GetDcRowCount(i);getGridFldType(e,i);for(var l=1;l<=r;l++){var o;if((a=$j("#"+e+GetClientRowNo(l,i)+"F"+i)).length>0)if("hide"==t)a.hide(),inputValue.css("display","none"),a.parent().hide(),(o=a.attr("data-style"))!=undefined&&a.attr("data-style",o.indexOf("display: inline")>0?o.replace("display: inline;","display: none;"):o.indexOf("display: none")>0?o:o+"display: none;"),$j("#dvGrid"+e).length&&$j("#dvGrid"+e).hide(),a.closest(".gridElement").length&&a.closest(".gridElement").hide(),!a.parent().is("td")&&a.parent().parent().length&&a.parent().parent().is("td")&&a.parent().parent().hide();else a.show(),a.parent().show(),inputValue.css("display","inline"),(o=a.attr("data-style"))!=undefined&&a.attr("data-style",o.indexOf("display: inline")>0?o:o+"display: inline;"),$j("#dvGrid"+e)&&$j("#dvGrid"+e).show(),a.closest(".gridElement").length&&a.closest(".gridElement").show(),!a.parent().is("td")&&a.parent().parent().length&&a.parent().parent().is("td")&&a.parent().parent().show();else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}else{if((a=$j("#dv"+e)).length>0)if("hide"==t)a.hide().parents(".grid-stack-item").hide();else{a.show().parents(".grid-stack-item").show();var n=a.find(":input");n.css("visibility"),n.css("visibility","")}else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}var inputValue="",s;function getGridFldType(e,t){var i=0==$("#gridHd"+t+" tbody tr").length?1:$("#gridHd"+t+" tbody tr").length,a=(inputValue=$j("#"+e+GetClientRowNo(i,t)+"F"+t)).closest(".gridElement");return eleType="",a.find("span.picklist").length>0?(eleType="pickList",hiddenData=a.find("span.picklist input[type = hidden]").attr("id")+"~"+a.find("span.picklist input[type = hidden]").val()):a.find("input.grdAttach").length>0?(eleType="gridattach",isAttachMentExist=!0):a.find("input.date").length>0?eleType="datepicker":inputValue.hasClass("fldAutocomplete")?(inputValue.hasClass("fastdll")?eleType="autocomplete-select":eleType="autocomplete-pick",eleType=inputValue.hasClass("isrefreshsave")?eleType+"~isrefreshsave":eleType):(eleType=inputValue[0].nodeName.toLowerCase(),"input"==eleType&&"checkbox"==inputValue[0].type&&(eleType="checkbox"),"input"==eleType&&inputValue.hasClass("number")&&(eleType="numeric")),eleType}function Getcondition(i){var isfld=!1,expFldname1="",fieldVal="";s=Formcontrols[i+1];var firstChar=s.substring(0,1);":"==firstChar&&(s=s.substring(1,s.length)),s=GetExactFieldName(s),fld=GetComponentName(s,fldExtn),cond=GetCondFldValue(fld),""==cond&&(cond="''");var op=Formcontrols[i+2];"et"==op&&(op="=="),"net"==op&&(op="!="),"gt"==op&&(op=">"),"lt"==op&&(op="<"),"gtoet"==op&&(op=">="),"ltoet"==op&&(op="<="),cond+=op,s=Formcontrols[i+3];var firstChar=s.substring(0,1);return":"==firstChar&&(s=s.substring(1,s.length),s=GetExactFieldName(s),s=GetComponentName(s,fldExtn),s=GetCondFldValue(s)),s=TrimAll(s),s=s.replace(/\s/g,""),isNaN(s)&&(s=s.replace(/\"/g,""),s='"'+s+'"'),cond+=s,result=eval(cond),result}function GetComponentName(e,t){var i=GetDcNo(e),a=IsDcGrid(i);if(""==t)r=a?e+"001F"+i:e+"000F"+i;else var r=e+t;return document.getElementById(r)||(r=a?e+"001F"+i:e+"000F"+i),r}function GetCondFldValue(e){var t="";if($j("#"+e).length>0)t=GetFieldValue(e);else{var i=0;if(Parameters.length>1)for(var a=1;a<Parameters.length;a++){var r=Parameters[a].toString();r=r.split("~"),varlist[i]=r[0].toString(),valuelist[i]=r[1].toString(),i++}for(var l=0;l<varlist.length;l++)if(s==varlist[l]){t=valuelist[l];break}}return(t=t!=undefined?t.replace(/\s/g,""):"''")==dateString&&(t="''"),isNaN(t)&&(t='"'+t+'"'),t}function ShowingDc(e,t,i){IsDcGrid(e);var a=parseInt(e,10),r="visible",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="show",n="hand";if("hide"==(t=t.toString().toLowerCase()))r="hidden","none",l="glyphicon glyphicon-chevron-up icon-arrows-up",o="show",n="default","true";else if("show"==t){var d=GetTabDcIndexPagePos(a);-1!=d&&(""==arrVisibleTabDcs[d]?(arrVisibleTabDcs[d]=a,!0):!1),r="visible","block",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="hide",n="hand","false"}var s=$j("#dcButspan"+e);s.length>0&&(s.attr("alt",o),s.attr("class",l),s.css("visibility",r),s.css("cursor",n)),$j(".fbutton").each(function(){"hide"==t?$j(this).prop("disabled",!0):$j(this).prop("disabled",!1)});var c=$j("#DivFrame"+e),p="";if(c.length>0){if("showpopdc"!=t&&"hidepopdc"!=t||(createPopDcDialog(e,c),void 0!==fld||null!=fld||""!=fld?p=fld:parseInt(dcno,10)>0&&("true"==DCIsGrid[dcno-1].toLowerCase()?(rowNo=GetRowNoHelper(AxActiveRowNo),p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)):(rowNo="000",p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)))),"show"==t)c.show();else if("hide"==t)c.hide();else if("showpopdc"==t)"complete"==document.readyState&&c.dialog("open"),c.find("#head"+e).find("a[onclick^='javascript:ShowDc(']").hide(),$("#"+p).parent().next().hasClass("ShowPopDc")||$('<span class="fa fa-external-link ShowPopDc" onclick="ShowingDc(\''+e+"','showpopdc'); return false;\"></span>").insertAfter($("#"+p).parent());else if("hidepopdc"==t)"complete"==document.readyState&&c.dialog("close"),$("#"+p).parent().next().hasClass("ShowPopDc")&&$("#"+p).parent().next().remove();else if("enable"==t)$j("#DivFrame"+e).find("input,textarea, img, select, a").removeAttr("disabled"),$j("#DivFrame"+e).find(".rowdelete").removeClass("disabledelete"),$j("#wrapperForEditFields"+e).show(),$j("#gridToggleBtn"+e).removeClass("disables").prop("disables",!1),$j("#DivFrame"+e).find(".rowadd").removeClass("disableadd"),$j("#DivFrame"+e).find(".fillcls").removeClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!1),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").removeClass("disabled").prop("disabled",!1),$j("[id ^= 'fillgrid']").prop("disabled",!1).removeClass("disabled"),$j("#gridHd"+e+" tbody tr").removeClass("disableTheRow"),$j("#gridHd"+e+" tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").removeClass("disabled").prop("disabled",!1).parent().removeClass("disabled").prop("disabled",!1),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!1).on("click");else if("disable"==t){for(var u in $j("#DivFrame"+e).find("input,textarea, img, select, a").not(".subGrid,.chkShwSel").attr("disabled",!0),CKEDITOR.instances)try{CKEDITOR.instances[u].setReadOnly(!0)}catch(v){}$j("#DivFrame"+e).find("a img").removeClass("handCur"),$j("#DivFrame"+e).find("img").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(".dvImgClear .icon-arrows-remove").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(":button").removeClass("handCur"),$j("#DivFrame"+e).find(".rowdelete").addClass("disabledelete"),$j("#DivFrame"+e).find(".rowadd").addClass("disableadd"),$j("#gridAddBtn"+e).prop("disabled",!0),$j("#clearThisDC"+e).prop("disabled",!0).find(".gridActs").addClass("disabled"),$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("#DivFrame"+e).find(".fillcls").addClass("disablefill"),$j("[id ^= 'fillgrid']").prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click"),$j("#DivFrame"+e).find(".upload-icon").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attach-files .grdAttach, .grdAttach").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attachment-count").removeAttr("disabled")}}else"disable"!=t&&"enable"!=t||-1==$j.inArray(e+"~"+t,DisabledDcs)&&DisabledDcs.push(e+"~"+t);var f=$j("#li"+e);if(f.length>0&&("show"==t?f.show():"hide"==t&&f.hide()),f.hasClass("active")&&"hide"==t){var h=GetFirstTabDcNo(e);-1!=h&&$j("#ank"+h).click()}}function createPopDcDialog(e,t){var i=.97*$(window).width();$(window).height();"complete"==document.readyState&&(t.dialog({modal:!0,autoOpen:!1,width:i,open:function(){$(".ui-widget-overlay").bind("click",function(){t.dialog("close")})},close:function(){$(this).dialog("close"),$(this).dialog("destroy"),t.hide()},buttons:[{text:"Save",click:function(){ValidateBeforeSubmit(e)&&t.dialog("close")},"class":"ui-button ui-corner-all ui-widget hotbtn"},{text:"Cancel",click:function(){ClearFieldsInDC(e),t.dialog("close")},"class":"coldbtn btn",style:"background: antiquewhite"}]}),$(".ui-dialog-titlebar").hide(),0==t.find("div:eq(0) button").length&&t.find("div:eq(0)").prepend('<button class="remodal-close icon-basic-remove" style="color:rgba(76, 53, 53, 0.61);"></button>'),$(".remodal-close").bind("click",function(){t.dialog("close")}))}function createDataGridDialog(e){createBootstrapModal("divDc"+e+" #gridheaddiv","DC"+e+" ","wrapperForEditFields"+e,"","","97%")}function clearDataGrid(editGridDC){var isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==editGridDC&&(isExitDummy=!0)}),isExitDummy)return!1;if($j("#clearThisDC"+editGridDC).find("a[disabled='disabled']").length>0)return!1;if($(".wrapperForGridData"+editGridDC+" table tbody tr").length>0){var cutMsg=eval(callParent("lcm[25]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(editGridDC));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var clearThisDCGrid=$.confirm({closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){$(".jconfirm-buttons .hotbtn").focus(),disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"hotbtn",action:function(){clearThisDCGrid.close();var e=GetDcRowCount(editGridDC);DeleteAllRows(editGridDC,e),ShowDimmer(!1)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"coldbtn",action:function(){AxWaitCursor(!1),ShowDimmer(!1),disableBackDrop("destroy")}}}})}else showAlertDialog("info",2004,"client")}function GetFirstTabDcNo(e){var t=0;for(t=0;t<PagePositions.length;t++)if(-1!=PagePositions[t].toString().indexOf(",")){var i=PagePositions[t].toString().split(","),a=0;for(a=0;a<i.length;a++)if(e==i[a])return i[0]}return-1}function EnableDisableDc(e,t){var i=IsDcGrid(e),a=(parseInt(e,10),!1),r="hand";"Enable"==t?(a=!1,r="hand"):"Disable"==t&&(a="disabled",r="default");var l=$j("#dcButspan"+e);if(l.length>0&&(l.attr("alt","hide"),l.attr("class","glyphicon glyphicon-chevron-down icon-arrows-down"),l.attr("disabled",a),l.css("cursor",r)),i){var o=$j("#DivFrame"+e);o.length>0&&("Enable"==t?o.attr("disbaled",!1):o.attr("disbaled","disbaled"))}else{var n=$j("#DivFrame"+e);if(n.length>0)"Enable"==t?n.attr("disbaled",!1):n.attr("disbaled","disbaled");else{var d=$j("#tab-"+e);d.length>0&&("Enable"==t?d.attr("disbaled",!1):d.attr("disbaled","disbaled"))}}}function AddGroup(e,t){fillDcname=e;var i=GetDcRowCount(e);if(1==parseInt(i,10)){var a=t+GetClientRowNo("001",e)+"F"+e,r=GetFieldValue(a);""!=r&&UpdateFieldArray(a,"001",r,"")}var l=$j("#recordid000F0").val();ArrActionLog="AddGroup-DcNo-"+e+"-KeyColumn-"+t+"-Recordid-"+l;var o=GetFormatGridIndex(e);if(-1!=o){var n=DcMultiSelect[o].toString().toLowerCase();try{if("true"==n)ASB.WebService.GetAddGroupsHtml(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,transid,tstDataId,SuccessGetFillGridMS,OnException);else{var d=GetDeletedRows(),s=GetChangedRows(),c=$j("#recordid000F0").val();ShowDimmer(!0),ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,c,transid,e,"","",d,s,tstDataId,SuccExecActionValue,OnException)}}catch(u){AxWaitCursor(!1);var p=u.name+"^♠^"+u.message;showAlertDialog("error",2030,"client",p)}}}$j.curCSS=function(e,t,i){$j(e).css(t,i)};var fillGridDc="",fillOrAdd="",AxActivefillGridName="",dialogObj;function FillGrid(frNo,addGroup,fillGridName,fastFill){fastFill!=undefined||(fastFill=!1);var IsConfirm=!1;AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var stTime=new Date;try{AxBeforeFillGrid()}catch(ex){}if(AxActivefillGridName=fillGridName,-1==$j("[name="+fillGridName+"]").attr("class").indexOf("disablefill")){var vallist=new Array;fillGridDc=frNo;var ind=$j.inArray(fillGridName,FillGridName),dcIdx=$j.inArray(frNo,DCFrameNo),isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&(isExitDummy=!0)}),"INIT"==FillCondition[ind]){if($("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy){IsConfirm=!0;var cutMsg=eval(callParent("lcm[26]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var FillGridCB=$.confirm({closeIcon:!1,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"hotbtn",action:function(){FillGridCB.close(),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1)}),FillGridAfterConfirm(fastFill)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"coldbtn",action:function(){disableBackDrop("destroy"),AxWaitCursor(!1),ShowDimmer(!1)}}}})}}else"AOWE"==FillCondition[ind]&&$("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy&&"True"==DCHasDataRows[dcIdx]&&(IsConfirm=!0,ShowDialog("warning",5003,"client"));0==IsConfirm&&FillGridAfterConfirm(fastFill)}function FillGridAfterConfirm(e){AxWaitCursor(!0),ShowDimmer(!0);var t="";-1!=ind&&(ashow=FillAutoShow[ind],multiselect=FillMultiSelect[ind].toString().toLowerCase(),t=FillParamFld[ind]),""!=FillSourceDc[ind]&&"true"==multiselect&&(multiselect="false");var i="";if(""!=t&&"true"==multiselect)for(var a=t.toString().split(","),r=0;r<a.length;r++){var l=IsGridField(a[r]),o=GetDcNo(a[r]);if(1==l){var n=GetDcRowCount(o);n=parseInt(n,10);for(var d=1;d<=n;d++){if(d=GetRowNoHelper(d),a[r]=GetExactFieldName(a[r]),$j("#"+a[r]+d+"F"+o)){var s=a[r].toString()+d+"F"+o,c=GetFieldValue(s,"fillGrid");c=CheckSpecialCharsInStr(c),i+="<"+a[r]+" rowno='"+d+"' >"+c+"</"+a[r]+">"}}}else{s=a[r].toString()+"000F"+o;if($("#"+s).length>0){c=GetFieldValue(s,"fillGrid");c=CheckSpecialCharsInStr(c),i+="<"+a[r]+">"+c+"</"+a[r]+">"}else{(c=CheckGlobalVars(a[r].toString()))==a[r].toString()?i+="<"+a[r]+"></"+a[r]+">":i+="<"+a[r]+">"+c+"</"+a[r]+">"}}}var p="fill";if(addGroup&&""!=addGroup&&(p=addGroup),fillOrAdd=p,"true"==multiselect)if(e){var u="t";try{callBackFunDtls="FillGridAfterConfirm♠"+e,ASB.WebService.GetFastFillGridData(frNo,fillGridName,transid,p,tstDataId,u,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);var f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f)}}else{u="t";""!=FillGridVExpr[ind]&&(u=EvalPrepared("","000",FillGridVExpr[ind],"expr")),i="<tid>"+transid+"</tid><dc>"+frNo+"</dc>"+i;try{callBackFunDtls="FillGridAfterConfirm♠"+e,ASB.WebService.GetFillGridData(i,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,transid,p,tstDataId,u,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f)}}else{IsFormDirty||SetFormDirty(!0);try{changeFillGridDc=frNo,callBackFunDtls="FillGridAfterConfirm♠"+e,ASB.WebService.DoGetFillGridNonMS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,tstDataId,SuccessFillGridNonMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f)}}var h=new Date;AxTimeBefSerCall=h-stTime}}var fgHt=400,fgWid=400;function SuccessGetFillGridMS(result,eventArgs){if(-1===result.toLowerCase().indexOf("access violation")){if(CheckSessionTimeout(result))return;try{AxBeforeFillPopUp()}catch(ex){}var fillTitle="";if(fillTitle="FILL"==fillOrAdd?"FILL "+GetDcCaption(fillGridDc):"ADD "+GetDcCaption(fillGridDc),""==result){var cutMsg=eval(callParent("lcm[0]"));result="<label>"+cutMsg+"</label>"}var resSplit=result.split("*♠*");ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array;var tablehtml=resSplit[0].toString();if($j("#dvFillGrid").html(tablehtml),resSplit.length>1&&""!=resSplit[1].toString()){var fgSize=resSplit[1].toString(),fgsizeSplit=fgSize.split(",");try{fgHt=fgsizeSplit[2].toString(),fgWid=fgsizeSplit[3].toString()}catch(e){}"0"!=fgHt&&"0"!=fgWid||(fgHt=400,fgWid=400);var modalData="";modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),$j("#bootstrapModalWrapP").html(""),buttons={count:2,button1:{name:eval(callParent("lcm[281]")),"function":"ProcessFillGrid("+fillGridDc+", '"+AxActivefillGridName+"')","class":"btn hotbtn",id:"modalCnfirmbtn"},button2:{name:eval(callParent("lcm[192]")),"class":"btn coldbtn"}},createBootstrapModal("dvFillGrid",fillTitle,modalData,buttons,fgHt+"px",fgWid+"px"),jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}else{var modalData="",buttons={count:1,button1:{name:eval(callParent("lcm[281]")),"class":"btn hotbtn"}};modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),createBootstrapModal("dvFillGrid",fillTitle,modalData,buttons),jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}$("#bootstrapModal").ready(function(){fillGridDatatbl=$("table[id^=tblFillGrid]").DataTable({fixedHeader:!0,dom:'<"pull-left"f><"pull-right"l>tip',columnDefs:[{orderable:!1,targets:0}],aaSorting:[[1,"asc"]],language:{search:"_INPUT_",searchPlaceholder:"Search..."},scrollCollapse:!0,lengthMenu:[[10,25,50,100,500,-1],[10,25,50,100,500,"All"]],autoWidth:!1}),$("#dvFillGrid .dataTables_filter input[type=search]").addClass("serachdatatbl form-control"),$("#dvFillGrid .dataTables_length select").removeClass("form-control input-sm").addClass("showentries");for(var e=$(".gridData.customSetupTableMN.dataTable thead tr th"),t=1;t<e.length;t++){var i=e[t].innerHTML;i=i.toLowerCase(),$(".gridData.customSetupTableMN.dataTable thead tr th")[t].innerHTML=capitalizeFirstLetter(i)}}),AxWaitCursor(!1),ShowDimmer(!1)}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function GetDcCaption(e){e="dc"+e;var t="",i=$j.inArray(e,DCName);return-1!=i&&(t=DCCaption[i]),t}function SuccessFillGridNonMS(e,t){if(-1===e.toLowerCase().indexOf("access violation")){gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1)});var i=new Date;if(CheckSessionTimeout(e))return;""!=e&&ParseServiceResult(e,"FillGrid");var a=$j("#axp_colmerge_"+fillGridDc+"000F1");null!=(a=a.val())&&""!=a&&a!=undefined&&GetGridDcTable(a,fillGridDc);try{AxAfterFillGrid()}catch(o){}if(changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),EvaluateSetFont(fillGridDc),showAttachmentPopover(),"true"==AxLogTimeTaken){var r=(new Date).getTime()-i.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,r,ASBTotal,ASBDbTime,"FillGridNonMS")}if(setDesignedLayout("#divDc"+fillGridDc),FocusOnFirstGridField(fillGridDc),isMobile){$("#wrapperForEditFields"+fillGridDc).removeClass("hide"),$("#wrapperForEditFields"+fillGridDc).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillGridDc+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillGridDc).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#divDc"+fillGridDc+" .grdButtons").addClass("hide");var l=$("#divDc"+fillGridDc+" .grdButtons").html();$("#wrapperForEditFields"+fillGridDc).append('<div class="clearfix"></div><div class="grdButtons btnMobile">'+l+"</div>"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(o){}}}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}var addGroupDc="";function ProcessAddGroup(e){addGroupDc=e;var t=$j("#tblFillGrid"+e),i="";t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined&&0==$j(this).prop("disabled")){var e=$j(this).val().split("¿");i+=""==i?e[0].toString():"¿"+e[0].toString()}});var a=GetDcClientRows(e).getMaxVal(),r=parseInt(a,10)+1,l=GetRowNoHelper(r);try{ASB.WebService.GetNewGroupsHtml(e,transid,i,l,tstDataId,SuccAddGroups)}catch(n){AxWaitCursor(!1);var o=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",o)}}function SuccAddGroups(e,t){if(!CheckSessionTimeout(e)&&""!=addGroupDc){var i=e.split("♣");$j("#gridDc"+addGroupDc).html();if($j("#gridDc"+addGroupDc+" > tbody:last").append(i[1]),""!=i[0])for(var a=new Array,r=i[0].toString().split(","),l=0;l<r.length;l++)UpdateDcRowArrays(addGroupDc,r[l],"Add"),UpdateKeyColValues(addGroupDc,r[l]);ResetRowCount(addGroupDc,r.length),ResetGridRowsStyle(addGroupDc),a.push("#DivFrame"+addGroupDc),AssignJQueryEvents(a),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show())}}function ResetRowCount(e,t){var i=parseInt($j("#hdnRCntDc"+addGroupDc).val(),10);SetRowCount(addGroupDc,i+t)}function UpdateKeyColValues(e,t){var i=GetFormatGridIndex(e);if(-1!=i){var a=DcKeyColumns[i],r=($j("#"+a+t+"F"+e),GetFieldValue(a+t+"F"+e)),l=GetDbRowNo(t,e);UpdateFieldArray(a+t+"F"+e,l,r,"parent")}}function ProcessFormatStaticFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),i="",a="",r="",l=$j.inArray("dc"+e,DCName),o="";-1!=l&&(o=DcKeyColumns[l]),t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var i=e[t].split("♣");0==t&&i[0]==o&&(r=i[0]),i[0]==r&&(""==a?a=i[1]:a+=","+i[1])}}),i=i.replace(/&/g,"&amp;");$j("#recordid000F0").val();try{ASB.WebService.ExecuteFormatFill(transid,e,a,tstDataId,SuccExecActionValue)}catch(d){AxWaitCursor(!1);var n=d.name+"^♠^"+d.message;showAlertDialog("error",2030,"client",n)}}function ProcessFormatFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),i="",a="",r="",l="";if(t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var i=e[t].split("♣");0==t&&"selection"==i[0].substring(1)&&(r=i[0],l=i[0].substring(0,1)),i[0]==r&&("n"!=l?""==a?a="'"+i[1]+"'":a+=",'"+i[1]+"'":""==a?a=i[1]:a+=","+i[1])}}),""==a)return showAlertDialog("warning",2005,"client"),void AxWaitCursor(!1);i=(i="<selections>"+a+"</selections>").replace(/&/g,"&amp;");var o=$j("#recordid000F0").val(),n=$j("#recordid000F0").val();ArrActionLog="FillFormatGrid-DcNo-"+e+"-Selected groups-"+a+"-Recordid-"+n;var d=GetDeletedRows(),s=GetChangedRows();try{ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,o,transid,e,i,a,d,s,tstDataId,SuccExecActionValue,OnException)}catch(p){AxWaitCursor(!1);var c=p.name+"^♠^"+p.message;showAlertDialog("error",2030,"client",c)}}function SuccExecActionValue(e,t){ArrActionLog="",CheckSessionTimeout(e)||(""!=e&&ParseServiceResult(e,"Action"),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()))}function ProcessFillGrid(e,t){gridDummyRowVal.length>0&&gridDummyRowVal.map(function(t){t.split("~")[0]==e&&gridDummyRowVal.splice($.inArray(t,gridDummyRowVal),1)}),AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var i=new Date;fillDcname=e,ShowDimmer(!0),AxWaitCursor(!0),IsFormDirty||SetFormDirty(!0);$j("#tblFillGrid"+e);var a="",r="";if(0!=$('input[name="chkItem"]:checked').length,fillGridDatatbl.rows().every(function(){var e=this.node(),t=($(e).find("td"),$(e).find('td input[type="checkbox"]'));if(t.is(":checked")){r=t.val(),a+="<row>";for(var i=r.split("¿"),l=0;l<i.length;l++){var o=i[l].split("♣"),n=CheckSpecialCharsInStr(o[1]);a+="<"+o[0]+">"+n+"</"+o[0]+">"}a+="</row>"}}),"<GridList></GridList>"!=(a="<GridList>"+a+"</GridList>"))try{callBackFunDtls="ProcessFillGrid♠"+e+"♠"+t,ASB.WebService.DoGetFillGrid(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,a,tstDataId,SuccGetResultValue,OnException)}catch(n){AxWaitCursor(!1),ShowDimmer(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show());var l=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",l)}else ShowDimmer(!1),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show());var o=new Date;AxTimeBefSerCall=o-i,AxActivefillGridName=""}function SuccGetResultValue(e,t){if(-1===e.toLowerCase().indexOf("access violation")){var i=new Date;if(CheckSessionTimeout(e))return;ParseServiceResult(e,"FillGrid"),"Approved"!=appstatus&&"Rejected"!=appstatus&&"design"!=theMode&&DoFormControlOnload();var a=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=dc"+fillDcname+"_image]"),r=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=axp_gridattach_]"),l=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[class^=axpAttach]");a.length>0&&a.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var i=$("textarea#"+$(t).attr("id")).text();""!=i&&i!=undefined&&(ConstructAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}}),r.length>0&&r.each(function(e,t){var i=$("textarea#"+$(t).attr("id")).text();ConstructAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover()}),l.length>0&&l.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var i=$("textarea#"+$(t).attr("id")).text();""!=i&&i!=undefined&&(ConstructAxpAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}});var o=$j("#axp_colmerge_"+fillDcname+"000F1");null!=(o=o.val())&&""!=o&&o!=undefined&&GetGridDcTable(o,fillDcname);try{AxAfterFillGrid()}catch(p){}fillgridColOptVisibility(fillDcname),EvaluateSetFont(fillDcname),changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),axInlineGridEdit&&UpdateDcRowArrays(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),"Add");var n=GetGridFields(FillGridCurrentDC),d=getNewEditRowNo(FillGridCurrentDC);if(AxActiveRowNo=parseInt(d),AxActiveDc=FillGridCurrentDC,"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),n,"FillGrid"):CallEvaluateOnAdd(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),n,"FillGrid"),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()),"true"==AxLogTimeTaken){var s=(new Date).getTime()-i.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,s,ASBTotal,ASBDbTime,"FillGridMS")}if(setDesignedLayout("#divDc"+fillDcname),FocusOnFirstGridField(fillDcname),customAlignTstructFlds([],FillGridCurrentDC),$j("textarea[id^='axpvalid']").each(function(){DoFormControlPrivilege($j(this).attr("id"),$j(this).val())}),isMobile){$("#wrapperForEditFields"+fillDcname).removeClass("hide"),$("#wrapperForEditFields"+fillDcname).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillDcname+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillDcname).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#divDc"+fillDcname+" .grdButtons").addClass("hide");var c=$("#divDc"+fillDcname+" .grdButtons").html();$("#wrapperForEditFields"+fillDcname).append('<div class="clearfix"></div><div class="grdButtons btnMobile">'+c+"</div>"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(p){}}}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}function ClearFldArrays(){ChangedFields.length=0,ChangedFieldDbRowNo.length=0,ChangedFieldValues.length=0,DeletedDCRows.length=0}function ParseServiceResult(e,t){if(""!=e){ClearFldArrays();var i=e.split("*♠*"),a=e.split("*♠*~");if(i[0]!=undefined)try{AssignLoadValues(i[0].toString(),t)}catch(s){AxWaitCursor(!1),ShowDimmer(!1)}if(i[2]!=undefined){try{var r=designObj,l=JSON.parse(i[2]);if($.isEmptyObject(l))designObj=r;else{var o=designObj[0].dcs.map(function(e,t){return e.dc_id}).indexOf(l.dc_id);o>-1?designObj[0].dcs[o]=l:designObj[0].dcs=_.sortBy([].concat(_toConsumableArray(designObj[0].dcs),[l]),"dc_id")}}catch(s){designObj=r}jsonText=JSON.stringify(designObj,null,"")}if(i[1]!=undefined)if(i[1].substring(0,ErrLength)==ErrStr){var n=i[1].substring(ErrLength,i[1].length-8);AxWaitCursor(!1),showAlertDialog("error",n)}else AssignHTML(i[1],"FillGrid",t),0!=changeFillGridDc&&(CheckShowHideFldsGrid(changeFillGridDc.toString()),changeFillGridDc=0),AxWaitCursor(!1);if("GetTabData"==t&&a!=undefined&&a.length>1&&"false"==a[1]){var d=$j.inArray(CurrTabNo.toString(),DCFrameNo);IsDcGrid(CurrTabNo)&&"False"==DCHasDataRows[d]&&UpdateAxpRowVldInArray(CurrTabNo,"001","1"),EvalDcFldExpressions(CurrTabNo)}}try{AfterParseServiceResult(t)}catch(s){}ShowDimmer(!1),AxWaitCursor(!1)}function EvalDcFldExpressions(e){for(var t=GetGridFields(e),i=0;i<t.length;i++){var a=t[i];a!="axp_recid"+e&&(IsGridField(a)?EvaluateAxFunction(t[i],a,"001F"+e):EvaluateAxFunction(t[i],a,"000F"+e))}}function DoFillControlPrivilege(strSingleLineText){var rno,noofrows=1;if(""!=strSingleLineText)for(var myfdcJSONObject=eval("("+strSingleLineText+")"),i=0;i<myfdcJSONObject.root.length;i++)for(var dcvalues=myfdcJSONObject.root[i].dc,fields=dcvalues.split("###"),gdslno=1,fpar=0;fpar<fields.length;fpar++){var valSplit=fields[fpar].toString();valSplit=valSplit.split("~"),rno=noofrows+"";var rnolength=rno.length;2==rnolength?nrno="0"+rno:1==rnolength?nrno="00"+rno:3==rnolength&&(nrno=rno),nrno=nrno+"F"+fillDcname;var fldVal="";for(m=0;m<valSplit.length;m++){var FldSplit=valSplit[m].split("=");if(-1!=FldSplit[0].toString().indexOf("axpvalid")&&(fldVal=FldSplit[1]),""!=fldVal){var strValue=fldVal.toString().toUpperCase();if("B"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"))}if("C"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"));for(var l=0;l<valSplit.length;l++){var FldSplit=valSplit[l].split("="),FieldId=window.opener.document.getElementById(FldSplit[0]+nrno);if(FieldId){var id=FieldId.id;window.opener.document.getElementById(id).disabled="true"}}break}}}dnrno="'"+nrno+"'",noofrows+=1}}function CheckAll(e,t){"t"==t||"true"==t?$j("input[name=chkItem]:checkbox").each(function(){0==$j(this).prop("disabled")&&"none"!=$j(this).parent().parent().parent().css("display")&&$j(this).prop("checked",e.checked)}):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function ChkHdrCheckbox(e,t){"t"==t||"true"==t?$j(".fgChk:visible").length==$j(".fgChk:checked").length?$j(".fgHdrChk").prop("checked",!0):$j(".fgHdrChk").prop("checked",!1):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function DeleteAllRows(e,t){var i=parseInt(t,10);i>1&&!axInlineGridEdit&&"form"!=AxpGridForm&&(grdRCOunt=$("#gridHd"+e+" tbody tr").length,grdRCOunt==i&&i++);for(var a=axInlineGridEdit?i:"form"==AxpGridForm?i:i-1;a>=1;a--)DeleteGridRow(e,GetClientRowNo(a,e),"all");if(axInlineGridEdit||"form"!=AxpGridForm){adjustEditLayoutId(e),AxActiveRowNo="1";var r=GetGridFields(e);"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(e,"001",r):CallEvaluateOnAdd(e,"001",r),IsAddRowCalled?axInlineGridEdit||UpdateDcRowArrays(e,"001","Add"):(IsDcPopGridCleared=!0,DeleteGridRow(e,"001F"+e,undefined))}else $("#divDc"+e+" .grid-icons").append(gridDivHtml[e]),$("#divDc"+e+" .formGridRow").remove(),0==$(".wrapperForGridData"+e+" table tbody tr").length&&adjustEditLayoutId(e),setDesignedLayout("divDc"+e),editTheRow("",e,"",event)}function ChangeDir(e){$j("#form1").attr("dir",e)}function LoadPdfDDL(e){document.getElementById("dvPdfDDl").innerHTML=e}function bindUpdownEvents(e,t){unbindKeyDownEvent(),"single"!=t&&$("#"+e+" input[type='checkbox']").each(function(){$(this).parents("td,th").addClass("text-center")}),jQuery("#"+e+" tr:nth-child(2)").length>0&&jQuery("#"+e+" tr:nth-child(2)").addClass("activeSearchTr").find("input").focus(),jQuery("#"+e).length>0&&(jQuery("#"+e).on("keydown.tstrctSrch","tr:not(:first)",function(i){var a=$(this);if($(a).addClass("activeSearchTr"),9!=i.keyCode||i.shiftKey)if(9==i.keyCode&&i.shiftKey)jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"top"),$(a).prev().is("tr")&&!$(a).prev().is("#"+e+" tr:first")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(a).prev().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),i.preventDefault()));else if(38==i.keyCode){i.preventDefault(),0!=jQuery("#"+e).find("tr.activeSearchTr").index()&&jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"top"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").prevAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else if(40==i.keyCode){"single"==t&&i.preventDefault(),jQuery("#"+e).find("tr.activeSearchTr").index()<jQuery("#"+e).find("tr").last().index()&&jQuery("#"+e).find("tr.activeSearchTr").nextAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"bottom"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").nextAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else 32==i.keyCode?"searchInput"!=$(i.target).attr("id")&&"single"==t&&unbindKeyDownEvent():13==i.keyCode&&"searchInput"!=$(i.target).attr("id")&&("multiple"==t?(i.preventDefault(),unbindKeyDownEvent(),$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()):(jQuery("#"+e+" tr.activeSearchTr input").click(),"single"==t&&unbindKeyDownEvent()),unbindKeyDownEvent());else jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"bottom"),$(a).next().is("tr")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(a).next().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),i.preventDefault()))}),jQuery("#"+e).on("keydown.tstrctSrch","tr:first",function(e){13==e.keyCode&&$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()}),jQuery("#"+e+" tr").hover(function(){jQuery("#"+e+" tr.activeSearchTr").removeClass("activeSearchTr"),jQuery(this).addClass("activeSearchTr").find("input").focus()},function(){}),jQuery("#"+e+" tr").click(function(e){"single"==t&&unbindKeyDownEvent(),"checkbox"!=$(e.target).attr("type")&&"radio"!=$(e.target).attr("type")&&0==$(this).parent("thead").length&&("single"==t?jQuery(this).find('input[type="radio"]').click():jQuery(this).find('input[type="checkbox"]').click())}))}function checkTheHeight(e,t,i){var a=parseInt(jQuery("#dvFillGrid").parents(".modal-body-content").css("height").replace("px","")),r=jQuery("#dvFillGrid").parents(".modal-body-content").scrollTop(),l=$(t),o=$(t).next().height(),n=$(t).prev().height(),d=l.position().top;"bottom"==i?d+o+50>a&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r+o+30},"fast"):"top"==i&&d-n<0&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r-n-30},"fast")}function unbindKeyDownEvent(){jQuery(document).unbind("keydown.tstrctSrch")}function GetGridDcTable(e,t){var i="gridHd"+t,a=document.getElementById(i),r=e.split("#"),l=a.outerHTML;l=l.replace(i,"mergeHd"+t),$j("#"+i).before(l);for(var o=$j("#mergeHd"+t)[0].childNodes[0].childNodes[0].childNodes,n=0;n<o.length;n++)for(var d=r[0].split(",").toString(),s=d.substr(d.indexOf("~")+1).split(","),c=d.split("~",1).toString(),p=0;p<s.length;p++){var u=o[n];u.innerHTML="",thName="th-"+s[p],u.id==thName&&(SetHeader(s,p,c),r.length>1&&r.splice(0,1),n=n+s.length-1);break}}function SetHeader(e,t,i){for(var a=0;a<e.length;a++){theadName="th-"+e[t+a];var r=document.getElementById(theadName);a-(e.length-1)!=0&&(r.style.borderColor="grey"),0==a?(r.innerHTML='<div id="div-'+e[0]+'"><b style="font-weight:101">'+i+"</b></div>",r.style.borderBottom="solid 1px white",r.style.maxWidth=r.style.width):(r.innerHTML="",r.style.borderBottom="solid 1px white")}SetHeaderWidth(e,e[0],t)}function SetHeaderWidth(e,t,i){for(var a=parseInt(0),r=(parseInt(0),$j("#div-"+t)),l=0;l<e.length;l++)theadName="th-"+e[i+l],a+=parseInt(document.getElementById(theadName).offsetWidth);navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(r=document.getElementById("div-"+t)).childNodes[0].innerHTML.indexOf("_")>-1?(r.style.width=a+"px",r.style.maxWidth=a+"px",r.childNodes[0].innerHTML=r.childNodes[0].innerHTML.replace(/_/g," ")):(r.style.width=a+"px",r.style.maxWidth=a+"px"):(r=$j("#div-"+t))[0].innerText.indexOf("_")>-1?(r.css({width:a,maxWidth:a}),r[0].innerText=r[0].innerText.replace(/_/g," ")):(a=40*a/100,r.css({marginLeft:a}))}$("body").on("click",function(e){$("[data-toggle=popover]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),$j(function(){for(var e=0;e<VisibleDCs.length;e++)if("true"==DCIsGrid[e].toLowerCase()&&$j("#axp_colmerge_"+VisibleDCs[e]+"000F1").length>0){var t=$j("#axp_colmerge_"+VisibleDCs[e]+"000F1");null!=(t=t[0].value)&&""!=t&&t!=undefined&&GetGridDcTable(t,VisibleDCs[e])}});var popUpTitle="";function OpenPopUp(e,t){var i=GetFieldsRowNo(e),a=GetFieldsDcNo(e);AxActivePDc=a,RegisterActivePRow(i,a),AxIsPopActive=!0;var r=t.substring(t.lastIndexOf("F")+1);AxActiveDc=r;var l=$j.inArray(r,PopGridDCs);if(-1!=l){if(""!=PopCondition[l]&&"f"==EvalPrepared("","000",PopCondition[l],"expr").toLowerCase())return void showAlertDialog("error",2006,"client")}var o=IsPopGridFirmBind(r);SetPopDcStyle(r,o);var n=GetPopRows(a,i,r),d=n.split(",");parseInt($j("#hdnRCntDc"+r).val(),10),popUpTitle="<span style='font-size: 20PX;color: white;font-weight: bold;'>"+(popUpTitle=$j("#popDcTitle"+r).val())+"</span>",$j("#gridDc"+r+" tbody tr").each(function(){$j(this);$j(this).hide()});for(var s=0;s<d.length;s++){var c="#sp"+r+"R"+d[s]+"F"+r;$j(c).show()}if($j(".AxAddRows").length>0&&$j(".AxAddRows").val("1"),""==n&&1==IsPopParBound(r,a,i)){if(1==GetDcRowCount(r)&&IsEmptyRow("001",r))0==IsRowInPopRows(a,r,i,"001")&&(1,UpdatePopUpArrays(r,"001",!0,"Add"),UpdatePopParentFlds(r,a,"001",i),SetRowCount(r,"1"),$j("#sp"+r+"R001F"+r).show(),RefreshFillFldsInSubGrid(r,"001"),AxActiveRowNo="1",CallGetSubGridDDL(r,i,a,"001"));else AddSubGridRow(r)}else RefreshFillFldsInSubGrid(r,n),$j("#DivFrame"+r).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(r)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(r,$j(this))}}})}function RefreshFillFldsInSubGrid(e,t){for(var i=GetGridFields(e),a=0;a<i.length;a++){var r=GetFieldIndex(i[a]),l=FldParents[r].toString().split(",");if("Fill"==FMoe[r]&&""!=l)for(var o=0;o<l.length;o++){var n=GetDcNo(l[o]);if(!IsDcGrid(n)&&-1!=$j.inArray(l[o],ComboParentField))for(var d=GetFieldValue(l[o]+"000F"+n),s=(l[o],l[o]),c=0;c<ComboParentField.length;c++)if(ComboParentField[c]==s&&ComboParentValue[c]==d){for(var p=t.split(","),u=0;u<p;u++)if(""!=p[u]){var f=p[u]+"F"+e,h=GetDbRowNo(p[u],e),v=ComboDepField[c]+f,m=ComboDepValue[c].toString();$j("#"+v).length>0&&(CallSetFieldValue(v,m),UpdateFieldArray(v,h,m,"parent"))}break}}}}function AddSubGridRow(dcNo,calledFrom){var tableName="gridDc"+dcNo,newRow="",sTRowIndx=-1;newRow=$j("#"+tableName+" tbody>tr:last").clone(!0);var oldRowNo=newRow.attr("id"),hdnRowCount=$j("#hdnRCntDc"+dcNo);if(hdnRowCount.length>0){var dcClientRows=GetDcClientRows(dcNo),lastRow=dcClientRows.getMaxVal(),rowCount=$j("#hdnRCntDc"+dcNo).val(),newCnt=parseInt(lastRow,10)+1,newRowNo=GetRowNoHelper(newCnt);newRow.attr("id","sp"+dcNo+"R"+newRowNo+"F"+dcNo),newRow.find(":input").val(""),newRow.find("select,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),newRowNo)}),RegisterActiveRow(newRowNo,dcNo),AxActiveDc=dcNo;var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="dd/mm/yy";"en-us"==glCulture&&(dtFormat="mm/dd/yy"),$j(".date").datepicker({isRTL:dtpkrRTL,dateFormat:dtFormat,showOn:"both",buttonImage:"../AxpImages/icons/16x16/calendar.png",buttonImageOnly:!0,buttonText:"Select date",changeMonth:!0,changeYear:!0,yearRange:"-100:+100"}),delImg=newRow.find(".rowdelete"),delImg.attr("id")!=undefined&&delImg.attr("id","del"+newRowNo+"F"+dcNo),newRow.insertAfter("#"+tableName+" tbody>tr:last"),$j("#sp"+dcNo+"R"+newRowNo+"F"+dcNo).show(),calledFrom==undefined?SetRowCount(dcNo,newCnt,"i"+newRowNo):SetRowCount(dcNo,parseInt(rowCount,10)+1),"GetDep"==calledFrom&&UpdateNewPopInfo(dcNo,newRowNo);var rowFrameNo=newRowNo+"F"+dcNo,ind=$j.inArray(rowFrameNo,DeletedDCRows);if(-1!=ind&&DeletedDCRows.splice(ind,1),CheckScroll(dcNo),UpdateDcRowArrays(dcNo,newRowNo,"Add"),calledFrom==undefined&&(UpdateFieldsInNewRow(dcNo,newRowNo),UpdatePopParentFlds(dcNo,AxActivePDc,newRowNo,GetClientRowNo(AxActivePRow,AxActivePDc))),IsFunction="","GetDep"==calledFrom)if(""!=AxParStrFromDep){var parStr=AxParStrFromDep.split("~"),parDc=parStr[0],pRow=GetClientRowNo(parStr[1],parDc);UpdatePopUpArrays(dcNo,newRowNo,!0,"Add",pRow,parDc)}else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");calledFrom==undefined&&(RefreshFillFldsInSubGrid(dcNo,newRowNo),""==subGridJson?CallGetSubGridDDL(dcNo,AxActivePRow,AxActivePDc,newRowNo):ApplyPopJson(dcNo)),adjustwin("10",window)}}function CallGetSubGridDDL(e,t,i,a){try{var r=$j("#recordid000F0").val();ASB.WebService.GetSubGridDropdown(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,tstDataId,r,t,i,a,SuccessSubGridCombos,OnException)}catch(l){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}var subGridJson="",result;function SuccessSubGridCombos(e,t){if(!CheckSessionTimeout(e)&&(ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,""!=e)){subGridJson=e;var i=GetDcClientRows(AxActiveDc);AxPopRowNo=i.getMaxVal(),AssignLoadValues(e,"PopGridCombos");try{AxAfterSubGridAddRow()}catch(a){}$j("#DivFrame"+AxActiveDc).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(AxActiveDc)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(AxActiveDc,$j(this))}}})}}function ApplyPopJson(e){var t=GetDcClientRows(e);AxPopRowNo=t.getMaxVal(),AssignLoadValues(subGridJson,"PopGridCombos"),UpdateRowInDataObj();try{AxAfterSubGridAddRow()}catch(i){}}function IsRowInPopRows(e,t,i,a){for(var r=GetPopRows(e,i,t).split(","),l=0;l<r.length;l++)if(r[l]==a)return!0;return!1}function IsPopParBound(e,t,i){for(var a=GetParentFields(e),r=!0,l=0;l<a.length;l++){var o=a[l]+i+"F"+t,n=GetFieldValue(o);try{n=parseFloat(n)}catch(d){}if(""==n.toString()){r=!1;break}}return r}function UpdatePopParentFlds(e,t,i,a){for(var r=GetParentFields(e),l=0;l<r.length;l++){var o=r[l].toString().trim()+a+"F"+t,n=GetSubFieldId("sub"+e+"_"+r[l].toString(),i,e),d=GetFieldValue(o);SetFieldValue(n,d);var s=GetDbRowNo(i,e);UpdateFieldArray(n,s,d,"parent")}}function EvaluateSubGridDep(e){for(var t=GetGridFields(e),i=0;i<t.length;i++){var a,r=GetFieldIndex(t[i]);if(-1!=r&&(depStr=FldDependents[r].toString()),""!=depStr&&(a=depStr.split(","))!=undefined)for(var l=0;l<a.length;l++){var o=a[l].toString(),n=o.substring(0,1),d=o.substring(1);e!=GetDcNo(d)&&"e"==n&&EvaluateAxFunction(d,t[i]+AxActiveRowNo+"F"+e)}}}function ClosePopUp(e,t){var i=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(",");if(1!=i.length)for(var a=i.length-1;a>=0;a--){var r=GetDcRowCount(e);""!=i[a].toString()&&IsEmptyRow(i[a],e)&&1!=r&&DeletePopRow(e,i[a])}$j("#dvPickList").is(":visible")&&$j("#dvPickList").hide(),AxIsPopActive=!1,t!=undefined&&t.dialog("close");var l=$j("#"+AxActiveField);l.length>0&&l.focus(),subGridJson="",EvaluateSubGridDep(e),DisplaySummaryInPopUp(e)}function DeletePopRow(e,t){var i=GetSerialNoCnt(e);i=parseInt(i,10)-1,SetSerialNoCnt(e,i);GetDcRowCount(e);var a=t+"F"+e;UpdateDcRowArrays(e,t,"Delete");for(var r=GetGridFields(e),l=0;l<r.length;l++){var o=r[l]+a;RemoveDeletedFields(o)}$j("#"+("sp"+e+"R"+t+"F"+e)).remove(),UpdatePopUpArrays(e,t,!0,"Delete");var n=GetDcRowCount(e);SetRowCount(e,n-1)}function UpdatePopUpParents(e){for(var t=GetFieldsName(e),i=GetFieldsDcNo(e),a=GetFieldsRowNo(e),r=0;r<PopParentDCs.length;r++)if(PopParentDCs[r]==i){popParentFlds=PopParentFlds[r].toString().split(",");var l;l=GetParentString(i,a,PopGridDCs[r]);for(var o=!1,n=GetParentFields(PopGridDCs[r]),d=0;d<n.length;d++)if(n[d]==t){o=!0;break}if(!o)continue;if(CheckDuplicateParents(i,popParentFlds,l,PopGridDCs[r],a)&&""!=l)return errorFlag=!0,void(errorField=e);SetPopParents(i,PopGridDCs[r],a,l);for(var s=PopGridDCs[r],c=GetPopRows(i,a,s).split(","),p=GetFieldValue(e),u=0;u<c.length;u++)if(""!=c[u].toString()){var f=GetSubFieldId("sub"+s+"_"+t,c[u].toString(),s);f="#"+f;try{var h=f.substring(1);SetFieldValue(h,p);var v=GetDbRowNo(c[u].toString(),s);UpdateFieldArray(h,v,p,"parent")}catch(m){}}}}function CheckDuplicateParents(e,t,i,a,r){var l,o=!1;l=parseInt(GetDcRowCount(e),10);for(var n=1;n<l;n++){GetParentString(e,GetRowNoHelper(n),a)==i&&n!=parseInt(r,10)&&(o=!0)}return o}function SetPopParents(e,t,i,a){for(var r=0;r<ParentDcNo.length;r++)ParentDcNo[r]==e&&PopGridDcNo[r]==t&&ParentClientRow[r]==i&&(PopParentsStr[r]=a)}function DisplaySummaryInPopUp(e){var t=-1,i=0;for(i=0;i<PopGridDCs.length;i++)if(PopGridDCs[i]==e){t=i;break}var a="",r="",l="",o="";-1!=t&&(a=PopSummaryParent[t],r=PopSummaryFld[t],l=""==PopSummDelimiter[t]?",":PopSummDelimiter[t]),-1!=r.indexOf(":")&&(r=r.replace(":",""));for(var n=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(","),d=0;d<n.length;d++){var s=r+n[d]+"F"+e;(s=$j("#"+s)).length>0&&(o+=s.val()+l)}o=o.substring(0,o.length-1),a=a+GetClientRowNo(AxActivePRow,AxActivePDc)+"F"+AxActivePDc,$j("#"+a).length>0&&$j("#"+a).val(o)}function GetPopRows(e,t,i){for(var a="",r=0;r<ParentDcNo.length;r++)if(ParentDcNo[r]==e&&ParentClientRow[r]==GetRowNoHelper(t)&&PopGridDcNo[r]==i){a=PopRows[r];break}return a}function ClearPopRows(e,t,i){for(var a=0;a<ParentDcNo.length;a++)ParentDcNo[a]==e&&ParentClientRow[a]==t&&PopGridDcNo[a]==i&&(PopRows[a]="")}function AddDeletePopRow(e,t,i,a,r){for(var l=!1,o=0;o<ParentDcNo.length;o++)if(ParentDcNo[o]==e&&ParentClientRow[o]==t&&PopGridDcNo[o]==i){l=!0;var n=PopRows[o].toString();if("Add"==r){if(""==n)n=a;else{var d=n.split(",");-1==$j.inArray(a,d)&&(n+=","+a)}PopRows[o]=n}else{for(var s=(n=n.split(",")).length-1;s>=0;s--)if(n[s].toString()==a){n.splice(s,1);break}for(var c="",p=0;p<n.length;p++)c+=""==c?n[p].toString():","+n[p].toString();PopRows[o]=c}break}if("Add"==r){if(!l){ParentDcNo.push(e),ParentClientRow.push(t);var u=GetParentString(e,t,i);PopGridDcNo.push(i),PopParentsStr.push(u),PopRows.push(a)}for(var f=0;f<PopParentDCs.length;f++)if(PopParentDCs[f]==e){parentFlds=PopParentFlds[f].toString().split(",");for(o=0;o<parentFlds.length;o++){var h=parentFlds[o]+t+"F"+e,v=GetSubFieldId("sub"+i+"_"+parentFlds[o],a,i),m=$j("#"+h),g=$j("#"+v);m.length>0&&g.length>0&&g.val(m.val())}}}}function IsEmptyRow(e,t){for(var i,a=!1,r=0;r<FldDcRange.length;r++){var l=FldDcRange[r].split("~");if(l[0]==t){i=l[1].split(",");break}}if(i!=undefined)for(var o=parseInt(i[0].toString(),10),n=parseInt(i[1].toString(),10),d=o;d<=n;d++){var s=FNames[d];if("Accept"==FMoe[d]||"Select"==FMoe[d]){s=s+e+"F"+t;var c=GetFieldValue(s),p=$j("#"+s);if(p.length>0&&"hidden"!=p.attr("type")){if("numeric"==FDataType[d].toLowerCase()&&""!=c&&(c=parseInt(c,10)),""!=c&&"0"!=c){a=!1;break}a=!0}}}return a}function SetPopDcStyle(e,t){var i=document.getElementById("add"+e),a=document.getElementById("btnClear"+e),r=document.getElementById("btnOk"+e);t?(i&&(i.disabled=!0,i.style.cursor="default"),a&&(a.style.visibility="hidden"),r&&(r.value="Close"),ShowingDc(e,"Disable")):(i&&(i.disabled=!1,i.style.cursor="hand"),a&&(a.style.visibility="visible"),r&&(r.value="Ok"))}function RegisterActivePRow(e,t){AxActivePRow=GetDbRowNo(e,t),AxActivePDc=t;for(var i=!1,a=Parameters.length-1;a>=0;a--){if("activeprow"==Parameters[a].split("~")[0]){Parameters[a]="activeprow~"+AxActivePRow,i=!0;break}}i||(Parameters[Parameters.length]="activeprow~"+AxActivePRow)}function IsPopGridFirmBind(e){for(var t=0;t<PopGridDCs.length;t++)if(PopGridDCs[t]==e&&"t"==PopGridDCFirm[t].toString().toLowerCase())return!0;return!1}function GetParentFields(e){for(var t,i=0;i<PopGridDCs.length;i++)if(PopGridDCs[i]==e){t=PopParentFlds[i].toString().split(",");break}return t}function GetParentString(e,t,i){var a="",r=GetParentFields(i);if(r!=undefined)for(var l=0;l<r.length;l++){var o=r[l]+t+"F"+e;""==a?a=GetFieldValue(o):a+="¿"+GetFieldValue(o)}return a}function GetPopGrids(e){for(var t="",i=0;i<PopParentDCs.length;i++)PopParentDCs[i]==e&&(""==t?t=PopGridDCs[i]:t+=","+PopGridDCs[i]);return t}function GetPopGridDcNo(e){for(var t="",i=0;i<PopParentDCs.length;i++)PopParentDCs[i]==e&&(""==t?t="dc"+PopGridDCs[i]:t+=",dc"+PopGridDCs[i]);return t}function AddParentRow(e,t,i,a){for(var r=!1,l=0;l<=e.length;l++)if(ParentDcNo[l]==e&&PopGridDcNo[l]==i&&ParentClientRow[l]==t){PopParentsStr[l]=a,r=!0;break}r||(ParentDcNo.push(e),ParentClientRow.push(t),PopGridDcNo.push(i),PopParentsStr.push(a),PopRows.push(""))}function UpdatePopUpArrays(e,t,i,a,r,l){if(TstructHasPop)if(i){var o=GetClientRowNo(AxActivePRow,AxActivePDc),n=AxActivePDc,d=o;r!=undefined&&l!=undefined&&(n=l,d=r),AddDeletePopRow(n,d,AxActiveDc,t,"Add"==a?"Add":"Delete")}else for(var s=GetPopGrids(e).split(","),c=0;c<s.length;c++)""!=s[c]&&AddParentRow(e,t,s[c],"")}function DeletePopRowsAfterGetDep(){for(var e=AxSubGridRows.split("¿"),t=AxParStrFromDep.split("~"),i=0;i<e.length;i++)if(""!=e[i]){var a=e[i].split("~"),r=a[0];ClearPopRows(t[0],GetClientRowNo(t[1],t[0]),r);for(var l=a[1].split(","),o=l.length-1;o>=0;o--){var n=GetClientRowNo(parseInt(l[o],10),r);if(1==$j("#gridDc"+r)[0].rows.length){var d=$j("#gridDc"+r)[0].rows[0].id;n=d.substring(d.lastIndexOf("R")+1,d.lastIndexOf("F"));ClearDeletedFields(r,n);var s=$j.inArray(r,DCFrameNo);DCHasDataRows[s]="False";var c="sp"+r+"R"+l[o]+"F"+r,p=$j("#"+c);p.attr("id","sp"+r+"R001F"+r),p.find(":input").val(""),p.find("select,a,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),"001")}),SetRowCount(r,"1"),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1)}else{c="sp"+r+"R"+n+"F"+r;$j("#"+c).remove(),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1),SetRowCount(r,GetDcRowCount(r)-1)}}}}function AddRowAfterGetDep(e,t,i){if(TstructHasPop)if("1"!=e||"True"==i)AddRow(t,"GetDep"),AxDepRows.push(e+"~"+GetDcRowCount(t));else{if(AxDepRows.push(e+"~1"),$j("#sp"+t+"R001F"+t).show(),UpdateNewPopInfo(t,"001"),""!=AxParStrFromDep){var a=AxParStrFromDep.split("~"),r=a[0];UpdatePopUpArrays(t,"001",!0,"Add",GetClientRowNo(a[1],r),r)}UpdateDcRowArrays(t,"001","Add")}}function GetDbPopRows(e,t){if(""!=e){var i=e.split(",");i.sort();for(var a="",r=0;r<i.length;r++){var l=GetRowNoHelper(GetDbRowNo(i[r],t));""==a?a=l:a+=","+l}return a}return e}function GetSubDsRowNo(e,t){var i=0,a=$j.inArray(e,AxSubWsRows);return-1==a?(AxSubWsRows.push(e),i=GetDcRowCount(t)+1,AxSubDsRows.push(i)):i=AxSubDsRows[a],i}function toggleSwitch(e){var t="";1==$j("#ckbPurposeUser").prop("checked")?($j("#ckbPurposeUser").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($j("#ckbPurposeUser").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("normal",t)}catch(i){result=i.toString()}}function toggleSwitchDesign(e){var t="";1==$("#ckbPurposeDev").prop("checked")?($("#ckbPurposeDev").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($("#ckbPurposeDev").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("design",t)}catch(i){result=i.toString()}}function GetChoiceStatusForDSign(){$.ajax({type:"POST",url:"TstructDesign.aspx/GetPrpLblStatusForDSign",data:"",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"true"==e.d?($j(".clsPrps").css("display","block"),$j("#ckbPurposeDev").prop("checked",!0)):($j(".clsPrps").css("display","none"),$j("#ckbPurposeDev").prop("checked",!1))}})}function pageloadlogtime(e){console.log("Page Load:  "+e+" milliseconds.")}function disableDC(e){var t=$j("#DivFrame"+e);t.find("input,textarea, img, select, a").not(".subGrid,.chkShwSel,.swtchDummyAnchr,.tgl").attr("disabled",!0),t.find("a img").removeClass("handCur"),t.find("img").attr("onclick","Callnull"),t.find(":button").removeClass("handCur"),t.find(".rowdelete").addClass("disabledelete"),t.find(".rowadd").addClass("disableadd"),t.find(".axpBtn").css({"pointer-events":"none",cursor:"default"}),t.find(".upload-icon").attr("disabled",!0).css("cursor","default"),t.find(".fillcls").addClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!0),axInlineGridEdit||"form"==AxpGridForm||$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("[id ^= 'fillgrid']").prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-remove").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click")}function createEditors(){$("textarea").each(function(){var e=$(this),t="";if(0===(t=e.attr("id")!=undefined?e.attr("id"):"").toLowerCase().indexOf("sql_editor")||0===t.toLowerCase().indexOf("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))||0===t.toLowerCase().indexOf("js_editor")||0===t.toLowerCase().indexOf("html_editor")){if(IsGridField(GetFieldsName(t))&&"form"!=AxpGridForm&&!e.parent("div").hasClass("edit-mode-content")&&!e.parents(".modal").length)return!0;if(e.hasClass("CodeMirrorApplied"))return!0;if(e.addClass("CodeMirrorApplied"),e.data("myeditor")&&e.data("myeditor").toTextArea(),0===t.toLowerCase().indexOf("sql_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))){"ad_i"==transid||"ad_iq"==transid||"ad_ip"==transid?createTheEditor({type:"sql",textarea:t,loadSqlHintObj:!1,sqlHintObj:callParentNew("mainSqlHintObj"),customValidationFn:null,validateOnBlur:!1}):createTheEditor({type:"sql",textarea:t,loadSqlHintObj:!1,sqlHintObj:callParentNew("mainSqlHintObj"),customValidationFn:customValidationFn});var i='<div id="dvpop'+t+'" class="tstsqleditorbtn"><a value="SQL Editor" data-id="'+t+'" class="tstbtnSqlConsole" href="javascript:void(0);" tooltip="SQL Editor"><i class="fa fa-external-link" id="tstlinkSqlConsole"></i></a></div>';$("#"+t).after(i)}else 0===t.toLowerCase().indexOf("exp_editor")||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))?createTheEditor({type:"expression",textarea:t,customValidationFn:customValidationFn}):0===t.toLowerCase().indexOf("html_editor")?"sect"==transid?createHtmlEditor(t):applyCodeMirror(t,"html"):0===t.toLowerCase().indexOf("js_editor")?applyCodeMirror(t,"js"):0===t.toLowerCase().indexOf("css_editor")?applyCodeMirror(t,"css"):console.log("Not Applied "+t)}})}function createPopupdesignnew(e){htmlContent='<div id="axpertPopupWrapperDWB"  class="remodal" data-pushtxt-id="'+e+'" data-remodal-id="axpertPopupModalDWB"><button data-remodal-action="close" class="remodal-close remodalCloseBtn icon-basic-remove" title="Close"></button><div style="height:100%;" id="iframeMarkUp1"><div id="QryEditor"><div ><button id="exeQuery" title="Execute"><i class="fa fa-bolt"></i></button><textarea id="dwbtxtEditorsql" rows="4" cols="50"></textarea></div><div class="dvOutput"><div class="rsltHeader">Result<span id="spnRowCnt"></span></div><div id="txtOutput"></div><table id="tblOutput" class="table-responsive"></table></div></div></div></div>',$("head").append(htmlContent);var t=$("[data-remodal-id=axpertPopupModalDWB]:not(.remodal-is-initialized):not(.remodal-is-closed):eq(0)").remodal({closeOnOutsideClick:!0,hashTracking:!1,closeOnEscape:!0});t&&"opened"!=t.state&&t.open(),CodeMirror.fromTextArea(document.getElementById("dwbtxtEditorsql"),{mode:"text/x-sql",smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,theme:"default",hintOptions:{tables:callParentNew("mainSqlHintObj")}}).on("keyup",function(e,t){(!t.ctrlKey&&t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=122||t.keyCode>=46&&t.keyCode<=57)&&CodeMirror.commands.autocomplete(e,null,{completeSingle:!1})});var i="#dv"+$("#axpertPopupWrapperDWB").attr("data-pushtxt-id").split("0")[0];$("#QryEditor .CodeMirror")[0].CodeMirror.setValue($(i+" .CodeMirror")[0].CodeMirror.getDoc().getValue())}function customValidationFn(e){var t="",i="",a=e.value;if(!(a.length<=0)&&(e.id.toLocaleLowerCase().startsWith("sql_editor")||e.id.toLocaleLowerCase().startsWith("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(e.id))||"Expression Editor"==GetDWBFieldType(GetFieldsName(e.id)))){var r,l,o,n="",d="",s="",c="",p="",u="",f="",h="",v="",m="",g="",b="",w="",F="",C="";p=GetFieldValue(GetComponentName("type",GetDcNo("type")))||"",r=GetFieldValue(GetComponentName("name",GetDcNo("name")))||"",l=GetFieldValue(GetComponentName("fldordno",GetDcNo("fldordno")))||"",o=GetFieldValue(GetComponentName("datatype",GetDcNo("datatype")))||"","field"===p.toLowerCase()?u=GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))||"":"fill grid"===p.toLowerCase()&&(u="fillgrid"),f=GetFieldValue(GetComponentName("stransid",GetDcNo("stransid")))||callParentNew("transid"),GetFieldValue(GetComponentName("exp_editor_expression",GetDcNo("exp_editor_expression")))||"",GetFieldValue(GetComponentName("exp_editor_validateexpression",GetDcNo("exp_editor_validateexpression")))||"","select from sql"===(u=u.toLowerCase())?(u="accept",b=GetFieldValue(GetComponentName("sql_editor_test",GetDcNo("sql_editor_test")))||"",w=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||"",F="sourcefield",C="sourcetable"):"select from form"===u?(h=GetFieldValue(GetComponentName("savenormalized_form",GetDcNo("savenormalized_form")))||"",v=GetFieldValue(GetComponentName("refreshonsave_form",GetDcNo("refreshonsave_form")))||"",m=GetFieldValue(GetComponentName("autoselect_form",GetDcNo("autoselect_form")))||"",g=GetFieldValue(GetComponentName("combobox_form",GetDcNo("combobox_form")))||"",b=GetFieldValue(GetComponentName("sql_editor_sqltextform",GetDcNo("sql_editor_sqltextform")))||"",n=GetFieldValue(GetComponentName("selectfield",GetDcNo("selectfield")))||"",d=GetFieldValue(GetComponentName("tname",GetDcNo("tname")))||"",w=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||""):"accept"===u?b=GetFieldValue(GetComponentName("sql_editor_detail",GetDcNo("sql_editor_detail")))||"":""==b&&(b=a),s="axcad"==f||"ad_i"==f||"ad_ip"==f||"axvar"==f||"axeml"==f?"online":GetFieldValue(GetComponentName("Axp_Web_SqlExp_Val_Def_RestRad",GetDcNo("Axp_Web_SqlExp_Val_Def_RestRad")))||"";var D="";if(e.id.toLocaleLowerCase().startsWith("sql_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(e.id))){if("ad_i"==f||"ad_iq"==f||"b_sql"==f)u="iview",(D="b_sql"==f?$("#sqlparams000F1").val()||"":$("#Def_Table_params000F1").val()||$("#Def_Table_paramsmain000F1").val()||"")&&(D="{".concat(D.split(",").map(function(e){return e.split("~").map(function(e,t,i){return 0==t?1==i.length?'"'.concat(e,'":""'):'"'.concat(e,'":'):1==t?'"'.concat((pc=null===(a=e[0])||void 0===a?void 0:a.toLowerCase())?"".concat(pc,"~"):""):2==t?"".concat(e,'"'):void 0;var a}).join("")}).join(","),"}"));else if("ad_ip"==f){u="iview";var y=$(e),x="";try{""!=y.val()&&(y.val().replace(/'(.*?)'/g,"''").match(/(:)+[a-zA-Z0-9]{1,}/g)||[]).filter(function(e){return 0!=e.indexOf("::")}).length>0&&(x=_.uniqBy(y.val().replace(/'(.*?)'/g,"''").match(/(:)+[a-zA-Z0-9]{1,}/g).filter(function(e){return 0!=e.indexOf("::")}).map(function(e){return e.replace(/[:\s]/g,"")})).join(",")),""!=y.val()&&(y.val().replace(/'(.*?)'/g,"''").match(/(\{(?:\[??[^\[]*?\}))*/g)||[]).filter(function(e){return e}).length>0&&(x=(x?x+",":"")+_.uniqBy(y.val().replace(/'(.*?)'/g,"''").match(/(\{(?:\[??[^\[]*?\}))*/g).map(function(e){return e.replace(/[{\s]/g,"").replace(/[}\s]/g,"")})).filter(function(e){return e}).join(","))}catch(P){}if(x){var S=callParentNew("ivParamsJSON");(D=x.split(",").map(function(e){var t,i=null===(t=S.filter(function(t){return t.pname==e}))||void 0===t?void 0:t[0];if(i)return'"'.concat(e,'":"').concat(i.datatype[0].toLowerCase(),'~"');var a,r,l=null===(a=GetFieldValue("Def_Table_querycols000F1").split(",").filter(function(t){return t.startsWith("".concat(e,"~"))}))||void 0===a?void 0:a[0];return l?'"'.concat(e,'":"').concat(null===(r=l.split("~")[1])||void 0===r?void 0:r[0].toLowerCase(),'~"'):void 0}).filter(function(e){return e}).join(","))&&(D="{".concat(D,"}"))}}t={_parameters:[{tstructs:{axpapp:callParentNew("webProject"),webaxpapp:callParentNew("mainProject"),transid:f,fieldname:r,iviewparams:"",fldordno:l,datatype:o,sfrom:u,expression:"",validateexpression:"",savenorm:h,refresh:v,autoselect:m,combobox:g,sql:b,sourcefield:n,sourcetable:d,Axp_Web_SqlExp_Val_Def_RestRad:s,metadata:w,sourcefieldid:F,sourcetableid:C,trace:"",scriptpath:""}}]},i="ValidateSQL"}else if(e.id.toLocaleLowerCase().startsWith("exp_editor")||"Expression Editor"==GetDWBFieldType(GetFieldsName(e.id))){textAreaID=e.id.toLocaleLowerCase(),c=-1!=textAreaID.indexOf("exp_editor_expression")?"field":"ad_fg"==callParentNew("transid")&&-1!=textAreaID.indexOf("exp_editor_validateexpression")?"fgval":"ad_fg"!=callParentNew("transid")&&-1!=textAreaID.indexOf("exp_editor_validateexpression")?"field":-1!=textAreaID.indexOf("exp_editor_footerstring")?"fgfootstr":"field";var G="f";if("ad_s"==callParentNew("transid")&&$("#control_type000F1").length>0&&"T"==$("#control_type000F1").val()&&(G="t"),"ad_s"==callParentNew("transid")&&""!=$("#event000F1").val()&&"F"==$("#control_type000F1").val()&&"exp_editor_script000f1"==textAreaID&&""!=a){var A="";if(a=a.replaceAll(" ",""),$.each(ScriptsAvoidOnEvent,function(e,t){if(a.toLowerCase().indexOf(t)>-1)return A=t,!1}),""!=A)return A=A.slice(0,-1),void showAlertDialog("warning",A+" function not allowed in selected event.")}else if("ad_s"==callParentNew("transid")&&"F"==$("#control_type000F1").val()&&"exp_editor_script000f1"==textAreaID&&""!=a){A="";if(a=a.replaceAll(" ",""),$.each(SciptsAvoidWithoutEvent,function(e,t){if(a.toLowerCase().indexOf(t)>-1)return A=t,!1}),""!=A)return}t={_parameters:[{tstructs:{axpapp:callParentNew("webProject"),webaxpapp:callParentNew("mainProject"),transid:f,calfrom:c,expression:a,fgname:r,Axp_Web_SqlExp_Val_Def_RestRad:s,trace:"",scriptpath:"",fc:G}}]},i="ValidateExpression"}if(ShowDimmer(!0),actionCallFlag!=actionCallbackFlag)return void $("#icons").css({"pointer-events":"none"});actionCallFlag=Math.random(),$("#icons").css({"pointer-events":"auto"});try{(void 0!==$(blurNextPreventElement).attr("id")&&"tstlinkSqlConsole"==$(blurNextPreventElement).attr("id")&&$(blurNextPreventElement).parent().hasClass("tstbtnSqlConsole")||"undefined"!=typeof blurNextPreventId&&"tstlinkSqlConsole"==blurNextPreventId)&&callParentNew("beforeRestCallId=","tstbtnSqlConsole"),callParentNew("sqlRestCallInitiated=",!0),ASB.WebService.CallRestWS("".concat(JSON.stringify(t)).concat(D?'*$*"params":'.concat(D):""),i,function(e,t){callParentNew("sqlRestCallInitiated=",!1),actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1);try{var a=$.parseJSON(e),r=a.result[0].msg,l="",o="",n=a.result[0].status;if("Failed"==n&&"ValidateSQL"==i?"ad_ip"==f?(parent.$("#actbtn_nextclk.dwbIvBtnbtm").hide(),$(callParentNew("btn_nxclkDuplicate")).show(),parent.$("#actbtn_iSave.dwbIvBtnbtm").hide(),$(callParentNew("btn_iSDuplicate")).show()):parent.$("#actbtn_nextclk.dwbIvBtnbtm:visible").length>0||parent.$("#btn_nxclkDuplicate.dwbIvBtnbtm:visible").length>0?(parent.$("#actbtn_nextclk.dwbIvBtnbtm").hide(),$(callParentNew("btn_nxclkDuplicate")).show()):(parent.$("#actbtn_iSave.dwbIvBtnbtm").hide(),$(callParentNew("btn_iSDuplicate")).show()):"success"==n&&"ValidateSQL"==i&&("ad_ip"==f?($(callParentNew("btn_nxclkDuplicate")).hide(),parent.$("#actbtn_nextclk.dwbIvBtnbtm").show(),$(callParentNew("btn_iSDuplicate")).hide(),parent.$("#actbtn_iSave.dwbIvBtnbtm").show()):parent.$("#btn_nxclkDuplicate:visible").length>0||parent.$("#actbtn_nextclk:visible").length>0?($(callParentNew("btn_nxclkDuplicate")).hide(),parent.$("#actbtn_nextclk.dwbIvBtnbtm").show()):($(callParentNew("btn_iSDuplicate")).hide(),parent.$("#actbtn_iSave.dwbIvBtnbtm").show())),"undefined"!=typeof a.result[0].metadata){if(l="F","true"==a.result[0].metadata[0].data.includes(",").toString()&&"select from sql"==GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry"))).toString().toLowerCase()&&(a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()==a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id"?l="T":"n"==a.result[0].metadata[0].datatypes.split(",")[0].toString().toLowerCase()&&(l="T")),"T"==l)o=GetComponentName("savenormalized",GetDcNo("savenormalized")),SetFieldValue(o,"T"),UpdateFieldArray(o,GetFieldsRowNo(o),"T","parent"),o=GetComponentName("sourcefield",GetDcNo("sourcefield")),SetFieldValue(o,a.result[0].metadata[0].data.split(",")[1].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[0].data.split(",")[1].toString().toLowerCase(),"parent"),o=GetComponentName("sourcetable",GetDcNo("sourcetable")),SetFieldValue(o,a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase(),"parent"),o=GetComponentName("ptableid",GetDcNo("ptableid")),SetFieldValue(o,a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id"),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id","parent"),o=GetComponentName("firstcolvalue",GetDcNo("firstcolvalue")),SetFieldValue(o,a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase(),"parent"),o=GetComponentName("tablename",GetDcNo("tablename")),SetFieldValue(o,a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase(),"parent");else if("F"==l){var d=$("#savenormalized000F2").val();if("mntss"==callParentNew("transid")&&"Select From Sql"==GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))&&"T"==d)try{var s=$("#dcname000F1").val(),c=$("#stransid000F1").val(),p=$("#name000F1").val(),u=$("#datatype000F1").val();ASB.WebService.CallExecuteSQLFldSN(c,s,p,u,function(e,t){try{var i=$.parseJSON(e);if("0"!=getCaseInSensitiveJsonProperty(i.result.row[0],"rcount")){var a=GetComponentName("sql_editor_test",GetDcNo("sql_editor_test"));SetFieldValue(a,sql_editor_test),UpdateFieldArray(a,GetFieldsRowNo(a),sql_editor_test,"parent");var r=GetComponentName("savenormalized",GetDcNo("savenormalized"));SetFieldValue(r,"T"),UpdateFieldArray(r,GetFieldsRowNo(r),"T","parent");var l=sql_editor_depflds.split(",");r=GetComponentName("tablename",GetDcNo("tablename")),SetFieldValue(r,l[0]),UpdateFieldArray(r,GetFieldsRowNo(r),l[0],"parent"),r=GetComponentName("ptableid",GetDcNo("ptableid")),SetFieldValue(r,l[1]),UpdateFieldArray(r,GetFieldsRowNo(r),l[1],"parent"),r=GetComponentName("firstcolvalue",GetDcNo("firstcolvalue")),SetFieldValue(r,l[2]),UpdateFieldArray(r,GetFieldsRowNo(r),l[2],"parent"),r=GetComponentName("sourcefield",GetDcNo("sourcefield")),SetFieldValue(r,l[3]),UpdateFieldArray(r,GetFieldsRowNo(r),l[3],"parent"),r=GetComponentName("sourcetable",GetDcNo("sourcetable")),SetFieldValue(r,l[4]),UpdateFieldArray(r,GetFieldsRowNo(r),l[4],"parent"),r=GetComponentName("dynamicfiltercnt",GetDcNo("dynamicfiltercnt")),SetFieldValue(r,l[5]),UpdateFieldArray(r,GetFieldsRowNo(r),l[5],"parent"),showAlertDialog("error","Normalized field data already exist in the transaction table")}else o=GetComponentName("savenormalized",GetDcNo("savenormalized")),SetFieldValue(o,"F"),UpdateFieldArray(o,GetFieldsRowNo(o),"F","parent"),o=GetComponentName("sourcefield",GetDcNo("sourcefield")),SetFieldValue(o,""),UpdateFieldArray(o,GetFieldsRowNo(o),"","parent"),o=GetComponentName("sourcetable",GetDcNo("sourcetable")),SetFieldValue(o,""),UpdateFieldArray(o,GetFieldsRowNo(o),"","parent"),o=GetComponentName("ptableid",GetDcNo("ptableid")),SetFieldValue(o,i.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id"),UpdateFieldArray(o,GetFieldsRowNo(o),i.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id","parent"),o=GetComponentName("firstcolvalue",GetDcNo("firstcolvalue")),SetFieldValue(o,i.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),i.result[0].metadata[0].data.split(",")[0].toString().toLowerCase(),"parent"),o=GetComponentName("tablename",GetDcNo("tablename")),SetFieldValue(o,i.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),i.result[0].metadata[1].data.split(",")[0].toString().toLowerCase(),"parent")}catch(P){}},function(e){})}catch(v){}else o=GetComponentName("savenormalized",GetDcNo("savenormalized")),SetFieldValue(o,"F"),UpdateFieldArray(o,GetFieldsRowNo(o),"F","parent"),o=GetComponentName("sourcefield",GetDcNo("sourcefield")),SetFieldValue(o,""),UpdateFieldArray(o,GetFieldsRowNo(o),"","parent"),o=GetComponentName("sourcetable",GetDcNo("sourcetable")),SetFieldValue(o,""),UpdateFieldArray(o,GetFieldsRowNo(o),"","parent"),o=GetComponentName("ptableid",GetDcNo("ptableid")),SetFieldValue(o,a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id"),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase()+"id","parent"),o=GetComponentName("firstcolvalue",GetDcNo("firstcolvalue")),SetFieldValue(o,a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase(),"parent"),o=GetComponentName("tablename",GetDcNo("tablename")),SetFieldValue(o,a.result[0].metadata[0].data.split(",")[0].toString().toLowerCase()),UpdateFieldArray(o,GetFieldsRowNo(o),a.result[0].metadata[1].data.split(",")[0].toString().toLowerCase(),"parent")}}else sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson="";if("failed"==n.toLowerCase()&&(callParentNew("beforeRestCallId=",""),r=r.replace("<error>","").replace("</error>",""),showAlertDialog("warning",r)),"success"==n&&"ValidateSQL"==i&&"change"==callParentNew("actionfldflag")){if("mntss"==callParentNew("transid")&&"Select From Form"==GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))&&""!=$("#mastertstructddl000F2").val()&&""!=$("#masterflddl000F2").val()&&"T"==$("#savenormalized_form000F2").val())return void customExecuteSql();if("mntss"==callParentNew("transid")&&"Select From Sql"==GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))&&""!=$("#sourcefield000F2").val()&&""!=$("#sourcetable000F2").val()&&"T"==$("#savenormalized000F2").val())return void customExecuteSql()}if("success"==n&&"ValidateSQL"==i&&""!=callParentNew("beforeRestCallId")){var h=callParentNew("beforeRestCallId");callParentNew("beforeRestCallId=",""),"btn_nxclkDuplicate"==h?$("#actbtn_nextclk").trigger("click"):"btn_iSDuplicate"==h?$("#actbtn_iSave").trigger("click"):"tstbtnSqlConsole"==h?$(".tstbtnSqlConsole").trigger("click"):$("#"+h).trigger("click")}}catch(P){}},function(e){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1)})}catch(k){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"})}}}function customExecuteSql(){ShowDimmer(!0);var e=$("#olddctablename000F1").val(),t=($("#oldname000F1").val(),$("#name000F1").val());try{ASB.WebService.CallExecuteSQL(t,e,function(e,t){try{var i=$.parseJSON(e),a=getCaseInSensitiveJsonProperty(i.result.row[0],"rcount");if("0"!=a)parent.$("#actbtn_iSave.dwbIvBtnbtm").hide(),$(callParentNew("btn_iSDuplicate")).show(),showAlertDialog("error","Data already exist in this field so can't change to save normalized field");else if(""!=callParentNew("beforeRestCallId")){var r=callParentNew("beforeRestCallId");callParentNew("beforeRestCallId=",""),"btn_nxclkDuplicate"==r?$("#actbtn_nextclk").trigger("click"):"btn_iSDuplicate"==r?$("#actbtn_iSave").trigger("click"):"tstbtnSqlConsole"==r?$(".tstbtnSqlConsole").trigger("click"):$("#"+r).trigger("click")}ShowDimmer(!1)}catch(l){ShowDimmer(!1)}},function(e){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1)})}catch(i){}}function DcTableExecuteSql(e){if(ShowDimmer(!0),actionCallFlag==actionCallbackFlag){actionCallFlag=Math.random(),$("#icons").css({"pointer-events":"auto"});var t=$("#"+e).val();if(""!=dctableOnChange&&dctableOnChange!=t)try{ASB.WebService.CallExecuteSQL("",dctableOnChange,function(t,i){try{actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"});var a=$.parseJSON(t),r=getCaseInSensitiveJsonProperty(a.result.row[0],"rcount");"0"!=r&&(SetFieldValue(e,dctableOnChange),UpdateFieldArray(e,"0",dctableOnChange,"parent"),dctableOnChange="",$("#deleteoldtable000F1").parents(".rowDUMMY").hide(),$("#deleteoldtable000F1").parents("#dvdeleteoldtable").hide(),showAlertDialog("error","Data already exist. Use the Axpert Utility to change the table name")),ShowDimmer(!1)}catch(l){ShowDimmer(!1)}},function(e){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1)})}catch(i){}}else $("#icons").css({"pointer-events":"none"})}function fldSNExecuteSql(e){if(""!=e&&"savenormalized000F2"==e&&"0"!=recordid&&""!=$("#dcname000F1").val()){if(ShowDimmer(!0),actionCallFlag!=actionCallbackFlag)return void $("#icons").css({"pointer-events":"none"});actionCallFlag=Math.random(),$("#icons").css({"pointer-events":"auto"});try{var t=$("#dcname000F1").val(),i=$("#stransid000F1").val(),a=$("#name000F1").val(),r=$("#datatype000F1").val();ASB.WebService.CallExecuteSQLFldSN(i,t,a,r,function(t,i){try{actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"});var a=$.parseJSON(t),r=getCaseInSensitiveJsonProperty(a.result.row[0],"rcount");"0"!=r&&(SetFieldValue(e,"T"),UpdateFieldArray(e,"0","T","parent"),showAlertDialog("error","Normalized field data already exist in the transaction table")),ShowDimmer(!1)}catch(l){ShowDimmer(!1)}},function(e){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1)})}catch(l){}}}function fldWidthChange(e){if(""!=e&&"datawidth000F1"==e&&parseInt($("#"+e).val())<parseInt(fldDataWidthChange)){if(ShowDimmer(!0),actionCallFlag!=actionCallbackFlag)return void $("#icons").css({"pointer-events":"none"});actionCallFlag=Math.random(),$("#icons").css({"pointer-events":"auto"});try{var t=$("#dcname000F1").val(),i=$("#stransid000F1").val(),a=$("#name000F1").val(),r=$("#datatype000F1").val();ASB.WebService.CallExecuteSQLFldSN(i,t,a,r,function(t,i){try{actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"});var a=$.parseJSON(t),r=getCaseInSensitiveJsonProperty(a.result.row[0],"rcount");"0"!=r&&(SetFieldValue(e,fldDataWidthChange),UpdateFieldArray(e,"0",fldDataWidthChange,"parent"),fldDataWidthChange="",showAlertDialog("error","Data already exists in transaction table, can not reduce data width. If you want to reduce the width, needs to take backup of the table and delete the data from concerned column.")),ShowDimmer(!1)}catch(l){ShowDimmer(!1)}},function(e){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1)})}catch(l){}}}function IsTabDc(e){return-1!=$j.inArray(e,TabDCs)}function autocompleteMetadataJson(e){if(""!=e)try{sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson=e,e.forEach(function(e){sourceAcMetaJsonFlds.push(e.name)})}catch(t){}}function getqsParameterByName(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}$(document).on("click",".tstbtnSqlConsole",function(e){var t=$(this).attr("data-id");createPopup("AxDBScript.aspx?editorid="+t,!0,undefined,undefined,function(){$(callParentNew("Bottomnavigationbar","class")).addClass("hide")},function(){$(callParentNew("Bottomnavigationbar","class")).removeClass("hide")})}),$(document).on("mousedown","#wbdrHtml",function(e){if(3==e.which&&"design"==theMode&&(null==designObj[0].dcLayout||"default"==designObj[0].dcLayout)){if(void 0===$(e.target).attr("id")&&$(e.target).parent().find(".formLabel").length>0){var t=$(e.target).parent().find(".formLabel").attr("data-id");$("#designContextMenuLabelEdit").remove(),$("#wbdrHtml").append('<div id="designContextMenuLabelEdit" class="designContextMenuLabelEdit"><ul><li onclick="ChangeFontAndColor(\''+t+"','label');\"><a href=\"javascript:void(0);\">Font</a></li>\n                        <li onclick=\"LabelHyperlink('"+t+"','label');\"><a href=\"javascript:void(0);\">Hyperlink</a></li>\n                        <li onclick=\"RemoveLabelHyperlink('"+t+'\');"><a href="javascript:void(0);">Remove</a></li>\n                        <li onclick="AddFormLabel(\''+t+'\');"><a href="javascript:void(0);">Edit</a></li></ul></div>');var i=$(e.target).parent().find(".formLabel").offset().top+$("#heightframe").scrollTop(),a=$(e.target).parent().find(".formLabel").offset().left+e.offsetX;$("#designContextMenu").css({display:"none"}),$("#designContextMenuLabelEdit").css({display:"block",left:a+"px",top:i+"px"})}else if(void 0===$(e.target).attr("id")&&$(e.target).parent().find(".tstformbutton").length>0){var r=$(e.target).parent().find(".tstformbutton").attr("id");$("#designContextMenuLabelEdit").remove(),$("#wbdrHtml").append('<div id="designContextMenuLabelEdit" class="designContextMenuLabelEdit"><ul><li onclick="ChangeFontAndColor(\''+r+"','button');\"><a href=\"javascript:void(0);\">Font</a></li>\n                       </ul></div>");var l=$(e.target).parent().find(".tstformbutton").offset().top+(0==$("#heightframe").scrollTop()?-25:$("#heightframe").scrollTop()),o=$(e.target).parent().find(".tstformbutton").offset().left+e.offsetX;$("#designContextMenu").css({display:"none"}),$("#designContextMenuLabelEdit").css({display:"block",left:o+"px",top:l+"px"})}else if(void 0===$(e.target).attr("id")&&$(e.target).parent().find("textarea.form-control,input.form-control,input.multiFldChk,input[type=checkbox]").length>0){var n="";void 0!==(n=$(e.target).parent().find("textarea.form-control,input.form-control,input[type=checkbox]").attr("id"))&&""!=n||(n=$(e.target).parent().find("input.multiFldChk").attr("id")),$("#designContextMenuLabelEdit").remove(),$("#wbdrHtml").append('<div id="designContextMenuLabelEdit" class="designContextMenuLabelEdit"><ul><li onclick="ChangeFontAndColor(\''+n+"','field');\"><a href=\"javascript:void(0);\">Font</a></li>\n                       <li onclick=\"LabelHyperlink('"+n+"','field');\"><a href=\"javascript:void(0);\">Hyperlink</a></li></ul></div>");var d=0;d=$(e.target).parent().find("textarea.form-control,input.form-control,input[type=checkbox]").offset().top>0?$(e.target).parent().find("textarea.form-control,input.form-control,input[type=checkbox]").offset().top+(0==$("#heightframe").scrollTop()?-25:$("#heightframe").scrollTop()):$(e.target).parent().find("input.multiFldChk").offset().top+(0==$("#heightframe").scrollTop()?-25:$("#heightframe").scrollTop());var s=$(e.target).parent().find("textarea.form-control,input.form-control,input.multiFldChk,input[type=checkbox]").offset().left+e.offsetX;$("#designContextMenu").css({display:"none"}),$("#designContextMenuLabelEdit").css({display:"block",left:s+"px",top:d+"px"})}else{var c=e.offsetY;if(c=e.pageY-$(this).offset().top,$("#designContextMenu").remove(),$("#wbdrHtml").append('<div id="designContextMenu" class="designContextMenu"><ul><li onclick="AddFormLabel();"><a href="javascript:void(0);">Add Label</a></li></ul></div>'),$(e.target).hasClass("grid-stack-item-content ui-draggable-handle")){var p=$(e.target).parent().find(".form-group").attr("id");"undefined"!=p&&""!=p?(p=p.slice(2),$("#designContextMenu").attr("data-afFld",p)):$("#designContextMenu").attr("data-afFld",""),c=$(e.target).offset().top+$("#heightframe").scrollTop()}else if(void 0===$(e.target).attr("id")||$(e.target).attr("id").startsWith("divDc"))$("#designContextMenu").attr("data-afFld",$(e.target).attr("id"));else{var u=$(e.target).parent().find(".form-group").attr("id");"undefined"!=u&&""!=u?(u=u.slice(2),$("#designContextMenu").attr("data-afFld",u)):$("#designContextMenu").attr("data-afFld","")}$("#designContextMenuLabelEdit").css({display:"none"}),$("#designContextMenu").css({display:"block",left:e.offsetX+"px",top:c+"px"})}document.oncontextmenu=function(e){e.preventDefault()}}}),$(document).on({click:function(e){$("#designContextMenu").css({display:"none"}),$("#designContextMenuLabelEdit").css({display:"none"})}});